if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}if(typeof jive.eae.acclaim.helpful=="undefined"){jive.eae.acclaim.helpful={}}jive.eae.acclaim.helpful.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.helpful.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.helpful.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<!--  <span class="j-js-metooliking-control"> -->');jive.eae.acclaim.helpful.activityAcclaimLinkContainer(A,B);B.append("<!-- </span> -->");break}return C?"":B.toString()};jive.eae.acclaim.helpful.activityAcclaimLinkContainer=function(A,C){var B=C||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><!--  <span id="acclaim-container-',soy.$$escapeHtmlRcdata(A.objectType),"-",soy.$$escapeHtmlRcdata(A.objectId),'" class="acclaim-container" style="margin:0px;"> --><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-container acclaim-container  acclaim-like-container  font-color-meta-light"><span class="j-social-action"><span class="j-helpful-btn-star j-ui-elem"></span>');jive.eae.acclaim.helpful.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unmarkhelpful":"helpful",classes:"jive-acclaim-likelink"}),B);jive.eae.acclaim.helpful.count(soy.$$augmentData(A,{command:"showHelpful",count:A.likeCount,classes:"jive-acclaim-likedlink",text:soy.$$escapeHtml(A.likeCount),accessibilityLinkLabel:(A.likeCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.singular"),[A.likeCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.plural"),[A.likeCount]))}),B);B.append("</span></span><!-- </span> -->");return C?"":B.toString()};jive.eae.acclaim.helpful.acclaimContainerMedium=function(A,C){var B=C||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.helpful.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unmarkhelpful":"helpful",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><!-- commenting <span class="jive-icon-med jive-icon-like"> as part of RRP-338:Remove "thumbs up" icon from Helpful Voters modal  and need to replace with star icon later if possible--><!-- <span class="jive-icon-med jive-icon-like"></span> -->',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])),"</span>")}jive.eae.acclaim.helpful.count(soy.$$augmentData(A,{command:"showHelpful",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:(A.likeCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.singular"),[A.likeCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.plural"),[A.likeCount]))}),B);B.append("</span>");return C?"":B.toString()};jive.eae.acclaim.helpful.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?'<a style="display:inline;margin: 0 0px 0 0;" '+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+' jive-thread-reply-btn-helpful jive-acclaim-likelink" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="helpful")?"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))+">":"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="helpful")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))+"</a>":"</a>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))):((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])));return C?"":B.toString()};jive.eae.acclaim.helpful.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.helpful.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.helpful.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.helpful.countLabel(A,B);B.append(" (<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button" style="display:inline;padding-left: 0px;margin-right: 0px;"');jive.eae.acclaim.helpful.labelledBy__Ce4(A,B);B.append("</a>)");return C?"":B.toString()};jive.eae.acclaim.helpful.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.helpful.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.helpful.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.activityinfo=="undefined"){jive.browse.activityinfo={}}jive.browse.activityinfo.userListHover=function(A,C){var B=C||new soy.StringBuilder();B.append("<header><h2>",(A.activityType=="reply")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.plural"),[A.totalCount])):(A.activityType=="like")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.plural"),[A.totalCount])):(A.activityType=="bookmark")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.plural"),[A.totalCount])):(A.activityType=="follow")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.plural"),[A.totalCount])):(A.activityType=="membership")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.plural"),[A.totalCount])):(A.activityType=="connections")?(A.bidirectionalGraph)?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.plural"),[A.totalCount])):(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.plural"),[A.totalCount])):"",'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><table><tbody>');jive.browse.activityinfo.userListHoverTableBody(A,B);B.append("</tbody></table></section>");return C?"":B.toString()};jive.browse.activityinfo.userListHoverTableBody=function(C,G){var E=G||new soy.StringBuilder();var B=C.items;var D=B.length;if(D>0){for(var F=0;F<D;F++){var A=B[F];jive.browse.activityinfo.userListHoverItem({currentUserID:C.currentUserID,user:A},E)}}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.user.list.empty"),[])))}return G?"":E.toString()};jive.browse.activityinfo.userListHoverItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr><td class="j-td-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35}),B);B.append('</td><td class="j-td-name"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.user.username))),'">',(A.currentUserID==A.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):soy.$$escapeHtml(A.user.displayName),'</a></td><td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}B.append("</td></tr>");return C?"":B.toString()};jive.browse.activityinfo.userListHoverBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-activity-info-hover" class="jive-modal j-people-list-modal"></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.rrhelpful=="undefined"){jive.soy.rrhelpful={}}jive.soy.rrhelpful.renderHelpfulModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(A.youID),'" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ',(A.activityType=="bookmark")?'class="j-modal-bookmark-header"':"",'><!-- commenting <span class="jive-icon-med jive-icon-like"> as part of RRP-338:Remove "thumbs up" icon from Helpful Voters modal  and need to replace with star icon later if possible-->',(A.activityType=="applehelpful")?'<!-- <span class="jive-icon-med jive-icon-like"></span> -->':"",(A.activityType=="bookmark")?'<div class="jive-bookmark-ribbon j-ui-elem"></div>':"");jive.soy.rrhelpful.getCountTextUser({count:A.totalCount},B);B.append("<!--          ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.liking.and"),[])));jive.soy.rrhelpful.getCountText({count:A.guestCount},B);B.append('--></h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section  class="jive-modal-content clearfix">',(!A.guest)?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+((A.bidirectionalGraph)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.filter.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.connections.filter.label"),[])))+"</label>"+((A.activityType=="bookmark")?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.sidebar.filter.notes"),[]))+"</label>":"")+"</nav>":"");jive.soy.rrhelpful.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},B);jive.soy.rrhelpful.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,id:"modal-liked-friends",classNames:"liked-friends-list js-friends-list",show:false},B);if(A.activityType=="bookmark"){jive.soy.rrhelpful.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},B);jive.soy.rrhelpful.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},B)}B.append("</section></div>");return C?"":B.toString()};jive.soy.rrhelpful.renderUserList=function(A,G){var B=G||new soy.StringBuilder();B.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var E=A.users;var F=E.length;if(F>0){for(var C=0;C<F;C++){var D=E[C];jive.soy.rrhelpful.displayUserRow({activityType:A.activityType,user:D,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},B)}}else{B.append('<tr><td><p class="j-empty font-color-meta-light">',(A.activityType=="bookmark")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.bookmarks"),[])):(A.activityType=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.likes"),[])):(A.activityType=="metoo")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.modal.empty.msg.likes"),[])):(A.activityType=="applehelpful")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.modal.empty.msg.likes"),[])):(A.activityType=="follow")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.follow"),[])):(A.activityType=="connections")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.connections"),[])):(A.activityType=="membership")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.membership"),[])):"","</p></td></tr>")}B.append("</tbody></table>");return G?"":B.toString()};jive.soy.rrhelpful.renderUserNotesList=function(A,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var E=A.users;var D=E.length;if(D>0){for(var F=0;F<D;F++){var B=E[F];if(B.prop.bookmarknotes){jive.soy.rrhelpful.displayUserRow({activityType:A.activityType,user:B,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},C)}}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>')}C.append("</tbody></table>");return G?"":C.toString()};jive.soy.rrhelpful.displayYou=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(A.username)},B);B.append('" data-userid="',soy.$$escapeHtml(A.ID),'" class="jiveTT-hover-user">',soy.$$escapeHtml(A.i18n.acclaimLikedYou),"</a>");return C?"":B.toString()};jive.soy.rrhelpful.displayUserRow=function(A,C){var B=C||new soy.StringBuilder();if(!A.onlyFriends||A.onlyFriends&&A.currentUserID!=A.user.id&&A.user.prop.connections.targetUserACurrentFriend){if(A.onlyNotes&&A.user.prop.hasBookmarknotes||!A.onlyNotes){B.append('<tr data-user-id="',soy.$$escapeHtml(A.user.id),'">');if(!A.onlyNotes){B.append('<td class="j-td-avatar ',(A.user.prop.hasBookmarknotes)?"j-td-topalign":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35,currentUserPartner:A.currentUserPartner}),B);B.append("</td>")}B.append('<td class="j-td-name">');if(A.currentUserID==A.user.id){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.you"),[])}),B)}else{jive.shared.displayutil.userDisplayNameLink(A.user,B)}B.append((!A.onlyNotes)?"<!-- TODO: show truncated version of the notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""):"<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""),"</td>");if(A.activityType!="bookmark"){if(!A.onlyNotes){B.append('<td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){if(A.user.id!=A.currentUserID&&A.user.visible){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"bookmarked-user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}}B.append("</td>")}}B.append("</tr>")}}return C?"":B.toString()};jive.soy.rrhelpful.privateBookmarkNotification=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.privateBookmarks"),[])),"</td></tr>");return C?"":B.toString()};jive.soy.rrhelpful.getCountText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count||typeof (A.count)!="undefined")?soy.$$escapeHtml(A.count):"0",(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.liking.guest"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.liking.hadquestion"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.liking.guests"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("helpful.liking.hadquestion"),[])));return C?"":B.toString()};jive.soy.rrhelpful.getCountTextUser=function(A,C){var B=C||new soy.StringBuilder();B.append("\t",(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.plural"),[A.count])));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.paginationLinks=function(A,F){var B=F||new soy.StringBuilder();B.append('<div class="j-pagination"',(A.elementID)?'id="'+soy.$$escapeHtmlAttribute(A.elementID)+'"':"",(A.max<=1&&!A.alwaysShow)?'style="display:none"':"",'><span class="j-pagination-prevnext full-pagination">');if(A.current>1){B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.current-1}),B);B.append('" class="j-pagination-prev" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.previous_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.current-1}),B);B.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</a>")}else{B.append('<span class="j-pagination-prev j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</span>")}B.append("</span>");if(A.current>=1){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:1,active:A.current==1}),B)}B.append((A.current>5)?'<span class="ellipsis">&hellip;</span>':"");var D=A.current-3;var C=A.current+4;for(var E=D;E<C;E++){if(E>1&&E<=A.max){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:E,active:A.current==E}),B)}}B.append((A.max>A.current+4)?'<span class="ellipsis">&hellip;</span>':"");if(A.max>A.current+3){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:A.max}),B)}B.append('<span class="j-pagination-prevnext full-pagination">');if(A.current<A.max){B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.current+1}),B);B.append('" class="j-pagination-next" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.next_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.current+1}),B);B.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</a>")}else{B.append('<span class="j-pagination-next j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</span>")}B.append("</span></div>");return F?"":B.toString()};jive.shared.soy.numberedPageLink=function(A,C){var B=C||new soy.StringBuilder();if(A.active){B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.number}),B);B.append('" class="j-pagination-current font-color-normal" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.number}),B);B.append('"><strong>',soy.$$escapeHtml(A.number),"</strong></a>")}else{B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.number}),B);B.append('" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.number}),B);B.append('">',soy.$$escapeHtml(A.number),"</a>")}return C?"":B.toString()};jive.shared.soy.pageUrl=function(A,C){var B=C||new soy.StringBuilder();B.append((A.urlParams)?soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())).length>0?"?"+jQuery.param(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"")):soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).length>0?"?"+jQuery.param((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()):"")));return C?"":B.toString()};jive.shared.soy.pageToStart=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml((A.page-1)*A.pageSize));return C?"":B.toString()};jive.shared.soy.pageUrl__C2bf6=function(A,C){var B=C||new soy.StringBuilder();B.append((A.urlParams)?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.urlPath))+soy.$$escapeHtmlAttribute((Object.keys(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())).length>0?"?"+jQuery.param(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"")):soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.urlPath))+soy.$$escapeHtmlAttribute((Object.keys((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).length>0?"?"+jQuery.param((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()):"")));return C?"":B.toString()};jive.shared.soy.pageToStart__Cce8=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtmlAttribute((A.page-1)*A.pageSize));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.actionLink=function(A,C){var B=C||new soy.StringBuilder();B.append("<a ",(A.id)?'id="'+soy.$$escapeHtml(A.id)+'"':"",' href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(A.urlParams)),'" class="',(A.linkCss)?soy.$$escapeHtml(A.linkCss):"",(A.activeTab)?" j-ui-elem":"",'"',(A.urlParams&&A.urlParams.contentType)?'data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'"':"",(A.urlParams&&A.urlParams.containerType)?'data-container-type="'+soy.$$escapeHtml(A.urlParams.containerType)+'"':"",">",(!A.hideIcon)?'<span class="'+((A.iconCss)?soy.$$escapeHtml(A.iconCss):"")+" jive-icon-"+((A.iconSize)?soy.$$escapeHtml(A.iconSize):"med")+'"></span>':"",(A.subject)?soy.$$escapeHtml(A.subject):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),(A.includeCounter)?' <span class="j-js-newCount j-rc5" style="display:none">'+((A.count)?soy.$$escapeHtml(A.count):"0")+"</span>":"","</a>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.modal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal ',(A.modalCss)?soy.$$escapeHtml(A.modalCss):"",'"><header><h2>',(A.header)?A.header:"&nbsp;",'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a class="j-modal-close-top jive-close no-underline close ',(A.closeCss)?soy.$$escapeHtml(A.closeCss):"",'" href="#" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',(!A.closeText)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])):soy.$$escapeHtml(A.closeText),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix ',(A.contentCss)?soy.$$escapeHtml(A.contentCss):"",'">',A.contents,"</section></div>");return C?"":B.toString()}
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('HelpfulActivity.Info');  // Creates the jive.Activity namespace if it does not already exist.

/**
 * Handles UI for a list of link items
 *
 * @extends jive.AbstractView
 * @depends path=/resources/scripts/apps/shared/controllers/switchboard.js
 * @depends path=/resources/scripts/apps/shared/views/abstract_view.js
 * @depends template=jive.browse.activityinfo.*
 *
 * @depends template=jive.soy.rrhelpful.*
 */
jive.HelpfulActivity.Info.HelpfulActivityInfoView = jive.AbstractView.extend(function(protect) {
    var $ = jQuery;

    // a piece of content can have bookmarks that are both public and private. the UI needs to indicate that there may
    // be items that are not shown
    function isBookmarkType(value) {
        return value === 'bookmark';
    }


    this.init = function(options) {
        
    	/* Apple customization to get the latest value of Email updates toggle flag*/
        if('/activity'==window.location.pathname) {
	        var userId = window._jive_effective_user_id;
	        var URL = '/__services/v2/rest/emailNotification/';
	        ajaxSettings = {
	                contentType: "application/json; charset=utf-8"
	            };
	        $.ajax($.extend({
	            type: 'GET',
	            dataType: 'json',
	            success: function(promise, success) {
	            	if(promise) {
	            		$('.ios-switch').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-ja').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-ko').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-cn').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$j('#activity_email_updates_on').prop('checked',true);
	                	$j('#activity_email_updates_off').prop('checked',false)
	            	}
	            	else {
	            		$('.ios-switch').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-ja').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-ko').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-cn').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$j('#activity_email_updates_on').prop('checked',false);
	                	$j('#activity_email_updates_off').prop('checked',true)
	            	}
	            	
	            },
	            error: function(promise, error){
	                var source = this;
	                return function(xhr, textStatus, err) {
	                    var jsonResp, message, code;
	                    jsonResp = JSON.parse(xhr.responseText);
	                    message = jsonResp ? jsonResp.message : null;
	                    code = (jsonResp && jsonResp.code) ? jsonResp.code : xhr.status;
	                    if (textStatus !== 'error' || xhr.status >= 100) {
	                        source.maybeEmitError(promise, genericError, [message, code]);
	                    }
	                };
	            
	            },
	            timeout: 120000
	        }, ajaxSettings || {}, {
	            url: URL+userId+'/'+'getEmailNotificationToggleFlag'
	        }));
        }
        
        /* Apple customization ends here*/

    	/* Apple customization on Email updated toggle button click*/
    	$('.ios-switch, .ios-switch-ja, .ios-switch-ko, .ios-switch-cn').on('click', function(e) {
    		
    		var toggleFlag = $j('#activity_email_updates_on').prop('checked');
    		var userId = window._jive_effective_user_id;
            var URL = '/__services/v2/rest/emailNotification/';
            ajaxSettings = {
                    contentType: "application/json; charset=utf-8"
                };
            $.ajax($.extend({
                type: 'POST',
                dataType: 'json',
                success: function(promise, success) {
                },
                error: function(promise, error){
                    var source = this;
                    return function(xhr, textStatus, err) {
                        var jsonResp, message, code;
                        jsonResp = JSON.parse(xhr.responseText);
                        message = jsonResp ? jsonResp.message : null;
                        code = (jsonResp && jsonResp.code) ? jsonResp.code : xhr.status;
                        if (textStatus !== 'error' || xhr.status >= 100) {
                            source.maybeEmitError(promise, genericError, [message, code]);
                        }
                    };
                
                },
                timeout: 120000
            }, ajaxSettings || {}, {
                url: URL+userId+'/'+!toggleFlag
            }));
		});
        
        /* Apple customization ends here*/
        
        // properties
        var view = this;
        this.$modal = null;
        this.pageSize = options.pageSize;
        this.soyParams = {};

        
        // private methods
        this.renderModal = function(soyParams) {
            return $j(jive.soy.rrhelpful.renderHelpfulModal(soyParams));
        };

        /*
         * This exists so that if an unfollowed user listed in the Everyone tab becomes followed,
         * a row will be added to the Connections tab.
         */
        this.handleFollow = function(data) {
            if (this.$modal) {
                var $tables = this.$modal.find('table.js-everyone-list, table.js-friends-list'),
                    rowSelector = 'tr[data-user-id=' + data.id + ']';

                if (!$tables.eq(1).find(rowSelector).length) {
                    $tables.eq(0).find(rowSelector).clone().prependTo($tables.eq(1).find('tbody'));
                }
            }
        };


        // listen to events
        jive.switchboard.addListener('follow.user.complete', this.handleFollow.bind(this));

        // removed as part of JIVE-10173.
//        jive.switchboard.addListener('follow.create', function(follow) {
//            view.updateBrowseItemCounts('follow', follow.objectType, follow.objectID, true);
//        });
//
//        jive.switchboard.addListener('follow.destroy', function(follow) {
//            view.updateBrowseItemCounts('follow', follow.objectType, follow.objectID, false);
//        });
    };

    this.showUsers = function (userData, params) {
        var view = this,
            options = {
                centered       : true,
                destroyOnClose : true,
                closeFocusSelector: params.context,
                onClose        : function() {
                    $j('.js-pop').remove();
                }
            };

        this.soyParams = protect.buildSoyParams(userData, params);
        this.$modal && this.$modal.remove(); // ensure only one instance of the modal
//        console.debug('%i users shown', this.soyParams.users.length);

        var $content = this.renderModal(this.soyParams);
        if (isBookmarkType(userData.activityType)) {
            var row = jive.soy.acclaim.privateBookmarkNotification();
            $content.find('table.js-everyone-list tbody').each(function() {
                $j(this).append(row);
            });
        }
        this.$modal = $content.lightbox_me(options);

        // attach radio events
        this.$modal.find('#jive-view-picker input:checkbox').click(function() {

            // 4 possible tables: all (0) friends (1), all with notes (2), friends with notes (3)
            var $filters = $j('#jive-view-picker input:checked');

            // if nothing is checked, default to table 0
            var tableIndex = 0;
            // one checked, use it's value as a table index
            if ($filters.length == 1) {
                tableIndex = $filters.val();
            }
            // two checked, use table index 3
            else if ($filters.length == 2) {
                tableIndex = 3;
            }
            view.$modal.find('table').hide();
            view.$modal.find('table').eq(tableIndex).show();
        });

        
        // attach endless scroll
        this.$modal.find('.jive-modal-content').endlessScroll({
            fireDelay : false,
            callback  : function(i) {
                if (view.soyParams.moreResults) {
                    view.emitP('loadUsersFromIndex', params, view.pageSize * i).addCallback(function(userData) {
                        view.soyParams.moreResults = userData.moreResults;
                        view.appendUsers(userData);
                    });
                }
            }
        });
    };


    this.appendUsers = function(userData) {
        var users = userData && userData.items ? userData.items : [];
        if (users.length > 0) {
            //console.debug('%i users appended', users.length);
            this.$modal.find('.j-js-private-bookmark-notification').remove();
            //grab rows from rendered table with same id as the currently visible table
            var $tbody = this.$modal.find('.jive-modal-content tbody:visible');
            var tableId = $tbody.parent().attr('id');
            var $renderedModal = this.renderModal($j.extend({}, this.soyParams, { users: users }));
            var $rows = $renderedModal.find('table#' + tableId + ' tr');
            $tbody.append($rows.clone());
            if (isBookmarkType(this.soyParams.activityType)) {
                var row = jive.soy.acclaim.privateBookmarkNotification();
                $tbody.append(row);
            }
        }
    };


    protect.buildSoyParams = function(userData, params) {
        return {
            activityType       : params.activityType,
            bidirectionalGraph : userData.bidirectionalGraph,
            currentUserID      : userData.currentUserID,
            currentUserPartner : userData.currentUserPartner,
            moreResults        : userData.moreResults,
            objectID           : params.objectID,
            objectType         : params.objectType,
            totalCount         : userData.totalCount,
            users              : userData.items,
            youID              : params.youID || userData.currentUserID,
            youPartner         : params.youPartner || userData.currentUserPartner,
	        guestCount         : userData.prop.guestCount
	    
       };
    };

    // removed as part of JIVE-10173
//    protect.updateBrowseItemCounts = function(type, objectType, objectID, increment){
//        var $browseItem = $j('.js-browse-item[data-object-type=' + objectType + '][data-object-id=' + objectID + ']');
//        var $activitySource = $browseItem.find("a.js-activityinfo-source[data-activity-type='" + type + "']");
//        var countData = $activitySource.data("activity-count");
//        var count = countData ? parseInt(countData) : 0;  //because IE8 is that lame
//        count = (increment) ? ++count : --count;
//        count = (count < 0) ? 0 : count;    //just in case something is really off, make sure we never go negative
//        $activitySource.text(count);
//        $activitySource.data("activity-count", count);    //make sure data is kept in the loop
//    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('HelpfulActivity');
/**
 * Interface to aci content REST service.
 *
 * @extends jive.RestService
 * @depends path=/resources/scripts/apps/shared/models/rest_service.js
 */
jive.HelpfulActivity.ItemSource = jive.RestService.extend(function(protect) {
    protect.resourceType = "activity";
    protect.pluralizedResourceType = protect.resourceType;

     /**
     * Get a list of users who have liked, commented on, or bookmarked a piece of content.
     *
     * /activity/users/{activityType}/{objectType}/{objectID}
     */
    this.getContentActivityUsers = function(params, start, count) {
        var options = {
            cache : false,

            data : {
                count: count,
                start: start
            },

            url : [this.RESOURCE_ENDPOINT, 'users', 'applehelpful', params.objectType, params.objectID].join('/')
        };

        return this.commonAjaxRequest(new jive.conc.Promise(), 'GET', options);
    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

jive.namespace('HelpfulActivity.Info');  // Creates the jive.OrgChart namespace if it does not already exist.

/**
 * Displays users who have acted on a piece of content
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/info/views/rrhelpfulactivity_info_view.js
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/model/rrhelpfulactivity_source.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/conc/promise.js
 */
jive.HelpfulActivity.Info.Main = jive.oo.Class.extend(function(protect) {
    this.init = function() {
        // private variables
        this.pageSize = 20;

        // Set up component instances.
        this.source = new jive.HelpfulActivity.ItemSource();
        this.view = new jive.HelpfulActivity.Info.HelpfulActivityInfoView({ pageSize: this.pageSize });

        // listen for load more event (endless scroll)
        var self = this;
        this.view.addListener('loadUsersFromIndex', function(params, startIndex, promise) {
            self.source.getContentActivityUsers(params, startIndex, self.pageSize).addCallback(function(response) {
                promise.emitSuccess(response);
            });
        });
    };

    /**
     * Asynchronously gathers a list of users corresponding to a set of parameters.
     *
     * @param {object} params
     * @param {string} params.activityType bookmark|children|connections|follow|like|membership
     * @param {string|number} objectID
     * @param {string|number} objectType
     * @param startIndex
     * @returns {Promise}
     */
    this.showUsers = function(params, startIndex) {
        var view    = this.view,
            promise = new jive.conc.Promise();
        
        this.source.getContentActivityUsers(params, startIndex, this.pageSize).addCallback(function(response) {
            view.showUsers(response, params);
            promise.emitSuccess($j.extend({ totalCount: response.totalCount }, params));
        }).addErrback(function() {
            promise.emitError();
        });


        return promise;
    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 * Handles all requests to show users associated with certain types of acclaim. These types include:
 *      - bookmarks
 *      - children
 *      - connections (following)
 *      - followers
 *      - likes
 *      - members (of a group)
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/info/rrhelpfulmain.js
 * @depends path=/resources/scripts/jive/dispatcher.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/conc/observable.js
 */
if (!jive.Helpfulacclaim) {
    jive.Helpfulacclaim = (function($) {
        var acclaim       = jive.conc.observable({}),
            userDisplay   = new jive.HelpfulActivity.Info.Main(),
            acclaimEvents = {
                showBookmarks   : 'bookmark',
                showChildren    : 'children',
                showConnections : 'connections',
                showFollowers   : 'follow',
                showHelpful      : 'applehelpful',
                showMembers     : 'membership'
            };

        jive.dispatcher.listen(Object.keys(acclaimEvents), function(payload, event) {
            payload = $.extend({ activityType: acclaimEvents[event] }, payload);
                delete payload.count;
                delete payload.command;
            var params = $.extend({ objectID: payload.objectId, context: this }, payload);
                delete params.objectId;

            acclaim.emit('beforeFetch', payload);
            userDisplay.showUsers(params, 0).addCallback(function(response) {
                acclaim.emit('afterFetch', $.extend({ totalCount: response.totalCount }, payload));
            }).addErrback(function() {
                acclaim.emit('afterFetch', payload);
            });
        });


        return acclaim;
    })(jQuery);
}

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
var questionData;
jive.namespace('Helping');

/**
 * Liking REST service.
 *
 * @class
 * @extends jive.RestService
 * @param {Object}  options
 *
 * @depends path=/resources/scripts/jive/rest.js
 */
jive.Helping.LikeSource = jive.RestService.extend(function(protect) {
    // Mix in observable to make this class an event emitter.
    jive.conc.observable(this);

    /**
     * Set to "acclaim"; configures the REST endpoints that instances of this
     * class connect to.
     *
     * @name resourceType
     * @fieldOf jive.Helping.LikeSource#
     * @type string
     * @protected
     */
    protect.resourceType = "applehelpful";
    /**
     * Don't want a pluralizedResourceType, set this to resourceType
     *
     * @name pluralizedResourceType
     * @fieldOf jive.Helping.LikeSource#
     * @type string
     * @protected
     */
    protect.pluralizedResourceType = protect.resourceType;

  /**
     * Fetches the number of likes for an objectType and objectID
     *
     * @methodOf jive.Helping.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.getLikes = function(objectType, objectID){
        var url = this.RESOURCE_ENDPOINT + '/' + objectType + '/' + objectID + '/getScoreDisplay';
        var likeType = 'applehelpful';

        return this.commonAjaxRequest(new jive.conc.Promise(), 'POST', {url:url, data:{ratingType:likeType}});
    };

  /**
     * determines if the object is liked by the user
     *
     * @methodOf jive.Helping.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.getLikeData = function(objectType, objectID){
        var url = this.RESOURCE_ENDPOINT + '/' + objectType + '/' + objectID;
        var likeType = 'applehelpful';

        return this.commonAjaxRequest(new jive.conc.Promise(), 'GET', {url:url, data:{ratingType:likeType}});
    };

  /**
     * determines if the object is liked by the user
     *
     * @methodOf jive.Helping.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.setHelped = function(like, objectType, objectID){
        var url, data,
            likeType = 'applehelpful',
            voteVal  = 1,
            promise = new jive.conc.Promise();

        if (like) {
            var trialQueryParams = '';
            data = {ratingType:likeType, voteValue:voteVal};
            if (jive.Trial && jive.Trial.Controller) {
                // a jive trial is going on, need to possibly send extra query params if this "like" is part of a certain quest.
                var activeQuestData = jive.Trial.Controller.getActiveQuestAndStep();
                if (activeQuestData.activeQuestID == '1836538113' && activeQuestData.activeQuestStep == 1) {
                    data.fromQuest = activeQuestData.activeQuestID;
                    promise.addCallback(function() {
                        jive.dispatcher.dispatch("trial.like.created");
                        jive.dispatcher.dispatch("trial.updatePercentComplete");
                    });
                }
            }
            url = '/' + this.resourceType + '/' + objectType + '/' + objectID ;
        }
        else{
            url = '/' + this.resourceType + '/' + objectType + '/' + objectID + '/removevote';
            data = {ratingType:likeType};
        }
        $j.post(jive.rest.url(url), data, function(jsonResponse) {
        	questionData = jsonResponse.question;
        	promise.emitSuccess();
        });
        return promise;
    };

});

;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.DiscussionApp=="undefined"){jive.DiscussionApp={}}if(typeof jive.DiscussionApp.soy=="undefined"){jive.DiscussionApp.soy={}}jive.DiscussionApp.soy.renderReply=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(A.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">',(A.moderated)?'<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[]))+"</div>":"",'<strong class="font-color-meta">',soy.$$escapeHtml(A.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(A.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},B);B.append('"></strong>',(A.externallyVisible=="true")?"":"",(A.anonymous)?'<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+"</span></label></div></div>":"",'<a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(A.i18n.advEditor),'</a><p class="jive-discussion-post"></p></div></div></div></div></li>');return C?"":B.toString()};jive.DiscussionApp.soy.replyErrorMessage=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()};jive.DiscussionApp.soy.rteMsgQuote=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-rendered-content"><blockquote class="jive-quote"><span class="jive-quote-header">');if(A.isAnonymous){B.append(soy.$$escapeHtml(A.i18n.postGuestWroteLabel))}else{jive.i18n.soy({string:A.i18n.postUserWroteLabel,zero:soy.$$escapeHtml(A.userName)},B)}B.append(":</span><br/><br/>",A.msgBody,"</blockquote></div>");return C?"":B.toString()}
;
jive.namespace("SharedViews");jive.SharedViews.RteView=$Class.extend({init:function(a,b){this._preferredMode=window.preferredMode||b.preferredMode||"advanced";this._container=$j(a);this._formActionContainer=(b.formActionContainer)?$j(b.formActionContainer):this._container;this._rteDisabledBrowser=b.rteDisabledBrowser;this._resourceID=b.resourceID;this._resourceType=b.resourceType;this._isAnonymous=b.isAnonymous;this._templateName=b.templateName||"rte-template";this._bodyContent=b.bodyContent;this._settingsID=b.settingsID||"mini";this._i18n=b.i18n;this.images_enabled=b.imagesEnabled;var c=this;$j(document).ready(function(){c._render();if(!c._rteDisabledBrowser){c._createRTE()}c._addListeners()})},remove:function(){if(!this._rteDisabledBrowser){if(this._rte){this._rte.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"})}this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")},val:function(a){if(a){this._rte.setHTML(a);return this}else{return this._getContentBody()}},setPreviewButtonText:function(a){this._container.find("[name=preview]").val(a)},focus:function(){this._rte.tinymceFocus()},_initEditor:function(){this._currentMode="advanced";var a=this;var b=new jive.rte.RTEListener();b.doneTogglingMode=function(){if(a._currentMode=="advanced"){a._currentMode="rawhtml"}else{a._currentMode="advanced"}a._refreshLinks();a.emit("toggle",a._currentMode)};this._rte.addListener(b);if(this._preferredMode=="rawhtml"){this._rte.toggleEditorMode("wysiwygtext")}else{if(tinymce.isIE){this._rte.toggleEditorMode();this._rte.toggleEditorMode()}}},_initRTE:function(){var a=this;if(this._rte.isTextOnly()){$j("#wysiwyg-panel").removeClass("loading");this._preferredMode="rawhtml";this._currentMode="rawhtml";return}this._initEditor();this._refreshLinks();setTimeout(function(){a.focus()},0);this.emit("ready")},_createRTE:function(){var b=this;var a={images_enabled:this.images_enabled||false};this._rte=new jive.rte.RTE(jiveControl,"wysiwygtext",this._settingsID,a);window.editor.put("wysiwygtext",this._rte);jive.rte.multiRTE.push("wysiwygtext");var c=new jive.rte.RTEListener();c.initFinished=function(d){b._initRTE()};this._rte.addListener(c)},_getContentBody:function(){if(!this._rteDisabledBrowser){return this._rte.getHTML()}else{return this._container.find("textarea:visible").val()}},_getValues:function(){return{body:this._getContentBody()}},_postHandler:function(){this.emit("post",this._getValues());return false},_addListeners:function(){var a=this;this._formActionContainer.find("[name=post]").click(function(){return a._postHandler()}).end().find("[name=preview]").click(function(){a.emit("preview",a._getValues());return false}).end().find("[name=cancel]").click(function(){a.emit("cancel",a._getValues());a._unload();return false});this._container.find(".toggle_preferred_mode").click(function(){var b=a._currentMode;WikiTextConverter.setPreferredEditorMode(b,{callback:function(){a._preferredMode=b;window.preferredMode=b;a._refreshLinks()},timeout:DWRTimeout});return false}).end().find(".toggle_html").click(function(){a._rte.toggleEditorMode("wysiwygtext");return false});this._unloadCallback=this._unload.bind(this);$j(window).bind("unload",this._unloadCallback)},_unload:(function(){}),_template:(function(){var b={};return function a(f,e){var c=/^[\w\-]+$/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").replace(/(^|%>)(.+?)(<%|$)/,function(g,h,i,j){return h+d(i)+j}).split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c;function d(g){return g.replace("'","&apos;").replace("\\","\\\\")}}})(),_render:function(){this._container.append(this._template(this._templateName,{body:this._bodyContent}))},_refreshLinks:function(){this._container.find(".toggle_html").toggle(this._currentMode=="rawhtml");this._container.find(".toggle_preferred_mode").toggle(this._preferredMode!=this._currentMode)}});jive.SharedViews.RteView.setMiniRTEQuotedMsg=function(c,b,d,a){window._jive_gui_quote_text=jive.DiscussionApp.soy.rteMsgQuote({i18n:b,userName:c,isAnonymous:d,msgBody:a})};jive.conc.observable(jive.SharedViews.RteView.prototype);
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionView=function(h){jive.conc.observable(this);var e=$j(h),c=this;function b(){e.fadeOut(function(){$j(this).remove()});c.emit("remove",c.messageID);return c}function d(i){e.find("[class*=discussion-preview]").html(i).fadeIn()}function f(){return e}function g(k,j,l){var i=e.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(k,j,l,i)}function a(){var i=e.parents().andSelf().filter("li.reply").toArray();return i.slice(1).reduce(function(k,j){var l=$j(j);return k+parseInt(l.css("margin-left"),10)+parseInt(l.css("padding-left"),10)},0)}this.remove=b;this.displayPreview=d;this.getDOMElement=f;this.setQuotedMsg=g;this.indent=a;(function(j){var i=e.find("a.discussionAdd");j.messageID=i.attr("data-messageID");j.username=i.attr("data-discussionusername");j.userid=i.attr("data-discussionuserid");j.isReply=(i.attr("data-isReply")||"").toLowerCase()==="true";j.replySubject=i.attr("data-replySubject");j.isAnonymous=(i.attr("data-isAnonymous")||"").toLowerCase()==="true";j.advEditorLnk=i.attr("data-advEditorLnk")})(this)};
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 * Handles all helpful functionality
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/rrhelpful/models/rrhelpful_source.js
 * @depends path=/resources/scripts/apps/discussion_app/views/discussion_view.js
 * @depends path=/resources/scripts/jive/dispatcher.js
 * @depends template=jive.eae.acclaim.helpful.*
 * @throws throws an exception if the widget type is unknown
 */
if (!jive.Helpful) {
    jive.namespace('Helpful', (function(model, likeControl) {
        function updateUI($element, isLiked, objectType, objectId) {
            var $container      = $element.closest('.js-acclaim-container'),
                $new,
                likeCount       = $container.data('likes'),
                soyParams       = {
                    canLike    : true,
                    liked      : isLiked,
                    objectId   : objectId,
                    objectType : objectType,
                    type       : $container.data('type'),
                    showIcon   : $container.data('showicon')
                };


            // adjust the likeCount. ensure it is always 0 or more
            likeCount += isLiked ? 1 : -1;
            likeCount  = likeCount < 0 ? 0 : likeCount;
            soyParams.likeCount = likeCount;

            /*
             * Widget type can be one of the following values:
             *
             * mini   - used in the activity stream (see acclaim.soy)
             * small  - identical to mini in presentation, but the DOM structure is a little different (see acclaim.ftl)
             * medium - used on a content detail page. a larger like/count display area (see acclaim.ftl)
             */
          switch (soyParams.type) {
            case 'mini':
                $new = $element.closest('.j-js-liking-control').html(likeControl(soyParams));
                break;

            case 'medium':
                $new = $container.data('likes', likeCount).html(likeControl(soyParams));
                break;

            case 'small':
                $new = $j(likeControl($j.extend({ showGlyph: true }, soyParams)));
                var $control = $container.closest('.j-js-liking-control');

                if ($control.length > 0) {
                    $control.replaceWith($new);
                } else {
                    $container.replaceWith($new);
                }
                break;

            default:
                throw 'Unknown widget type';
            }

            if($new)
                $new.find('a. jive-acclaim-likelink').focus();
        }
        
        function updateUIHelpfulText($element, isLiked, objectType, objectId) {
        
            var $container      = $element.closest('.js-acclaim-container'),
                $new,
                likeCount       = $container.data('likes'),
                soyParams       = {
                    canLike    : true,
                    liked      : true,
                    objectId   : objectId,
                    objectType : objectType,
                    type       : $container.data('type'),
                    showIcon   : $container.data('showicon')
                };


            // adjust the likeCount. ensure it is always 0 or more
           // likeCount += isLiked ? 1 : -1;
           // likeCount  = likeCount < 0 ? 0 : likeCount;
            soyParams.likeCount = likeCount  ;

            /*
             * Widget type can be one of the following values:
             *
             * mini   - used in the activity stream (see acclaim.soy)
             * small  - identical to mini in presentation, but the DOM structure is a little different (see acclaim.ftl)
             * medium - used on a content detail page. a larger like/count display area (see acclaim.ftl)
             */
          switch (soyParams.type) {
            case 'mini':
                $new = $element.closest('.j-js-liking-control').html(likeControl(soyParams));
                break;

            case 'medium':
                $new = $container.data('likes', likeCount).html(likeControl(soyParams));
                break;

            case 'small':
                $new = $j(   likeControl($j.extend({ showGlyph: true }, soyParams))      );
                var $control = $container.closest('.j-js-liking-control');

                if ($control.length > 0) {
                    $control.replaceWith($new);
                } else {
                    $container.replaceWith($new);
                }
                break;

            default:
                throw 'Unknown widget type';
            }

            if($new) {
            }
              //  $new.find('a. jive-acclaim-likelink').focus();
        }
        

        var inFlightRequests = {};
        jive.dispatcher.listen(['helpful'], function(payload, event, target) {
        
        //RRP-305 Apple Customization: Perform Omniture tracking on This Helped Me
        if (typeof(trackMove) != "undefined") {
       		trackMove("helped me too");
        }
        
        function containsAnswer(helpfulAnswers, messageId) {
                return helpfulAnswers && helpfulAnswers.some(
                        function(answer)
                        { 
                            return answer.ID == messageId;
                        });
            }
        	
        	var key = payload.objectType + "_" + payload.objectId;
            if(inFlightRequests[key]){
                //For any given entity descriptor, we can have at most one request pending.
                //This partially mitigates a data design issue in the acclaim subsystem that allows duplicate likes.
                console.log("duplicate helpful request, ignoring", payload, event, target);
                return;
            }else{
                inFlightRequests[key] = true;
            }
              	    	
            var isLiked = event === 'helpful';
            model.setHelped(isLiked, payload.objectType, payload.objectId).addCallback(function() {
            	btnMessageid= "#thread-message-" + payload.objectId;
              
               /* if (isLiked) {
                    $j(jive.eae.acclaim.helpful.likeConfirmation()).message({style: 'success'});
                } else {
                    $j(jive.eae.acclaim.helpful.unlikeConfirmation()).message({style: 'success'});
                }*/
            	
            	/*
            	 *questionData.helpfulAnswers return the helpful answers list in the thread.
            	 * containsAnswer method check whether the the passed messageId(payload.objectId) contained in the helpfulAnswers.
            	 * wil give the goldenborder and golden star icon once the condition satifies.
            	 */ 
               if(  (questionData !=null)  &&  questionData.helpfulAnswers && (containsAnswer(questionData.helpfulAnswers, payload.objectId))){
                   //commenting as per new design	
            	   //$j(target).closest('.js-thread-post-wrapper').addClass('j-helpful');
            	   if($j(target).closest('footer').parent().find('header').find('.j-recommend-star').length < 1){
            	   
            		   if ($j(target).find('.j-helpful-star').length < 1) {
	           				// add the Helpful Answer star for helpful only.
	           				$containerHelpful = $j(target).closest('footer').parent().find('header');
	           				//Removing appleParticipationImage for RRP-310, as we need to show Helpful Star
	           				$containerHelpful.find('.appleParticipationImage').hide();
	           				$containerHelpful.find('.j-post-author').append('<span class="j-helpful-text">'+  apple_i18n.helpfulAnswerText +'<a class="j-star j-helpful-star j-ui-elem popped"></a></span>');
	           				//$containerHelpful.append('<span class="j-helpful-text">'+  apple_i18n.helpfulAnswerText +'</span>');
	           				//$containerHelpful.append('<a class="j-star j-helpful-star j-ui-elem popped" style="display:inline"></a>');
	           				
            		   	} 
            	   }
            	   
            	   else{
            		   if ($j(target).find('.j-helpful-star').length < 1) {
                   		 	// add the Helpful Answer star for helpful only.
	           				$containerHelpful = $j(target).closest('footer').parent().find('header');
	           				//Removing appleParticipationImage for RRP-310, as we need to show Helpful Star
	           				//$containerHelpful.find('.appleParticipationImage').hide();
	           				$containerHelpful.find('.j-post-author').append('<span class="j-helpful-text">'+  apple_i18n.helpfulAnswerText +'<a class="j-star j-helpful-star j-ui-elem popped"></a></span>');
	           				$containerHelpful.find('span.j-helpful-text').hide();
	           				$containerHelpful.find('a.j-helpful-star').hide();
	           				
	           				
	           			} 
            	 }
            	   
            	   
               }  
                
                updateUI($j(target), isLiked, payload.objectType, payload.objectId);
                /*
                 * updateUIHelpfulText method is used to display the "this helped me" link to text 
                 *  appleThreadHelpfulCountExceeded  flag is true if the user exceeds the helpful limit in the thread.
                 */
                if((questionData !=null) && questionData.appleThreadHelpfulCountExceeded){
                	//f(exceedLimit){
                        $j('a.jive-thread-reply-btn-helpful[data-command="helpful"]').each( function() {
                        	updateUIHelpfulText($j(this), false,  $j( this ).attr('data-object-type'),  $j( this ).attr('data-object-id'));
                        });
                 } 
    
         
                jive.switchboard.emit("acclaim.recorded", isLiked, payload.objectType, payload.objectID);
            }).always(function (){
                delete inFlightRequests[key];
            });
        });

      
        return {};
    })(new jive.Helping.LikeSource({}), jive.eae.acclaim.helpful.likeControl));
    

}

;
jive.namespace("ShareApp");jive.ShareApp.ShareSource=jive.RestService.extend(function(a){this.init=function(){this.suppressGenericErrorMessages()};this.save=function(b,f,d){var e=new jive.conc.Promise(),c=this;$j.ajax({type:"POST",url:jive.rest.url("/objects/")+b+"/"+f+"/shares",dataType:"json",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(g,i,h){if(g){c.merge(d,g)}e.emitSuccess(d)},error:c.errorCallback(e),timeout:30000});return e};this.get=function(b,e){var d=new jive.conc.Promise(),c=this;$j.ajax({type:"GET",url:jive.rest.url("/objects/")+b+"/"+e+"/sharetemplate",dataType:"json",data:{},contentType:"application/json; charset=utf-8",success:function(f,h,g){d.emitSuccess(f)},error:c.errorCallback(d),timeout:30000});return d}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.share=="undefined"){jive.soy.share={}}jive.soy.share.control=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="',(A.type=="text")?"share-link j-meta-control ":(A.type=="largeButton")?"j-social-action ":"",(A.classes)?soy.$$escapeHtmlAttribute(A.classes):"",'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("share.link.title"),[])),'" data-command="share" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'">',(A.icon)?"<span"+((A.type=="smallButton")?' class="j-ui-elem"':"")+'><span class="jive-icon-med jive-icon-share"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.link"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.link"),[])),"</a>");return C?"":B.toString()};jive.soy.share.share=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal" id="jive-modal-share"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.title"),[A.objectNameLower])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-invite-modal clearfix"><div id="share-error" class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true" ></div><form class="j-form">',(A["private"])?'<p class="j-info"><span class="j-info-icon j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.private.access"),[A.objectNameLower]))+"</p>":"",'<label for="share-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.people.label"),[]))," (",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("send.invite.nonusers.noimport.label"),[])),')</label><div class="ie-zindex-fix j-form-exp font-color-meta-light"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tips.onboarding.tip5.body3"),[]))," </strong>");jive.UserPicker.soy.inputPlaceholder({userAllowed:true,emailAllowed:A.externallyShareable,multiple:true},B);B.append('</div><div class="j-user-input-typeahead"><input type="text" name="share-users" id="share-users" class="j-autocomplete-input j-user-autocomplete j-autocomplete-jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on" role="combobox"/></div><div class="ie-zindex-fix j-form-exp j-noimport">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("send.invite.nonusers.noimport.explanation"),[])),'</div><p><label for="jive-send-content-not-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.message.label"),[])),'</label><textarea name="message" class="jive-form-element-textarea font-color-normal" id="jive-send-content-not-message">',A.message,'</textarea></p><p><button type="submit" id="share-content-submit" name="share-content-submit" class="j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.submit.button"),[])),'</button><button type="button" class="close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</button></p></form></section></div>");return C?"":B.toString()};jive.soy.share.shareConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.confirm"),[])),"</p>");return C?"":B.toString()};jive.soy.share.secretGroupMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.secretgroup"),[])),"</p>");return C?"":B.toString()};jive.soy.share.send_private_msg=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("send.private.autoaccess"),[A.objectName])));return C?"":B.toString()};jive.soy.share.userWithoutPermission=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-share-msg j-tips">');if(A.user.anonymous||A.user.external){if(!A.invitationsEnabled){B.append((A.attachmentAvailable)?'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.guest.nopermission.attachment"),[]))+"<p>":'<p class="j-warn">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.guest.nopermission.noattachment"),[]))+"<p>")}else{if(A["private"]&&A.editor){B.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.guest.nopermission.invite.private"),[])),"<p>");jive.soy.share.attachmentLinks(A.user,B)}else{if(A.attachmentAvailable){B.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.guest.nopermission.invite.attachment"),[])),"<p>");jive.soy.share.attachmentLinks(A.user,B)}else{B.append('<p class="j-warn">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.guest.nopermission.invite.noattachment"),[])),"<p>");jive.soy.share.emailLinks(A.user,B)}}}}else{B.append((A["private"]&&A.editor)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.user.nopermission.private"),[])):(A.attachmentAvailable)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.user.nopermission.attachment"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.user.nopermission.noattachment"),[])))}B.append("</div>");return C?"":B.toString()};jive.soy.share.attachmentLinks=function(A,C){var B=C||new soy.StringBuilder();B.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(A.email),'" ',(A.notified)?'style="display:none"':""," >",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.attachment.send.link"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(A.email),'" ',(!A.notified)?'style="display:none"':""," >",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.attachment.remove.link"),[])),"</a><p>");return C?"":B.toString()};jive.soy.share.emailLinks=function(A,C){var B=C||new soy.StringBuilder();B.append('<p><a href="#" class="js-notify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(A.email),'" ',(A.notified)?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.email.send.link"),[])),'</a><a href="#" class="js-unnotify-user" data-user-identifier="',soy.$$escapeHtmlAttribute(A.email),'" ',(!A.notified)?'style="display:none"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.email.remove.link"),[])),"</a><p>");return C?"":B.toString()};jive.soy.share.listWithoutPermission=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-share-msg j-tips">',(A["private"]&&A.editor)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.list.nopermission.private"),[])):(A.attachmentAvailable)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.list.nopermission.attachment"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.list.nopermission.noattachment"),[])),"</div>");return C?"":B.toString()};jive.soy.share.usersNotRelated=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.notrelated"),[])),"</p>");return C?"":B.toString()}
;
if(!jive.share){jive.share=(function(a){jive.dispatcher.listen("share",function(b){a=a||new jive.ShareApp.Main();a.showModal(b.objectId,b.objectType)});return{}})(undefined)};
;
jive.namespace("ShareApp");jive.ShareApp.ShareView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(){this.recipients=[];this.options={}};a.submitShare=function(g,c,e,f){var b=this;var d={message:$j("#jive-send-content-not-message").val(),recipients:b.buildRecipientArray(),subject:$j("#jive-send-content-not-subject").val()};d.message=d.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");b.emitP("share",c,g,d).addCallback(function(){$j(jive.soy.share.shareConfirmation({objectName:f})).message({style:"success"});e.trigger("close");if(b.recipients.some(function(h){return h.id!==window._jive_current_user.ID})){jive.dispatcher.dispatch("trial.share.created");jive.dispatcher.dispatch("trial.updatePercentComplete")}b.recipients=[]}).addErrback(function(i){var h=i?$j("<p>"+i+"</p>"):$j(jive.error.rest.soy.errorUpdating({href:window.location}));h.message({showClose:true,style:"error"});e.find("input, button").prop("disabled",false)})};a.buildRecipientArray=function(){var b=this;var c=[];this.checkExternalUsers(this.userPicker.getSelectedUsersAndLists(true));return this.recipients.map(function(d){return{identifier:d.id!=-1?d.id:d.email,notified:d.notified}})};a.checkExternalUsers=function(d){var b=this;$j("#jive-include-attach-div").hide();d.users.forEach(function(e){if(e.id==-1||!e.entitled){$j("#jive-include-attach-div").show()}});this.recipients=this.recipients.filter(function(e){return d.users.some(function(f){return f.email===e.email})});var c=this.addedRecipients(d.users);this.recipients=this.recipients.concat(c)};a.addedRecipients=function(c){var b=this;return c.filter(function(d){return !b.recipients.some(function(e){return d.email===e.email})}).map(function(d){return $j.extend({},d,{notified:false})})};a.recipient=function(b){return this.recipients.filter(function(c){return c.email===b})};a.notifyUser=function(b,c){this.recipient(b).forEach(function(d){d.notified=c});$j(".js-notify-user").toggle();$j(".js-unnotify-user").toggle()};this.openShareModal=function(d,c){var b=this;b.emitP("prepareShare",c,d).addCallback(function(h){if(!b.open){b.open=true;if(h.invitationsEnabled){b.options.invitationsEnabled=true}b.recipients=[];if(h.secretGroup){$j(jive.soy.share.secretGroupMessage()).message({showClose:true,style:"error"})}else{var f=$j(jive.soy.share.share(h));f.lightbox_me({destroyOnClose:true,centered:true,closeClick:false,closeEsc:false,closeFocusSelector:jive.Accessibility.hasStackedFocus()?jive.Accessibility.popFocus():'a.[data-command="share"][data-object-id="'+d+'"][data-object-type="'+c+'"]',onLoad:function(){jive.dispatcher.dispatch("trial.share.modal.loaded")},onClose:function(){b.cleanupModal()}});f.find("form").submit(function(){$j(this).find("input,button").prop("disabled",true);b.submitShare(d,c,f,h.objectNameCapital);return false});var e=new jive.UserPicker.Main({multiple:true,listAllowed:true,emailAllowed:h.externallyShareable,message:"",object:{objectID:d,objectType:c},entitlement:"VIEW",$input:$j("#share-users"),canInvitePartners:h.attachmentAvailable,canInviteJustPartners:false,canInvitePreprovisioned:true,relatedMessage:$j(jive.soy.share.usersNotRelated()),userMessages:[b.getUserPermissionsMessage(h)],listMessages:[b.getListPermissionsMessage(h)],placeholder:" "});e.addListener("selectedUsersChanged",function(i){b.checkExternalUsers(i)});b.userPicker=e;var g=$j("body");g.delegate(".js-notify-user","click",function(i){b.notifyUser($j(this).data("user-identifier"),true);i.preventDefault()});g.delegate(".js-unnotify-user","click",function(i){b.notifyUser($j(this).data("user-identifier"),false);i.preventDefault()})}}}).addErrback(function(f){var e=f?$j("<p>"+f+"</p>"):$j(jive.error.rest.soy.errorFinding({href:window.location}));e.message({showClose:true,style:"error"})})};a.cleanupModal=function(){var b=this;$j(".js-userpicker-user-msg").trigger("close");var c=$j("body");c.undelegate(".js-notify-user","click");c.undelegate(".js-unnotify-user","click");b.open=false};a.getUserPermissionsMessage=function(c){var b=this;return{type:"warn",render:function(d){d.notified=b.recipient(d.email).some(function(f){return f.notified});var e=$j.extend({user:d},c);return jive.soy.share.userWithoutPermission(e)}}};a.getListPermissionsMessage=function(c){var b=this;return{type:"warn",render:function(){return jive.soy.share.listWithoutPermission(c)}}}});
;
jive.namespace("ShareApp");jive.ShareApp.Main=jive.oo.Class.extend(function(){this.init=function(c){var b=c||{};var a=b.source||new jive.ShareApp.ShareSource();this.view=new jive.ShareApp.ShareView();this.view.addListener("prepareShare",function(d,f,e){a.get(d,f).addCallback(e.emitSuccess.bind(e)).addErrback(e.emitError.bind(e))});this.view.addListener("share",function(d,g,e,f){a.save(d,g,e).addCallback(f.emitSuccess.bind(f).aritize(0)).addErrback(f.emitError.bind(f))})};this.showModal=function(b,a){this.view.openShareModal(b,a)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.socialgroups=="undefined"){jive.socialgroups={}}if(typeof jive.socialgroups.soy=="undefined"){jive.socialgroups.soy={}}jive.socialgroups.soy.leaveGroup=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-medium" id="jive-modal-leave-group"><header>',(A.pendingApproval)?'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.cancel"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[]))+" "+soy.$$escapeHtml(A.groupName)+"</h2>":'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.title"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[]))+" "+soy.$$escapeHtml(A.groupName)+"</h2>",'</header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon  j-ui-elem"></span></a><!-- Manage categories listing --><section class="jive-modal-content j-modal-content-text jive-modal-leave-group clearfix">',(A.canLeaveSocialGroup)?((A.pendingApproval)?"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.canceljoin"),[A.groupName]))+"</h3>"+((A.requiresApproval)?"<p>"+soy.$$escapeHtml(A.leaveI18n)+"</p>":""):"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.confirm"),[A.groupName]))+"</h3>"+((A.requiresApproval)?"<p>"+soy.$$escapeHtml(A.leaveI18n)+"</p>":"")+"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.follow.remove"),[]))+"</p>")+'<div class="jive-form-buttons"><button type="button" class="j-btn-callout" id="group-leave-submit">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.accept"),[]))+'</button><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+"</button></div>":(A.onlyOneOwner)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.onlyowner"),[]))+"</p><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.onlyowner.info"),[]))+'</p><div class="jive-form-buttons"><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+"</button></div>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.already.gone"),[])),"</section></div>");return C?"":B.toString()};jive.socialgroups.soy.joinConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pendingApproval)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.apprvl.info"),[]))+"</div>":(A.banned)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.banned_member.msg"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.confirm"),[]))+"</div>");return C?"":B.toString()};jive.socialgroups.soy.leaveConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pendingApproval)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.cancel.message"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.message"),[]))+"</div>");return C?"":B.toString()};jive.socialgroups.soy.renderError=function(A,C){var B=C||new soy.StringBuilder();switch(A.code){case 4026:B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.notallowed"),[])),"</p>");break;case 4008:B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.not.found"),[])),"</p>");break;default:if(A.message){B.append("<p>",soy.$$escapeHtml(A.message),"</p>")}else{jive.error.rest.soy.errorFinding(A,B)}}return C?"":B.toString()}
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipView=jive.oo.Class.extend(function(a){var b="browse",d="landing";jive.conc.observable(this);this.init=function(g,i,f){var e=this;this.joinContainer=g;this.leaveContainer=i;this.options=f||{};var h="objectID" in f?d:b;this.isPage=function(j){return h===j};$j(document).ready(function(){if(e.isPage(d)){$j(document).delegate(e.joinContainer,"click",function(j){e.joinGroup($j(this));j.preventDefault()});$j(document).delegate(e.leaveContainer,"click",function(j){e.displayLeaveGroupModal($j(this));j.preventDefault()})}else{$j("body").on("click",".sgroup-join, .sgroup-leave",function(k){k.preventDefault();var j=$j(this);if(j.is(".sgroup-join")){e.joinGroup(j)}else{e.displayLeaveGroupModal(j)}})}})};this.joinGroup=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("join",g).addCallback(function(h){var i=$j.noop;if(e.isPage(d)){if(!h.banned){$j(e.leaveContainer).show();$j(e.joinContainer).hide()}i=function(){if(h.memberToContribute){window.location=c(1)}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-leave").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.joinConfirmation(h),i);$j("#jive-link-socialgroup-startFollowing").hide();$j("#jive-link-socialgroup-following").show()}).addErrback(function(i,h){console.log("got error message: "+i+" code: "+h);e.displayError(i,h)})};this.displayLeaveGroupModal=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("prepareLeave",g).addCallback(function(j){var h=$j(jive.socialgroups.soy.leaveGroup(j));$j("body").append(h);var i=$j("body").find("#jive-modal-leave-group");i.lightbox_me({closeSelector:".jive-modal-close, .close",destroyOnClose:true});i.find("#group-leave-submit").click(function(){e.leaveGroup(f,j);i.trigger("close")})}).addErrback(function(i,h){e.displayError(i,h)})};this.leaveGroup=function(f,g){var e=this;var h=e.determineObjectID(f);e.emitP("leave",h).addCallback(function(){var i=$j.noop;if(e.isPage(d)){$j(e.joinContainer).show();$j(e.leaveContainer).hide();$j("#jive-link-socialgroup-following").hide();$j("#jive-link-socialgroup-startFollowing").show();i=function(){if(!g.visibleAfterLeaving){window.location=jive.app.url({path:"/groups"})}else{if(g.memberToContribute){window.location=c(-1)}}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-join").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.leaveConfirmation(g),i)}).addErrback(function(j,i){e.displayError(j,i)})};this.displayMessage=function(e,f){$j("<p />").html(e).message({style:"success",dismissCallback:f||$j.noop})};this.displayError=function(g,f){var e=jive.socialgroups.soy.renderError({message:g,code:f,href:window.location.href});$j(e).message({style:"error",showClose:true})};this.determineObjectID=function(e){var f=this.options.objectID||e.attr("data-objectid")||0;return parseInt(f,10)};function c(e){return window.location.href.replace(/\?(.*&)?qstep=(\d+)/,function(h,f,i){var g=parseInt(i)+e;return"?"+f+"qstep="+g})}this.tearDown=function(){var e=this;if(e.isPage(d)){$j(e.joinContainer).off("click");$j(e.leaveContainer).off("click")}else{$j(".sgroup-join").off("click");$j(".sgroup-leave").off("click")}}});
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipSource=jive.RestService.extend(function(a){a.resourceType="socialgroup";this.save=function(d){var e=new jive.conc.Promise(),c=this;var b=$j.deparam.querystring().fromQ;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/members",dataType:"json",data:b,contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e};this.get=function(d){var e=new jive.conc.Promise(),c=this;var b={};b[this.resourceType]=d;$j.ajax({type:"GET",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/memberInfo",dataType:"json",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e};this.destroy=function(b){var c=new jive.conc.Promise();$j.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+b.objectID+"/members",success:function(){c.emitSuccess()},error:function(d){c.emitError(null,d.status)}});return c}});
;
jive.namespace("MembershipApp");jive.MembershipApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.membershipSource=new jive.MembershipApp.MembershipSource(c);this.membershipView=new jive.MembershipApp.MembershipView("#jive-link-joinSocialGroup,.jive-link-joinSocialGroup","#jive-link-leaveSocialGroup,.jive-link-leaveSocialGroup",c);this.membershipView.addListener("join",function(e,d){b.membershipSource.save({objectID:e}).addCallback(function(f){d.emitSuccess(f);jive.switchboard.emit("sgroup.member.join",f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("leave",function(e,d){b.membershipSource.destroy({objectID:e}).addCallback(function(){jive.switchboard.emit("sgroup.member.leave",e);d.emitSuccess()}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("prepareLeave",function(e,d){b.membershipSource.get({objectID:e}).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})})};this.tearDown=function(){this.membershipView.removeListener("join").removeListener("leave").removeListener("prepareLeave").tearDown()}});define("jive.membershipApp.Main",function(){return jive.MembershipApp.Main});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.email_notification=="undefined"){jive.soy.email_notification={}}jive.soy.email_notification.start=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.start_watch.link"),[]))},B);break;case"socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.start_watch.link"),[]))},B);break}return C?"":B.toString()};jive.soy.email_notification.stop=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.stop_watch.link"),[]))},B);break;case"socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.stop_watch.link"),[]))},B);break}return C?"":B.toString()};jive.soy.email_notification.message=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"watch":B.append((A.isUser)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watchuser.start"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watch.start"),[]))+"</p>");break;case"unwatch":B.append((A.isUser)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watchuser.stop"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watch.stop"),[]))+"</p>");break}return C?"":B.toString()};jive.soy.email_notification.common=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" rel="nofollow"><span class="jive-icon-med jive-icon-message-open"></span>',soy.$$escapeHtml(A.message),"</a>");return C?"":B.toString()};jive.soy.email_notification.commonInSocialButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-social-button j-rc5 j-button-toggle-email-notifications j-ui-elem"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-message-open"></span>',soy.$$escapeHtml(A.message),"</span></a>");return C?"":B.toString()}
;
jive.namespace("EmailNotification");jive.EmailNotification.Source=jive.RestService.extend(function(a){a.resourceType="emailwatches";a.pluralizedResourceType=a.resourceType;a.resourceType="emailwatches";this.watch=function(d,b){var c=this.RESOURCE_ENDPOINT+"/watch/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.unwatch=function(d,b){var c=this.RESOURCE_ENDPOINT+"/unwatch/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})}});
;
jive.namespace("EmailNotification");jive.EmailNotification.Main=function(e,d,b){var a=new jive.EmailNotification.Source(),c={watch:{newId:"jive-link-thread-unwatch",save:a.watch.bind(a),view:jive.soy.email_notification.stop},unwatch:{newId:"jive-link-thread-watch",save:a.unwatch.bind(a),view:jive.soy.email_notification.start}};$j("#jive-link-thread-watch, #jive-link-thread-unwatch").delegate("a","click",function(g){g.preventDefault();var h=$j(this).closest("#jive-link-thread-watch, #jive-link-thread-unwatch"),f=h.attr("id").split("-").pop();c[f].save(e,d).addCallback(function(){h.attr("id",c[f].newId).html(c[f].view({type:h.attr("data-type")||"common"}));$j(jive.soy.email_notification.message({type:f,isUser:!!b})).message({style:"success"})})})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.trial=="undefined"){jive.trial={}}if(typeof jive.trial.quests=="undefined"){jive.trial.quests={}}if(typeof jive.trial.quests.fewerMeetings=="undefined"){jive.trial.quests.fewerMeetings={}}jive.trial.quests.fewerMeetings.questName=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.link"),[])));return C?"":B.toString()};jive.trial.quests.fewerMeetings.panelTitle=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-fewer-meetings',(A.panelData.lastViewedQuest=="-1261617267")?" j-active":"",'"><a href="#" data-questname="-1261617267">');jive.trial.quests.fewerMeetings.questName(null,B);B.append("</a></li>");return C?"":B.toString()};jive.trial.quests.fewerMeetings.panelContent=function(A,D){var B=D||new soy.StringBuilder();B.append('<div class="section clearfix collaboration"><div class="j-quest-lcol"><p class="j-vdescription">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.text"),[])),'</p><div class="j-quest-video"><div id="wistia_b8c47e6cac" class="j-qvideo" style="width:570px;height:365px;" data-video-width="570" data-video-height="365">&nbsp;</div></div><div class="j-quest-completors"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.recently_completed.text"),[])),"</h4>");jive.trial.recentlyCompleted({users:A.questData.recentlyCompleted},B);B.append('</div></div><div class="j-quest-tasks ',(A.questData.stepsComplete==A.questData.steps.length)?"j-quest-complete":"",'"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.tryit.label"),[])),'</h3><div class="j-qtask-list">',(A.questData.stepsComplete==A.questData.steps.length)?'<span class="j-completed-ribbon">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.completed.label"),[]))+"</span>":"",'<ul><li class="j-qtask j-',soy.$$escapeHtmlAttribute(A.questData.steps[0].state),'" data-stepaction="',soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,"/discussion/create.jspa?fromQ=-1261617267&qstep=0")),'"><span class="j-qtitle ',(A.questData.steps[0].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.post.title"),[])),"</span>",(A.questData.steps[0].state!="completed")?'<strong class="j-qnotstarted font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[]))+'</strong><p class="j-quest-text font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.post.text"),[]))+'</p><span class="j-qgobtn"></span>':'<strong class="j-qdone">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[]))+'<span class="j-donecheck"></span></strong>'+((A.questData.steps[0].completionData.forumThreadViewBean)?'<div class="j-quest-detail"><strong class="j-quest-action">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.youposted.text"),[]))+'</strong><p class="j-quest-output"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL)))+'" class="j-quest-content"><span class="'+soy.$$escapeHtmlAttribute(A.questData.steps[0].completionData.forumThreadViewBean.jiveObjectCSS)+'"></span>'+soy.$$escapeHtml((function(H,E){var G,F;if("string"!==typeof H){return""}G=H.split("");if(G.length>E){for(F=G.length-1;F>-1;--F){if(F>E){G.length=F}else{if(" "===G[F]){G.length=F;break}}}G.push("...")}return G.join("")})(A.questData.steps[0].completionData.forumThreadViewBean.htmlSubject,32))+"</a></p></div>":""),'</li><li class="j-qtask j-',soy.$$escapeHtmlAttribute(A.questData.steps[1].state),'" data-stepaction="',(A.questData.steps[0].completionData.forumThreadViewBean)?soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL+"?fromQ=-1261617267&qstep=1")):"",'"><span class="j-qtitle ',(A.questData.steps[1].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.invite.title"),[])),"</span>");if(!A.questData.steps[1].completionData.shareViewBean){B.append('<strong class="j-qnotstarted font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[])),'</strong><p class="j-quest-text font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.invite.text"),[])),'</p><span class="j-qgobtn"></span>')}else{B.append('<strong class="j-qdone">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[])),'<span class="j-donecheck"></span></strong><div class="j-quest-detail share"><strong class="j-quest-action">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.youinvited.text"),[])),'</strong><p class="j-quest-output j-sharees font-color-meta">');jive.eae.common.groupedUsers({groupedUserList:A.questData.steps[1].completionData.sharedUsers,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B);B.append("</p></div>")}B.append('</li><li class="j-qtask j-',(A.questData.steps[2].completionData.replyCount&&A.questData.steps[2].completionData.replyCount<2)?"unavailable":soy.$$escapeHtmlAttribute(A.questData.steps[2].state),'" data-stepaction="',(A.questData.steps[0].completionData.forumThreadViewBean)?soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL+"?fromQ=-1261617267&qstep=2")):"",'"><span class="j-qtitle ',(A.questData.steps[2].state=="available")?(!(A.questData.steps[2].completionData.replyCount&&A.questData.steps[2].completionData.replyCount<2))?"font-color-link":"":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.discussdecide.title"),[])),"</span>");if(A.questData.steps[2].state!="completed"){B.append('<strong class="j-qnotstarted font-color-meta-light">',(A.questData.steps[2].completionData.replyCount&&A.questData.steps[2].completionData.replyCount<2)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.awaiting.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[])),'</strong><p class="j-quest-text font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.discussdecide.text"),[])),"</p>",(A.questData.steps[2].completionData.replyCount&&A.questData.steps[2].completionData.replyCount<2)?'<p class="j-quest-waiting font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.awaiting.text"),[]))+"</p>":"",'<span class="j-qgobtn"></span>')}else{B.append('<strong class="j-qdone">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[])),'<span class="j-donecheck"></span></strong>');if(A.questData.steps[2].completionData.author){B.append('<div class="j-quest-detail"><strong class="j-quest-action">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.youdecided.text"),[])),'</strong><p class="j-quest-output j-correct font-color-meta"><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[2].completionData.url))),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.correct_answer.link"),[])),"</a> ");var C=new soy.StringBuilder(' <span class="j-answerer">');jive.shared.displayutil.userDisplayNameLink(A.questData.steps[2].completionData.author,C);C.append("</span>");jive.shared.soy.i18nHelper({i18nKey:"eae.container.by",arg0:C.toString(),noAutoEscape:true},B);B.append("</p></div>")}}B.append("</li></ul></div></div></div>");return D?"":B.toString()};jive.trial.quests.fewerMeetings.tips=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pageID=="create-discussion")?(A.renderLocation=="subject")?'<div class="j-tips inline js-trial-tip" data-fromq="-1261617267" data-location="subject" style="top: -70px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_title.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_title.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>':(A.renderLocation=="body")?'<div class="j-tips inline js-trial-tip" data-fromq="-1261617267" data-location="body" style="top: 120px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_content.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_content.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>':(A.renderLocation=="publishbar")?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="-1261617267" data-location="publishbar" style="bottom: -30px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_location.label"),[A.communityName]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_location.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="bottom: 35px"></span></div>':(A.renderLocation=="post")?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="-1261617267" data-location="post" style="top: -35px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_alldone.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_alldone.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>':"":(A.pageID=="view-discussion")?(A.renderLocation=="share")?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="-1261617267" data-location="share" style="top: 15px; left: -360px; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_share.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.discussion_share.text"),[]))+'</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>':(A.renderLocation=="share.modal.users")?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: -155px; left: -155px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.share.email.text"),[]))+'</h4></div><span class="j-arrow-righthook white j-qarrow" style="left: 60px; bottom: -75px;"></span></div>':(A.renderLocation=="share.modal.message")?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 50px; width: 135px; left: -235px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.share.message.text"),[]))+'</h4></div><span class="j-arrow-rightess white j-qarrow" style="right: -35px; top: 0"></span></div>':(A.renderLocation=="share.modal.submit")?'<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 90px; width: 240px; left: -55px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.share.button.text"),[]))+'</h4></div><span class="j-arrow-up white j-qarrow" style="left: 77px; top: -30px"></span></div>':(A.renderLocation=="answer")?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="-1261617267" data-location="answer" style="position: absolute; top: 30px; left: 320px; visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip j-pop-main wide"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.decision.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.decision.text1"),[]))+'</p><p><span class="j-correct-btn-star j-ui-elem"></span><strong class="font-color-okay">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.decision.text2"),[]))+'</strong></p></div><span class="rightArrow pointer" style="left: -9px; top: 63px;"></span></div>':(A.renderLocation=="banner")?'<div class="j-pop js-pop popover js-trial-tip" data-fromq="-1261617267" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.take5.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.take5.text1"),[]))+"</p>"+((A.nextQuestID)?'<p><strong><a href="#" data-showq="'+soy.$$escapeHtmlAttribute(A.nextQuestID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.take5.text2"),[]))+"</a></strong></p>":'<p><strong><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/home")))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.take5.text3"),[]))+"</a></strong></p>")+'</div><span class="belowArrow pointer" style="left: 170px; top: -9px;"></span></div>':"":"");return C?"":B.toString()};jive.trial.quests.fewerMeetings.questComplete=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="-1261617267" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="font-color-normal j-tips wide j-pop-main"><h4 class="font-face-deco"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.completed.label"),[])),"</strong></h4>",(A.nextQuestID)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.completed.text"),[]))+'</p><p class="j-qlinks"><strong><a href="#" data-showq="'+soy.$$escapeHtmlAttribute(A.nextQuestID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.onward.link"),[]))+'</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.later.link"),[]))+"</a></strong></p>":'<p><strong><a  href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.allcompleted.link"),[]))+"</a></strong></p>",'</div><span class="belowArrow pointer" style="top: -9px; left: 235px;"></span></div>');return C?"":B.toString()};jive.trial.quests.fewerMeetings.questReadyToComplete=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips js-trial-tip" style="position: absolute; top: 25px; width: 195px; left: 50%; margin-left: -350px; visibility: visible; z-index: 10000;"><div class="d-tip j-qtip-hint font-face-deco font-color-white">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.fewer_meetings.tip.close.label"),[])),'</div><span class="j-arrow-rightess white j-qarrow" style="right: -25px; top: -20px"></span></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.trial=="undefined"){jive.trial={}}if(typeof jive.trial.quests=="undefined"){jive.trial.quests={}}if(typeof jive.trial.quests.lessEmail=="undefined"){jive.trial.quests.lessEmail={}}jive.trial.quests.lessEmail.questName=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.title"),[])));return C?"":B.toString()};jive.trial.quests.lessEmail.panelTitle=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-less-email',(A.panelData.lastViewedQuest=="1136237887")?" j-active":"",'"><a href="#" data-questname="1136237887">');jive.trial.quests.lessEmail.questName(null,B);B.append("</a></li>");return C?"":B.toString()};jive.trial.quests.lessEmail.panelContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="section clearfix collaboration"><div class="j-quest-lcol"><p class="j-vdescription">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.text"),[])),'</p><div class="j-quest-video"><div id="wistia_a26f53f98e" class="j-qvideo" style="width:570px;height:365px;" data-video-width="570" data-video-height="365">&nbsp;</div></div><div class="j-quest-completors"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.recently_completed.text"),[])),"</h4>");jive.trial.recentlyCompleted({users:A.questData.recentlyCompleted},B);B.append('</div></div><div class="j-quest-tasks ',(A.questData.stepsComplete==A.questData.steps.length)?"j-quest-complete":"",'"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.tryit.label"),[])),'</h3><div class="j-qtask-list">',(A.questData.stepsComplete==A.questData.steps.length)?'<span class="j-completed-ribbon">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.completed.label"),[]))+"</span>":"",'<ul><li class="j-qtask j-',soy.$$escapeHtmlAttribute(A.questData.steps[0].state),'" data-stepaction="',soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,"/document/create.jspa?fromQ=1136237887&qstep=0")),'"><span class="j-qtitle ',(A.questData.steps[0].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.createdoc.title"),[])),"</span>",(A.questData.steps[0].state!="completed")?'<strong class="j-qnotstarted font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[]))+'</strong><p class="j-quest-text font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.createdoc.text"),[]))+'</p><span class="j-qgobtn"></span>':'<strong class="j-qdone">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[]))+'<span class="j-donecheck"></span></strong>'+((A.questData.steps[0].completionData.documentViewBean)?'<div class="j-quest-detail"><strong class="j-quest-action">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.createdoc.complete.text"),[]))+'</strong><p class="j-quest-output"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.documentViewBean.jiveObjectURL)))+'" class="j-quest-content"><span class="'+soy.$$escapeHtmlAttribute(A.questData.steps[0].completionData.documentViewBean.jiveObjectCSS)+'"></span>'+soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.questData.steps[0].completionData.documentViewBean.subject,40))+"</a></p></div>":""),'</li><li class="j-qtask j-',soy.$$escapeHtmlAttribute(A.questData.steps[1].state),'" data-stepaction="',(A.questData.steps[0].completionData.documentViewBean)?soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.documentViewBean.jiveObjectURL+"?fromQ=1136237887&qstep=1")):"",'"><span class="j-qtitle ',(A.questData.steps[1].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.addcollab.title"),[])),"</span>");if(!A.questData.steps[1].completionData.collaborators){B.append('<strong class="j-qnotstarted font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[])),'</strong><p class="j-quest-text font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.addcollab.text"),[])),'</p><span class="j-qgobtn"></span>')}else{B.append('<strong class="j-qdone">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[])),'<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.youinvited.text"),[])),'</strong><p class="j-quest-output j-sharees font-color-meta">');jive.eae.common.groupedUsers({groupedUserList:A.questData.steps[1].completionData.collaborators,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B);B.append("</p></div>")}B.append('</li><li class="j-qtask ',(A.questData.steps[2].state=="completed")?"j-completed":"j-unavailable",'" data-stepaction="',(A.questData.steps[0].completionData.documentViewBean)?soy.$$escapeHtmlAttribute(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.documentViewBean.jiveObjectURL)):"",'"><span class="j-qtitle ',(A.questData.steps[2].state=="available")?(!A.questData.steps[2].completionData.modifierUser)?"font-color-normal":"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.edit.title"),[])),"</span>");if(!A.questData.steps[2].completionData.modifierUser){B.append('<strong class="j-qnotstarted font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[])),'</strong><p class="j-quest-text j-wait font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.edit.text"),[])),"</p>")}else{B.append('<strong class="j-qdone">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[])),'<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.edit.complete.editedby"),[])),'</strong><p class="j-quest-output font-color-meta">');jive.shared.displayutil.userDisplayNameLink(A.questData.steps[2].completionData.modifierUser,B);B.append("</p></div>")}B.append("</li></ul></div></div></div>");return C?"":B.toString()};jive.trial.quests.lessEmail.tips=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pageID=="create-document")?(A.renderLocation=="subject")?'<div class="j-tips inline js-trial-tip" data-fromq="1136237887" data-location="subject" style="top: -5px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_title.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_title.text"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':(A.renderLocation=="body")?'<div class="j-tips inline js-trial-tip" data-fromq="1136237887" data-location="body" style="top: 120px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_body.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_body.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':(A.renderLocation=="publishbar")?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="-1261617267" data-location="publishbar" style="top: 37px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.text1"),[]))+'</p><p class="font-color-j-highlight"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.text2"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':(A.renderLocation=="post")?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="1136237887" data-location="post" style="top: -9px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_alldone.label"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_alldone.text"),[]))+'</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>':"":(A.pageID=="view-document")?(A.renderLocation=="edit")?'<div class="js-pop j-tips j-pop-main js-trial-tip" data-fromq="-1261617267" data-location="edit" style="left: -220px; top: -9px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_edit.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_edit.text"),[]))+'</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>':(A.renderLocation=="collaborators")?'<div class="j-pop js-pop popover font-color-normal js-trial-tip" data-fromq="-1261617267" data-location="collaborators" style="position: absolute; top: 25px; left: 270px; visibility: visible; z-index: 100;"><div class="j-tips d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip j-pop-main"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.take5.label"),[]))+'</h4><p class="j-qtip-msg">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.take5.text1"),[]))+"</p>"+((A.nextQuestID)?'<p><a href="#" data-showq="'+soy.$$escapeHtmlAttribute(A.nextQuestID)+'"><strong class="font-color-link">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.take5.text2"),[]))+"</strong></a></p>":'<p><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/home")))+'"><strong class="font-color-link">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.take5.text3"),[]))+"</strong></a></p>")+'</div><span class="rightArrow pointer" style="left: -9px; top: 60px;"></span></div>':"":(A.pageID=="edit-document")?(A.renderLocation=="publishbar")?'<div class="j-tips inline p-bar js-trial-tip" data-fromq="1136237887" data-location="publishbar" style="top: 37px;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.label2"),[]))+'</h4><p class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.text1"),[]))+'</p><p class="font-color-j-highlight"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.text2"),[]))+'</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>':(A.renderLocation=="skip-down")?'<div class="j-tips inline js-pop js-trial-tip" data-fromq="1136237887" data-location="skip-down" style="top: 65px; left: -220px;"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.skip.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.skip.text"),[]))+'</p><span class="j-arrow-skipdown" style="left: -200px; top: 40px;"></span></div>':(A.renderLocation=="publishbar-preselect")?'<div class="j-tips inline p-bar js-pop js-trial-tip" data-fromq="1136237887" data-location="publishbar-preselect" style="bottom: 0;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.doc_location.label"),[]))+'</h4></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>':"":"");return C?"":B.toString()};jive.trial.quests.lessEmail.questComplete=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips j-pop js-pop popover js-trial-tip" data-fromq="1136237887" data-location="banner" style="position: absolute; top: 50px; width: 400px; left: 50%; margin-left: -200px; visibility: visible; z-index: 100;"><div class="j-pop-main"><h4 class="font-face-deco"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.completed.label"),[])),"</strong></h4>",(A.nextQuestID)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.completed.text"),[]))+'</p><p class="j-qlinks"><strong><a href="#" data-showq="'+soy.$$escapeHtmlAttribute(A.nextQuestID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.onward.link"),[]))+'</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.later.link"),[]))+"</a></strong></p>":'<p><strong><a href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.less_email.tip.allcompleted.link"),[]))+"</a></strong></p>",'</div><span class="belowArrow pointer" style="top: -10px; left: 195px;"></span></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.trial=="undefined"){jive.trial={}}if(typeof jive.trial.quests=="undefined"){jive.trial.quests={}}if(typeof jive.trial.quests.stayInTouch=="undefined"){jive.trial.quests.stayInTouch={}}jive.trial.quests.stayInTouch.questName=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.title"),[])));return C?"":B.toString()};jive.trial.quests.stayInTouch.panelTitle=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-stay-in-touch',(A.panelData.lastViewedQuest=="1836538113")?" j-active":"",'"><a href="#" data-questname="1836538113">');jive.trial.quests.stayInTouch.questName(null,B);B.append("</a></li>");return C?"":B.toString()};jive.trial.quests.stayInTouch.panelContent=function(A,D){var B=D||new soy.StringBuilder();B.append('<div class="section clearfix collaboration"><div class="j-quest-lcol"><p class="j-vdescription">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.text"),[])),'</p><div class="j-quest-video"><div id="wistia_9a4efbeb33" class="j-qvideo" style="width:570px;height:365px;" data-video-width="570" data-video-height="365">&nbsp;</div></div><div class="j-quest-completors"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.recently_completed.text"),[])),"</h4>");jive.trial.recentlyCompleted({users:A.questData.recentlyCompleted},B);B.append('</div></div><div class="j-quest-tasks ',(A.questData.stepsComplete==A.questData.steps.length)?"j-quest-complete":"",'"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.tryit.label"),[])),'</h3><div class="j-qtask-list">',(A.questData.stepsComplete==A.questData.steps.length)?'<span class="j-completed-ribbon">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.completed.label"),[]))+"</span>":"",'<ul><li class="j-qtask j-',soy.$$escapeHtml(A.questData.steps[0].state),'" data-stepaction="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/activity?fromQ=1836538113&qstep=0")),'"><span class="j-qtitle ',(A.questData.steps[0].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.microblogging.title"),[])),"</span>",(!A.questData.steps[0].completionData.wallEntryViewBean)?'<strong class="j-qnotstarted font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[]))+'</strong><p class="j-quest-text font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.microblogging.text"),[]))+'</p><span class="j-qgobtn"></span>':'<strong class="j-qdone">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[]))+'<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.microblogging.complete.text"),[]))+'</strong><p class="j-quest-output"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[0].completionData.wallEntryViewBean.jiveObjectURL))+'"><span class="'+soy.$$escapeHtml(A.questData.steps[0].completionData.wallEntryViewBean.jiveObjectCSS)+'"></span>'+soy.$$escapeHtml((function(H,E){var G,F;if("string"!==typeof H){return""}G=H.split("");if(G.length>E){for(F=G.length-1;F>-1;--F){if(F>E){G.length=F}else{if(" "===G[F]){G.length=F;break}}}G.push("...")}return G.join("")})(A.questData.steps[0].completionData.wallEntryViewBean.subject,40))+"</a></p></div>",'</li><li class="j-qtask j-',soy.$$escapeHtml(A.questData.steps[1].state),'" data-stepaction="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/activity?fromQ=1836538113&qstep=1")),'"><span class="j-qtitle ',(A.questData.steps[1].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.like.title"),[])),"</span>");if(!A.questData.steps[1].completionData.acclaimViewBean){B.append('<strong class="j-qnotstarted font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[])),'</strong><p class="j-quest-text font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.like.text"),[])),'</p><span class="j-qgobtn"></span>')}else{B.append('<strong class="j-qdone">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[])),'<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.like.complete.text"),[])),'</strong><p class="j-quest-output j-like-task">');var C=new soy.StringBuilder();if(!A.questData.steps[1].completionData.acclaimViewBean.likedContentOwner.anonymous){jive.shared.displayutil.userDisplayNameLink(A.questData.steps[1].completionData.acclaimViewBean.likedContentOwner,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.questData.steps[1].completionData.acclaimViewBean.likedContent},C)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.user.plural",arg0:C.toString(),noAutoEscape:true},B);B.append((A.questData.steps[1].completionData.acclaimViewBean.likedContent.hasi18nTextKey&&A.questData.steps[1].completionData.acclaimViewBean.likedContent.objectType!=801)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.questData.steps[1].completionData.acclaimViewBean.likedContent.i18nTextKey),[]))+" ":"",' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectURL),'">',(A.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectIconLink)?A.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectIconLink:'<span class="'+soy.$$escapeHtml(A.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectCSS)+'"></span>','<span class="j-item">',soy.$$escapeHtml(A.questData.steps[1].completionData.acclaimViewBean.likedContent.subject),"</span></a></p></div>")}B.append('</li><li class="j-qtask j-',soy.$$escapeHtml(A.questData.steps[2].state),'" data-stepaction="mobile_modal"><span class="j-qtitle ',(A.questData.steps[2].state=="available")?"font-color-link":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.title"),[])),"</span>",(A.questData.steps[2].state!="completed")?'<strong class="j-qnotstarted font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.notstarted.label"),[]))+'</strong><p class="j-quest-text font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.text"),[]))+'</p><span class="j-qgobtn"></span>':'<strong class="j-qdone">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.done.label"),[]))+'<span class="j-donecheck"></span></strong><div class="j-quest-detail"><p class="j-quest-text">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.complete.text"),[]))+"</p></div>","</li></ul></div></div></div>");return D?"":B.toString()};jive.trial.quests.stayInTouch.mobileModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-wide j-trial-mob-modal" id="j-trial-mob-modal"><header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.modal.title"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a class="j-modal-close-top jive-close close" href="#" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem close"></span></a><div class="jive-modal-content clearfix"><div class="j-mob-url"><h3><span class="j-theme-arrow"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.modal.description.url"),[])),'</h3><p class="j-rc5"><strong>',(A.url)?soy.$$escapeHtml(A.url):soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_absolute_url,"/")),'</strong></p></div><div class="j-mob-qr"><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.modal.description.qr"),[])),'</h3><div class="j-mob-accesscode j-mob-accesslink"><span class="qr-code" style="background-image:url(',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/__services/v2/rest/trial/qrcode.gif")),')"></span></div></div><div class="j-mob-qrnote clearfix">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.mobile.modal.whats.qr"),[])),"</div></div></div>");return C?"":B.toString()};jive.trial.quests.stayInTouch.tips=function(A,C){var B=C||new soy.StringBuilder();if(A.pageID=="all-activity"){if(A.renderLocation=="mb_body"){B.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="1836538113" data-location="mb_body" style="position: absolute; top: -120px; left: -150px; visibility: visible; z-index: 100;"><div class="j-tips d-',soy.$$escapeHtml(A.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mb.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mb.text"),[])),'</p></div><span class="aboveArrow pointer" style="bottom: -9px; left: 200px;"></span></div>')}else{if(A.renderLocation=="at_mention_btn"){B.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="1836538113" data-location="at_mention_btn" style="position: absolute; top: 140px; left: 150px; visibility: visible; z-index: 100;"><div class="j-tips wide d-',soy.$$escapeHtml(A.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mention.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mention.text0"),[])),"</p><p><em>");jive.shared.soy.i18nHelper({i18nKey:"trial.quest.stay_in_touch.tip.mention.text1",arg0:'<span class="jive-icon-med jive-icon-mention j-quest-mention">@</span>',noAutoEscape:true},B);B.append("</em></p><p><strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mention.text2"),[])),'</strong></p></div><span class="belowArrow pointer" style="left: 110px; top: -10px"></span></div>')}else{if(A.renderLocation=="banner_post_mb"){B.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="1836538113" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips j-banner-tip d-',soy.$$escapeHtml(A.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.mb_done.label"),[])),'</h4></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>')}else{if(A.renderLocation=="stream_header"){B.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="1836538113" data-location="answer" style="position: fixed; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips wide d-',soy.$$escapeHtml(A.renderLocation),'-tip j-pop-main"><h4 class="j-qtip-header font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.like.label"),[])),"</h4><p>");jive.shared.soy.i18nHelper({i18nKey:"trial.quest.stay_in_touch.tip.like.text1",arg0:'<span style="background: #e28044; color: #fff; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.like"),[]))+"</span>",noAutoEscape:true},B);B.append("</p><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.like.text2"),[])),"</p></div></div>")}else{if(A.renderLocation=="banner_post_like"){B.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="1836538113" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-',soy.$$escapeHtml(A.renderLocation),'-tip j-pop-main"><h4 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.like_done.label"),[])),'</h4></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>')}}}}}}return C?"":B.toString()};jive.trial.quests.stayInTouch.questComplete=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="1836538113" data-location="banner" style="position: absolute; top: 50px; width: 400px; left: 50%; margin-left: -200px; visibility: visible; z-index: 100;"><div class="j-quest-tip d-banner-tip j-pop-main"><h4 class="j-qtip-header font-face-deco"><strong class="font-color-new">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.completed.label"),[])),"</strong></h4>",(A.nextQuestID)?'<p class="j-qtip-body">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.completed.text"),[]))+'</p><p class="j-qtip-body j-qlinks"><strong><a href="#" data-showq="'+soy.$$escapeHtml(A.nextQuestID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.onward.link"),[]))+'</a></strong></p><p class="j-qtip-body"><strong><a href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.later.link"),[]))+"</a></strong></p>":'<p class="j-qtip-body"><strong><a href="#" id="quest-complete-close" class="js-close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.stay_in_touch.tip.allcompleted.link"),[]))+"</a></strong></p>",'</div><span class="belowArrow pointer" style="top: -9px; left: 195px;"></span></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.trial=="undefined"){jive.trial={}}if(typeof jive.trial.quests=="undefined"){jive.trial.quests={}}if(typeof jive.trial.quests.communityFeedback=="undefined"){jive.trial.quests.communityFeedback={}}jive.trial.quests.communityFeedback.tips=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pageID=="create-discussion")?(A.renderLocation=="body")?'<div class="j-qtip js-trial-tip"  data-fromq="355022612" data-location="body" style="position: absolute; top: 60px; left: -306px; visibility: visible; z-index: 100;"><div class="d-'+soy.$$escapeHtmlAttribute(A.renderLocation)+'-tip"><h4 class="j-qtip-header font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.tip.prefilled.label"),[]))+'</h4><p class="j-qtip-body font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.quest.tip.prefilled.text"),[]))+'</p></div><span class="j-arrow-e j-qarrow" style="right: -70px; top: 25px"></span></div>':"":"");return C?"":B.toString()}
;
define("jive.trial.TipHelper",["jquery"],function(a){return jive.AbstractView.extend(function(b){jive.conc.observable(this);this.init=function(c){var g=this,e=$j.deparam.querystring(),d=e.fromQ,f=e.qstep||0;g.communityName=c.communityName;if(d){g.setupPage(d,f)}};this.setupPage=function(c,e){var d=this;d.emitP("shouldSetupPage",c,e).addCallback(function(f){if(f||(c=="1136237887"&&e==1)||(c=="1421684247"&&e==0)){if(!f){d.setupPage(c,parseInt(e,10)+1)}else{if(c=="-1261617267"){if(e==0){d.fewerMeetingsStep0(c,e)}else{if(e==1){d.fewerMeetingsStep1(c)}else{if(e==2){d.fewerMeetingsStep2(c)}}}}else{if(c=="1136237887"){if(e==0){d.lessEmailStep0(c,e)}else{if(e==1&&f){d.lessEmailStep1(c,e)}else{if((e==1&&!f)||e==2){d.lessEmailStep2()}}}}else{if(c=="1836538113"){if(e==0){d.stayInTouchStep0(c)}else{if(e==1){d.stayInTouchStep1(c)}}}else{if(c=="355022612"){d.communityFeedbackTips(c)}else{if(c=="1421684247"){if(e==0){d.createSocialGroupTips(c,e)}else{if(e==1){d.uploadDocumentTips(c,e)}else{if(e==2){d.inviteTips(c,e)}}}}}}}}}}})};this.fewerMeetingsStep0=function(d,f){var e=this;if($j("#jive-compose-title").length){var g="create-discussion";$j("body").addClass("j-quest-active");var c=$j("#create-discussion");c.append('<input type="hidden" name="fromQuest" value="'+d+'" />');c.append('<input type="hidden" name="qstep" value="'+f+'" />');c.append('<input type="hidden" name="markAsQuestion" value="true" />');$j("#jive-compose-title").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"body"})));$j("#js-all").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"publishbar",communityName:e.communityName})));$j("#submitButton").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"post"})));$j("#js-all").click();if($j.browser.msie&&$j.browser.version<9){$j("#js-all").change()}}};this.fewerMeetingsStep1=function(c){var d=this;if($j("ul.j-social-actions").length){var e="view-discussion";$j("ul.j-social-actions").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share"})));jive.dispatcher.listen("trial.share.modal.loaded",function(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#share-users").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.users"})));$j("#jive-send-content-not-message").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.message"})));$j("#share-content-submit").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.submit"})))});jive.dispatcher.listen("trial.share.created",function(){d.closeTip(c);d.emit("clearActiveQuest");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].id+"";break}}var k=$j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"banner",nextQuestID:f}));$j("#jive-trial-banner").after(k);$j("#jive-trial-banner").one("click",function(){$j("div.js-trial-tip").remove()})})})}};this.fewerMeetingsStep2=function(){if($j("div.jive-thread-reply-btn-helpful").length){var c="view-discussion";$j("div.jive-thread-reply-btn-helpful").first().after($j(jive.trial.quests.fewerMeetings.tips({pageID:c,renderLocation:"answer"})))}};this.lessEmailStep0=function(d,e){if($j("#create-document").length){var g="create-document",f=$j("#create-document");f.append('<input type="hidden" name="fromQuest" value="'+d+'" />');f.append('<input type="hidden" name="qstep" value="'+e+'" />');$j("body").addClass("j-quest-active");var c=$j("#js-people");c.click();if($j.browser.msie&&$j.browser.version<9){c.change()}$j("#jive-compose-title").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"body"})));c.before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"post"})))}};this.lessEmailStep1=function(e,f){if($j("#jive-link-edit2 a").length){var i="view-document";var d=$j("#jive-link-edit2 a");d.attr("href",d.attr("href")+"&fromQ="+e+"&qstep="+f);var h=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"edit"}));$j(h).popover({context:d,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}else{if($j("#edit-document").length){i="edit-document";$j("body").addClass("j-quest-active");var c=$j("#js-people"),g=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"skip-down"})),j=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar-preselect"}));$j("#edit-document").prepend(g);c.before(j);c.change(function(){g.remove();j.remove();c.before($j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:"create-document",renderLocation:"post"})))})}}};this.lessEmailStep2=function(){var d=this;if($j("#jive-body-main header span.jive-shared-list").length){var e="view-document";var c=$j("#jive-body-main header span.jive-shared-list");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].id+"";break}}var k=$j(jive.trial.quests.lessEmail.tips({pageID:e,renderLocation:"collaborators",nextQuestID:f}));$j("#jive-trial-banner").one("click",function(){$j("div.js-trial-tip").remove()});c.append(k)})}};this.stayInTouchStep0=function(g){var c=this,e=jive.ActivityStream.MBController.getMicrobloggingView();if(e){var h="all-activity";jive.ActivityStream.MBController.addListener("submitSuccess",function(){c.closeTip(g);jive.dispatcher.dispatch("trial.updatePercentComplete");$j("#jive-trial-banner").after($j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"banner_post_mb"})));$j("#jive-trial-banner").one("click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()})});var f=$j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"mb_body"}));$j("#statusInputs-mb-header-editor").prepend(f);var d=$j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"at_mention_btn"})).hide();$j("#status-input-actions-mb-header-editor a.jive-js-mention-button").after(d);e.addListener("focus",function(){f.hide();d.show()}).addListener("cancel",function(){f.show();d.hide()})}};this.stayInTouchStep1=function(d){var e=this;if($j("#j-activity-page .j-act-header h1").length){var f="all-activity";$j("#j-activity-page .j-act-header h1").after($j(jive.trial.quests.stayInTouch.tips({pageID:f,renderLocation:"stream_header"})));var c=$j('<style type="text/css"> a.jive-acclaim-likelink.like{ background: #e28044; color: #fff !important; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;} </style>');c.appendTo("head");jive.dispatcher.listen("trial.like.created",function(){e.closeTip(d);c.remove();e.emit("clearActiveQuest");$j("html, body").animate({scrollTop:0},"fast");$j("#jive-trial-banner").after($j(jive.trial.quests.stayInTouch.tips({pageID:f,renderLocation:"banner_post_like"})));$j("#jive-trial-banner").one("click",function(g){g.preventDefault();$j("div.js-trial-tip").remove()})})}};this.communityFeedbackTips=function(f){var e=$j("#create-discussion"),d=$j("#js-all"),c=$j("#js-publishbar-select input[type=radio]");if(e.length){var g="create-discussion";$j("body").addClass("j-quest-active");e.append('<input type="hidden" name="markAsQuestion" value="true" />');e.append('<input type="hidden" name="fromQuest" value="'+f+'" />');d.click();if($j.browser.msie&&$j.browser.version<9){d.change()}c.attr("disabled","disabled");c.each(function(){$j(this).attr("name",$j(this).attr("name")+".disabled")});d.after('<input type="hidden" name="publishBar.visibility" value="all"/>');$j("div.jive-editor-panel").prepend($j(jive.trial.quests.communityFeedback.tips({pageID:g,renderLocation:"body"})))}};this.createSocialGroupTips=function(f,g){var e=this,i;if($j("body.j-body-yourplaces").length){i="places";$j("#jive-body").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"body"})));var d=jive.app.url({path:"/create-group!input.jspa?fromQ="+f+"&qstep=0"});$j("#js-teamwork-create-group-link").attr("href",d);jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}else{if($j("#jive-link-joinSocialGroup").length){i="place";var j=false;if(!$j(".j-bigtab-nav").length){j=true}var c=$j("#jive-link-joinSocialGroup").filter(":visible");if(c){if(c.hasClass("j-ask-join")&&j){j="ask-to-join"}else{if(j){j="join"}}c.before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"join-link","private":j})));jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}}else{if($j("#jive-socialgroup-desc").length){i="create-group";$j("body").addClass("j-quest-active");var h=$j("#jive-socialgroup-name");h.prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-name"})));$j("#jive-socialgroup-desc").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-desc"})));$j("input.j-btn-callout").before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"submit"})))}}}};this.uploadDocumentTips=function(c,d){var g=$j("#jive-link-createDocument-upload"),e,f;if($j("body.j-body-yourplaces").length){e="places";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));f.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(f);$j("#jive-trial-banner").one("click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()})}else{if(g.length){g.find("a").attr("href",g.find("a").attr("href")+"&fromQ="+c+"&qstep="+d);e="place";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"upload-link"}));f.find("a.j-navlink-highlight").attr("href",g.find("a").attr("href"));$j(f).popover({context:g,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-upload-tip",closeOnClick:false})}else{if($j("body.j-body-place").length){e="place";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));f.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(f);$j("#jive-trial-banner").one("click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()})}else{if($j(".jive-create-doc").length){e="upload";$j("body").addClass("j-quest-active");$j(".jive-create-doc").prepend($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-file"})));$j("#js-publishbar-visibility").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-place"})));$j("#submitButton").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"submit"})))}}}}};this.inviteTips=function(c,e){if($j("#jive-link-inviteToGroup a").length){var f="place";$j("#jive-link-inviteToGroup a").trigger("click");$j("div.js_lb_overlay").addClass("j-quest-active");$j("#invitees").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.users"})));$j("#jive-invite-message-content").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.message"})));$j("#jive-invite-button").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.submit"})));$j("#jive-modal-invite").on("close",function(){jive.dispatcher.dispatch("trial.updatePercentComplete")})}else{if($j("div.doc-page").length){var d=this;d.emitP("shouldSetupPage",c,e-1).addCallback(function(g){var j="view-document";if(!g){d.closeTip(c);var k=$j(jive.trial.quests.teamwork.tips({pageID:j,renderLocation:"banner"}));k.delegate("#post-upload-tip-close","click",function(l){l.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(k);$j("#jive-trial-banner").one("click",function(l){l.preventDefault();$j("div.js-trial-tip").remove()})}else{j="view-document";var h=$j("#jive-link-edit a");h.attr("href",h.attr("href")+"?fromQ="+c+"&qstep="+(e-1));var i=$j(jive.trial.quests.teamwork.tips({pageID:j,renderLocation:"edit"}));$j(i).popover({context:h,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}})}}};this.closeTip=function(e,c){var d="div.js-trial-tip[data-fromq="+e+"]";if(c){d+="[data-location="+c+"]"}var f=$j(d);if(f.length){f.each(function(){var h=$j(this);var g=h.closest("div.js-pop").length;if(g.length){g.trigger("close");g.remove()}else{h.remove()}})}}})});
;
jive.NestedRestService=jive.RestService.extend(function(a,b){a.init=function(c){b.init.call(this,c);this.parentType=c.parentType;this.parentID=c.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});
;
jive.namespace("Browse.Content");jive.Browse.Content.ItemSource=jive.RestService.extend(function(a){a.resourceType="content";a.pluralizedResourceType=a.resourceType;a.putOnUpdate=true});
;
jive.namespace("Browse.Container");jive.Browse.Container.ItemSource=jive.RestService.extend(function(a){a.resourceType="container";this.getContainerProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.setContainerProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c.propValue})};this.removeContainerProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:b})};this.getSpaceChildren=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerID+"/children";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:c})};this.getBreadcrumbBean=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/breadcrumbs";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.placepicker=="undefined"){jive.placepicker={}}jive.placepicker.containers=function(A,C){var B=C||new soy.StringBuilder();B.append('<nav class="j-nav-back"><p class="font-color-meta"><strong><span class="',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtmlAttribute(A.selectedContentType.uploadLink.iconCss):soy.$$escapeHtmlAttribute(A.selectedContentType.iconCss),' jive-icon-med"></span>',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.headingKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.headingKey),[])),'</strong>(<a href="#" class="back">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.select_different_type"),[])),'</a>)</p></nav><div role="search"><h4 class="font-color-meta">',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[])),'</h4><label for="container-filter-id" class="j-508-label">',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[])),'</label><input type="search" name="container-filter" id="container-filter-id" class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="j-places-list">');jive.placepicker.recentPlaces(A,B);B.append('</div><a href="#" class="j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.browse_places"),[])),"</a>");return C?"":B.toString()};jive.placepicker.recentPlaces=function(A,C){var B=C||new soy.StringBuilder();if(A.suggestCreatePersonalBlog){B.append('<div class="j-places-list-personal">');jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},B);B.append("</div>")}else{if(A.userContainerType&&A.userContainerID&&!A.hideUserContainer){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerTitleKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerTitleKey),[]),type:A.userContainerType,id:A.userContainerID,contentType:A.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true,upload:A.upload},B);B.append("</div>")}else{if(A.personalBlogType&&A.personalBlogID){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.personalBlogName,type:A.personalBlogType,id:A.personalBlogID,contentType:A.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true},B);B.append("</div>")}}}if(A.containers&&A.containers.length>0){B.append('<h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.recent"),[])),"</h4>");jive.placepicker.containerList(A,B)}return C?"":B.toString()};jive.placepicker.searchResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<h4 class="j-place-search-results font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.search.results"),[])),' <em>(<a href="#" class="j-clear-search">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.clear.results"),[])),"</a>)</em></h4>");jive.placepicker.containerList(A,B);return C?"":B.toString()};jive.placepicker.containerList=function(A,G){var C=G||new soy.StringBuilder();C.append((A.containerName)?'<div class="j-container-selected-space"><a href="#" class="js-parent-container j-subspace-back-link"><span class="jive-icon-sml ui-icon-triangle-1-w"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("community.list.spaces.navigate.back_to"),[]))+" "+soy.$$escapeHtml(A.containerName)+"</a></div>":"",'<ul class="j-icon-list wide">');var B=A.containers;var F=B.length;if(F>0){for(var D=0;D<F;D++){var E=B[D];jive.placepicker.containerListEntry({container:E,contentType:A.contentType,containerType:A.containerType,containerID:A.containerID,upload:A.upload,showSubspaces:A.showSubspaces},C)}}else{C.append("<li>",(A.emptyKey)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.emptyKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</li>")}C.append("</ul>");return G?"":C.toString()};jive.placepicker.containerListEntry=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.container.type==A.containerType&&A.container.id==A.containerID)?'class="current"':"",">");jive.placepicker.containerLink(soy.$$augmentData(A.container,{contentType:A.contentType,iconSize:"sml",upload:A.upload,writableByUser:A.container.prop&&A.container.prop.perms&&A.container.prop.perms.allowedToContribute&&A.container.prop.perms.allowedToMove,props:A.container.prop}),B);B.append((A.container.type==A.containerType&&A.container.id==A.containerID)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.current_place"),[]))+"</em>":"",(A.showSubspaces)?(A.container.prop&&A.container.prop.childInfo&&A.container.prop.childInfo.hasChildren)?'<a href="#" class="js-child-spaces j-subspace-view-link font-color-meta" data-objecttype="'+soy.$$escapeHtmlAttribute(A.container.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.container.id)+'"'+((A.container.prop.parentInfo)?'data-parent-objecttype="'+soy.$$escapeHtmlAttribute(A.container.prop.parentInfo.type)+'" data-parent-objectid="'+soy.$$escapeHtmlAttribute(A.container.prop.parentInfo.id)+'"':"")+' title="'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'">'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'<span class="jive-icon-sml ui-icon-triangle-1-e"></span></a>':"":"","</li>");return C?"":B.toString()};jive.placepicker.containerLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.writableByUser)?(A.contentType==14)?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/community-create!input.jspa")+"?"+encodeURIComponent("community")+"="+encodeURIComponent(A.id)))+'" data-objecttype="'+soy.$$escapeHtmlAttribute(A.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.id)+'" class="js-target-container">':'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/choose-container.jspa")+"?"+encodeURIComponent("contentType")+"="+encodeURIComponent(A.contentType)+"&"+encodeURIComponent("containerType")+"="+encodeURIComponent(A.type)+"&"+encodeURIComponent("container")+"="+encodeURIComponent(A.id)+"&"+encodeURIComponent("upload")+"="+encodeURIComponent(A.upload?"true":"false")))+'" data-objecttype="'+soy.$$escapeHtmlAttribute(A.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.id)+'" class="js-target-container">':"","<span   ",(A.writableByUser)?(A.type==600)?"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.project"),[]))+"'":(A.type==700)?"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.group"),[]))+"'":(A.type==14)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.space"),[]))+'"':"":"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.placeunavailable"),[]))+"'",' class="',(A.writableByUser)?soy.$$escapeHtmlAttribute(A.iconCss)+" jive-icon-"+((A.iconSize)?soy.$$escapeHtmlAttribute(A.iconSize):"med"):"jive-icon-sml jive-icon-place-unavailable",'" role="img"></span><span class="',(!A.writableByUser)?"jive-container-unavailable-text":"",' js-container-title" ',(!A.writableByUser)?'title="'+((A.type==2020)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.usercontainer.unavailable"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.unavailable"),[])))+'"':"",">",soy.$$escapeHtml(A.subject),"</span>",(A.props&&A.props.isVisibleToPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+'"></span>':"",(A.writableByUser)?"</a>":"",(A.caption)?' <span class="j-container-caption font-color-meta">'+soy.$$escapeHtml(A.caption)+"</span>":"");return C?"":B.toString()};jive.placepicker.browseContainers=function(H,G){var D=G||new soy.StringBuilder();D.append('<div class="j-container-browse jive-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.choose"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><div><input type="search" name="container-filter" ',(H.selectedContentType.searchPlaceholderKey)?'placeholder="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(H.selectedContentType.searchPlaceholderKey),[]))+'"':"",' class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="js-place-picker-content"><div class="j-container-browse-personal">');if(H.suggestCreatePersonalBlog){jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},D)}else{if(H.userContainer&&!H.hideUserContainer){if(H.selectedContentType.id==38){jive.placepicker.containerLink({subject:H.userContainer.subject,type:H.userContainer.type,id:H.userContainer.id,contentType:H.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(H.selectedContentType.personalContainerCaptionKey),[]),writableByUser:H.userContainer.prop&&H.userContainer.prop.perms&&H.userContainer.prop.perms.allowedToContribute&&H.userContainer.prop.perms.allowedToMove,props:H.userContainer.prop},D)}else{jive.placepicker.containerLink({subject:jive.i18n.i18nText(jive.i18n.getMsg(H.selectedContentType.personalContainerTitleKey),[]),type:H.userContainer.type,id:H.userContainer.id,contentType:H.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(H.selectedContentType.personalContainerCaptionKey),[]),writableByUser:H.userContainer.prop&&H.userContainer.prop.perms&&H.userContainer.prop.perms.allowedToContribute&&H.userContainer.prop.perms.allowedToMove,upload:H.upload,props:H.userContainer.prop},D)}}}D.append('</div><section class="j-accordion-container">');var B=H.filterGroupBean.filters;var C=B.length;for(var F=0;F<C;F++){var E=B[F];D.append((E.id=="space")?'<h4 class="j-accordion-toggle selected"><a href="#" class="js-accordion-link" data-placefilter="'+soy.$$escapeHtmlAttribute(E.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(E.description),[]))+'</a></h4><div class="j-places-list" style="display:none"></div>':"")}var I=H.filterGroupBean.filters;var J=I.length;for(var A=0;A<J;A++){var K=I[A];D.append((K.id!="space")?'<h4 class="j-accordion-toggle selected"><a href="#" class="js-accordion-link" data-placefilter="'+soy.$$escapeHtmlAttribute(K.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(K.description),[]))+'</a></h4><div class="j-places-list" style="display:none"></div>':"")}D.append("</section></div></section><div>");return G?"":D.toString()};jive.placepicker.moreContainers=function(B,G){var C=G||new soy.StringBuilder();var F=B.containers;var E=F.length;for(var A=0;A<E;A++){var D=F[A];jive.placepicker.containerListEntry({container:D,contentType:B.contentType,containerType:B.containerType,containerID:B.containerID,upload:B.upload,showSubspaces:B.showSubspaces},C)}return G?"":C.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.movecontent=="undefined"){jive.movecontent={}}jive.movecontent.imports=function(A,C){var B=C||new soy.StringBuilder();return C?"":B.toString()};jive.movecontent.successMessage=function(A,E){var C=E||new soy.StringBuilder();C.append('<div class="jive-success-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-check"></span>');var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.prevContainer},B);var D=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink(A,D);jive.shared.soy.i18nHelper({i18nKey:"content.mv.success",arg0:soy.$$escapeHtml(A.contentTypeName),arg1:B.toString(),arg2:D.toString(),noAutoEscape:"true"},C);C.append("</div></div>");return E?"":C.toString()};jive.movecontent.confirm=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-move-confirm-section"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.confirm.title"),[])),'</h2></header><a class="j-modal-close-top close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content jive-modal-content-move clearfix"><h6>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.really_move_it.text"),[A.content.objectTypeName])),'</h6><p><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.content.iconCss),' jive-icon-med" /> ',A.content.subject,"</p><h6>");if(A.targetPersonalContainer){jive.shared.soy.i18nHelper({i18nKey:"content.mv.into_ctr.text",arg0:'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(A.content.iconCss)+' jive-icon-med" /> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.personalContainerKey),[])),noAutoEscape:"true"},B)}else{B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.into_this_ctr.text"),[A.targetContainer.objectTypeName])))}B.append("</h6>",(!A.targetPersonalContainer)?'<p><img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(A.targetContainer.iconCss)+' jive-icon-med" /> '+A.targetContainer.subject+"</p>":"",(A.docWithCollaborators)?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.remove_collab.text"),[]))+"</span></p>":"",(A.restrictedSocialGroup)?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.restricted_group.text"),[]))+"</span></p>":"",'<div class="j-form-row"><button class="js-move-confirm j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.confirm.button"),[])),'</button><button class="js-move-confirm-cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</button></div></section></div>");return C?"":B.toString()}
;
jive.namespace("Move.Content");jive.Move.Content.MoveView=jive.AbstractView.extend(function(A){var C=jQuery,B=jive.Move.Content;A.init=function(){var D=this;C(document).ready(function(){C("#jive-link-move a, a#jive-link-move").click(function(E){D.emit("browse");E.preventDefault()})})};this.confirm=function(F){var D=this;var E=C(".jive-modal");var G=jive.movecontent.confirm(F);D.prevContent=E.children();D.visibleContent=D.prevContent.filter(":visible");D.visibleContent.hide();E.append(G).removeClass("j-container-browse").trigger("resize");E.find(".js-move-confirm").click(function(H){if(typeof (trackMove)!="undefined"){trackMove(F.targetContainer.subject)}D.emit("moveConfirmed",{targetContainerType:F.targetContainer.type,targetContainerID:F.targetContainer.id});H.preventDefault()});E.find(".js-move-confirm-cancel").click(function(H){E.find(".js-move-confirm-section").remove();D.visibleContent.show();E.addClass("j-container-browse").trigger("resize");H.preventDefault()});E.find(".close").click(function(H){E.find(".js-move-confirm-section").remove();H.preventDefault()});C("body").find(".js_lb_overlay").click(function(H){E.find(".js-move-confirm-section").remove();H.preventDefault()})}})
;
jive.namespace("Move.Content");jive.Move.Content.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["content",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});
;
jive.namespace("Move.Container");jive.Move.Container.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["containers",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});
;
jive.TypeaheadInput=jive.oo.Class.extend(function(b){var c=jQuery;jive.conc.observable(this);b.init=function(g,f){var d=this;f=f||{};this.element=c(g);this.minLength=f.minLength||2;this.delay=f.delay||333;this.suppressEnterKey=f.suppressEnterKey;var h=this.processKey.bind(this);if(c.browser.mozilla){this.element.keypress(function(i){h(i)})}else{this.element.keydown(function(i){h(i)})}this.element.bind("search change",h);this.element.focus(function(){d.focused=true;d.startWatch(h)});this.element.blur(function(){d.focused=false;d.stopWatch(h)});if(!("placeholder" in c("<input>")[0])){this.placeholder=this.element.attr("placeholder");this.placeheldClass=((this.element.data("placeHeld")||{}).options||{}).className}var e=this.delay;this.getDelay=c.isFunction(e)?this.delay:function(){return e};this.isClear=a(this.minLength,this.element.val())};this.val=function(d){if(this.focused&&typeof d!="undefined"){}else{if(d===""&&this.placeholder){this.element.val(this.placeholder);this.element.addClass(this.placeheldClass)}else{return this.element.val.apply(this.element,arguments)}}};b.processKey=function(g){var f=this.element.val(),d=this;if(g&&g.which=="13"&&d.suppressEnterKey){g.preventDefault()}if(f!==this.prevValue){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(function(){d.emitChange(d.element.val())},this.getDelay(f));this.prevValue=f}};b.emitChange=function(d){if(!this.isClear&&a(this.minLength,d)){this.emit("clear");this.isClear=true}else{if(d.length>=this.minLength&&!this.placeheld()){this.emit("change",d);this.isClear=false}}};function a(d,e){return c.trim(e)===""||e.length<d}b.placeheld=function(){if(this.placeholder&&this.placeheldClass){return this.element.val()===this.placeholder&&this.element.hasClass(this.placeheldClass)}else{return false}};b.startWatch=function(e){var d=this;this.stopWatch(e);this.watchTimeout=setTimeout(function(){e();d.startWatch(e)},333)};b.stopWatch=function(){clearTimeout(this.watchTimeout)}});
;
jive.namespace("Placepicker");jive.Placepicker.ContainerSearchView=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);this.init=function(d,f,e){var c=this;this.target=b(f);this.prevContent=this.target.children();this.visibleContent=this.prevContent.filter(":visible");b(d).each(function(){var g=new jive.TypeaheadInput(this);g.addListener("change",function(h){c.emitP("search",h).addCallback(function(i){if(c.searchResults){c.searchResults.remove()}c.searchResults=b(jive.placepicker.searchResults(i));c.flatFind(c.searchResults,".j-clear-search").click(function(j){c.restoreContent();g.val("");j.preventDefault()});if(c.visibleContent.size()==0){c.visibleContent=c.prevContent.filter(":visible")}c.visibleContent.hide();f.append(c.searchResults);c.resizePopover()})});g.addListener("clear",c.restoreContent.bind(c))})};this.update=function(){};a.restoreContent=function(){if(this.searchResults){this.searchResults.remove()}this.visibleContent.show();this.resizePopover()};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.resizePopover=function(){this.target.parents(".js-pop *").trigger("popover.resize",[{fade:false}])}});
;
(function(a){a.fn.endlessScroll=function(c){var f={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var c=a.extend(f,c);var d=true;var e=false;var b=0;if(c.ceaseFire.apply(this)===true){d=false}if(d===true){a(this).scroll(function(){var h=a(".endless_scroll_inner_wrap",this);if(h.length==0){a(this).wrapInner('<div class="endless_scroll_inner_wrap" />')}if(h.length>0&&(h.height()-a(this).height()<=a(this).scrollTop()+c.bottomPixels)){if((c.fireOnce==false||(c.fireOnce==true&&e!=true))){if(c.resetCounter.apply(this)===true){b=0}e=true;b++;a(c.insertAfter).after('<div id="endless_scroll_loader">'+c.loader+"</div>");if(typeof c.data=="function"){data=c.data.apply(this)}else{data=c.data}if(data!==false){a("div#endless_scroll_loader").remove();a(c.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");var g=new Array();g[0]=b;c.callback.apply(this,g);if(c.fireDelay!==false||c.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(c.fireDelay,1,function(){a(this).remove();e=false})}else{e=false}}}}})}}})(jQuery);
;
jive.namespace("Placepicker");jive.Placepicker.ContainerBrowseView=jive.AbstractView.extend(function(A){var B=jQuery;A.init=function(C){this.containerStack=new Array();C=C||{};this.filterGroup=C.filterGroup||"placePicker";this.followLinks=C.followLinks||false;this.parent=C.parent||null;this.closeOnSelect=C.closeOnSelect||false;this.hideUserContainer=C.hideUserContainer||false};this.render=function(E){var F=new jive.conc.Promise(),C=this;C.rootCommunity=E.rootCommunity;C.showRootCommunity=E.showRootCommunity;C.contentType=E.contentType;C.modal=B(jive.placepicker.browseContainers(E));C.modal.delegate(".js-target-container","click",function(J){var H=B(this).data("objecttype");var I=B(this).data("objectid");var G=$j(this).find(".js-container-title").text();C.emit("container",{targetContainerType:H,targetContainerID:I,targetContainerName:G});if(C.closeOnSelect){C.modal.trigger("close")}if(!C.followLinks){J.preventDefault()}});var D=function(){C.setupSubspaceHandlers(C.modal);var G=C.serviceArgs((C.contentType===38)?"following":"space");C.showSpinner();C.emitP("browseLoad",G).addCallback(function(I){var J=B(jive.placepicker.containerList(jQuery.extend({emptyKey:"browse.places.empty.message"},I)));C.addListToAccordionSection(C.modal.find(".j-places-list").first(),J,true);var H=C.modal.find(".j-accordion-container").accordion({create:function(L,M){B(this).find("h4 a.js-accordion-link").attr("tabindex","-1")},changestart:function(N,O){if(O.newContent.find("li").length==0){var M=O.newHeader.find(".js-accordion-link");var L=C.serviceArgs(M.data("placefilter"));C.setupAccordionSection(O.newHeader.next(),L,true)}}});var K=new jive.Placepicker.ContainerSearchView(C.modal.find("input[name=container-filter]"),C.modal.find(".js-place-picker-content"));C.proxyListener(K,"search")}).always(function(){C.hideSpinner()})};C.modal.lightbox_me({closeSelector:".close",destroyOnClose:true,onLoad:D,showOverlay:true,closeFocusSelector:"#js-publishbar-place-browse",parentLightbox:B(C.parent).closest(".jive-modal:visible")});return F};this.close=function(){if(this.modal){this.modal.trigger("close")}};A.setupAccordionSection=function(D,G,I){var C=this;var F=C.isSpacesSection(G.filterID);var E=C.isFollowingSection(G.filterID);if(F){G=C.setupSpaceArgs(G);D.data("containerType",G.containerType);D.data("containerID",G.containerID);if(C.isRootCommunity(G)){var H=C.rootCommunityList();return C.addListToAccordionSection(D,H,I)}}var J=null;if(E){J="browse.places.empty.message"}C.showSpinner(D);C.emitP("browseLoad",G).addCallback(function(L){C.hideSpinner(D);if(F){if(C.isRootCommunityChildren(G)&&!C.showRootCommunity){L.containerName=null}}var K=B(jive.placepicker.containerList(jQuery.extend({showSubspaces:F,emptyKey:J},L)));return C.addListToAccordionSection(D,K,I)})};A.addScroller=function(D){var C=this;D.endlessScroll({fireDelay:false,callback:function(){var I=B(this).find("li").size();if(I%20==0){var G=B(this).prev().find("a");var F=G.data("placefilter");var H=C.serviceArgs(F,I);var E=B(this).data("containerID");var J=B(this).data("containerType");if(E>-1){H=B.extend({containerType:J,containerID:E},H)}C.emitP("browseLoad",H).addCallback(function(L){var K=B(jive.placepicker.moreContainers(B.extend({showSubspaces:C.isSpacesSection(F)},L)));D.find("ul").append(K)})}}})};A.setupSubspaceHandlers=function(D){var C=this;C.containerStack.push({containerType:C.rootCommunity.type,containerID:-1});D.delegate(".js-child-spaces","click",function(H){var G=B(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var E=G.data("placefilter");var F=B.extend({containerType:B(this).data("objecttype"),containerID:B(this).data("objectid")},C.serviceArgs(E));C.containerStack.push({containerType:B(this).data("parent-objecttype"),containerID:B(this).data("parent-objectid")});C.setupAccordionSection(B(this).closest(".j-places-list"),F,false);H.preventDefault()});D.delegate(".js-parent-container","click",function(H){var G=B(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var E=G.data("placefilter");var J=C.containerStack.pop();if(C.isRootCommunity(J)){var I=C.rootCommunityList();C.addListToAccordionSection(B(this).closest(".j-places-list"),I,false)}else{var F=B.extend({containerType:J.containerType,containerID:J.containerID},C.serviceArgs(E));C.setupAccordionSection(B(this).closest(".j-places-list"),F,false)}H.preventDefault()})};A.flatFind=function(D,C){return D.find("*").andSelf().filter(C)};A.isSpacesSection=function(C){return C=="space"};A.isFollowingSection=function(C){return C=="following"};A.isRootCommunityChildren=function(D){var C=this;return D.containerType==C.rootCommunity.type&&D.containerID==C.rootCommunity.id};A.isRootCommunity=function(D){var C=this;return D.containerType==C.rootCommunity.type&&D.containerID==-1};A.setupSpaceArgs=function(D){var C=this;if(!D.containerType&&!D.containerID){if(C.showRootCommunity){D.containerType=C.rootCommunity.type;D.containerID=-1}else{D.containerType=C.rootCommunity.type;D.containerID=C.rootCommunity.id}}return D};A.addListToAccordionSection=function(D,E,F){var C=this;D.html(E);D.show();if(F){C.addScroller(D)}};A.serviceArgs=function(D,F){var C=this;var E=C.isSpacesSection(D)?"spaceOrder":"subject";return{filterGroupID:C.filterGroup,filterID:D,start:F?F:0,sortKey:E,numResults:20}};A.rootCommunityList=function(){var C=this;return B(jive.placepicker.containerList({showSubspaces:true,containers:[C.rootCommunity],contentType:C.contentType,containerType:-1,containerID:-1}))};A.createSpinner=function(C){this.$spinner=B(jive.shared.soy.loading());if(C){C.append(this.$spinner)}};A.destroySpinner=function(C){if(this.$spinner){this.$spinner.remove()}}})
;
jive.namespace("Placepicker");jive.Placepicker.BrowseContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/containers")}});
;
jive.namespace("Placepicker");jive.Placepicker.SearchContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")}});
;
jive.namespace("Placepicker");jive.Placepicker.PlacePickerSource=jive.RestService.extend(function(a,b){a.resourceType="placepicker";a.init=function(d,c){c=c||{};b.init.call(this,c);$j.extend(this.defaultParams,{containerType:c.containerType,containerID:c.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/placepicker/"+d)}});
;
jive.namespace("Placepicker");jive.Placepicker.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(c){var b=this;this.pickerContext=c.pickerContext||"create";this.objectType=c.objectType;this.objectID=c.objectID||-1;this.upload=c.upload;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.filterGroup=c.filterGroup;this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.filterByContainer=c.filterByContainer||false;this.hideUserContainer=c.hideUserContainer||false;this.fromQuest=c.fromQuest;this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource(this.pickerContext,{containerType:this.containerType,containerID:this.containerID});this.containerBrowseView=new jive.Placepicker.ContainerBrowseView({filterGroup:this.filterGroup,parent:this.parent,followLinks:this.followLinks,closeOnSelect:this.closeOnSelect,hideUserContainer:this.hideUserContainer});this.containerBrowseView.addListener("browseLoad",function(d,f){var e=jQuery.extend({contentType:b.objectType,contentID:b.objectID},d);if(b.filterByContainer){e=jQuery.extend({},{containerType:b.containerType,containerID:b.containerID},e)}b.browseContainers.findAll(e).addCallback(function(g){f.emitSuccess({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload,containers:g.items,containerName:g.containerName,parentName:g.parentName})})});this.containerBrowseView.addListener("search",function(d,e){b.containers.findAll({query:d,contentType:b.objectType,contentID:b.objectID}).addCallback(function(f){e.emitSuccess(jQuery.extend({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload},f))})});this.containerBrowseView.addListener("container",function(d){b.emit("container",d)})};this.showPicker=function(){var b=this;b.placePicker.findAll({contentType:b.objectType,contentID:b.objectID}).addCallback(function(c){b.containerBrowseView.render(jQuery.extend({contentID:b.contentID,contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,hideUserContainer:b.hideUserContainer,selectedContentType:{id:b.objectType,personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey}},c))})}});
;
jive.namespace("Move.Content");jive.Move.Content.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.containerType=c.containerType;this.containerID=c.containerID;this.isContainer=c.isContainer||false;this.contentCapabilitiesSource=new jive.Move.Content.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.containerCapabilitiesSource=new jive.Move.Container.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.contentSource=new jive.Browse.Content.ItemSource();this.containerSource=new jive.Browse.Container.ItemSource();this.moveView=new jive.Move.Content.MoveView();this.placePicker=new jive.Placepicker.Main($j.extend({pickerContext:"move"},c));this.moveView.addListener("browse",function(d){b.placePicker.showPicker()});this.moveView.addListener("moveConfirmed",function(d){if(b.isContainer){b.handleConfirmation(b.containerSource,d)}else{b.handleConfirmation(b.contentSource,d)}});this.placePicker.addListener("container",function(d,e){if(b.isContainer){b.handleContainerSelected(b.containerCapabilitiesSource,d)}else{b.handleContainerSelected(b.contentCapabilitiesSource,d)}})};a.handleConfirmation=function(d,c){var b=this;d.save({id:b.objectType+"/"+b.objectID,objectType:c.targetContainerType,objectID:c.targetContainerID}).addCallback(function(e){window.location=jive.app.url({path:e.link+"?prevContainerType="+b.containerType+"&prevContainerID="+b.containerID})})};a.handleContainerSelected=function(d,c){var b=this;d.findAll({containerType:c.targetContainerType,containerID:c.targetContainerID}).addCallback(function(e){b.moveView.confirm(e)})}});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.ThreadToDocView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Move.Content;a.init=function(){var d=this;c(document).ready(function(){c("#jive-link-wiki a").click(function(e){d.emit("browse");e.preventDefault()})})};this.maxMessagesExceeded=function(e){var d=this;if(confirm(jive.threadtodoc.maxMessagesExceeded())){d.emit("confirm",e)}}});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.ThreadToDocSource=jive.RestService.extend(function(a){a.resourceType="threadconversion"});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.maxMessages=c.maxMessages;this.threadMessageCount=c.threadMessageCount;this.threadToDocView=new jive.ThreadToDoc.ThreadToDocView();this.threadToDocView.addListener("browse",function(e){if(b.threadMessageCount>b.maxMessages){b.threadToDocView.maxMessagesExceeded(e)}else{var d=new jive.ThreadToDoc.ThreadToDocSource();d.save({threadID:b.objectID,containerType:b.containerType,containerID:b.containerID}).addCallback(function(f){window.location=f})}})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.threadtodoc=="undefined"){jive.threadtodoc={}}jive.threadtodoc.imports=function(A,C){var B=C||new soy.StringBuilder();return C?"":B.toString()};jive.threadtodoc.maxMessagesExceeded=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.confirm_convert.text"),[])));return C?"":B.toString()}
;
jive.namespace("Modalizer");jive.Modalizer.ModalView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Modalizer;a.init=function(h){var e=this,f,g={};if(h.width&&h.width.match(/^(narrow|medium|wide)$/i)){f="jive-modal-"+h.width}else{if(h.width){g.width=h.width}else{f="jive-modal-medium"}}var d=function(j){var i=c(this).attr("href")||c(this).find("a:first").attr("href");if(i){e.emitP("launch",i).addCallback(function(p){var o=c("<div/>",{"class":"jive-modal j-modal"+(f?" "+f:""),id:"js-modalized"}).css(g);var n=e.separateScripts(p);var m=e.shiv(n[0]);var k=n[1];var l=!c.browser.msie||parseInt(c.browser.version,10)>8;l&&o.html(m);o.lightbox_me({destroyOnClose:true,closeFocusSelector:h.triggers?h.triggers.join(", "):h.liveTriggers.join(", "),onClose:h.onClose,onLoad:function(){if(!l){o.html(m);k()}}});if(l){k()}})}else{alert("No valid URL found to modalize")}j.preventDefault()};c(document).ready(function(){if(h.triggers){c.each(h.triggers,function(){c(""+this).click(d)})}if(h.liveTriggers){c.each(h.liveTriggers,function(){c(""+this).live("click",d)})}})}});
;
jive.namespace("Modalizer");jive.Modalizer.ModalSource=jive.oo.Class.extend(function(a){this.getConfirmation=function(b,c){$j.ajax({url:b,type:"GET",dataType:"html",success:function(d){c(d)},error:function(){alert("failed..")}})}});
;
jive.namespace("Modalizer");jive.Modalizer.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.modalView=new jive.Modalizer.ModalView(c);this.modalSource=jive.Modalizer.ModalSource();this.modalView.addListener("launch",function(d,e){b.modalSource.getConfirmation(d,function(f){e.emitSuccess(f)})})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.modalizer=="undefined"){jive.modalizer={}}jive.modalizer.foo=function(A,C){var B=C||new soy.StringBuilder();return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.countLabel(A,B);B.append("<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button"');jive.eae.acclaim.labelledBy__Ce4(A,B);B.append("</a>");return C?"":B.toString()};jive.eae.acclaim.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.acclaim=="undefined"){jive.soy.acclaim={}}jive.soy.acclaim.renderAcclaimModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(A.youID),'" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ',(A.activityType=="bookmark")?'class="j-modal-bookmark-header"':"",">",(A.activityType=="like")?'<span class="jive-icon-med jive-icon-like"></span>':"",(A.activityType=="bookmark")?'<div class="jive-bookmark-ribbon j-ui-elem"></div>':"");jive.shared.soy.getCountTextByType({count:A.totalCount,type:A.activityType,bidirectionalGraph:A.bidirectionalGraph},B);B.append('</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section  class="jive-modal-content clearfix">',(!A.guest)?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+((A.bidirectionalGraph)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.filter.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.connections.filter.label"),[])))+"</label>"+((A.activityType=="bookmark")?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.sidebar.filter.notes"),[]))+"</label>":"")+"</nav>":"");jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},B);jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,id:"modal-liked-friends",classNames:"liked-friends-list js-friends-list",show:false},B);if(A.activityType=="bookmark"){jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},B);jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},B)}B.append("</section></div>");return C?"":B.toString()};jive.soy.acclaim.renderUserList=function(A,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var F=A.users;var B=F.length;if(B>0){for(var D=0;D<B;D++){var E=F[D];jive.soy.acclaim.displayUserRow({activityType:A.activityType,user:E,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},C)}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">',(A.activityType=="bookmark")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.bookmarks"),[])):(A.activityType=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.likes"),[])):(A.activityType=="follow")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.follow"),[])):(A.activityType=="connections")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.connections"),[])):(A.activityType=="membership")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.membership"),[])):"","</p></td></tr>")}C.append("</tbody></table>");return G?"":C.toString()};jive.soy.acclaim.renderUserNotesList=function(A,G){var D=G||new soy.StringBuilder();D.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var C=A.users;var B=C.length;if(B>0){for(var E=0;E<B;E++){var F=C[E];if(F.prop.bookmarknotes){jive.soy.acclaim.displayUserRow({activityType:A.activityType,user:F,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},D)}}}else{D.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>')}D.append("</tbody></table>");return G?"":D.toString()};jive.soy.acclaim.displayYou=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(encodeURIComponent(A.username))},B);B.append('" data-userid="',soy.$$escapeHtml(A.ID),'" class="jiveTT-hover-user">',soy.$$escapeHtml(A.i18n.acclaimLikedYou),"</a>");return C?"":B.toString()};jive.soy.acclaim.displayUserRow=function(A,C){var B=C||new soy.StringBuilder();if(!A.onlyFriends||A.onlyFriends&&A.currentUserID!=A.user.id&&A.user.prop.connections.targetUserACurrentFriend){if(A.onlyNotes&&A.user.prop.hasBookmarknotes||!A.onlyNotes){B.append('<tr data-user-id="',soy.$$escapeHtml(A.user.id),'">');if(!A.onlyNotes){B.append('<td class="j-td-avatar ',(A.user.prop.hasBookmarknotes)?"j-td-topalign":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35,currentUserPartner:A.currentUserPartner}),B);B.append("</td>")}B.append('<td class="j-td-name">');if(A.currentUserID==A.user.id){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])}),B)}else{jive.shared.displayutil.userDisplayNameLink(A.user,B)}B.append((!A.onlyNotes)?"<!-- TODO: show truncated version of the notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""):"<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""),"</td>");if(A.activityType!="bookmark"){if(!A.onlyNotes){B.append('<td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){if(A.user.id!=A.currentUserID&&A.user.visible){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"bookmarked-user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}}B.append("</td>")}}B.append("</tr>")}}return C?"":B.toString()};jive.soy.acclaim.privateBookmarkNotification=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.privateBookmarks"),[])),"</td></tr>");return C?"":B.toString()}
;
jive.namespace("Activity.Info");jive.Activity.Info.ActivityInfoView=jive.AbstractView.extend(function(a){var c=jQuery;function b(d){return d==="bookmark"}this.init=function(e){var d=this;this.$modal=null;this.pageSize=e.pageSize;this.soyParams={};this.renderModal=function(f){return $j(jive.soy.acclaim.renderAcclaimModal(f))};this.handleFollow=function(h){if(this.$modal){var g=this.$modal.find("table.js-everyone-list, table.js-friends-list"),f="tr[data-user-id="+h.id+"]";if(!g.eq(1).find(f).length){g.eq(0).find(f).clone().prependTo(g.eq(1).find("tbody"))}}};jive.switchboard.addListener("follow.user.complete",this.handleFollow.bind(this))};this.showUsers=function(d,i){var e=this,g={centered:true,destroyOnClose:true,closeFocusSelector:i.context,onClose:function(){$j(".js-pop").remove()}};this.soyParams=a.buildSoyParams(d,i);this.$modal&&this.$modal.remove();var f=this.renderModal(this.soyParams);if(b(d.activityType)){var h=jive.soy.acclaim.privateBookmarkNotification();f.find("table.js-everyone-list tbody").each(function(){$j(this).append(h)})}this.$modal=f.lightbox_me(g);this.$modal.find("#jive-view-picker input:checkbox").click(function(){var j=$j("#jive-view-picker input:checked");var k=0;if(j.length==1){k=j.val()}else{if(j.length==2){k=3}}e.$modal.find("table").hide();e.$modal.find("table").eq(k).show()});this.$modal.find(".jive-modal-content").endlessScroll({fireDelay:false,callback:function(j){if(e.soyParams.moreResults){e.emitP("loadUsersFromIndex",i,e.pageSize*j).addCallback(function(k){e.soyParams.moreResults=k.moreResults;e.appendUsers(k)})}}})};this.appendUsers=function(e){var j=e&&e.items?e.items:[];if(j.length>0){this.$modal.find(".j-js-private-bookmark-notification").remove();var d=this.$modal.find(".jive-modal-content tbody:visible");var g=d.parent().attr("id");var h=this.renderModal($j.extend({},this.soyParams,{users:j}));var f=h.find("table#"+g+" tr");d.append(f.clone());if(b(this.soyParams.activityType)){var i=jive.soy.acclaim.privateBookmarkNotification();d.append(i)}}};a.buildSoyParams=function(d,e){return{activityType:e.activityType,bidirectionalGraph:d.bidirectionalGraph,currentUserID:d.currentUserID,currentUserPartner:d.currentUserPartner,moreResults:d.moreResults,objectID:e.objectID,objectType:e.objectType,totalCount:d.totalCount,users:d.items,youID:e.youID||d.currentUserID,youPartner:e.youPartner||d.currentUserPartner}}});
;
jive.namespace("Activity");jive.Activity.ItemSource=jive.RestService.extend(function(a){a.resourceType="activity";a.pluralizedResourceType=a.resourceType;this.getContentActivityUsers=function(d,e,c){var b={cache:false,data:{count:c,start:e},url:[this.RESOURCE_ENDPOINT,"users",d.activityType,d.objectType,d.objectID].join("/")};return this.commonAjaxRequest(new jive.conc.Promise(),"GET",b)}});
;
jive.namespace("Activity.Info");jive.Activity.Info.Main=jive.oo.Class.extend(function(a){this.init=function(){this.pageSize=20;this.source=new jive.Activity.ItemSource();this.view=new jive.Activity.Info.ActivityInfoView({pageSize:this.pageSize});var b=this;this.view.addListener("loadUsersFromIndex",function(e,d,c){b.source.getContentActivityUsers(e,d,b.pageSize).addCallback(function(f){c.emitSuccess(f)})})};this.showUsers=function(e,d){var b=this.view,c=new jive.conc.Promise();this.source.getContentActivityUsers(e,d,this.pageSize).addCallback(function(f){b.showUsers(f,e);c.emitSuccess($j.extend({totalCount:f.totalCount},e))}).addErrback(function(){c.emitError()});return c}});
;
if(!jive.acclaim){jive.acclaim=(function(c){var b=jive.conc.observable({}),a=new jive.Activity.Info.Main(),d={showBookmarks:"bookmark",showChildren:"children",showConnections:"connections",showFollowers:"follow",showLikes:"like",showMembers:"membership"};jive.dispatcher.listen(Object.keys(d),function(f,e){f=c.extend({activityType:d[e]},f);delete f.count;delete f.command;var g=c.extend({objectID:f.objectId,context:this},f);delete g.objectId;b.emit("beforeFetch",f);a.showUsers(g,0).addCallback(function(h){b.emit("afterFetch",c.extend({totalCount:h.totalCount},f))}).addErrback(function(){b.emit("afterFetch",f)})});return b})(jQuery)};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.publishbar=="undefined"){jive.publishbar={}}jive.publishbar.main=function(A,C){var B=C||new soy.StringBuilder();if(A.visibilityOptions){B.append('<div class="j-publishbar" role="application"><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.post.post_new_thread.place.header"),[])),'</h3><section id="js-publishbar-visibility" class="j-publish-group j-rc5">');jive.publishbar.visibilityOptions(soy.$$augmentData(A,{isPartner:A.viewingUserPartner}),B);B.append('<span id="js-publishbar-loading"></span></section><section id="js-publishbar-organize">');jive.publishbar.organize(A.organizeBean,B);B.append('</section><section id="js-publishbar-collaboration" class="j-publishbar-collaboration" ',(!A.optionsBean.showOptionsLink)?'style="display: none;"':"",">");jive.publishbar.collaborationOptions(A.optionsBean,B);B.append("</section></div>")}else{if(A.creator){B.append('<input type="hidden" name="publishBar.container.objectType" value="',soy.$$escapeHtml(A.visibilityBean.placeItemBean.type),'"/><input type="hidden" name="publishBar.container.objectID" value="',soy.$$escapeHtml(A.visibilityBean.placeItemBean.id),'"/><input type="hidden" name="publishBar.visibility" value="',soy.$$escapeHtml(A.visibilityBean.visibility),'"/>')}}jive.shared.soy.resourceInlineJs({code:"$j(document).ready(function() {jive.global.communityFeatureVisible = "+((A.communityFeatureVisible)?"true":"false")+"; var jivePublishBar = new jive.PublishBar.Main({objectType: "+soy.$$escapeJsString(A.objectType)+","+((A.objectDescriptor)?"objectDescriptor:"+soy.$$escapeJsString(A.objectDescriptor)+",":"")+"initData: {visibilityBean: "+((A.visibilityBean)?JSON.stringify(A.visibilityBean).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):"{}")+", organizeBean: "+((A.organizeBean)?JSON.stringify(A.organizeBean).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):"{}")+", optionsBean: "+((A.optionsBean)?JSON.stringify(A.optionsBean).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):"{}")+"}});});"},B);return C?"":B.toString()};jive.publishbar.visibility=function(A,C){var B=C||new soy.StringBuilder();B.append((A.showVisibility)?'<span id="js-visibility-'+soy.$$escapeHtml(A.visibility)+'" class="js-visibility-option">'+((A.placeVisibility)?'<span class="j-publish-input-row"><input type="text" id="js-publishbar-place-input" autocomplete="off" role="combobox"'+((A.communityFeatureVisible)?'placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.place.holder"),[]))+'"':'placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.group.holder"),[]))+'"')+'/><label for="js-publishbar-place-input" class="j-508-label">'+((A.communityFeatureVisible)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.place.holder"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.group.holder"),[])))+'</label><a href="#trigger_modal" id="js-publishbar-place-browse">'+((A.communityFeatureVisible)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.place.browse"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.group.browse"),[])))+'</a></span><div id="js-publishbar-place-results" class="j-pop j-autocomplete" style="display: none;"></div>':(A.peopleVisibility)?'<span><label for="js-publishbar-users" class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.people.holder"),[]))+'</label><input type="text" id="js-publishbar-users" name="publishBar.users" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox" placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.people.holder"),[]))+'" /></span>':(A.allVisibility&&A.personalBlog)?(A.personalBlog.id>0)?soy.$$escapeHtml(A.personalBlog.name):'<span id="js-publishbar-createblog-default">'+soy.$$escapeHtml(A.personalBlog.name)+'   <a href="#" class="font-color-meta" id="js-publishbar-createblog-change">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.visibility.change.blog"),[]))+'</a></span><span id="js-publishbar-createblog" style="display:none;"><label for="personal-blog-name-id" class="j-508-label"></label><input id="personal-blog-name-id" type="text" name="publishBar.personalBlogName" value="'+soy.$$escapeHtml(A.personalBlog.name)+'"/></span>':"")+"</span>":"");return C?"":B.toString()};jive.publishbar.placeView=function(A,E){var B=E||new soy.StringBuilder();B.append('<section><input type="hidden" id="j-publishbar-place-type" name="publishBar.container.objectType" value="',soy.$$escapeHtml(A.type),'" /><input type="hidden" id="j-publishbar-place-id" name="publishBar.container.objectID" value="',soy.$$escapeHtml(A.id),'"/><div class="j-place-info clearfix" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><div><div class="j-place-view-info j-js-place-view-info"><strong><span class="js-header-text">',soy.$$escapeHtml(A.subject),"</span></strong>  ",(!A.prop.currentUserIsAnonymous)?'<a href="#" id="js-publishbar-changePlace" class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.change"),[]))+"</a>"+((A.prop.parentInfo)?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.publishbar.global.in"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(A.prop.parentInfo.type)+'" target="_blank">'+soy.$$escapeHtml(A.prop.parentInfo.subject)+"</a></p>":""):(A.prop.parentInfo)?'<span class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.publishbar.global.in"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(A.prop.parentInfo.type)+'" target="_blank">'+soy.$$escapeHtml(A.prop.parentInfo.subject)+"</a></span>":"",(A.prop.socialGroupInfo||A.prop.isVisibleToPartner)?'<p class="j-browse-content-location font-color-meta-light">'+((A.prop.socialGroupInfo)?"<span class=\"jive-icon-sml role='img' jive-icon-group-"+soy.$$escapeHtml(A.prop.socialGroupInfo.typeName)+'-glyph" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.sgroup."+A.prop.socialGroupInfo.typeName),[]))+'"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.sgroup."+A.prop.socialGroupInfo.typeName),[])):"")+((A.prop.socialGroupInfo&&A.prop.isVisibleToPartner)?", ":"")+((A.prop.isVisibleToPartner)?'<span class="font-color-meta-light j-browse-external-access"> <em>('+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+")</em></span>":"")+"</p>":"",'<p class="j-publish-bar-acclaim-container j-js-publish-bar-acclaim-container">');if(A.prop.followInfo){var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:(A.prop.followInfo&&A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",type:"showfollowcount"},C);jive.eae.acclaim.count({command:"showFollowers",count:(A.prop.followInfo&&A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",objectId:A.id,objectType:A.type,text:((A.prop.followInfo&&A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0")+" "+((A.prop.followInfo.numFollowers==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.browse.info.followers.singular"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.browse.info.followers.plural"),[]))),accessibilityLinkLabel:C.toString()},B)}B.append("<br/>");if(A.prop.socialGroupInfo){var D=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:(A.prop.socialGroupInfo)?soy.$$escapeHtml(A.prop.socialGroupInfo.numMembers):"0",type:"showmembercount"},D);jive.eae.acclaim.count({command:"showMembers",count:(A.prop.socialGroupInfo)?soy.$$escapeHtml(A.prop.socialGroupInfo.numMembers):"0",objectId:A.id,objectType:A.type,text:((A.prop.socialGroupInfo&&A.prop.socialGroupInfo.numMembers)?soy.$$escapeHtml(A.prop.socialGroupInfo.numMembers):"0")+" "+((A.prop.socialGroupInfo.numMembers==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.members.singular"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.members.plural"),[]))),accessibilityLinkLabel:D.toString()},B)}B.append("</p></div></div></div></section>");return E?"":B.toString()};jive.publishbar.organize=function(A,C){var B=C||new soy.StringBuilder();if(A.showTags){jive.publishbar.tags(A,B);if(A.showCategories){jive.publishbar.tagSets(A,B)}}return C?"":B.toString()};jive.publishbar.collaborationOptions=function(A,C){var B=C||new soy.StringBuilder();if(A.showOptionsLink){B.append('<label><a href="#" id="js-publishbar-collab-link">',(A.expandAdvancedOptions)?'<span class="jive-icon-med jive-icon-arrow-down"></span>':'<span class="jive-icon-med jive-icon-arrow-right"></span>',"<strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.collaboptions.link"),[])),'</strong></a></label><ul class="j-advanced-options" id="js-publishbar-collab"',(!A.expandAdvancedOptions)?' style="display: none;"':"",' role="group" >');if(A.showAuthors){jive.publishbar.documentAuthors(A.authorsBean,B);if(A.showApprovers){jive.publishbar.documentApprovers(A.approversBean,B)}}if(A.showCommentOptions){jive.publishbar.commentOptions(A.commentOptionsBean,B)}if(A.showBlogPostPublishDate){jive.publishbar.blogPostPublishDate(A.blogPostPublishDateBean,B)}if(A.showPollOptions){jive.publishbar.pollOptions(A.pollOptionsBean,B)}B.append("</ul>")}return C?"":B.toString()};jive.publishbar.tags=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="js-publishbar-tags"><div id="jive-compose-tags-form" class="j-tag-form"><label for="js-publishbar-tag-input">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.tags.title"),[])),' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.tags.desc"),[])),'</span></label><input type="text" name="publishBar.tags" size="65" id="js-publishbar-tag-input" class="j-ui-elem j-tag-input j-autocomplete-input" value="',soy.$$escapeHtml(A.tags?A.tags:""),'" autocomplete="off" role="combobox"/></div></div>');return C?"":B.toString()};jive.publishbar.tagSets=function(H,F){var D=F||new soy.StringBuilder();if(H.placeCategories&&H.placeCategories.length>0){D.append('<div id="js-publishbar-tagsets"><input type="hidden" name="publishBar.categories" id="j-publishbar-categories" value="" /><div id="jive-compose-categories" class="clearfix" role="group"><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.post.post_new_thread.category.header"),[])),"</h3>");var K=H.placeCategories;var G=K.length;for(var J=0;J<G;J++){var C=K[J];D.append('<div><span class="jive-category-wrap"><input type="checkbox" id="j-category_',soy.$$escapeHtml(C.id),'" class="j-category-input" value="',soy.$$escapeHtml(C.id),'" ',(H.categories&&H.categories.indexOf(C.id)>-1)?'checked="checked"':"",' data-tags="');var E=C.tags;var I=E.length;for(var A=0;A<I;A++){var B=E[A];D.append(soy.$$escapeHtml(B),(!(A==I-1))?", ":"")}D.append('" role="checkbox" /><label for="j-category_',soy.$$escapeHtml(C.id),'">',soy.$$escapeHtml(C.name),"<img class='tooltip jive-icon-med jive-icon-help jiveTT-hover-suggest' alt='' src=\"",soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png")),'" style="display: none;" data-tip=\'');jive.publishbar.categoryTooltip(null,D);D.append("' /></label></span></div>")}D.append("</div></div>")}return F?"":D.toString()};jive.publishbar.categoryTooltip=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-tooltip-help notedefault snp-mouseoffset"><div id="jive-note-category-suggestion-body"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("category.create-content.suggested.text"),[])),"</strong><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("category.publishbar.related-tags.tooltip"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),'&nbsp;<strong id="jive-note-category-tags"></strong></p></div></div>');return C?"":B.toString()};jive.publishbar.documentAuthors=function(B,G){var D=G||new soy.StringBuilder();D.append('<li class="j-rc5"><input type="checkbox" name="publishBar.docAuthorsOption" id="js-publishbar-docAuthorsOption" ',(!B.defaultAuthorPolicySelected||B.forceAuthorList)?'checked="checked"':"",' role="checkbox" /><input type="hidden" name="publishBar.defaultAuthorshipPolicy" id="js-publishbar-docDefaultAuthorshipPolicy"  value="',soy.$$escapeHtml(B.defaultAuthorPolicy),'"/><label for="js-publishbar-docAuthorsOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.authorPolicyNameKey),[])),' <span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.authorPolicyDescriptionKey),[])),'</span></label><div id="js-publishbar-docAuthorDetails" class="j-advanced-details"><ul role="radiogroup">');var F=B.authorPolicyOptions;var A=F.length;for(var E=0;E<A;E++){var C=F[E];jive.publishbar.authorPolicyOption(soy.$$augmentData(C,{selected:B.authorPolicy==C.value}),D)}D.append('</ul><div id="js-publishbar-docAuthors-multiple" class="j-publishbar-people-block" ',(!B.authorPolicyMultiple)?'style="display:none;"':"",'><label for="js-publishbar-docAuthors" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.authorPolicy.multiple.selected"),[])),'</label><input type="text" id="js-publishbar-docAuthors" name="publishBar.authors" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox"/></div></div></li>');return G?"":D.toString()};jive.publishbar.documentApprovers=function(B,G){var D=G||new soy.StringBuilder();D.append('<li class="j-rc5"><div class="clearfix"><input type="checkbox" name="publishBar.docApproversOption" id="js-publishbar-docApproversOption" ',(B.approvers&&B.approvers.length>0)?'checked="checked"':"",' role="checkbox" /><label for="js-publishbar-docApproversOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.approvers.toggle"),[])),'</label></div><div id="js-publishbar-docApproversDetails" class="j-publishbar-people-block" ',(!(B.approvers&&B.approvers.length>0))?'style="display: none;"':"",">");if(B.placeApprovers&&B.placeApprovers.length>0){D.append('<div class="j-place-approvers"><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.collab.approvers.label"),[])),'</span><div class="jive-chooser-list j-result-list"><ul class="clearfix">');var F=B.placeApprovers;var C=F.length;for(var E=0;E<C;E++){var A=F[E];D.append("<li>");jive.shared.displayutil.userDisplayNameLink(A,D);D.append("</li>")}D.append('</ul></div></div><label for="js-publishbar-docApprovers">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.additional.approvers"),[])),"</label><br/>")}D.append('<input type="text" id="js-publishbar-docApprovers" name="publishBar.approvers" class="j-autocomplete-input j-user-autocomplete j-ui-elem" role="combobox"/></div></li>');return G?"":D.toString()};jive.publishbar.placeSearchResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-pop-main j-menu">');if(A.suggested&&A.containers.length==0){B.append('<div class="j-actions"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.place.suggested.results"),[])),"</strong></div>",(A.communityFeatureVisible)?'<p class="j-noresults">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.place.suggested.noresults"),[]))+"</p>":'<p class="j-noresults">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.group.suggested.noresults"),[]))+"</p>")}else{B.append('<p class="j-actions">',(A.suggested)?(A.communityFeatureVisible)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.place.suggested.results"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.group.suggested.results"),[])):(A.communityFeatureVisible)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.place.search.results"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.group.search.results"),[])),"</p>");jive.publishbar.containerList(A,B)}B.append("</div>");return C?"":B.toString()};jive.publishbar.containerList=function(B,G){var C=G||new soy.StringBuilder();C.append('<ul class="j-autocomplete-results" role="listbox">');var D=B.containers;var A=D.length;if(A>0){for(var E=0;E<A;E++){var F=D[E];C.append('<li role="option">');jive.publishbar.containerLink(soy.$$augmentData(F,{contentType:B.contentType,iconSize:"sml",upload:B.upload,writableByUser:F.prop&&F.prop.perms&&F.prop.perms.allowedToContribute&&F.prop.perms.allowedToMove,props:F.prop}),C);C.append("</li>")}}else{C.append('<li role="option">',(B.emptyKey)?'<p class="font-color-meta j-empty">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.emptyKey),[]))+"</p>":'<p class="font-color-meta j-empty">'+((B.communityFeatureVisible)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.place.search.noresults"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.group.search.noresults"),[])))+"</p>","</li>")}C.append("</ul>");return G?"":C.toString()};jive.publishbar.containerLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.writableByUser)?'<a href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" class="js-target-container'+((A.props&&A.props.isVisibleToPartner)?" j-external-access":"")+'">':'<span class="j-place-unavailable">','<span class="',(A.writableByUser)?soy.$$escapeHtml(A.iconCss)+" jive-icon-"+((A.iconSize)?soy.$$escapeHtml(A.iconSize):"med"):"jive-icon-sml jive-icon-place-unavailable",'"></span><span class="',(!A.writableByUser)?"jive-container-unavailable-text":"",' js-container-title" ',(!A.writableByUser)?'title="'+((A.type==2020)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.usercontainer.unavailable"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.unavailable"),[])))+'"':"",">",soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,85)),"</span>",(A.props&&A.props.isVisibleToPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+'"></span>':"",(A.writableByUser)?"</a>":"</span>",(A.caption)?' <span class="j-container-caption font-color-meta">'+soy.$$escapeHtml(A.caption)+"</span>":"");return C?"":B.toString()};jive.publishbar.visibilityOptions=function(A,G){var B=G||new soy.StringBuilder();B.append('<ul id="js-publishbar-select" class="j-publishbar-select" role="radiogroup">');var D=A.visibilityOptions;var E=D.length;for(var C=0;C<E;C++){var F=D[C];if(!A.isPartner||A.isPartner&&F.value!="all"){B.append('<li><input type="radio" id="js-',soy.$$escapeHtml(F.value),'" name="publishBar.visibility" value ="',soy.$$escapeHtml(F.value),'" ',(F.selected)?'checked="checked"':"",' role="radio"/><label for="js-',soy.$$escapeHtml(F.value),'">',(F.nameKey=="publishbar.option.all")?(A.communityName==null)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.option.all.no.community.name"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.nameKey),[A.communityName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.nameKey),[]))," <span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.helperKey),[])),'</span></label><div id="js-publishbar-option-',soy.$$escapeHtml(F.value),'" class="j-share-to-option" ',(!(F.selected&&A.visibilityBean.showVisibility))?'style="display: none;"':"",">");if(F.selected&&A.visibilityBean.showVisibility){jive.publishbar.visibility(soy.$$augmentData(A.visibilityBean,{communityFeatureVisible:A.communityFeatureVisible}),B)}B.append("</div>");if(F.placeVisibilityOption){B.append('<div id="js-publishbar-place-selection" class="j-share-to-option"  ',(!(F.selected&&A.visibilityBean.placeSelected))?'style="display: none;"':"",">");if(A.visibilityBean.placeSelected){jive.publishbar.placeView(A.visibilityBean.placeItemBean,B)}B.append("</div>")}B.append("</li>")}}B.append('<div id="js-publishbar-moderation-warning"  class="jive-content-moderation-box" tabindex="-1" role="alert" aria-live="assertive" aria-atomic="true"',(!A.visibilityBean.placeItemBean.prop.isModerated)?' style="display: none;" ':"",'><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[])),"</div></ul>");return G?"":B.toString()};jive.publishbar.authorPolicyOption=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.hidden)?'style="display: none;"':"",'><input type="radio" id="js-publishbar-docAuthorPolicy-',soy.$$escapeHtml(A.value),'" name="publishBar.authorPolicy" value="',soy.$$escapeHtml(A.value),'" ',(A.hidden)?'disabled="disabled" ':"",(A.selected)?'checked="checked"':"",' role="radio"/><label for="js-publishbar-docAuthorPolicy-',soy.$$escapeHtml(A.value),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</label></li>");return C?"":B.toString()};jive.publishbar.commentOptions=function(B,G){var C=G||new soy.StringBuilder();C.append('<li class="j-rc5"><input type="checkbox" name="publishBar.commentOption" id="js-publishbar-commentOption" ',(B.restrictComments)?'checked="checked"':"",' role="checkbox" /><label for="js-publishbar-commentOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.commentoptions.toggle"),[])),'</label><div id="js-publishbar-commentOptionDetails" class="j-advanced-details" ',(!B.showAdditionalCommentOptions||!B.restrictComments)?'style="display: none;"':"",'><ul role="radiogroup">');var E=B.commentStatusOptions;var D=E.length;for(var F=0;F<D;F++){var A=E[F];jive.publishbar.commentOption(soy.$$augmentData(A,{selected:B.commentStatus==A.value}),C)}C.append("</ul></div></li>");return G?"":C.toString()};jive.publishbar.commentOption=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.hidden)?'style="display: none;"':"",'><input type="radio" id="js-publishbar-',soy.$$escapeHtml(A.id),'" name="publishBar.commentStatus" value="',soy.$$escapeHtml(A.value),'"',(A.selected)?'checked="checked"':"",' role="radio" /><label for="js-publishbar-',soy.$$escapeHtml(A.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</label></li>");return C?"":B.toString()};jive.publishbar.blogPostPublishDate=function(F,D){var B=D||new soy.StringBuilder();B.append('<li class="j-rc5"><input type="checkbox" name="publishBar.blogPublishOption" id="js-publishbar-blogPublishOption" value=\'true\' ',(F.selectedDate)?'checked="checked"':"",' role="checkbox" /><label for="js-publishbar-blogPublishOption">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.blogpost.date.toggle"),[])),'</label><div id="js-publishbar-blogPublishDetails" ',(!F.selectedDate)?'style="display: none;"':"",'><span class="publishAtDateTimePicker"/>');jive.shared.form.datepicker({id:"publishDate",name:"publishBar.publishDate.selectedDate",value:"",initialize:true},B);B.append('</span><select name="publishBar.publishDate.selectedHour"><option value="12"',(12==F.selectedHour)?' selected="true"':"",">12</option>");for(var I=1;I<12;I++){B.append('<option value="',soy.$$escapeHtml(I),'"',(I==F.selectedHour)?' selected="true"':"",">",soy.$$escapeHtml(I),"</option>")}B.append('</select><select name="publishBar.publishDate.selectedMinute">');for(var E=0;E<60;E++){B.append('<option value="',soy.$$escapeHtml(E),'"',(E==F.selectedMinute)?' selected="true"':"",">",(E<10)?"0":"",soy.$$escapeHtml(E),"</option>")}B.append('</select><select name="publishBar.publishDate.selectedPeriod">');var A=F.periods;var G=A.length;for(var C=0;C<G;C++){var H=A[C];B.append('<option value="',soy.$$escapeHtml(H),'"',(H==F.selectedPeriod)?' selected="true"':"",">",soy.$$escapeHtml(H),"</option>")}B.append("</select></li>");return D?"":B.toString()};jive.publishbar.pollOptions=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-rc5"><input type="checkbox" name="publishBar.pollVoteOptions" id="js-publishbar-pollVoteOptions" value="true" ',(!A.defaultOptions)?'checked="checked"':"",' role="checkbox" /><label for="js-publishbar-pollVoteOptions">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.polls.toggle"),[])),'</label><div id="js-publishbar-pollVoteDetails" ',(A.defaultOptions)?'style="display: none;"':"",">");jive.polls.voteStart(A,B);jive.polls.voteEnd({voteEndOptions:A.voteEndsOptions,voteEndBean:A.voteEndsBean},B);B.append("</div></li>");return C?"":B.toString()};jive.publishbar.userErrors=function(H,G){var C=G||new soy.StringBuilder();if(H.disallowedUsers.length>0){C.append('<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.collab.err.no_perm.info"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"<ul>");var E=H.disallowedUsers;var A=E.length;for(var B=0;B<A;B++){var J=E[B];C.append("<li>");jive.shared.displayutil.avatar(J,C);jive.shared.displayutil.userDisplayNameLink(J,C);C.append("</li>")}C.append("</ul></div></div>")}if(H.invalidUsers.length>0){C.append('<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.collab.err.usrsNtFound.text"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"<ul>");var D=H.invalidUsers;var F=D.length;for(var K=0;K<F;K++){var I=D[K];C.append("<li>",soy.$$escapeHtml(I),"</li>")}C.append("</ul></div></div>")}return G?"":C.toString()};jive.publishbar.userWithoutPermission=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.collab.err.no_perm_user.info"),[])),"</div>");return C?"":B.toString()};jive.publishbar.listWithoutPermission=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.collab.err.no_perm_list.info"),[])),"</div>");return C?"":B.toString()};jive.publishbar.fieldRequired=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required"),[])),"</div>");return C?"":B.toString()};jive.publishbar.guestInvited=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-tips">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("publishbar.guest.invited"),[])),"</div>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.form=="undefined"){jive.shared.form={}}jive.shared.form.datepicker=function(A,C){var B=C||new soy.StringBuilder();jive.shared.form.datepickerHelper(soy.$$augmentData(A,{id:(A.id)?soy.$$escapeHtml(A.id):"js-datepicker-"+soy.$$escapeHtml(jive.soy.func.randomString())}),B);return C?"":B.toString()};jive.shared.form.datetimepicker=function(A,C){var B=C||new soy.StringBuilder();jive.shared.form.datepickerHelper(soy.$$augmentData(A,{id:(A.id)?soy.$$escapeHtml(A.id):"js-datepicker-"+soy.$$escapeHtml(jive.soy.func.randomString()),showstime:true}),B);return C?"":B.toString()};jive.shared.form.datepickerHelper=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="text" class="jive-form-textinput-variable j-form-datepicker j-form-picker',(A.className)?" "+A.className:"",'" id="',A.id,'"',(A.name)?'name="'+A.name+'"':"",(A.futureOnly)?"futureOnly=true":"",(A.value)?'data-date="'+A.value+'"':"",' /><a href="#" id="',A.id,'_button" class="j-form-datepicker-btn"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/calendar/calendar.gif"))),'" width="34" height="21" border="0" alt="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.datepicker.tooltip"),[])),'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.datepicker.tooltip"),[])),'" /></a>');if(A.futureOnly){jive.shared.soy.resourceInlineJs({code:'$j(document).ready(function() {$j("#'+soy.$$escapeHtml(A.id)+'").blur(function(event) {var date = new Date($j(this).val()); var now = new Date(); if (now.getTime()>date.getTime()) {$j(this).val(now.toLocaleDateString());}});});'},B)}if(typeof (A.initialize)=="undefined"||A.initialize){jive.shared.soy.resourceInlineJs({code:"jQuery(document).ready(function() {Zapatec.Calendar.bootstrap({inputField: '"+soy.$$escapeJsString(A.id)+"' , button: '"+soy.$$escapeJsString(A.id)+"_button'"+((A.value)?", date: new Date("+soy.$$escapeHtml(A.value)+")":"")+((A.format)?", ifFormat: '"+soy.$$escapeJsString(A.format)+"'":"")+((A.showstime)?", showsTime: true":"")+((A.futureOnly)?", dateStatusFunc : function(date, year, month, day, hours, minutes) {if (date.getTime()<(new Date().getTime()-86400000)) {return true;}}":"")+", step: 1});});"},B)}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.polls=="undefined"){jive.polls={}}jive.polls.dataPassthrough=function(A,C){var B=C||new soy.StringBuilder();jive.content.dataPassthrough(A,B);B.append('<input type="hidden" name="pollID" value="',soy.$$escapeHtml(A.bean.pollID),'" />');return C?"":B.toString()};jive.polls.pollOptions=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-form-row jive-poll-options" id="jive-poll-options"><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.choices.label"),[])),'<strong class="required">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.minmax.text"),[A.minPollOptions,A.maxPollOptions])),'</strong><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.choices.desc"),[])),'</span></label><div class="j-option-display bg-color-normal"><ol class="jive-poll-option-list"></ol><div class="jive-add-poll-option clearfix"><span class="jive-icon-med jive-icon-plus"></span><a href="javascript:void(0)" class="jive-add-poll-option-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.addchoice.link"),[])),'</a></div></div><div class="j-poll-option-message" style="display:none"></div><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.choices.hint.text"),[])),"</p></div>");return C?"":B.toString()};jive.polls.voteStart=function(C,G){var D=G||new soy.StringBuilder();D.append('<div id="jive-poll-active" class="j-form-row jive-poll-exp clearfix"><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_starts.label"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_starts.desc"),[])),"</span></label><ul>");var B=C.voteStartOptions;var F=B.length;for(var E=0;E<F;E++){var A=B[E];jive.shared.soy.render({templateName:A.optionTemplate,data:(function(){var J={};var I=[["optionBean",A.id==C.voteStartBean.id?C.voteStartBean:A],["activeBean",C.voteStartBean]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})(),failGracefully:false},D)}D.append("</ul></div>");return G?"":D.toString()};jive.polls.voteStartImmediatelyOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="activeMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_startnow.label"),[]))," </label></li>");return C?"":B.toString()};jive.polls.voteStartLaterOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="activeMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_startlater.label"),[])),' </label><span class="activeDatePicker" ',(A.optionBean.id!=A.activeBean.id)?'style="display:none;"':"",">");jive.shared.form.datepicker({id:"activeDate",name:"activeDate",value:A.optionBean.date?A.optionBean.date:"",initialize:true},B);if(A.optionBean.date){jive.shared.soy.resourceInlineJs({code:'$j(function() {$j("#activeDate").attr("value", "'+soy.$$escapeHtml(A.optionBean.date)+'");});'},B)}B.append("</span></li>");return C?"":B.toString()};jive.polls.voteEnd=function(A,G){var C=G||new soy.StringBuilder();C.append('<div id="jive-poll-end" class="j-form-row jive-poll-exp clearfix"><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_ends.label"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voting_ends.desc"),[])),"</span></label><ul>");var E=A.voteEndOptions;var B=E.length;for(var F=0;F<B;F++){var D=E[F];jive.shared.soy.render({templateName:D.optionTemplate,data:(function(){var J={};var I=[["optionBean",D.id==A.voteEndBean.id?A.voteEndBean:D],["activeBean",A.voteEndBean]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})(),failGracefully:false},C)}C.append("</ul></div>");return G?"":C.toString()};jive.polls.voteEndsNowOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.poll_ends_now.radio"),[])),'<span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.poll_ends_now.desc"),[])),"</span></label></li>");return C?"":B.toString()};jive.polls.voteEndsNeverOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.poll_never_ends.radio"),[])),"</label></li>");return C?"":B.toString()};jive.polls.voteEndsRelativeOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.endPollOnRelative.label"),[new soydata.SanitizedHtml('<input type="text" name="endsDays" id="endsDays" size="3" value="14" class="autoWidth"/>')])),"</label></li>");return C?"":B.toString()};jive.polls.voteEndsLaterOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><input type="radio" name="endsMode" value="',soy.$$escapeHtml(A.optionBean.value),'" id="',soy.$$escapeHtml(A.optionBean.id),'"',(A.optionBean.id==A.activeBean.id)?' checked="checked" ':"",' /><label for="',soy.$$escapeHtml(A.optionBean.id),'" id="endLatr">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.endPollOnSpecificDy.radio"),[])),'</label><span class="expiresDatePicker" ',(A.optionBean.id!=A.activeBean.id)?'style="display:none;"':"",">");jive.shared.form.datepicker({id:"endsDate",name:"endsDate",value:"",initialize:true},B);if(A.optionBean.date){jive.shared.soy.resourceInlineJs({code:'$j(function() {$j("#endsDate").attr("value", "'+soy.$$escapeHtml(A.optionBean.date)+'");});'},B)}B.append("</span></li>");return C?"":B.toString()}
;
jive.namespace("Filters");jive.Filters.TagSuggestions=jive.RestService.extend(function(a,b){a.resourceType="tag";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/search")};this.get=function(d,c){return this.commonAjaxRequest(new jive.conc.Promise(),"get",{data:$j.extend({query:encodeURIComponent(d)+"*"},c||{}),url:this.RESOURCE_ENDPOINT})}});
;
jive.namespace("Filters");jive.Filters.TagService=jive.RestService.extend(function(a,c){a.resourceType="tag";var b={};a.init=function(d){c.init.call(this,d);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/cloud");this.defaultParams=d};this.findAll=function(j){j=jQuery.extend({},this.defaultParams,j||{});var e=j.max,d={},f=this.cacheKey(j),h=b[f],i=new jive.conc.Promise(),g=this;if(h){i.emitSuccess(h)}else{Object.keys(j).forEach(function(k){if(k!="max"){d[k]=j[k]}});this.get(e,d).addCallback(function(l){var k=l.contentTagCloudBean;b[f]=k;i.emitSuccess(k)}).addErrback(function(){i.emitError.apply(i,arguments)})}return i};a.cacheKey=function(d){return Object.keys(d).sort().map(function(e){return e+"="+JSON.stringify(d[e])}).join("&")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.tagautocomplete=="undefined"){jive.browse.tagautocomplete={}}jive.browse.tagautocomplete.popoverContent=function(A,C){var B=C||new soy.StringBuilder();B.append("<div><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.loading"),[])),"</p></div>");return C?"":B.toString()};jive.browse.tagautocomplete.popularTags=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-tags-suggestions j-tags-suggestions j-menu"><p class="j-actions font-color-meta">',jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.typeahead"),[]),'</p><div class="j-autocomplete-nav clearfix"><span id="popular-tags-tab" data-tab-id=\'popular-tags\' class="',(!A.relatedTags&&!A.active||A.active=="popular-tags")?"j-active":"",' js-tab"><a href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.popular_tags"),[])),"</a></span>",(A.yourTags&&A.yourTags.length>0)?'<span id="your-tags-tab" data-tab-id=\'your-tags\' class="'+((A.active=="your-tags")?"j-active":"")+' js-tab"><a href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.your_tags"),[]))+"</a></span>":"",(A.relatedTags&&A.relatedTags.length>0)?'<span id="related-tags-tab" data-tab-id=\'related-tags\' class="'+((!A.active||A.active=="related-tags")?"j-active":"")+' js-tab"><a href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.related_tags"),[]))+"</a></span>":"","</div>");jive.browse.tagautocomplete.tagList({tags:A.popularTags,id:"popular-tags",hidden:(A.relatedTags||A.active)&&A.active!="popular-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_popular_tags"),[])},B);if(A.yourTags&&A.yourTags.length>0){jive.browse.tagautocomplete.tagList({tags:A.yourTags,id:"your-tags",hidden:A.active!="your-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_your_tags"),[])},B)}if(A.relatedTags&&A.relatedTags.length>0){jive.browse.tagautocomplete.tagList({tags:A.relatedTags,id:"related-tags",hidden:A.active&&A.active!="related-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_related_tags"),[])},B)}B.append("</div>");return C?"":B.toString()};jive.browse.tagautocomplete.completions=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-tags-completions j-tags-suggestions j-menu">');jive.browse.tagautocomplete.tagList(soy.$$augmentData(A,{id:"tag-completions"}),B);B.append("</div>");return C?"":B.toString()};jive.browse.tagautocomplete.tagList=function(C,G){var D=G||new soy.StringBuilder();D.append('<ul class="js-suggestions j-autocomplete-results" ',(C.id)?'id="'+C.id+'"':""," ",(C.hidden)?'style="display:none"':"",' role="listbox">');var B=C.tags;var E=B.length;if(E>0){for(var F=0;F<E;F++){var A=B[F];D.append('<li class="js-suggestion" role="option"><a href="#" data-value="',soy.$$escapeHtml(A),'" class="quick"><span class="jive-icon-tag jive-icon-med"></span>',soy.$$escapeHtml(A),"</a></li>")}}else{D.append((C.emptyMessage)?'<li class="font-color-meta" role="alert"><p class="j-empty">'+soy.$$escapeHtml(C.emptyMessage)+"</p></li>":"")}D.append("</ul>");return G?"":D.toString()};jive.browse.tagautocomplete.tagCloud=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="jive-modal j-modal jive-modal-medium"><header><h2>',(A.placeName)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tags.top_tags_in"),[A.maxCount,A.placeName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.top_tags_in_this_place"),[A.maxCount])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-modal-content-text clearfix">');if(A.availableTags.length>0){C.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.cloud_tip"),[])),'</p><ul class="jive-tagcloud-list">');var B=A.availableTags;var E=B.length;for(var F=0;F<E;F++){var D=B[F];C.append('<li class="js-tag jive-tagset-popularity',soy.$$escapeHtml(D.bucket),(A.selectedTags.indexOf(D.renderedTag)>-1)?" js-selected":"",'" data-value="',soy.$$escapeHtml(D.renderedTag),'"><a href="#" title="',(D.count!=1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tag.cloud.used_n_times.tooltip"),[D.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tag.cloud.used_1_time.tooltip"),[])),'">',soy.$$escapeHtml(D.renderedTag),"</a></li> ")}C.append('</ul><button class="close j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.done"),[])),"</button>")}else{C.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_popular_tags"),[])),"</p>")}C.append("</section></div>");return G?"":C.toString()}
;
jive.namespace("Filters");jive.Filters.TagCloud=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(d){var c=this;b(d).parent().find(".js-open-tag-cloud").click(function(e){c.emit("cloud");jive.Accessibility.pushFocus(b(this));e.preventDefault()})};this.show=function(f,d,e){var g=new jive.conc.Promise(),c=this;this.showSpinner();f.addCallback(function(h){c.hideSpinner();c.render({availableTags:h,selectedTags:d,maxCount:e});c.content.lightbox_me({destroyOnClose:true,onClose:function(){g.emitSuccess(c.getTags())}})});return g};this.render=function(c){this.content=b(jive.browse.tagautocomplete.tagCloud(c));this.content.find(".js-tag a").click(function(d){b(this).closest(".js-tag").toggleClass("js-selected");d.preventDefault()})};a.getTags=function(){return this.content.find(".js-selected").toArray().map(function(c){return b(c).data("value")})}});
;
jive.TabView=function(e,m){jive.conc.observable(this);m=m||{};var j=m.activeClass||"jive-body-tabcurrent",a=m.tabSelector||".jive-body-tab",d=m.nameFromTab||function(n){return n.attr("id").replace(/-tab$/,"")},h=this;function l(){return $j(e).find(a)}function c(){return l().filter(function(){return $j(this).hasClass(j)})}function g(){return d(l().filter(function(){return $j(this).hasClass(j)}))}function f(n){l().each(function(){var p=$j(this),o=d(p);p.toggleClass(j,o==n)});l().each(function(){var q=$j(this),p=d(q),o=$j('[id="'+p+'"]');if(p==n){o.show()}else{o.hide()}})}function k(n){h.emit("tabSwitch",n,c())}function i(n){f(n);k(n)}function b(o,p){var n=l().filter(function(){return d($j(this))==o});n.toggle(!!p)}this.switchTo=i;this.setVisibility=b;this.activeTabName=g;this.activeTab=c;$j(document).ready(function(){$j(e).delegate(a,"click",function(p){var o=$j(this),n=d(o);i(n);p.preventDefault()});if(!l().hasClass(j)){l().first().trigger("click")}})};
;
(function(d){var f={typeAheadOptions:{keystrokeWait:400},popoverOptions:{focusPopover:false,onClose:d.noop,addClass:"j-autocomplete",setRole:"listbox"},processResults:g,parseSearchString:g,displayResults:k,displayEmptySearch:false,closeOnBlur:true,minChars:2,clearButton:d()};function g(l){return l}function k(m,l){d(m).popover(l);return l}function c(m,l){var n=this;m=d.extend(true,{},f,m);m.input=l;m.popoverOptions.context=l;var p=m.popoverOptions.onClose;m.popoverOptions.onClose=function(){l.trigger("closed");return p()};m.popoverOptions.returnPopover=true;if(!m.queryFunc){if(!m.querySource||!m.querySource.get){console.log("Error: missing querySource.get in options, and no queryFunc supplied",m)}m.queryFunc=function o(){return m.querySource.get.call(m.querySource,arguments)}}if(!m.template){console.log("Error: missing template in options",m)}this.options=m;l.prop("autocomplete","off").attr("aria-autocomplete","list").attr("aria-haspopup","true");if(!l.is("[role=combobox]")){console.log("Warning: adding combobox role to input",l.parent().get(0));l.attr("role","combobox")}this.lastSearchString=null;this.currentPopover=null;m.input.typeAhead(m.typeAheadOptions).on("keystroke.suggestBox",function(){n.showPopover();n.updateClearButton()}).on("focusWaitFinished.suggestBox",function(){n.showPopover()}).on("close.suggestBox",d.proxy(n.destroyPopover,n)).on("tabChanged.suggestBox",function(){n.currentPopover.reposition()}).on("otherClick.suggestBox",function(){jive.conc.nextTick(function(){n.currentPopover.reposition()})});if(m.closeOnBlur){m.input.on("blurWaitFinished.suggestBox",function(q){m.input.trigger("close")})}if(m.clearButton.length){d(m.clearButton).on("click.suggestBox",function(){m.input.val("");m.input.trigger("keystroke")});this.updateClearButton()}}c.prototype.updateClearButton=function j(){if(this.options.clearButton.length){if(this.options.input.val()){this.options.clearButton.show()}else{this.options.clearButton.hide()}}};c.prototype.displaySuggestions=function a(p){var m=d.extend({},this.options.popoverOptions);this.destroyPopover();m=this.options.displayResults(p,m,this.currentPopover);this.currentPopover=m;var o=this.currentPopover.popOver;if(!o.is("[role=listbox]")&&o.find("[role=listbox]").length===0){console.log("Warning: adding role 'listbox' to results container");o.attr("role","listbox")}var n=this.options.input.data("typeAhead");var l=n.getSelectable();if(l.length>0&&l.select("option, [role=option]").length===0&&l.parent("[role=option]").length===0){console.log("Warning: selectable elements are not options");l.attr("role","option")}n.setSuggestElement(o)};c.prototype.showPopover=function e(){var n=this,m=this.options;var l=m.parseSearchString(m.input.val());if(l==null||l.length<m.minChars){l="";if(!m.displayEmptySearch){return}}if(this.lastSearchString!=null&&this.lastSearchString==l){if(this.isPopoverShowing()){return}}this.lastSearchString=l;m.queryFunc(l).then(function(q){if(n.lastSearchString!=l){return}if(q&&q.trim){q=q.trim()}var r=m.processResults(q,m.input.data("typeAhead"),l);if(!r){n.destroyPopover()}else{var p=m.template(r);if(p&&p.length){n.displaySuggestions(p)}else{n.destroyPopover();console.log("suggestion html empty for results",q,r)}}},function o(){console.log("failed suggestBox query for '"+l+"'",arguments)})};c.prototype.destroyPopover=function i(l){if(this.currentPopover&&this.currentPopover.closeFunc){this.currentPopover.closeFunc()}this.currentPopover=null;if(l&&l.type==="close"){l.stopPropagation()}};c.prototype.isPopoverShowing=function b(){return this.currentPopover!=null};c.prototype.teardown=function h(){var l=this.options.input;this.destroyPopover();l.data("typeAhead").teardown().off(".suggestBox").removeData("suggestBox");this.options.clearButton.off(".suggestBox")};d.fn.suggestBox=function(l){return this.each(function(){var m=d(this);if(!m.data("suggestBox")){m.data("suggestBox",new c(l,m))}})}})(jQuery);
;
jive.namespace("Filters");jive.Filters.TagAutocomplete=jive.oo.Class.extend(function(b){var e=jQuery,d=jive.Filters,f=/[\s,]+/,c=/[^\s,]+$/;var a="";jive.conc.observable(this);b.init=function(l,k){var i=this;var m={max:10,containerType:typeof(k.containerType)!="undefined"?k.containerType:(typeof(containerType)!="undefined"?containerType:"-1"),containerID:typeof(k.containerID)!="undefined"?k.containerID:(typeof(containerID)!="undefined"?containerID:"-1")};if(k.objectTypes&&k.objectTypes.length>0){m.taggableTypes=k.objectTypes}this.userID=_jive_current_user?_jive_current_user.ID:"-1";this.suggestions=new d.TagSuggestions();this.tagService=new d.TagService(m);this.tagService.suppressGenericErrorMessages();var h=null;if(this.userID!="-1"){h={filterUserID:i.userID}}function g(o){function q(t){if(t){return t.map(function(u){return u.renderedTag})}else{return[]}}function r(t){if(t){return t.tagSearchResult.map(function(u){return u.name})}else{return[]}}if(typeof o=="string"&&o.length){return i.suggestions.get(o).then(function(t){return{tags:r(t)}})}else{var n=i.getSelectedTags();var p=new jive.conc.Promise();var s=null;if(n.length>0){s={popularTags:i.tagService.findAll(),relatedTags:i.tagService.findAll({tags:n}).addCallback(i.tagPreparer(p)).addErrback(function(){p.emitSuccess([])})}}else{s={popularTags:i.tagService.findAll()}}if(h){s.yourTags=i.tagService.findAll(h)}if(o&&o.length){s.yourTags=i.tagService.findAll({tags:o})}return jive.conc.synchronize(s).then(function(t){return{relatedTags:q(t.relatedTags),popularTags:q(t.popularTags),yourTags:q(t.yourTags)}})}}function j(n){if(n.tags){return jive.browse.tagautocomplete.completions(n)}else{return jive.browse.tagautocomplete.popularTags(n)}}this.element=l=e(l).suggestBox({queryFunc:g,template:j,parseSearchString:function(o){var n=o.match(c);if(!n){return e.trim(o).split(f).filter(function(p){return !!p})}else{return n[0]}},processResults:function(o,n,p){if(o.tags){o.tags.unshift(p);o.tags=o.tags.unique()}else{var q=n.getActiveTab();if(q.length>0){o.active=q.data("tabId")}}return o},displayResults:function(o,n){var p=e(o).popover(n);new jive.TabView(p,{activeClass:"j-active",tabSelector:".js-tab"});return n},displayEmptySearch:true}).on("selectionChosen",function(q,o,p){var n=p.find("a").data("value");var r=l.val();if(r.match(c)){l.val(r.replace(c,n)+" ")}else{l.val(r+n+" ")}l.trigger("close");i.emit("change",$j(this).val().trim().split(/\s+/).join("|"))}).on("keystroke",function(q,n,p){var o=$j(this).val().trim().split(/\s+/).join("|");if(a!=o){a=o;i.emit("change",o)}}).on("focusWaitFinished",function(){l.trigger("keystroke")}).focus(function(){i.focused=true;i.emit("focus")}).blur(function(){i.focused=false;i.emit("blur")}).click(function(n){n.stopPropagation()});this.tagCloud=new d.TagCloud(l).addListener("cloud",function(){var n=i.getSelectedTags(),p={max:200},o;o=i.tagService.findAll(p);i.tagCloud.show(o,n,200).addCallback(function(q){if(n.join(" ")!=q.join(" ")){i.setSelectedTags(q)}})});this.tagService.findAll();this.tagService.findAll(h)};b.showPopularTags=function(){var k=new jive.conc.Promise(),h=new jive.conc.Promise(),j=new jive.conc.Promise(),i=this.getSelectedTags(),g=this;this.tagService.findAll().addCallback(this.tagPreparer(k));if(this.userID&&this.userID>0){this.tagService.findAll({filterUserID:this.userID}).addCallback(this.tagPreparer(h))}else{h.emitSuccess([])}if(i.length>0){this.tagService.findAll({tags:i}).addCallback(this.tagPreparer(j)).addErrback(function(){j.emitSuccess([])});g.suggestionsView.showRelatedTags(k,h,j)}else{g.suggestionsView.showRelatedTags(k,h)}};b.tagPreparer=function(g){return function(h){var i=h.map(function(j){return j.renderedTag});g.emitSuccess(i)}};b.getSelectedTags=function(){var g=this.element.val();return e.trim(g.replace(c,"")).split(f).filter(function(h){return !!h})};b.setSelectedTags=function(g){if(this.focused){this.element.blur()}this.element.val(g.join(" ")+" ");if(this.focused){this.element.focus()}this.element.trigger("keystroke")}});define("jive.Filters.TagAutocomplete",function(){return jive.Filters.TagAutocomplete});
;
(function(a){a.pluginUtils={declare:function(d,c,b){if(typeof a.fn[d]==="function"){throw new Error("A jQuery plugin named '"+d+"' already exists")}a.fn[d]=function(){var f=a.isPlainObject(arguments[0])?arguments[0]:{},g=typeof arguments[0]==="string"?arguments[0]:undefined,e=[].slice.call(arguments,1);return this.each(function(){var j=a(this),h=j.data(d);if(!h){j.data(d,(h=new c(this,f)))}var i=a.extend({},j.data(),f);delete i[d];a.each(i,function(k,l){h.options[k]=l});if(g){h[g].apply(h,e)}})};a.fn[d].Constructor=c;a.fn[d].defaults=b||{};return a.fn[d]}}})(jQuery);
;
(function(b){var c="tooltip";function a(e,d){this.options=b.extend({},b.fn[c].defaults,d||{});this.element=b(e);if(!this.element.is("[title], [data-tip]")){throw new Error("Tooltips must have either a title attribute or a data-tip attribute.")}this.enable()}a.prototype.positionTip=function(){this.element.data("tip").position({at:this.options.at,collision:this.options.collision,my:this.options.position,of:this.element,offset:this.options.offset});return this};a.prototype.show=function(){if(!this.element.data("tip")){var d=this.options.tip?b(this.options.tip):b('<p id="tooltip" />').html(this.element.attr("title")||"");d.css("visibility","hidden").appendTo("body");this.element.filter("[title]").each(function(){var e=b(this);e.data("title",e.attr("title"));e.removeAttr("title")});this.element.data("tip",d);this.positionTip();this.element.trigger(b.Event("show",{relatedTarget:d[0]}));d.css("visibility","visible").show();this.element.trigger(b.Event("shown",{relatedTarget:d[0]}))}return this};a.prototype.hide=function(){var d=b.noop;if(this.element.data("tip")){this.element.trigger(b.Event("hide",{relatedTarget:this.element.data("tip")[0]}));this.element.data("tip").remove();this.element.removeData("tip");d=this.element.trigger.bind(this.element,"hidden")}if(this.element.data("title")){this.element.attr("title",this.element.data("title")).removeData("title")}d();return this};a.prototype.enable=function(){this.element.on("mouseout."+c,this.hide.bind(this)).on("mouseover."+c,this.show.bind(this));return this};a.prototype.disable=function(){this.element.off("."+c);return this.hide()};b.pluginUtils.declare("tooltip",a,{at:"right center",collision:"flip",offset:"5 0",position:"left center",tip:""})})(jQuery);$j(function(){$j("a.tooltip").tooltip()});
;
function PublishBarTagSetSupport(A,C){var B=this;this.tagInput=$j(A);this.tagSets=[];this.suggestCategories=function(){if(this.tagSets.length>0){var D=this.tagInput.val().toLowerCase().split(/\s+/);$j(this.tagSets).each(function(){var E=this;var F=E.tags;var G=true;$j(D).each(function(H,I){if($j.trim(I)!=""){if($j.inArray(I,F)!=-1){G=false;return false}}});if(G){B.undoHighlight($j("#j-category_"+E.id))}else{B.doHighlight($j("#j-category_"+E.id))}})}};this.doHighlight=function(D){$j(D).closest("span").find("img").show();$j(D).closest("span").addClass("jive-category-highlight")};this.undoHighlight=function(D){$j(D).closest("span").removeClass("jive-category-highlight");$j(D).closest("span").find("label").find("img").hide()};this.updateTagSets=function(){var D=[];$j("#jive-compose-categories").find(".j-category-input").each(function(){var E=$j(this);if(E.is(":checked")){D.push(E.val())}});$j("#j-publishbar-categories").val(D.join(","))};$j("#jive-compose-categories").find(".j-category-input").each(function(){B.tagSets.push({id:$j(this).val(),tags:$j(this).attr("data-tags").split(",")})});$j("#jive-compose-categories").find(".j-category-input").change(function(){$j(this).toggleClass("clicked");B.updateTagSets()});this.suggestCategories();this.updateTagSets();$j("#jive-compose-categories").find(".j-category-input").each(function(){if($j(this).is(":checked")){$j(this).addClass("clicked")}});$j("#jive-compose-categories img.tooltip").tooltip().on("show",function(E){var D=$j(this).closest("span").find("input").data("tags");$j(E.relatedTarget).find("#jive-note-category-tags").html(D)})}
;
jive.namespace("PublishBar");jive.PublishBar.PlaceView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(c){var b=this;this.$input=$j(c);this.$input.suggestBox({typeAheadOptions:{itemSelector:"li:visible:has('a')"},queryFunc:function d(e){if(!e||e.trim()==""){return b.emitP("suggest")}else{return b.emitP("search",e)}},processResults:function(h,g,f){var e=!f||f.trim()=="";return $j.extend({suggested:e,communityFeatureVisible:jive.global.communityFeatureVisible},h)},template:function(e){return jive.publishbar.placeSearchResults(e)},displayEmptySearch:true,popoverOptions:{flip:false,addClass:"j-autocomplete j-placePicker"}}).on("selectionChosen",function(g,f,e){e=e.find("a");b.selectPlace(e.data("objecttype"),e.data("objectid"));b.$input.trigger("close")}).on("focusWaitFinished",function(){b.$input.trigger("keystroke")});$j("#js-publishbar-place-browse").click(function(f){b.emit("browse");f.preventDefault()})};this.selectPlace=function(c,b){this.emit("selectPlace",c,b)}});
;
jive.namespace("PublishBar");jive.PublishBar.SearchPlacesSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")}});
;
jive.namespace("PublishBar");jive.PublishBar.SuggestedContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);$j.extend(this.defaultParams,{containerType:c.containerType,containerID:c.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});
;
jive.namespace("PublishBar");jive.PublishBar.PlaceMain=jive.oo.Class.extend(function(A){jive.conc.observable(this);A.init=function(I){var D=this;var B=I.objectType||-1;var J=I.upload||false;var E=I.containerType||-1;var H=I.containerID||-1;var G=new jive.PublishBar.SuggestedContainersSource({containerType:E,containerID:H});var F=new jive.PublishBar.SearchPlacesSource();var C=new jive.PublishBar.PlaceView($j("#js-publishbar-place-input"),$j("#js-publishbar-place-results"));C.addListener("search",function(K,L){F.findAll({query:K,contentType:B,maxReturned:10}).addCallback(function(M){L.emitSuccess(M)})});C.addListener("browse",function(){var K=new jive.Placepicker.Main({pickerContext:"create",objectType:B,containerType:E,containerID:H,upload:J,closeOnSelect:true,hideUserContainer:true});K.showPicker();K.addListener("container",function(L,M){C.selectPlace(L.targetContainerType,L.targetContainerID)})});C.addListener("selectPlace",function(L,K){D.emit("selectPlace",L,K)})}})
;
jive.namespace("PublishBar");jive.PublishBar.PublishBarSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){c=c||{};b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/publishbar")}});
;
(function(){jive.localexchange=jive.localexchange||(function(){var a={};jive.conc.observable(a);return a})()})();
;
jive.namespace("PublishBar");jive.PublishBar.Main=jive.oo.Class.extend(function(A){jive.conc.observable(this);A.init=function(D){var C=this;this.objectID=D.objectDescriptor?D.objectDescriptor.id:-1;this.objectType=D.objectType||-1;var B=D.initData||{};this.publishBarSource=new jive.PublishBar.PublishBarSource();this.placeViewContainer=$j("#js-publishbar-place-selection");this.organizeContainer=$j("#js-publishbar-organize");this.collaborationContainer=$j("#js-publishbar-collaboration");this.loadingContainer=$j("#js-publishbar-loading");this.visibility=B.visibilityBean.visibility;this.invitationsEnabled=B.visibilityBean.systemInvitationsEnabled;if(this.visibility=="place"&&B.visibilityBean.placeSelected){this.containerID=B.visibilityBean.placeItemBean.id;this.containerType=B.visibilityBean.placeItemBean.type;this.originalContainer={containerID:this.containerID,containerType:this.containerType}}$j("#js-publishbar-select :radio").change(function(){C.setVisibility($j(this).val())});if(B.visibilityBean.placeSelected){this.initPlaceSelectedJavascript(B)}else{this.initVisibilityJavascript(B)}this.spinner=null;jive.acclaim.addListener("beforeFetch",A.setSpinnerVisibility.bind(this,"show"));jive.acclaim.addListener("afterFetch",A.setSpinnerVisibility.bind(this,"hide"))};A.setSpinnerVisibility=function(B){var D=$j("#js-publishbar-changePlace").closest(".j-js-place-view-info").find(".j-js-publish-bar-acclaim-container"),C={inline:true,showLabel:false,size:"small"};D.css("position","relative");if(B==="show"&&!this.spinner){this.spinner=new jive.loader.LoaderView(C);this.spinner.prependTo(D)}else{if(B==="hide"&&this.spinner){this.spinner.destroy();this.spinner=null;D.find(".j-loading-container").remove()}}};A.setVisibility=function(C){var B=this;var D=B.visibility;B.visibility=C;if(D!="place"&&C=="place"&&typeof (B.containerID)!="undefined"){return B.selectPlace(B.containerType,B.containerID)}var F=new jive.loader.LoaderView({showLabel:false,size:"small"});F.appendTo(this.loadingContainer);var E=(B.objectType<0||B.objectID<0)?"view":"edit";this.publishBarSource.get(E,{objectType:B.objectType,objectID:B.objectID,visibility:C}).addCallback(function(G){F.getContent().remove();F.destroy();B.renderVisibilityContainer(G.visibilityBean);B.renderOrganizeContainer(G.organizeBean);B.renderCollaborationContainer(G.optionsBean);B.initVisibilityJavascript(G)})};A.selectPlace=function(F,C){var B=this;var E=new jive.loader.LoaderView({showLabel:false,size:"small"});E.appendTo(this.loadingContainer);var D=(B.objectType<0||B.objectID<0)?"view":"edit";this.publishBarSource.get(D,{objectType:this.objectType,objectID:this.objectID,visibility:"place",containerType:F,containerID:C}).addCallback(function(G){if(F!=14||C!=1){B.containerType=F;B.containerID=C}E.getContent().remove();E.destroy();B.renderPlaceViewContainer(G.visibilityBean.placeItemBean);B.renderOrganizeContainer(G.organizeBean);B.renderCollaborationContainer(G.optionsBean);B.initPlaceSelectedJavascript(G)})};A.updateVisibilityFocus=function(C){var E=$j("ul#js-publishbar-select li div.j-share-to-option:visible"),B=E.siblings("label").find("input[type=radio]").attr("id"),D=C.siblings("label").find("input[type=radio]").attr("id");if(B===D){E.find(":focusable:first").focus()}};A.renderVisibilityContainer=function(D){var B=this,C=$j("ul#js-publishbar-select li div.j-share-to-option:visible");this.placeViewContainer.hide().empty();$j("ul#js-publishbar-select li div.j-share-to-option").hide().empty();if(D.showVisibility){$j("#js-publishbar-option-"+D.visibility).empty().append($j(jive.publishbar.visibility($j.extend({communityFeatureVisible:jive.global.communityFeatureVisible},D)))).show(0,function(){B.updateVisibilityFocus(C)})}$j("#js-publishbar-option-"+D.visibility).parent().find("input[name='publishBar.visibility']").focus()};A.renderPlaceViewContainer=function(D){var B=this,C=$j("ul#js-publishbar-select li div.j-share-to-option:visible");$j("ul#js-publishbar-select li div.j-share-to-option").hide().empty();this.placeViewContainer.empty().append($j(jive.publishbar.placeView(D))).show(0,function(){B.updateVisibilityFocus(C)})};A.renderOrganizeContainer=function(C){var B=this.organizeContainer.clone();this.organizeContainer.empty().append($j(jive.publishbar.organize(C)));this.transposeInputs(B,this.organizeContainer)};A.renderCollaborationContainer=function(B){if(B.showOptionsLink){var C=this.collaborationContainer.clone();this.collaborationContainer.empty().append($j(jive.publishbar.collaborationOptions(B))).show();this.transposeInputs(C,this.collaborationContainer)}else{this.collaborationContainer.empty().hide()}};A.transposeInputs=function(D,B){var C=this;$j(D).find("input").each(function(){var E=$j(this);$j(B).find("input#"+E.attr("id")).each(function(){var F=$j(this);if(E.attr("type")=="radio"){}else{C.transposeNonRadioInput(E,F)}})})};A.transposeNonRadioInput=function(D,B){if(B.prop("disabled")){}var C=B.attr("type");if(C=="checkbox"){if(!B||$j(B).closest("li").find("input").length>1){return }B.prop("checked",D.prop("checked"))}else{B.val(D.val())}};A.initVisibilityJavascript=function(C){var B=this;if(C.visibilityBean.privateVisibility){this.initPrivateVisibilityJavascript(C.optionsBean)}else{this.destroyPrivateVisibilityJavascript()}if(C.visibilityBean.placeVisibility){this.initPlaceVisibilityJavascript()}else{if(C.visibilityBean.peopleVisibility){this.initPeopleVisibilityJavascript(C.visibilityBean.users)}else{if(C.visibilityBean.allVisibility){if(C.visibilityBean.personalBlog){this.initAllVisibilityJavascript()}}}}this.initTagJavascript(-1,-1);this.initOptionsJavascript(C.optionsBean);this.manageModerationWarning(C);jive.localexchange.emit("initVisibilityJs",C)};A.initPlaceSelectedJavascript=function(C){var B=this;$j("#js-publishbar-changePlace").click(function(D){B.setVisibility("place");D.preventDefault()});this.initTagJavascript(C.visibilityBean.placeItemBean.type,C.visibilityBean.placeItemBean.id);this.initOptionsJavascript(C.optionsBean);this.manageModerationWarning(C);jive.localexchange.emit("initPlaceSelectedJs",C);B.initOmniCommunityTrackingName(C.visibilityBean.placeItemBean.type,C.visibilityBean.placeItemBean.id)};A.initPlaceVisibilityJavascript=function(){var B=this;this.jivePublishBarPlace=new jive.PublishBar.PlaceMain({objectType:this.objectType});this.jivePublishBarPlace.addListener("selectPlace",function(D,C){B.selectPlace(D,C)});$j("#js-publishbar-option-place").find("#js-publishbar-place-input").prop("required","required")};A.initPeopleVisibilityJavascript=function(B){B=B?B:[];this.peopleAutocomplete=new jive.UserPicker.Main({multiple:true,valueIsUsername:true,emailAllowed:this.invitationsEnabled,listAllowed:true,canInvitePartners:true,$input:$j("#js-publishbar-users"),startingUsers:{users:B,userlists:[]},selectionCallbacks:[this.decorateGuestUsers],userMessages:[this.getUserInviteMessage()]});$j("#js-visibility-people").find("input[name='publishBar.users']").prop("required","required")};A.initAllVisibilityJavascript=function(){$j("#js-publishbar-createblog-change").click(function(B){$j("#js-publishbar-createblog-default").hide();$j("#js-publishbar-createblog").show();$j("#js-publishbar-createblog").find("input").focus();B.preventDefault()});$j("#js-publishbar-createblog").keypress(function(B){if(B.keyCode==10||B.keyCode==13){B.preventDefault()}})};A.initPrivateVisibilityJavascript=function(B){if(B.authorsBean){$j("#js-publishbar-option-private").append('<input type="hidden" id="private-default-authorPolicy" name="publishBar.authorPolicy" value="'+B.authorsBean.authorPolicySingleValue+'"/>')}};A.destroyPrivateVisibilityJavascript=function(){$j("#js-publishbar-option-private").remove("#private-default-authorPolicy")};A.initTagJavascript=function(D,C){var B=this;this.publishBarTagSetSupport=new PublishBarTagSetSupport($j("#js-publishbar-tag-input"))};A.initOptionsJavascript=function(B){if(B.showOptionsLink){this.initCollaborationToggleJavascript()}if(B.showAuthors){this.initDocumentAuthorsJavascript(B.authorsBean)}if(B.showApprovers){this.initDocumentApproversJavascript(B.approversBean.approvers)}if(B.showCommentOptions){this.initCommentOptionsJavascript(B.commentOptionsBean)}if(B.showBlogPostPublishDate){this.initBlogPostPublishDateJavascript(B.blogPostPublishDateBean)}if(B.showPollOptions){this.initPollOptionsJavascript()}};A.initDocumentAuthorsJavascript=function(D){var G=D.authors||[];var F=[];if(this.peopleAutocomplete&&this.peopleAutocomplete.getSelectedUsersAndLists()){var C=this.peopleAutocomplete.getSelectedUsersAndLists().users||[];F=$j.map(C,function(K){var J=false;$j.each(G,function(L,M){if((K.id==-1&&jive.util.equalsIgnoreCaseAndPadding(K.email,K.email))||(K.id==M.id&&K.objectType==M.objectType)){J=true;return true}});if(J){return null}var I=$j.extend(true,{},K);I.excluded=true;return I})}$j.merge(G,F);var B=this;var E={multiple:true,valueIsUsername:true,emailAllowed:B.invitationsEnabled,listAllowed:true,$input:$j("#js-publishbar-docAuthors"),startingUsers:{users:G,userlists:[]}};var H=B.getEntitlementCheckObject();if(H){E=$j.extend(E,{object:H,entitlement:B.getAuthorEntitlementCheckMask(),userMessages:[B.getUserPermissionsMessage()],listMessages:[B.getListPermissionsMessage()]})}this.docAuthorAutocomplete=new jive.UserPicker.Main(E);if(D.forceAuthorList){this.docAuthorAutocomplete.setNoPicker(true);this.peopleAutocomplete.addListener("selectedUsersChanged",function(M){if(M.changes&&M.changes.added){$j("#js-publishbar-docAuthorPolicy-"+D.authorPolicyMultipleValue).prop("checked",true).change();var K=B.docAuthorAutocomplete.getSelectedUsersAndLists(true),I=K.users,J=K.userlists;if(M.changes.added.users){J.push(M.changes.added);B.docAuthorAutocomplete.setLists(J)}else{var L=M.changes.added instanceof Array?M.changes.added:[M.changes.added];I.push.apply(I,L);B.docAuthorAutocomplete.setUsers(I)}}})}if(!D.defaultAuthorPolicySelected||D.forceAuthorList){$j("#js-publishbar-docAuthorDetails").show()}else{$j("#js-publishbar-docAuthorDetails").hide()}$j("#js-publishbar-docDefaultAuthorshipPolicy").val(D.defaultAuthorPolicy);$j("#js-publishbar-docAuthorsOption").click(function(){if($j(this).is(":checked")){$j("#js-publishbar-docAuthorDetails").show();if($j('#js-publishbar-docAuthorDetails li:visible input[id="js-publishbar-docAuthorPolicy-'+D.defaultAuthorPolicy+'"]').length==1){$j("#js-publishbar-docAuthorPolicy-"+D.defaultAuthorPolicy).prop("checked",true)}else{$j($j('#js-publishbar-docAuthorDetails li:visible input[name="publishBar.authorPolicy"]')[0]).prop("checked",true)}if(D.forceAuthorList){$j("#js-publishbar-docAuthors-multiple").show()}}else{$j("#js-publishbar-docAuthorDetails").hide();$j("#js-publishbar-docAuthorPolicy-"+D.defaultAuthorPolicy).prop("checked",true);$j("#js-publishbar-docAuthors-multiple").hide()}});$j('#js-publishbar-docAuthorDetails input[name="publishBar.authorPolicy"]').change(function(){if($j(this).is(":checked")&&$j(this).val()==D.authorPolicyMultipleValue){$j("#js-publishbar-docAuthors-multiple").show()}else{$j("#js-publishbar-docAuthors-multiple").hide()}})};A.initDocumentApproversJavascript=function(C){var B=this;C=C?C:[];var E={multiple:true,valueIsUsername:true,listAllowed:true,$input:$j("#js-publishbar-docApprovers"),startingUsers:{users:C,userlists:[]}};var D=B.getEntitlementCheckObject();if(D){E=$j.extend(E,{object:D,entitlement:B.getApproverEntitlementCheckMask(),userMessages:[B.getUserPermissionsMessage()],listMessages:[B.getListPermissionsMessage()]})}window.docApproversAutocomplete=new jive.UserPicker.Main(E);$j("#js-publishbar-docApproversOption").click(function(){if($j(this).is(":checked")){$j("#js-publishbar-docApproversDetails").show();$j("#js-publishbar-docApproversDetails").find("input[name='publishBar.approvers']").prop("required","required")}else{$j("#js-publishbar-docApproversDetails").hide();$j("#js-publishbar-docApproversDetails").find("input[name='publishBar.approvers']").removeProp("required")}})};A.initCommentOptionsJavascript=function(B){$j("#js-publishbar-commentOption").click(function(){if($j(this).is(":checked")){if(B.showAdditionalCommentOptions){$j("#js-publishbar-commentOptionDetails").show()}$j("#js-publishbar-commentStatusNone").prop("checked",true)}else{$j("#js-publishbar-commentOptionDetails").hide();$j("#js-publishbar-commentStatusOpen").prop("checked",true)}})};A.initBlogPostPublishDateJavascript=function(B){if(B.selectedDate){$j("#publishDate").attr("value",B.selectedDate)}else{$j("#publishDate").attr("value",B.defaultDate)}$j("#js-publishbar-blogPublishOption").click(function(){if($j(this).is(":checked")){$j("#js-publishbar-blogPublishDetails").show()}else{$j("#js-publishbar-blogPublishDetails").hide()}})};A.initPollOptionsJavascript=function(){$j("#js-publishbar-pollVoteOptions").click(function(){if($j(this).is(":checked")){$j("#js-publishbar-pollVoteDetails").show()}else{$j("#js-publishbar-pollVoteDetails").hide()}});$j("#js-publishbar-pollVoteDetails").find("input[name='activeMode']").change(function(){if($j("#active-later").is(":checked")){$j(".activeDatePicker").show()}else{$j(".activeDatePicker").hide();$j("#activeDate").val("")}});$j("#js-publishbar-pollVoteDetails").find("input[name='endsMode']").change(function(){if($j("#js-publishbar-pollVoteDetails").find("#ends-never").is(":checked")){$j("#js-publishbar-pollVoteDetails").find(".expiresDatePicker").hide();$j("#js-publishbar-pollVoteDetails").find("#endsDays").val("");$j("#js-publishbar-pollVoteDetails").find("#endsDate").val("")}else{if($j("#js-publishbar-pollVoteDetails").find("#ends-relative").is(":checked")){$j("#js-publishbar-pollVoteDetails").find(".expiresDatePicker").hide();$j("#js-publishbar-pollVoteDetails").find("#endsDate").val("")}else{if($j("#js-publishbar-pollVoteDetails").find("#ends-later").is(":checked")){$j("#js-publishbar-pollVoteDetails").find("#endsDays").val("");$j("#js-publishbar-pollVoteDetails").find(".expiresDatePicker").show()}else{if($j("#js-publishbar-pollVoteDetails").find("#ends-now").is(":checked")){$j("#js-publishbar-pollVoteDetails").find(".expiresDatePicker").hide();$j("#js-publishbar-pollVoteDetails").find("#endsDays").val("");$j("#js-publishbar-pollVoteDetails").find("#endsDate").val("")}}}}})};A.initCollaborationToggleJavascript=function(){$j("#js-publishbar-collab-link").click(function(B){$j(this).find("span.jive-icon-med").toggleClass("jive-icon-arrow-right").toggleClass("jive-icon-arrow-down");$j("#js-publishbar-collab").slideToggle("fast");B.preventDefault()})};A.getEntitlementCheckObject=function(){var B=this;if(B.visibility=="place"){if(B.objectID>0&&B.isPlaceUnchanged()){return{objectID:B.objectID||-1,objectType:B.objectType||-1}}else{return{objectID:B.containerID||-1,objectType:B.containerType||-1}}}else{return null}};A.isPlaceUnchanged=function(){return this.originalContainer&&this.originalContainer.containerID==this.containerID&&this.originalContainer.containerType==this.containerType};A.getAuthorEntitlementCheckMask=function(){return(this.objectID>0&&this.isPlaceUnchanged())?"VIEW":"VIEW_CONTENT"};A.getApproverEntitlementCheckMask=function(){return(this.objectID>0&&this.isPlaceUnchanged())?"VIEW":"VIEW_CONTENT"};A.getUserPermissionsMessage=function(){return{type:"warn",render:function(B){return jive.publishbar.userWithoutPermission(B)}}};A.getListPermissionsMessage=function(){return{type:"warn",render:function(B){return jive.publishbar.listWithoutPermission(B)}}};A.decorateGuestUsers=function(B){var C=B.find('[data-user-id="-1"]');C.append('<span class="jive-icon-sml jive-icon-info">')};A.getUserInviteMessage=function(){return{type:"info",render:function(B){return jive.publishbar.guestInvited({})}}};A.manageModerationWarning=function(C){var B=C?C.visibilityBean.placeItemBean:null;if(B&&B.prop.isModerated){$j("#js-publishbar-moderation-warning").show()}else{$j("#js-publishbar-moderation-warning").hide()}jive.localexchange.emit("placeChanged",B)};A.initOmniCommunityTrackingName=function(D,B){try{if(D==14&&B>0&&typeof (OmniUtil)!="undefined"){OmniUtil.getPNameP2(D,B,function(E){window.omniCommunityTrackingName=E})}else{window.omniCommunityTrackingName={}}}catch(C){console.log(C)}}})
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ToggleFeatured == null) var ToggleFeatured = {};
ToggleFeatured._path = '/dwr';
ToggleFeatured.toggleFeatured = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeatured', p0, p1, p2, p3, callback);
}

;
Date.prototype.format=function(format){var returnStr='';var replace=Date.replaceChars;for(var i=0;i<format.length;i++){var curChar=format.charAt(i);if(replace[curChar]){returnStr+=replace[curChar].call(this);}else{returnStr+=curChar;}}return returnStr;};Date.replaceChars={shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],longMonths:['January','February','March','April','May','June','July','August','September','October','November','December'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],longDays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d:function(){return(this.getDate()<10?'0':'')+this.getDate();},D:function(){return Date.replaceChars.shortDays[this.getDay()];},j:function(){return this.getDate();},l:function(){return Date.replaceChars.longDays[this.getDay()];},N:function(){return this.getDay()+1;},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?'st':(this.getDate()%10==2&&this.getDate()!=12?'nd':(this.getDate()%10==3&&this.getDate()!=13?'rd':'th')));},w:function(){return this.getDay();},z:function(){return"Not Yet Supported";},W:function(){return"Not Yet Supported";},F:function(){return Date.replaceChars.longMonths[this.getMonth()];},m:function(){return(this.getMonth()<9?'0':'')+(this.getMonth()+1);},M:function(){return Date.replaceChars.shortMonths[this.getMonth()];},n:function(){return this.getMonth()+1;},t:function(){return"Not Yet Supported";},L:function(){return(((this.getFullYear()%4==0)&&(this.getFullYear()%100!=0))||(this.getFullYear()%400==0))?'1':'0';},o:function(){return"Not Supported";},Y:function(){return this.getFullYear();},y:function(){return(''+this.getFullYear()).substr(2);},a:function(){return this.getHours()<12?'am':'pm';},A:function(){return this.getHours()<12?'AM':'PM';},B:function(){return"Not Yet Supported";},g:function(){return this.getHours()%12||12;},G:function(){return this.getHours();},h:function(){return((this.getHours()%12||12)<10?'0':'')+(this.getHours()%12||12);},H:function(){return(this.getHours()<10?'0':'')+this.getHours();},i:function(){return(this.getMinutes()<10?'0':'')+this.getMinutes();},s:function(){return(this.getSeconds()<10?'0':'')+this.getSeconds();},e:function(){return"Not Yet Supported";},I:function(){return"Not Supported";},O:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+'00';},P:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+':'+(Math.abs(this.getTimezoneOffset()%60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()%60));},T:function(){var m=this.getMonth();this.setMonth(0);var result=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,'$1');this.setMonth(m);return result;},Z:function(){return-this.getTimezoneOffset()*60;},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP");},r:function(){return this.toString();},U:function(){return this.getTime()/1000;}};


	function isObjectEmpty(ob){
		for(var i in ob){ if(ob.hasOwnProperty(i)){return false;}}
		return true;
	}

// TODO: error reporting
	function triggerReview(obj, successCallback, enableExternal) {
		if (!obj.objectID || !obj.objectType) return;
		$j.ajax(
			{ url: BASE_JIVE_URL+"/featured-content-json!info.jspa" //"<@s.url action='featured-content-json' method='info' />"
			, data: obj
			, success: function (data) {
				if (data.errors) {
					alert(ft_i18n['apple.ft.error.server']);
				}
				else if (isObjectEmpty(data)) {
					obj.internal = true;
					obj.external = false;
					showReviewModal(true, obj, successCallback, enableExternal);
				}
				else {
					var val = data[0];
					// if the feature was revoked, add the defaults
					if ('REVOKED' == val.featureStatus) {
						val.internal = true;
						val.external = false;
					}
					showReviewModal(false, val, successCallback, enableExternal);
				}
			}
			, error: function (xhr, status, error) {alert(ft_i18n['apple.ft.error.server']);}
			});
	}

	function triggerRevoke(obj,successCallback, enableExternal) {
		if (!obj.objectID || !obj.objectType) return;
		$j.ajax(
			{ url: BASE_JIVE_URL+"/featured-content-json!info.jspa" //"<@s.url action='featured-content-json' method='info' />"
			, data: obj
			, success: function (data) {
				if (data.errors) {
					alert(ft_i18n['apple.ft.error.server']);
				}
				else if (isObjectEmpty(data)) {
					showRevokeModal(obj,successCallback, enableExternal);
				}
				else {
					var val = data[0];
					showRevokeModal(val,successCallback, enableExternal);
				}
			}
			, error: function (xhr, status, error) {alert(ft_i18n['apple.ft.error.server']);}
			});
	}

	function triggerHistory(obj) {
		if (!obj.objectID || !obj.objectType) return;
		$j.ajax(
		{	url: BASE_JIVE_URL+"/featured-content-json!history.jspa" //"<@s.url action='featured-content-json' method='info' />"
			, data: obj
			, success: function (data) {
				if (data.errors) {alert(ft_i18n['apple.ft.error.server']);}
				else {showHistoryModal(data);}
			}
			, error: function (xhr, status, error) {alert(ft_i18n['apple.ft.error.server']);}
		});
	}

// TODO: error reporting!
// TODO: i18n: error while...
	function showReviewModal (create, obj, successCallback, enableExternal) {
		$j('#modal-container input#review-submit').attr("disabled", false);
		$j('#modal-container').html(asJiveModal(ft_i18n['apple.ft.label.review'], paintReviewFormModal(obj, enableExternal))).lightbox_me(
			{ closeSelector: '.close'
			, onClose: function() {$j('#modal-container').html('');}
			});
		$j('#modal-container input#review-submit').click(function () {
            $j('#modal-container input#review-submit').attr("disabled", true);
			var url = "/featured-content-json!"+((create)?'create':'review')+".jspa";
			$j.ajax(
				{ url: BASE_JIVE_URL+url
				, type: 'POST'
				, data: ensurePublishSettings($j('#modal-container form').serialize(), obj)
				, contentType: 'application/x-www-form-urlencoded; charset=UTF-8'
				, success: function (data) {
					if (data.errors) {
						paintModalError(data);
						$j('#modal-container input#review-submit').attr("disabled", false);
					}
					else {
						$j('#modal-container').trigger('close');
						successCallback();
					}
				  }
				, error: function (xhr, status, error) {
				        paintModalError({errors:[ft_i18n['apple.ft.error.server']], fields:{}});}
				}
			);
			return false;
		});
	}

	// We need to make sure that we are sending the correct state of the checkboxes over to the server.
	// unfortunatly, checkboxes send no value if they are unchecked, so well regex match the checkbox
	// values for tracking the publishing state, and add ones that are missing.
	//
	function ensurePublishSettings (dataString, obj) {
		if (!dataString.match(/internal=/)) dataString += '&internal=false';
		if (!dataString.match(/external=/)) dataString += '&external=false';
		dataString = dataString.replace(/=on/g, '=true');
		return dataString;
	}



	// TODO: i18n
	// Notes
	// Publish External
	// Feature Internally
	// Submit Review
	// Review
	function paintReviewFormModal(obj, enableExternal) {

		var internalAttrs = {type:'checkbox', name:'internal', id:'internal'};
		if (obj.internal) internalAttrs['checked'] = 'checked';

		var externalAttr = {type:'checkbox', name:'external', id:'external'};
		var externalLableAttr = {'for':'external'};
		if (obj.external) externalAttr['checked'] = 'checked';
		if (!enableExternal) {
			externalAttr['disabled'] = 'disabled';
			externalLableAttr['class'] = 'disabled';
		}

        return  form({name: 'review', clazz: 'j-form'}
            , input({type: 'hidden', name:'objectID', value:obj.objectID})
            , input({type: 'hidden', name:'objectType', value:obj.objectType})
            , div({clazz: 'j-form-row'}
                , label({'for':'note'}, ft_i18n['apple.ft.label.reason']+':')
                , textarea({name:'note', id:'note', cols: '65', rows: '8', wrap: 'virtual'},'')
            )
            , div({clazz: 'j-form-row'}
                , input(internalAttrs), label({'for':'internal'}, ft_i18n['apple.ft.label.feature-internally'])
            )
            , div({clazz: 'j-form-row'}
                , input(externalAttr), label(externalLableAttr, ft_i18n['apple.ft.label.publish-externally'])
            )
            , div({clazz: 'j-form-row'}
                , input({type:'submit', name:'review-submit', id:'review-submit', clazz:'j-btn-callout', value:ft_i18n['apple.ft.label.submit-review']})
            )
        );
	}

	// TODO: i18n
	// Close
	function asJiveModal (headerHtml, bodyHtml) {
        return header(h2(headerHtml)) +
            a({href:'#', clazz:'j-modal-close-top close'}, ft_i18n['apple.ft.label.close'],
                span({clazz: 'j-close-icon j-ui-elem', role: 'img'})) +
            section({clazz: 'jive-modal-content clearfix'},
                div({id:'jive-error-box', clazz:'jive-error-box', role:'alert', 'aria-live':'assertive', 'aria-atomic':'true', tabindex:'-1', style:'display: none'}),
                bodyHtml);
	}

	// TODO: i18n
	// Revoke
	// error while...
	function showRevokeModal (obj,successCallback,enableExternal) {
		var title = ft_i18n['apple.ft.label.revoke'];
		if (obj.objectName) title = ft_i18n['apple.ft.label.revoke']+': ' + obj.objectName;

		$j('#modal-container').html(asJiveModal(title, paintRevokeFormModal(obj,enableExternal))).lightbox_me(
			{ closeSelector: '.close'
			, onClose: function() {$j('#modal-container').html('');}
			});
		$j('#modal-container input#revoke-submit').click(function () {
			$j.ajax(
				{ url: BASE_JIVE_URL+"/featured-content-json!revoke.jspa"
				, type: 'POST'
				, data: $j('#modal-container form').serialize()
				, contentType: 'application/x-www-form-urlencoded; charset=UTF-8'
				, success: function (data) {
					if (data.errors) {
						paintModalError(data);
						$j('#modal-container input#review-submit').attr("disabled", false);
					}
					else {
						$j('#modal-container').trigger('close');
						successCallback();
					}
				  }
				, error: function (xhr, status, error) {paintModalError({errors:[ft_i18n['apple.ft.error.server']], fields:{}});}
				}
			);
			return false;
		});
	}

	// TODO: i18n
	// Notes
	// Revoke Feature
	function paintRevokeFormModal(obj,enableExternal) {

		var published = (obj.internal && obj.external)
							? ft_i18n['apple.ft.label.internal-external']
							: (obj.internal)
								? ft_i18n['apple.ft.label.internally']
								: (obj.external)
									? ft_i18n['apple.ft.label.externally']
									: ft_i18n['apple.ft.label.not-published'];

        return  form({name: 'revoke', clazz: 'j-form'}
            , input({type: 'hidden', name:'objectID', value:obj.objectID})
            , input({type: 'hidden', name:'objectType', value:obj.objectType})
            , div({clazz: 'j-form-row'}
                , label({'for':'note'}, ft_i18n['apple.ft.label.reason']+':')
                , textarea({name:'note', id:'note', cols: '65', rows: '8', wrap: 'virtual'},'')
            )
            , div({clazz: 'j-form-row'}
                , span({clazz:'right xsmall'}, published)
            )
            , div({clazz: 'j-form-row'}
                , input({type:'submit', name:'revoke-submit', id:'revoke-submit', clazz:'j-btn-callout', value:ft_i18n['apple.ft.label.revoke-feature']})
            )
        );
	}

	function showHistoryModal (obj) {
		$j('#modal-container').html(asJiveModal(ft_i18n['apple.ft.label.history'], paintHistoryModal(obj))).lightbox_me(
			{ closeSelector: '.close'
			, onClose: function() {$j('#modal-container').html('');}
			});
	}

	function paintHistoryModal(obj) {
		obj.reverse();
        if (obj.length === 0) {
            return ft_i18n['apple.ft.label.history.empty'];
        }
		var lis = '';
		for (var i=0; i<obj.length; i++) {
			var hist = obj[i];
			var revoked = 'REVOKED' == hist.featureStatus;
			var revokedText = revoked ? span({clazz:'revoked-status'}, ft_i18n['apple.ft.label.revoked-at']+':') : ft_i18n['apple.ft.label.feature-at']+':';
			var published = (hist.internal && hist.external) ? ft_i18n['apple.ft.label.internal-external'] : (hist.internal) ? ft_i18n['apple.ft.label.internally'] : (hist.external) ? ft_i18n['apple.ft.label.externally'] : ft_i18n['apple.ft.label.not-published'];

			lis += li({clazz: 'history no-bullet'}
				, revokedText
				, span({clazz:'time xsmall'},new Date(hist.creationDate).format('M d Y H:i'))
				, ' '
				, ft_i18n['apple.ft.text.by']
				, ' '
				, a({clazz:'ft-report-user', href:hist.userURL}, hist.userName)
				, div({clazz:'xsmall'},  ft_i18n['apple.ft.label.published']+': ' + published)
				, blockquote({clazz: ('note'+((i==0)?' current':'')+((revoked)?' revoked':''))}, (hist.note) ? jive.util.escapeHTML(hist.note) : '')
			);
		}
		return ul({style:'list-style: none'},lis);
	}

	function paintModalError(error) {
		var ml = '';
		for (var i=0;i<error.errors.length;i++) {ml += li({clazz:'error'}, error.errors[i]);}
		for (var fld in error.fields) {
			ml += li( span({clazz:'error-field'}, fld),": ", span({clazz:'error'}, error.fields[fld][0] ) );
		}
		$j('#modal-container #jive-error-box').empty().show().append(span({clazz:'jive-icon-med jive-icon-redalert'}) + ul(ml));
	}

	/** HTML Combinators ************************************* */
  function elAt(attrs) {
    var s = '';
    for (var key in attrs) {
      var k = key;
      if (key === 'clazz') {k = 'class';}
      s = s + ' ' + k + '="' + attrs[key] + '"';
  	}
    return s;
  }

  function el() {
    var s = '<'+this.eln;
    for (var i = 0; i<arguments.length; i++) {
      var val = arguments[i];
      var type = typeof val;

      if (i==0 && type === 'object') {s = s + elAt(val) + ((this.empty) ? '/>' :'>'); continue;}
      else if (i==0) {s = s + ((this.empty) ? '/>' :'>');}

      if (this.empty) return s;

      if (type !== 'string') continue;

      s = s + val;
    }

  	s = s + '</'+this.eln+'>';
  	return s;
  }


  function li() {this.eln='li'; this.empty = false; return el.apply(this, arguments);}
  function a() {this.eln='a'; this.empty = false; return el.apply(this, arguments);}
  function span() {this.eln='span'; this.empty = false;  return el.apply(this, arguments);}
  function ul() {this.eln='ul'; this.empty = false; return el.apply(this, arguments);}
  function label  () {this.eln='label'; this.empty = false; return el.apply(this, arguments);}
  function form  () {this.eln='form'; this.empty = false; return el.apply(this, arguments);}
  function textarea  () {this.eln='textarea'; this.empty = false; return el.apply(this, arguments);}
  function input() {this.eln='input'; this.empty = true; return el.apply(this, arguments);}
  function div() {this.eln='div'; this.empty = false;  return el.apply(this, arguments);}
  function h2() {this.eln='h2'; this.empty = false; return el.apply(this, arguments);}
  function blockquote() {this.eln='blockquote'; this.empty = false;  return el.apply(this, arguments);}
  function option() {this.eln='option'; this.empty = false;  return el.apply(this, arguments);}
  function header() {this.eln='header'; this.empty = false;  return el.apply(this, arguments);}
  function section() {this.eln='section'; this.empty = false;  return el.apply(this, arguments);}

;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
jive.RestService=jive.oo.Class.extend(function(a){var b=jQuery;a.resourceType="abstract";a.displayGenericErrorMessages=true;a.putOnUpdate=false;a.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};a.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}b.ajax(b.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.emitSuccess(k)},error:this.errorCallback(j,c),timeout:120000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new jive.conc.Promise(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=b.extend({},this.defaultParams,e);return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new jive.conc.Promise(),c=this;if(e.hasOwnProperty("id")){e=e.id}b.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};a.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};a.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};a.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.emitError.apply(e,d)};a.displayError=function(c){b(c).message({style:"error"})};a.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};a.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};a.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};a.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};a.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};a.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};a.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});define("jive.RestService",function(){return jive.RestService});
;
jive.NestedRestService=jive.RestService.extend(function(a,b){a.init=function(c){b.init.call(this,c);this.parentType=c.parentType;this.parentID=c.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){a[c]=b[c]})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.formwaiting=="undefined"){jive.shared.formwaiting={}}jive.shared.formwaiting.formWaitingOverlay=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(A.bgCssClass),'"></div></div>');return C?"":B.toString()}
;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);b=b||{};if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){var e=new jive.loader.LoaderView({size:"big"});if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.shared.formwaiting.formWaitingOverlay({bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=e.getContent();e.appendTo(d);a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).prop("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).prop("disabled",false)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.content=="undefined"){jive.content={}}jive.content.drafts=function(C,G){var E=G||new soy.StringBuilder();E.append('<div id="autosave-prompt" class="jive-warn-box" role="alert" aria-live="polite" aria-atomic="true" tabindex="0"><p><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.exists.info"),[])),"</p>");var B=C.drafts;var F=B.length;for(var D=0;D<F;D++){var A=B[D];jive.content.draft(A,E)}E.append("</div>");return G?"":E.toString()};jive.content.draftlastsaved=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="last-saved">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.saved.last"),[(A.date?dateFormat(parseFloat(A.date),"h:MM TT"):"")])),"</span>");return C?"":B.toString()};jive.content.draft=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-draft" id="draft-',soy.$$escapeHtml(A.id),'"><dl><dt>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.saved.last.short"),[])),"</dt><dd>",soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),"</dd>",(A.subject)?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.subject"),[]))+":</dt><dd>"+soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))+"</dd>":"",'</dl><button id="draft-recover-button-',soy.$$escapeHtml(A.id),'" class="jive-description use-draft" aria-labelledby="draft-recover-label-',soy.$$escapeHtml(A.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.recover"),[])),"</button>");jive.content.draftRecoverButtonLabel(A,B);B.append('<button id="draft-delete-button-',soy.$$escapeHtml(A.id),'" class="jive-description destroy-draft" aria-labelledby="draft-delete-label-',soy.$$escapeHtml(A.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.delete"),[])),"</button>");jive.content.draftDeleteButtonLabel(A,B);B.append("</div>");return C?"":B.toString()};jive.content.draftRecoverButtonLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span aria-hidden="true" class="j-508-label" id="draft-recover-label-',soy.$$escapeHtml(A.id),'">');jive.shared.soy.i18nHelper({i18nKey:A.subject?"draft.recover.label.subject":"draft.recover.label.subject.none",arg0:soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),arg1:soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))},B);B.append("</span>");return C?"":B.toString()};jive.content.draftDeleteButtonLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span aria-hidden="true" class="j-508-label" id="draft-delete-label-',soy.$$escapeHtml(A.id),'">');jive.shared.soy.i18nHelper({i18nKey:A.subject?"draft.delete.label.subject":"draft.delete.label.subject.none",arg0:soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),arg1:soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))},B);B.append("</span>");return C?"":B.toString()}
;
var form2js=(function(){function e(m,l,n,k,p){if(typeof n=="undefined"||n==null){n=true}if(typeof l=="undefined"||l==null){l="."}if(arguments.length<5){p=false}m=typeof m=="string"?document.getElementById(m):m;var q=[],j,o=0;if(m.constructor==Array||(typeof NodeList!="undefined"&&m.constructor==NodeList)){while(j=m[o++]){q=q.concat(d(j,k,p))}}else{q=d(m,k,p)}return b(q,n,l)}function b(s,A,C){var p={},q={},y,x,w,v,u,r,n,t,o,m,z,D,B;for(y=0;y<s.length;y++){u=s[y].value;if(A&&(u===""||u===null)){continue}D=s[y].name;B=D.split(C);r=[];n=p;t="";for(x=0;x<B.length;x++){z=B[x].split("][");if(z.length>1){for(w=0;w<z.length;w++){if(w==0){z[w]=z[w]+"]"}else{if(w==z.length-1){z[w]="["+z[w]}else{z[w]="["+z[w]+"]"}}m=z[w].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(m){for(v=1;v<m.length;v++){if(m[v]){r.push(m[v])}}}else{r.push(z[w])}}}else{r=r.concat(z)}}for(x=0;x<r.length;x++){z=r[x];if(z.indexOf("[]")>-1&&x==r.length-1){o=z.substr(0,z.indexOf("["));t+=o;if(!n[o]){n[o]=[]}n[o].push(u)}else{if(z.indexOf("[")>-1){o=z.substr(0,z.indexOf("["));m=z.replace(/(^([a-z_]+)?\[)|(\]$)/gi,"");t+="_"+o+"_"+m;if(!q[t]){q[t]={}}if(o!=""&&!n[o]){n[o]=[]}if(x==r.length-1){if(o==""){n.push(u);q[t][m]=n[n.length-1]}else{n[o].push(u);q[t][m]=n[o][n[o].length-1]}}else{if(!q[t][m]){if((/^[a-z_]+\[?/i).test(r[x+1])){n[o].push({})}else{n[o].push([])}q[t][m]=n[o][n[o].length-1]}}n=q[t][m]}else{t+=z;if(x<r.length-1){if(!n[z]){n[z]={}}n=n[z]}else{n[z]=u}}}}}return p}function d(k,j,l){var i=a(k,j,l);return i.length>0?i:g(k,j,l)}function g(k,j,m){var i=[],l=k.firstChild;while(l){i=i.concat(a(l,j,m));l=l.nextSibling}return i}function a(l,j,n){var k,m,i,o=f(l,n);k=j&&j(l);if(k&&k.name){i=[k]}else{if(o!=""&&l.nodeName.match(/INPUT|TEXTAREA/i)){m=c(l);i=[{name:o,value:m}]}else{if(o!=""&&l.nodeName.match(/SELECT/i)){m=c(l);i=[{name:o.replace(/\[\]$/,""),value:m}]}else{i=g(l,j,n)}}}return i}function f(i,j){if(i.name&&i.name!=""){return i.name}else{if(j&&i.id&&i.id!=""){return i.id}else{return""}}}function c(i){if(i.disabled){return null}switch(i.nodeName){case"INPUT":case"TEXTAREA":switch(i.type.toLowerCase()){case"radio":case"checkbox":if(i.checked&&i.value==="true"){return true}if(!i.checked&&i.value==="true"){return false}if(i.checked){return i.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return i.value;break}break;case"SELECT":return h(i);break;default:break}return null}function h(o){var k=o.multiple,j=[],n,p,m;if(!k){return o.value}for(n=o.getElementsByTagName("option"),p=0,m=n.length;p<m;p++){if(n[p].selected){j.push(n[p].value)}}return j}return e})();var js2form=(function(){var f=/^\[\d+?\]/,j=/^[a-zA-Z_][a-zA-Z_0-9]+/,l=/\[[0-9]+?\]$/,g=/(.*)(\[)([0-9]*)(\])$/,k=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;function h(q,s,m,u,p){if(arguments.length<3){m="."}if(arguments.length<4){u=null}if(arguments.length<5){p=false}var o,r;o=i(s);r=a(q,p,m,{},false);for(var t=0;t<o.length;t++){var v=o[t].name,n=o[t].value;if(typeof r[v]!="undefined"){b(r[v],n)}else{if(typeof r[v.replace(l,"[]")]!="undefined"){b(r[v.replace(l,"[]")],n)}}}}function b(q,p){var o,n,m;if(q instanceof Array){for(n=0;n<q.length;n++){if(q[n].value==p){if(q[n].checked!=true){$j(q[n]).click()}}}}else{if(d.test(q.nodeName)){$j(q).val(p)}else{if(/SELECT/i.test(q.nodeName)){o=q.getElementsByTagName("option");for(n=0,m=o.length;n<m;n++){if(o[n].value==p){o[n].selected=true;if(q.multiple){break}}else{if(!q.multiple){o[n].selected=false}}}}}}}function a(q,p,n,v,r){if(arguments.length<4){v={}}var A={},w=q.firstChild,m,o,y,u,t,s,z;while(w){m="";if(w.name&&w.name!=""){m=w.name}else{if(p&&w.id&&w.id!=""){m=w.id}}if(m==""){var x=a(w,p,n,v,r);for(y in x){if(typeof A[y]=="undefined"){A[y]=x[y]}else{for(u=0;u<x[y].length;u++){A[y].push(x[y][u])}}}}else{if(/SELECT/i.test(w.nodeName)){for(t=0,z=w.getElementsByTagName("option"),s=z.length;t<s;t++){if(r){z[t].selected=false}o=e(m,n,v);A[o]=w}}else{if(/INPUT/i.test(w.nodeName)&&/CHECKBOX|RADIO/i.test(w.type)){if(r){w.checked=false}o=e(m,n,v);o=o.replace(l,"[]");if(!A[o]){A[o]=[]}A[o].push(w)}else{if(r){w.value=""}o=e(m,n,v);A[o]=w}}}w=w.nextSibling}return A}function e(o,p,u){var v=[],n=o.split(p),s,r,q,m,w,t;o=o.replace(k,"[$1].[$2]");for(t=0;t<n.length;t++){s=n[t];v.push(s);r=s.match(g);if(r!=null){q=v.join(p);m=q.replace(g,"$3");q=q.replace(g,"$1");if(typeof(u[q])=="undefined"){u[q]={lastIndex:-1,indexes:{}}}if(m==""||typeof u[q].indexes[m]=="undefined"){u[q].lastIndex++;u[q].indexes[m]=u[q].lastIndex}w=u[q].indexes[m];v[v.length-1]=s.replace(g,"$1$2"+w+"$4")}}q=v.join(p);q=q.replace("].[","][");return q}function i(q,o){var m=[],p,n;if(arguments.length==1){o=0}if(q==null){m=[{name:"",value:null}]}else{if(typeof q=="string"||typeof q=="number"||typeof q=="date"||typeof q=="boolean"){m=[{name:"",value:q}]}else{if(q instanceof Array){for(p=0;p<q.length;p++){n="["+p+"]";m=m.concat(c(q[p],n,o+1))}}else{for(p in q){n=p;m=m.concat(c(q[p],n,o+1))}}}}return m}function c(n,q,p){var t;var m=[],o=i(n,p+1),r,s;for(r=0;r<o.length;r++){t=q;if(f.test(o[r].name)){t+=o[r].name}else{if(j.test(o[r].name)){t+="."+o[r].name}}s={name:t,value:o[r].value};m.push(s)}return m}return h})();(function(a){a.fn.toObject=function(c){var b=[],d={mode:"first",delimiter:".",skipEmpty:true,nodeCallback:null,useIdIfEmptyName:false};if(c){a.extend(d,c)}switch(d.mode){case"first":return form2js(this.get(0),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break;case"all":this.each(function(){b.push(form2js(this,d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName))});return b;break;case"combine":return form2js(Array.prototype.slice.call(this),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break}}})(jQuery);
;
jive.LocationState=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.defaults={supportPushState:true,supportFragment:true};a.init=function(c){var f=b.extend({},this.defaults,c||{}),e=location.href,g=this;this.location=e;this.description="";this.manuallyUpdatingHash=false;this.supportPushState=f.supportPushState&&!!(window.history&&window.history.pushState);this.supportFragment=f.supportFragment;var d=[this.supportPushState?"popstate":null,this.supportFragment?"hashchange":null].filter(function(h){return !!h}).join(" ");b(window).bind(d,function(i){var h=location.href;if(g.afterInit||h!==e){g.location=h;if(!g.manuallyUpdatingHash){g.emitChange(g.current(),g.description,h)}g.manuallyUpdatingHash=false}})};this.get=function(c){return this.current()[c]};this.getState=function(){return this.current()};this.getEphemeralState=function(){return b.deparam.fragment()};this.pushState=function(e,c){var d=b.extend(this.current(),e);Object.keys(e).forEach(function(f){if(typeof e[f]=="undefined"||(b.isArray(e[f])&&e[f].length<1)){delete d[f]}});this.setState(d,c)};this.setState=function(f,e,d){var c=this.lastLocation;this.location=this.supportPushState?this.newLocation(f,d):this.newFragment(f,d);this.description=e||"";this.emitChange(f,e,this.location);if(this.location!==c){if(this.supportPushState){history.pushState(this.current(),this.description,this.location)}else{if(this.supportFragment){this.updateLocationHash(this.location)}}}};a.current=function(){var d=this.location.match(/\?/)?b.deparam.querystring(this.location):{},c=this.location.match(/#/)?b.deparam.fragment(this.location):{};return b.extend({},d,c)};a.newLocation=function(d,c){var e;if(!c){e=location.href.split(/[?#]/)[0]}else{e=jive.app.url({path:"/"+c})}return b.param.querystring(e,d)};a.newFragment=function(g,e){var c={},f=b.deparam.querystring(),h;h=location.href.split("#")[0];if(e){g.nPLoc=e}Object.keys(g).forEach(function(i){if(f[i]!==String(g[i])){c[i]=g[i]}});var d=b.param.fragment(h,c);if(/#[^=&]+=$/.test(d)){d=d.substring(0,d.length-1)}return d};a.emitChange=function(e,d,c){if(c!==this.lastLocation){this.emit("change",e,d,c);this.lastLocation=c;this.afterInit=true}else{this.emit("noChange",e,d,c)}};a.updateLocationHash=function(d){var c=this;function e(){c.preserveScrollPosition(d.split("#")[1],function(){c.manuallyUpdatingHash=true;location.href=d})}if(b.browser.msie&&b.browser.version<8){(this.locationHashTimeouts||[]).forEach(function(f){clearTimeout(f)});this.locationHashTimeouts=[];this.locationHashTimeouts.push(setTimeout(function(){c.locationHashTimeouts.push(setTimeout(e,100))},100))}else{e()}};a.preserveScrollPosition=function(c,e){var d;if(c){d=b(window).scrollTop();e();b(window).scrollTop(d)}else{e()}}});jive.locationState=new jive.LocationState();
;
jive.namespace("draft");jive.draft.View=jive.AbstractView.extend(function(b,c){var d=jQuery,a,e;this.init=function(f){c.init.call(this,f);this.options=d.extend({pushStateEnabled:true},f);a=this;a.locationState=new jive.LocationState();d(function(){var h=a.getContent();var g=a.serializeForm();h.data("autosave",g);a.emit("display");d("#autosave-prompt .use-draft").live("click",function(k){var j=d(k.target).closest(".jive-draft");var i=j.data("draft");a.emit("restore",i);jive.switchboard.emit("draft.destroy",i.id)});d("#autosave-prompt .destroy-draft").live("click",function(k){var j=d(k.target).closest(".jive-draft");var i=j.data("draft");a.emit("destroy",i.id);jive.switchboard.emit("draft.destroy",i.id)});a.unpause();window.setInterval(function(){a.emit("keepalive")},f.keepaliveInterval*1000);d(window).unload(function(){a.removeFromWorkingDrafts(h.data("autosave").id)});jive.switchboard.addListener("draft.destroy",function(i){a.destroy(i)})})};this.pause=function(){if(e){clearTimeout(e);e=null}};this.unpause=function(){if(!e){e=setTimeout(a.save,a.options.interval*1000)}};this.save=function(){var i=new Date().getTime();function h(){var l=(new Date().getTime()-i);e=setTimeout(a.save,Math.min(Math.max(l*20,a.options.interval*1000),a.options.interval*50000))}var f=a.serializeForm();if(f.body.length===0){h();return}var j=a.getContent();var g=j.data("autosave");var k=f.body!=g.body||f.subject!=g.subject||JSON.stringify(f.properties)!=JSON.stringify(g.properties);if(!k){h();return}if(g.id){f.id=g.id;a.emitP("save",f).always(h)}else{a.emitP("create",f).always(h)}};b.serializeForm=function(){var f={};var g=a.getContent().toObject({mode:"all"})[0];f.objectType=a.options.objectType;f.draftObjectType=a.options.draftObjectType;f.draftObjectID=a.options.draftObjectID;f.subject=d("#"+a.options.subject).val();f.body=a.getRTE()?a.getRTE().getHTML():"";f.properties={};d.each(a.options.properties,function(j,h){f.properties[h]=g[h]});return f};b.getRTE=function(){return window.editor.get(a.options.editorId)};this.saved=function(h,l){try{var k=a.getContent();k.data("autosave",h);a.addToWorkingDrafts(h.id);if(a.options.pushStateEnabled){a.updatePushState(h.id)}a.updateFormDraftID(k,h.id);var j=d(jive.content.draftlastsaved({date:new Date()}));var g=d(a.getRTE().getBelowEditorArea());var f=g.find(".last-saved");if(f.length){f.replaceWith(j)}else{j.hide().appendTo(g).fadeIn();a.getRTE().autoReposition()}l.emitSuccess(h)}catch(i){if(l){l.emitError(i)}}};this.display=function(k){var g=a.locationState.getState().draftID;if(g){var j=false;d.each(k,function(m,l){if(l.id==g){a.emit("restore",l);j=true}});if(j){return}}var h=[];d.each(k,function(m,l){if(!a.isWorkingDraft(l.id)){h.push(l)}});if(h.length===0){return}var i=a.getContent();var f=d(jive.content.drafts({drafts:h}));f.find(".jive-draft").each(function(l){d(this).data("draft",h[l])});f.hide().insertBefore(i).fadeIn();f.focus()};this.restore=function(g){var f=a.getContent();js2form(f[0],g.properties);a.getRTE().setHTML(g.body);d("#"+a.options.subject).val(g.subject);f.trigger("restore",g);a.addToWorkingDrafts(g.id);a.updateFormDraftID(f,g.id);f.data("autosave",g);d("#autosave-prompt").fadeOut(function(){d(this).safeRemove()});if(a.options.pushStateEnabled){a.updatePushState(g.id)}};this.destroy=function(j){var f=d("#autosave-prompt");if(f.length===0){return}var h=d("#draft-"+j);if(h.length===0){return}var i=f.find(".jive-draft").length>1;var g=i?h:f;g.fadeOut(function(){d(this).safeRemove()})};b.updateFormDraftID=function(g,h){var f=g.find("input#draftID");if(f.length===0){f=d("<input />",{id:"draftID",name:"draftID",type:"hidden"});f.appendTo(g)}f.val(h)};b.updatePushState=function(f){a.locationState.pushState({draftID:f})};b.addToWorkingDrafts=function(g){var f=a.getWorkingDrafts();if(!a.isWorkingDraft(g)){f.push(g)}if(a.isLocalStorageAvailable()){localStorage.setItem("workingDrafts",f)}};b.removeFromWorkingDrafts=function(g){var f=a.getWorkingDrafts();f.splice(f.indexOf(String(g)),1);if(a.isLocalStorageAvailable()){localStorage.setItem("workingDrafts",f)}};b.isWorkingDraft=function(f){return d.inArray(String(f),a.getWorkingDrafts())>-1};b.getWorkingDrafts=function(){if(!a.isLocalStorageAvailable()){return[]}var f=localStorage.getItem("workingDrafts");return f?f.split(","):[]};b.isLocalStorageAvailable=function(){return typeof localStorage==="object"&&localStorage&&localStorage.getItem&&localStorage.setItem}});
;
jive.namespace("draft");jive.draft.Model=jive.RestService.extend(function(a){a.resourceType="draft";a.pluralizedResourceType=a.resourceType;this.save=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"PUT",{url:this.RESOURCE_ENDPOINT+"/"+b.id,contentType:"application/json; charset=utf-8",data:JSON.stringify(b)})};this.create=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT,contentType:"application/json; charset=utf-8",data:JSON.stringify(b)})};this.display=function(b){return this.get(b)}});
;
jive.namespace("draft");jive.draft.Main=jive.oo.Class.extend(function(a){this.init=function(b){a.main=this;this.options=$j.extend({enabled:true,interval:10,keepaliveInterval:90,objectType:null,draftObjectType:null,draftObjectID:null,editorId:null,subject:null,images:[],properties:[],confirmationMessage:jive.i18n.getMsg("global.unsaved_changes.text"),saveMessage:jive.i18n.getMsg("forum.post.save_and_edit.text"),savedMessage:jive.i18n.getMsg("forum.post.save_and_edit.text")},b);b=this.options;this.view=new jive.draft.View(b);this.model=new jive.draft.Model(b);this.view.addListener("keepalive",function(c){a.main.model.get("")});this.view.addListener("display",function(c){var d=b.objectType+"/"+b.draftObjectType+"/"+b.draftObjectID;a.main.model.display(d).addCallback(function(e){a.main.view.display(e)})});this.view.addListener("create",function(c,d){a.main.model.create(c).addCallback(function(e){a.main.view.saved(e,d)}).addErrback(function(){d.emitError()})});this.view.addListener("save",function(c,d){a.main.model.save(c).addCallback(function(e){a.main.view.saved(e,d)}).addErrback(function(){d.emitError()})});this.view.addListener("restore",function(c){a.main.view.restore(c)});this.view.addListener("destroy",function(c){a.main.model.destroy(c).addCallback(function(d){a.main.view.destroy(c)})})};this.pause=function(){a.main.view.pause()};this.unpause=function(){a.main.view.unpause()}});
;
jive.namespace("CommentApp");jive.CommentApp.FormView=jive.oo.Class.extend(function(a,b){jive.conc.observable(this);this.init=function(c,d){this._parentCommentID=d.parentCommentID;this._commentMode=d.commentMode;if(!this._postBlock){this._postBlock=$j("#jive-comment-post-block")}this._itemAuthorID="comment-author";this._itemBodyID="commentBody";this._itemEmailID="comment-email";this._itemURLID="comment-url";this._container=$j(c);this._initFormWaitingView(d.i18n);this.rteView=null;this.options=d;this._render()};this.getParentCommentID=function(){return this._parentCommentID};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView(this._container.parents(".jive-js-addReply"),{containerPadding:0})};a.focus=function(){if(this._isAnonymous){$j("#"+this._itemAuthorID).focus()}else{b.focus.call(this)}};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:$j("#"+this._itemAuthorID).val(),email:$j("#"+this._itemEmailID).val(),url:$j("#"+this._itemURLID).val(),parentCommentID:this._parentCommentID,commentMode:this._commentMode}};a._postHandler=function(){var c=this;if(c._validateComment()){c._formWaitingView.disableForm();c.emitP("post",c._getValues()).addCallback(function(){c._formWaitingView.enableForm()}).addErrback(function(){c._formWaitingView.enableForm()})}return false};a._validateComment=function(){var c=this._getValues();if(this.options.isAnonymous&&$def(c.name)&&$j.trim(c.name)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.name_required.text"})}).message({style:"error"});return false}else{if(this.options.isAnonymous&&$def(c.email)&&$j.trim(c.email)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.email_required.text"})}).message({style:"error"});return false}else{if($j.trim(c.body)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"post.err.pls_enter_body.text"})}).message({style:"error"});return false}else{return true}}}};a._initFormControls=function(d,c){};a._isEdit=function(){return false};a._render=function(){var e=this._template();var j="wysiwyg_id_"+jive.CommentApp.FormView.id;jive.CommentApp.FormView.id++;e.find("textarea").attr("id",j);this._container.append(e);this._initFormControls(this._container,j);var h=this;var c=new jive.rte.EntitlementService({objectID:h.options.resourceID,objectType:h.options.resourceType,entitlement:"VIEW"});var g=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:h.options.containerID,containerType:h.options.containerType});var f=$j("#"+j).closest("form");var d=new jive.rte.FormService({$form:f,formSubmitHandler:function(){return h._postHandler()}});var i=$j.extend({$element:$j("#"+j),isEditing:this._isEdit,onReady:function(){if(h.options.rteOptions.onReady){h.options.rteOptions.onReady()}jive.conc.nextTick(function(){h.rteView.focus()});if(!h.options.isAnonymous){var k={selector:f,objectType:105,draftObjectType:h.options.resourceType,draftObjectID:h.options.resourceID,editorId:j,pushStateEnabled:false};new jive.draft.Main(k)}},services:{imageService:g,formService:d,entitlementService:c}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(i);this._container.find("form").find("[name=cancel]").click(function(){h.emit("cancel",h._getValues());return false})};a._template=function(){return $j("<div></div>").html(this._postBlock.html())};this.remove=function(){var c=this.rteView.getID();if(this.rteView){this.rteView.killYourself();this.rteView.destroy()}window.editor.clear(c);jive.rte.multiRTE=jive.rte.multiRTE.filter(function(d){return d!=c});this._container.find("form").parent().html("");$j(window).unbind("unload",this._unloadCallback);this.emit("remove")}});jive.CommentApp.FormView.id=0;
;
jive.namespace("CommentApp");jive.CommentApp.EditFormView=jive.CommentApp.FormView.extend(function(a,b){this.init=function(c,d){this._id=d.id;this._postBlock=$j("#jive-comment-edit-block");b.init.call(this,c,d)};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView($j(this._container).parents(".jive-comment-content"),{containerPadding:0})};a._initFormControls=function(h,g){var d=h.find(".jive-comment-rte-source").val();var c=h.find("[name=commentGuestName]").val();var f=h.find("[name=commentGuestEmail]").val();var e=h.find("[name=commentGuestUrl]").val();if(c||f||e){h.find(".jive-comment-rte-source").val();h.find(".jive-comment-post-anonymous [name=name]").val(c);h.find(".jive-comment-post-anonymous [name=email]").val(f);h.find(".jive-comment-post-anonymous [name=url]").val(e);h.find(".jive-comment-post-anonymous").show()}else{h.find(".jive-comment-post-anonymous").hide()}$j("#"+g).val(d)};a._isEdit=function(){return true};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:this._container.find("[name=name]").val(),email:this._container.find("[name=email]").val(),url:this._container.find("[name=url]").val(),id:this._id}}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentView=function(l,q){jive.conc.observable(this);var n=q.id,i=$j(l),e=q.isThreaded,p=q.i18n,h=this;function f(){i.fadeOut(function(){$j(this).remove()});this.emit("remove",n);return this}function o(r){i.find("[class*=comment-preview]").html(r).fadeIn()}function m(){return i}function c(s,t,u){if(!u){u=i}var r=u.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(s,p,t,r)}function j(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).hide();i.find(".jive-comment-meta:first").after('<p class="jive-js-edit-title jive-comment-meta font-color-meta-light">'+p.cmntEditingTitle+"</p>")}function k(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).show();i.find(".jive-js-edit-title").remove()}function g(){return n}function d(){return i.find(".jive-username-link:first").text()}function a(r){var s;if(e){s=i.find("ul.jive-comment:first");if(s.length===0){s=$j("<ul/>",{"class":"jive-comment clearfix jive-comment-threaded jive-comment-indent-1"});i.append(s)}s.append(r)}else{i.parent().append(r)}}function b(){var r=i.parents().andSelf().filter("ul.jive-comment").toArray();return r.slice(1).reduce(function(t,s){return t+parseInt($j(s).css("margin-left"),10)},0)}this.remove=f;this.displayPreview=o;this.getDOMElement=m;this.setQuotedMsg=c;this.getCommentID=g;this.username=d;this.showCommentEdit=j;this.hideCommentEdit=k;this.append=a;this.indent=b};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Discussion=jive.CommentApp.Comment.extend({getFieldProps:function(){var b={};for(var a in this){if(!$j.isFunction(this[a])){b[a]=this[a]}}return b}});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionRestSource=jive.RestService.extend(function(a){a.resourceType="message";a.pluralizedResourceType=a.resourceType;this.createMessage=function(f){var d=this.RESOURCE_ENDPOINT+"/"+f.forumThreadID+"/"+f.ID,c=f.name,b=f.email;delete f.name;delete f.email;var e=JSON.stringify(f);if(c){d+="/guest";e={messageBean:f,guestUserName:c,guestUserEmail:b};e=JSON.stringify(e)}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:e})}});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.QuestionSource=function(f){var a=jive.rest.url("/message/"+f),b=a+"/question";function d(k){if(typeof k=="function"){k={success:k}}return k}function e(k){k=d(k);$j.ajax({type:"GET",url:b,dataType:"json",data:{},success:function(l){k.success(l)},error:function(l){if(typeof k.error=="function"){k.error.call(null,l)}}});return this}function g(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/helpful",dataType:"json",data:{},success:function(m){l.success(m)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function c(k){k=d(k);$j.ajax({type:"POST",url:a+"/assumedanswered",dataType:"json",data:{},success:function(l){k.success(l)},error:function(l){if(typeof k.error=="function"){k.error.call(null,l)}}})}function h(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/correct",dataType:"json",data:{},success:function(m){l.success(m)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function j(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/unmark",dataType:"json",data:{},success:function(m){l.success(m)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function i(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/unmark",dataType:"json",data:{},success:function(m){l.success(m)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}this.getQuestion=e;this.markAsHelpful=g;this.markAsCorrect=h;this.markAssumedAnswered=c;this.unMarkAsHelpful=j;this.unMarkAsCorrect=i};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionListView=function(r,d){jive.conc.observable(this);var j=this;var b,o,c=this,n=d.i18n,v=0,x,m=1;this._getValues=function(){var G={};b.find("[name='mobileEditor'],[name='containerType'],[name='container'],[name='thread'],[name='reply'],[name='message'],[name='postedFromGUIEditor'],[name='subject'],[name^='message.post'],[name='inlinePost'],[name='imageFile']").each(function(){var I=$j(this).attr("name");if((I in G)){var H=G[I];G[I]=[];if($j.isArray(H)){$j.each(H,function(J,K){G[I].push(K)})}else{G[I].push(H)}G[I].push($j(this).val())}else{G[I]=$j(this).val()}});var F=b.find("[name='ansQuestion']:checked");if(F.length>0){G.ansQuestion=F.val()}return $j.extend(G,{body:o.getHTML()})};function E(){return $j("<div></div>").html($j("#rte-template").html())}function u(H,K){if(o){console.log("reusing RTE",o);o.setHTML("");o.focus()}else{var L="wysiwygtext"+m;++m;H.append(E());H.find("textarea").attr("id",L);var G=new jive.rte.EntitlementService({objectID:d.resourceID,objectType:d.resourceType,entitlement:"VIEW"});var J=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:d.containerID,containerType:d.containerType});var I=new jive.rte.FormService({$form:$j("#"+L).closest("form"),formSubmitHandler:function(){g();var Q=$j.ajaxSettings.traditional;$j.ajaxSettings.traditional=true;var R=$j("#reply-author");var P=R.val();var O=$j("#reply-email");var N=O.val();var S=j._getValues();if(R.length>0&&$j.trim(P)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.name_required.text"})}).message({style:"error"});return false}else{if(O.length>0&&$j.trim(N)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.email_required.text"})}).message({style:"error"});return false}else{if($j.trim(S.body)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"post.err.pls_enter_body.text"})}).message({style:"error"});return false}else{S=$j.extend(S,{name:P,email:N})}}}j._formWaitingView.disableForm();c.emit("saveDiscussion",S,function(){j._formWaitingView.enableForm();$j.ajaxSettings.traditional=Q});return false}});var F=$j("#reply-author").length>0;var M=$j.extend({$element:$j("#"+L),isEditing:false,onReady:function(){if(d.rteOptions.onReady){d.rteOptions.onReady()}jive.conc.nextTick(function(){o.focus()});if(!F){var N={selector:b,objectType:105,draftObjectType:d.resourceType,draftObjectID:d.resourceID,editorId:L,pushStateEnabled:false};new jive.draft.Main(N)}},services:{imageService:J,formService:I,entitlementService:G}},d.rteOptions);o=new jive.rte.RTEWrap(M);b=M.$element.parents("form");b.find(".jive-form-button-cancel").click(function(){s();o.destroy();o=null});e(K)}b.find("[name=message]").val(K.parentDiscussionID);c.emit("formReady",{discussionId:K.resourceID,parentMessageId:K.parentDiscussionID,isReply:K.isReply})}function e(F){j._advEditorLnk=F.advEditorLnk;B().click(function(){a();return false})}function B(){return x.parent().find(".advEditor")}function a(){var F=o.getHTML();if(F!=null&&F.length>0){F="&unsanitaryBody="+encodeURIComponent(F)}j._formWaitingView.disableForm();jive.util.createAndSubmitDynamicForm({url:j._advEditorLnk+F,method:"post"})}function y(F){s();var I=$def(window._jive_current_user)&&(window._jive_current_user.ID==F.userid)?window._jive_current_user.username:F.username;F.setQuotedMsg(I,n,F.isAnonymous);var G=$j.extend({parentDiscussionID:F.messageID,advEditorLnk:F.advEditorLnk,isReply:F.isReply,replySubject:F.replySubject,userName:F.username},d);var H=p(F);return u(H,G)}function D(G){var F=$j(G).closest(".jive-thread-message, .j-thread-post, #jive-thread-reply-footer");if(F.length>0){return new jive.DiscussionApp.DiscussionView(F)}else{return null}}function q(){$j(".jive-thread-reply-hidden").closest(".reply").css("background-position","left -55px")}function l(){x.find("a.discussionAdd").live("click",function(){var F=D(this);y(F);return false});q()}function i(F){x.find(".jive-js-addReply #post-error-table > #post-error-subject").html(F).show().parent().slideDown()}function w(){i(jive.i18n.sub(n.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>"))}function g(){x.find(".jive-js-addReply #post-error-table").slideUp().find("#post-error-subject").html("").hide()}function f(G,F){$j("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-warn"></span>'+G+"</div>").fadeIn("normal",function(){if(F){$j.scrollTo($j("#success-moderation-edit"),"slow",{offset:{top:-20,left:0}})}})}function k(){$j("#success-moderation-edit").hide()}function C(F){var H=!F.isReply?x.find("ul.jive-discussion-replies:first > li:last"):F.getDOMElement().closest("li.reply");var I=true;if(H.length===0&&!F.isReply){H=$j('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-0"/>');x.append(H);I=false}var G;if(d.isThreaded&&F.isReply){G=H.find("ul.jive-discussion-replies:first > li:last");if(G.length==0){G=$j('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-1"/>');H.append(G);return G}else{return G.parent()}}else{G=I?H.parent():H;return G}}function p(F){var H=x.find(".jive-js-addReply");if(H.length>0){H.remove();if(o){o.destroy();o=null}}H=$j(jive.DiscussionApp.soy.renderReply({userName:F.username,messageID:F.messageID,i18n:n,anonymous:d.isAnonymous,moderated:d.isModerated}));C(F).append(H);var G=F.indent();$j(".addReply").css("margin-left",-G+"px");j._formWaitingView=new jive.shared.FormWaitingView(x.find(".jive-js-addReply"),{i18n:d.i18n,containerPadding:G,bgCssClass:"jive-form-waiting-disable-bg-discusssions"});H.fadeIn("fast");$j.scrollTo(H,"slow",{offset:{top:-40,left:0}});return H.find(".jive-discussion-post")}function s(){var F=x.find(".jive-js-addReply");var G=F.parent();F.fadeOut("fast",function(){if(G.children().length==0){G.hide()}})}function A(G){o.destroy();o=null;var F=x.find(".jive-content-rating").detach();F.find("script").remove();$j.ajax({url:_jive_base_url+"/inline-message.jspa?message="+G.id,async:false,success:function(H){x.closest(".j-column-wrap-l").replaceWith($j(H));x=$j("#jive-thread-messages-container");jive.rte.renderedContent.emit("renderedContent",x)}});x.find(".jive-content-rating").replaceWith(F);q()}function h(G){G=G||$j("<p>").html(d.i18n.postSuccessText);var F=v<=0;f(G.html(),F);v+=1}function t(){$j("a.localScroll").first().click()}function z(){return x.find("#discussionForm-baseDiscussionForm")}this.displayError=i;this.displayLoginError=w;this.displaySuccess=f;this.hideSuccess=k;this.scrollToLatestMsg=t;this.redisplayReplies=A;this.displayModeratedMessage=h;$j(document).ready(function(){x=$j(r);l()})};
;
jive.DiscussionApp.QuestionView=function(L,F,J){jive.conc.observable(this);var G=this;var K;var R={open:"open",resolved:"resolved",assumed_resolved:"assumed_resolved"};function A(T){H(T);S(T);O(T);if($j.browser.msie&&$j.browser.version<7){$j("#jive-thread-messages-container").hide().show()}}function P(T,V){var X=V.numHelpful;var U=V.totalNumHelpful;var Y=U-X;S(V);if(Y==0){O(V)}else{var W=T.closest(".js-thread-post-wrapper");E(W,V)}$j(T).closest(".jive-thread-reply-btn").append(jive.discussions.soy.qHelpfulAnswerFadeOutText({question:V,i18n:J}));clearTimeout(K);K=setTimeout(function(){$j(".helpfulRemaining").fadeOut(200,function(){$j(this).remove()})},3000);return false}function B(T,V){var X=V.numHelpful;var U=V.totalNumHelpful;var Y=U-X;if(Y==1){O(V)}else{var W=$j(T.closest(".js-thread-post-wrapper"));E(W,V)}S(V);return false}function O(T){$j(".js-thread-post-wrapper").each(function(){E($j(this),T)})}function E(T,U){var W=$j(T).find("a:first").attr("name");var V=parseInt(W,10);Q(T,V,U);I($j(T).find("section"),V,U)}function I(Z,b,W){var V=W.numHelpful;var d=W.totalNumHelpful;var c=d-V;var T=$j(Z).closest(".j-thread-post").find("header");var X=$j(Z).closest(".j-thread-post").find("footer");var U=T.find(".j-dotted-star");var a=X.find(".jive-thread-reply-btn");if(T.find(".j-dotted-star").length==0){T.append('<span class="j-dotted-star j-ui-elem"/>')}if(a.length==0){$j(X.append($j("<div>").addClass("jive-thread-reply-btn")));a=X.find(".jive-thread-reply-btn")}var Y=T.find(".j-helpful-star");a.empty();U.unbind();if(W.canManageQuestionState){if(W.questionState!="resolved"&&(W.helpfulAnswers&&(N(W.helpfulAnswers,b)))){a.append(jive.discussions.soy.qMarkAsCorrect({question:W,i18n:J}));a.find(".jive-thread-reply-btn-correct").click(function(){F.markAsCorrect(b,function(e){G.renderAll(e);jive.dispatcher.dispatch("trial.updatePercentComplete")});return false})}else{if(W.questionState!="resolved"&&!(W.helpfulAnswers&&(N(W.helpfulAnswers,b)))){a.append(jive.discussions.soy.qMarkAsCorrect({question:W,i18n:J}));a.find(".jive-thread-reply-btn-correct").click(function(){F.markAsCorrect(b,function(e){G.renderAll(e);jive.dispatcher.dispatch("trial.updatePercentComplete")});return false})}}}if(c>0){a.append(jive.discussions.soy.qMarkAsHelpful({question:W,i18n:J}));a.find(".jive-thread-reply-btn-helpful").add(U).click(function(){F.markAsHelpful(b,G.markAsHelpful.bind(G,$j(a)));return false})}}function Q(T,V,U){var W=$j(T).closest(".js-thread-post-wrapper");if((U.correctAnswer)&&(V==U.correctAnswer.ID)||(messageslist!="empty")){if((U.correctAnswer)&&(V==U.correctAnswer.ID)){if(!W.is(".j-correct-text")){W.addClass("j-correct");$j(T).find("header h6").prepend(jive.discussions.soy.qCorrectAnswer({question:U,i18n:J}));if($j(T).find(".j-correct-star").length<1){$j(T).find(".appleParticipationImage").hide();if($j(T).find("header").find(".j-helpful-text").length>0){$j(T).find("header").find(".j-helpful-text").hide()}if($j(T).find("header").find(".j-recommend-text").length>0){$j(T).find("header").find(".j-recommend-text").hide()}$j(T).find("header .j-post-author").append('<span class="j-correct-text">'+apple_i18n.correctAnswerText+'<a class="j-star j-correct-star j-ui-elem popped" style="display:block;"></a></span>')}}}if(messageslist!="empty"){var X=messageslist.split(",");$j(X).each(function(Z,a){var Y=a.split("-")[0];Y="#thread-message-"+Y;if($j(Y+" div.js-thread-post-wrapper").find(".j-correct-star").length<1){$j(Y+" div.js-thread-post-wrapper").addClass("j-correct");if($j(Y+" div.js-thread-post-wrapper footer a.recommendlink .j-recommend-star").length<1){if($j(Y+" div.js-thread-post-wrapper header").find(".j-recommend-text").length<1){$j(Y+" div.js-thread-post-wrapper header").find(".appleParticipationImage").hide();$j(Y+" div.js-thread-post-wrapper header").find(".j-post-author").append('<span class="j-recommend-text">'+apple_i18n.recommendAnswerText+'<a class="j-star j-recommend-star j-ui-elem popped" style="display:block;"></a></span>')}}}$j(Y+" a.recommendLink").text(apple_i18n.unrecommendAnswer);if(Z==2){$j("a.recommendLink").each(function(){var b=$j.trim($j(this).text())==apple_i18n.unrecommendAnswer;if(!b){$j(this).empty();var c=$j(this).parent().text();if(c==null||c.indexOf(apple_i18n.recommendAnswer)<0){$j(this).parent().append(apple_i18n.recommendAnswer)}}})}});if(U.helpfulAnswers&&(N(U.helpfulAnswers,V))){if(!W.is(".j-helpful")){$j(T).find("header h6").prepend(jive.discussions.soy.qHelpfulAnswer({question:U,i18n:J}));if($j(T).find(".j-correct").length<1){if($j(T).find(".j-helpful-star").length<1){if($j(T).find("header").find(".j-recommend-star").length<1){$j(T).find(".appleParticipationImage").hide();$j(T).find("header .j-post-author").append('<span class="j-helpful-text">'+apple_i18n.helpfulAnswerText+'<a class="j-star j-helpful-star j-ui-elem" style="display:block;"></a></span>');$j(T).find(".j-star").addClass("popped")}else{$j(T).find("header .j-post-author").append('<span class="j-helpful-text">'+apple_i18n.helpfulAnswerText+'<a class="j-star j-helpful-star j-ui-elem" style="display:block;"></a></span>');$j(T).find(".j-star").addClass("popped");$j(T).find("header").find(".j-helpful-text").hide();$j(T).find("header").find("a.j-helpful-star").hide()}}}}}}}else{if(U.helpfulAnswers&&(N(U.helpfulAnswers,V))){if(!W.is(".j-helpful")){W.addClass("j-helpful");$j(T).find("header h6").prepend(jive.discussions.soy.qHelpfulAnswer({question:U,i18n:J}));if($j(T).find(".j-correct").length<1){if($j(T).find(".j-helpful-star").length<1){if($j(T).find("header").find(".j-recommend-star").length<1){$j(T).find(".appleParticipationImage").hide();$j(T).find("header .j-post-author").append('<span class="j-helpful-text">'+apple_i18n.helpfulAnswerText+'<a class="j-star j-helpful-star j-ui-elem" style="display:block;" ></a></span>');$j(T).find(".j-star").addClass("popped")}}}}}else{if(($j(T).find("span.j-recommend-text").text()!=apple_i18n.recommendAnswerText)){W.removeClass("j-correct");W.find(".j-star").remove()}W.removeClass("j-helpful");W.find(".thisCorrect").remove();W.find(".thisHelpful").remove();W.find(".j-thread-replyto .apple-correct-label").remove();W.find(".j-thread-replyto .apple-helpful-label").remove()}}}function H(T){if(T.questionState=="open"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-assumedanswered").remove()}else{if(T.questionState=="assumedResolved"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-notanswered").remove()}else{$j(".jive-answer-type-assumedanswered").remove();$j(".jive-answer-type-notanswered").remove()}}$j(".js-original-header h1").after(jive.discussions.soy.qDisplayQuestionStateMessage({question:T,questionStateEnum:R,i18n:J}));if(T.questionState=="open"){$j(".jive-answer-type-notanswered").find("em").find("a").click(function(){F.markAssumedAnswered(G.renderQuestionStateMessage)})}}function S(V){$j("div.j-answer-rollup").remove();if(!V.threaded){D(V)}var Z=[];var T=[];var X=false;$j.each(appleMessageRankBeanListJson,function(a,b){if((b.isRecommendedReply||b.isCorrectAnswer)&&a<3){Z.push(b)}else{if((!b.isRecommendedReply&&!b.isCorrectAnswer)&&(b.isHelpfulAnswer||b.isHelpfulAnswerMarkedByOP)){if(!X){if($j("#text-line").length<1){$j('<h4  id="text-line" class="post-title entry-title" style="margin-top:30px"> <span>'+apple_i18n.otherRepliesText+"</span> </h4>").insertAfter($j(".j-original-message").closest(".jive-content"));X=true}}T.push(b)}}});var Y=$j(jive.discussions.soy.qDisplayInlineAnswers({question:V,questionStateEnum:R,i18n:J,apple_i18n:apple_i18n,currentUserPartner:_jive_current_user.partner,appleMessageRankBeanList:Z}));var W=$j(jive.discussions.soy.qDisplayInlineHelpfulAnswers({question:V,questionStateEnum:R,i18n:J,apple_i18n:apple_i18n,currentUserPartner:_jive_current_user.partner,appleMessageRankBeanList:T}));var U=$j("#text-line");W.insertBefore(U);$j(".j-original-message").append(Y);jive.rte.renderedContent.emit("renderedContent",Y)}function D(T){if(T.correctAnswer&&!C(T.correctAnswer.ID)){T.correctAnswer.useFullURL=true}T.helpfulAnswers&&T.helpfulAnswers.some(function(U){if(!C(U.ID)){U.useFullURL=true}})}function C(T){return($j("a[name='"+T+"']").length>0)}function N(U,T){return U&&U.some(function(V){return V.ID==T})}function M(U,T){return U&&U.some(function(V){return V.ID==T})}this.renderAll=A;this.renderInlineAnswers=S;this.markAsHelpful=P;this.unMarkAsHelpful=B;this.renderQuestionStateMessage=H;this.renderResponses=O;this.renderReply=E;this.renderAnswerButtons=I;this.renderReplyDetails=Q};function addRecommend(E,A,D){var C=$j.trim($j(D).text())==$j.trim(apple_i18n.recommendAnswer);if(C){if(typeof (trackMove)!="undefined"){trackMove("recommend this result")}var B="/__services/v2/rest/applerecommend/"+E+"/"+A+"/add";$j.post(B,function(F){if($j(D).closest("footer").parent().find("header").find(".j-correct-star").length<1){$j(D).closest(".js-thread-post-wrapper").addClass("j-correct");$containerRecommended=$j(D).closest("footer").parent().find("header");if($containerRecommended.find(".j-helpful-star").length>0){$containerRecommended.find("a.j-helpful-star").hide();$containerRecommended.find("span.j-helpful-text").hide();$containerRecommended.find(".appleParticipationImage").hide();$containerRecommended.find(".j-post-author").append('<span class="j-recommend-text">'+apple_i18n.recommendAnswerText+'<a class="j-star j-recommend-star j-ui-elem popped" style="display:block"></a></span>')}else{$containerRecommended.find("a.j-helpful-star").hide();$containerRecommended.find("span.j-helpful-text").hide();$containerRecommended.find(".appleParticipationImage").hide();$containerRecommended.find(".j-post-author").append('<span class="j-recommend-text">'+apple_i18n.recommendAnswerText+'<a class="j-star j-recommend-star j-ui-elem popped" style="display:block;"></a></span>')}}$j(D).text(apple_i18n.unrecommendAnswer);btnMessageid="#thread-message-"+A;if(F.appleRRBean.rrLimitExceeded){$j("a.recommendLink").each(function(){var G=$j.trim($j(this).text())==apple_i18n.unrecommendAnswer;if(!G){$j(this).empty();$j(this).parent().append(apple_i18n.recommendAnswer)}})}})}else{var B="/__services/v2/rest/applerecommend/"+E+"/"+A+"/remove";$j.post(B,function(F){$j(D).closest(".js-thread-post-wrapper").removeClass("j-correct");$containerRecommended=$j(D).closest("footer").parent().find("header");$containerRecommended.find(".j-recommend-star").remove();$containerRecommended.find(".j-recommend-text").remove();if($containerRecommended.find(".j-helpful-star").length>0){$containerRecommended.find("span.j-helpful-text").show();$containerRecommended.find("a.j-helpful-star").show()}if($containerRecommended.find(".j-correct-star").length>=1){$containerRecommended.find("span.j-helpful-text").hide();$containerRecommended.find("a.j-helpful-star").hide()}if(($containerRecommended.find(".j-helpful-star").length>0)||($containerRecommended.find(".j-correct-star").length==1)){$containerRecommended.find(".appleParticipationImage").hide()}else{$containerRecommended.find(".appleParticipationImage").show()}btnMessageid="#thread-message-"+A;$j(D).text(apple_i18n.recommendAnswer);if(!F.appleRRBean.rrLimitExceeded){$j("a.recommendLink").each(function(){var G=$j.trim($j(this).parent().text());if(G.indexOf(apple_i18n.recommendAnswer)>-1){$j(this).parent().contents().filter(function(){return this.nodeType===3&&$j.trim($j(this).text())==apple_i18n.recommendAnswer}).remove();$j(this).html('<span class="j-recommend-btn-star j-ui-elem"></span>'+apple_i18n.recommendAnswer)}})}})}}
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Main=function(n){var l=n.resourceID,c=n.resourceType,j=n.resourceVersionID,g=n.listAction,k=n.isModerated,f=n.isThreaded,e=n.sort||"datedesc",m=n.i18n,a,b,i,d,h="#jive-thread-messages-container";a=new jive.DiscussionApp.DiscussionRestSource(n);b=new jive.DiscussionApp.DiscussionListView(h,n);b.addListener("saveDiscussion",function(r,p){var q=new jive.DiscussionApp.Discussion(r),o=this;a.createMessage({forumThreadID:q.thread,ID:q.message,subject:q.subject,body:q.body,name:q.name,email:q.email}).addCallback(function(s){b.redisplayReplies(s.content);if(i){i.getQuestion(d.renderAll)}b.scrollToLatestMsg();if(s.moderated){b.displayModeratedMessage()}}).addErrback(function(t,s){b.displayError(t);b._formWaitingView.enableForm()})});b.addListener("formReady",function(){});if(n.question){i=new jive.DiscussionApp.QuestionSource(l);d=new jive.DiscussionApp.QuestionView(l,i,m);$j(document).ready(function(){i.getQuestion(d.renderAll)})}$j(document).ready(function(){define(["jive.rte"],$j.noop)});this.addDiscussionListViewListener=function(o,p){b.addListener(o,p)}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.discussions=="undefined"){jive.discussions={}}if(typeof jive.discussions.soy=="undefined"){jive.discussions.soy={}}jive.discussions.soy.qDisplayQuestionStateMessage=function(A,C){var B=C||new soy.StringBuilder();if(A.question.questionState==A.questionStateEnum.open){jive.discussions.soy.qQuestionNotAnswered(A,B)}else{if(A.question.questionState==A.questionStateEnum.assumed_resolved){jive.discussions.soy.qQuestionAssumedAnswered(A,B)}else{if(A.question.questionState==A.questionStateEnum.resolved){jive.discussions.soy.qQuestionResolved(A,B)}}}return C?"":B.toString()};jive.discussions.soy.qQuestionNotAnswered=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="jive-answer-type jive-answer-type-notanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.questionNotAnswered),[new soydata.SanitizedHtml('<strong class="font-color-danger">'),new soydata.SanitizedHtml("</strong>")])),(A.question.displayMarkAsAssumedAnswered)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.markQuestionAsAssumedAnswered),[new soydata.SanitizedHtml('<em style=""><a href="#">'),A.i18n.leftParen,A.i18n.rightParen,new soydata.SanitizedHtml("</a></em>")])):"","</p>");return C?"":B.toString()};jive.discussions.soy.qQuestionAssumedAnswered=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="jive-answer-type jive-answer-type-assumedanswered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.questionAssumedAnswered),[new soydata.SanitizedHtml("<strong>"),new soydata.SanitizedHtml("</strong>")])),"</p>");return C?"":B.toString()};jive.discussions.soy.qQuestionResolved=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="jive-answer-type jive-answer-type-answered font-color-meta" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.questionAnswered),[new soydata.SanitizedHtml('<strong class="font-color-okay">'),new soydata.SanitizedHtml("</strong>")])),"</p>");return C?"":B.toString()};jive.discussions.soy.qMarkAsCorrect=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-thread-reply-btn-correct" style="float:none"><a href="#"><span class="j-correct-btn-star j-ui-elem"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.correctAnswer),[])),"</a></div>");return C?"":B.toString()};jive.discussions.soy.qMarkAsHelpful=function(A,C){var B=C||new soy.StringBuilder();B.append((A.question.totalNumHelpful-A.question.numHelpful>0&&A.question.helpfulScenarioEnabled)?'<!-- hiding the current this helped me button JIRA task number::RRP-53 CRS: Post Voting Features - Like RRP-77 --><!--  <div class="jive-thread-reply-btn-helpful"><a href="#"><span class="j-helpful-btn-star j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.helpfulAnswer),[]))+"</a></div> -->":"");return C?"":B.toString()};jive.discussions.soy.qUnmarkAsCorrect=function(A,C){var B=C||new soy.StringBuilder();B.append('<!-- Unmark as correct --><div class="jive-thread-reply-btn-correct-unmark jive-reply-unmark',(A.question.bridged)?"-bridged":"",'" style="display: inline-block;"><span class="j-correct-btn-star j-ui-elem"></span><a href="#" class="font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.unmarkAsCorrectAnswer),[])),"</a></div>");return C?"":B.toString()};jive.discussions.soy.qUnmarkAsHelpful=function(A,C){var B=C||new soy.StringBuilder();B.append('<!-- Unmark as helpful --><div class="jive-thread-reply-btn-helpful-unmark jive-reply-unmark',(A.question.bridged)?"-bridged":"",'" style="display: inline-block;"><span class="j-helpful-btn-star j-ui-elem"></span><a href="#" class="font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.unmarkAsHelpfulAnswer),[])),"</a></div>");return C?"":B.toString()};jive.discussions.soy.qHelpfulAnswerFadeOutText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.question.totalNumHelpful-A.question.numHelpful>1)?'<span class="helpfulRemaining font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.someHelpfulAnswersLeft),[new soydata.SanitizedHtml("<strong>"+(A.question.totalNumHelpful-A.question.numHelpful)+"</strong>")]))+"</span>":(A.question.totalNumHelpful-A.question.numHelpful==1)?'<span class="helpfulRemaining font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.oneHelpfulAnswerLeft),[new soydata.SanitizedHtml("<strong>"+(A.question.totalNumHelpful-A.question.numHelpful)+"</strong>")]))+"</span>":'<span class="helpfulRemaining font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.allHelpfulAnswersAwarded),[]))+"</span>");return C?"":B.toString()};jive.discussions.soy.qHelpfulAnswer=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="thisHelpful" style=""><span class="jive-icon-med jive-icon-discussion-helpful"></span><span class="jive-thread-reply-message-helpful-label font-color-helpful">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.helpfulAnswer),[])),"</span></span>");return C?"":B.toString()};jive.discussions.soy.qCorrectAnswer=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="thisCorrect" style=""><span class="jive-icon-med jive-icon-discussion-okay"></span><span class="jive-thread-reply-message-correct-label font-color-okay">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.correctAnswer),[])),"</span></span>");return C?"":B.toString()};jive.discussions.soy.qDisplayInlineAnswers=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-answer-rollup"><!-- Embedded Correct Answer -->',(B.question.questionState==B.questionStateEnum.resolved&&B.question.correctAnswer)?"":"");if(B.appleMessageRankBeanList!=null){var F=B.appleMessageRankBeanList;var C=F.length;for(var A=0;A<C;A++){var E=F[A];jive.discussions.soy.qDisplayInlineCorrectAndRecommendAnswers(soy.$$augmentData(B,{promotedMessage:E,apple_i18n:B.apple_i18n,i18n:B.i18n}),D)}}D.append("</div>");return G?"":D.toString()};jive.discussions.soy.qDisplayInlineHelpfulAnswers=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-answer-rollup"><!-- Embedded Correct Answer -->',(B.question.questionState==B.questionStateEnum.resolved&&B.question.correctAnswer)?"":"");if(B.appleMessageRankBeanList!=null){var F=B.appleMessageRankBeanList;var C=F.length;for(var A=0;A<C;A++){var E=F[A];jive.discussions.soy.qDisplayInlinePromotedHelpfulAnswers(soy.$$augmentData(B,{promotedMessage:E,apple_i18n:B.apple_i18n,i18n:B.i18n}),D)}}D.append("</div>");return G?"":D.toString()};jive.discussions.soy.qDisplayInlineCorrectAndRecommendAnswers=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-inline-correct-answer" class="j-rc3" style="margin-top:10px"><header class="j-author-block"><div class="j-author-info"><strong class="font-color-okay j-line1" style="font-weight:normal"><!-- Deleted MVP check for This solved my question  as part of story RRP-213 -->',(A.promotedMessage.isCorrectAnswer)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.correctAnswer),[]))+' <span class="j-correct-text" >'+soy.$$escapeHtml(A.apple_i18n.correctAnswerText)+'<a class="j-star j-correct-star j-ui-elem popped"></a></span>':soy.$$escapeHtml(A.apple_i18n.inlineRecommendReply)+'  <span class="j-recommend-text">'+soy.$$escapeHtml(A.apple_i18n.recommendAnswerText)+'<a class="j-star j-recommend-star j-ui-elem popped"></a></span>','</strong><span class="font-color-meta j-line2">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.byWord),[]))," ",soy.$$escapeHtml(A.promotedMessage.messageBean.user.username)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.onWord),[]))," ",soy.$$escapeHtml(A.promotedMessage.messageBean.modificationDate),"</span></div></header><section>",A.promotedMessage.messageBean.body,'</section><footer><strong><a href="',(A.promotedMessage.messageBean.url!=null)?soy.$$escapeHtml(A.promotedMessage.messageBean.url):"#"+soy.$$escapeHtml(A.promotedMessage.messageBean.ID),'" class="jive-inline-correct-answer-context-link ',(A.promotedMessage.messageBean.url==null)?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.seeAnswerInContext),[])),"</a></strong></footer></div>");return C?"":B.toString()};jive.discussions.soy.qDisplayInlinePromotedHelpfulAnswers=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-inline-promoted-helpful-answer" class="j-rc3"><header class="j-author-block"><div class="j-author-info"><strong class="font-color-okay j-line1" style="font-weight:normal;color: #ff981e;"><!-- Deleted MVP check for This solved my question  as part of story RRP-213 -->',soy.$$escapeHtml(A.apple_i18n.inlineRecommendReply),'  <span class="j-helpful-text" >',soy.$$escapeHtml(A.apple_i18n.helpfulAnswerText),'<a class="j-star j-helpful-star j-ui-elem popped"></a></span></strong><span class="font-color-meta j-line2"style="color:#981e">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.byWord),[]))," ",soy.$$escapeHtml(A.promotedMessage.messageBean.user.username)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.onWord),[]))," ",soy.$$escapeHtml(A.promotedMessage.messageBean.modificationDate),"</span></div></header><section>",A.promotedMessage.messageBean.body,'</section><footer><strong><a href="',(A.promotedMessage.messageBean.url!=null)?soy.$$escapeHtml(A.promotedMessage.messageBean.url):"#"+soy.$$escapeHtml(A.promotedMessage.messageBean.ID),'" class="jive-inline-correct-answer-context-link ',(A.promotedMessage.messageBean.url==null)?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.seeAnswerInContext),[])),"</a></strong></footer></div>");return C?"":B.toString()};jive.discussions.soy.qDisplayInlineCorrectAnswer=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-inline-correct-answer" class="j-rc3"><header class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.question.correctAnswer.user,{size:32,currentUserPartner:A.currentUserPartner}),B);B.append('</span><div class="j-author-info"><strong class="font-color-okay j-line1"><!-- Deleted MVP check for This solved my question  as part of story RRP-213 -->',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.correctAnswer),[])),' </strong><span class="font-color-meta j-line2">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.byWord),[]))," ");jive.shared.displayutil.userDisplayNameLink(A.question.correctAnswer.user,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.onWord),[]))," ",soy.$$escapeHtml(A.question.correctAnswer.modificationDate),"</span></div></header><section>",A.question.correctAnswerHtml,'</section><footer><strong><a href="',(A.question.correctAnswer.useFullURL)?soy.$$escapeHtml(A.question.correctAnswer.url):"#"+soy.$$escapeHtml(A.question.correctAnswer.ID),'" class="jive-inline-correct-answer-context-link ',(!A.question.correctAnswer.useFullURL)?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18n.seeAnswerInContext),[])),"</a></strong></footer></div>");return C?"":B.toString()};jive.discussions.soy.qDisplayInlineHelpfulAnswerLinks=function(C,G){var E=G||new soy.StringBuilder();E.append('<div class="j-inline-helpful-answers" class="font-color-meta" style="display:block;"><strong class="font-color-helpful"><span class="j-helpful-btn-star j-ui-elem"></span>',(C.plural)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(C.i18n.helpfulAnswers),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(C.i18n.helpfulAnswer),[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(C.i18n.byWord),[])),' <span class="jive-inline-helpful-answer-links">');var F=C.question.helpfulAnswers;var B=F.length;for(var D=0;D<B;D++){var A=F[D];jive.discussions.soy.qDisplayHelpfulAnswerLink({message:A,i18n:C.i18n},E);E.append((!(D==B-1))?",":"","&nbsp;")}E.append("</span></div>");return G?"":E.toString()};jive.discussions.soy.qDisplayHelpfulAnswerLink=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.message.useFullURL)?'<a href="#'+soy.$$escapeHtml(A.message.ID)+'" class="replyToName localScroll"':'<a href="'+soy.$$escapeHtml(A.message.url)+'" class="replyToName"','title="',soy.$$escapeHtml(A.i18n.seeThisAnswer),'">',soy.$$escapeHtml(A.message.user.displayName),"</a>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.metoo=="undefined"){jive.soy.metoo={}}jive.soy.metoo.renderMeTooModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(A.youID),'" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ',(A.activityType=="bookmark")?'class="j-modal-bookmark-header"':"",">",(A.activityType=="metoo")?'<span class="jive-icon-med jive-icon-like"></span>':"",(A.activityType=="bookmark")?'<div class="jive-bookmark-ribbon j-ui-elem"></div>':"");jive.soy.metoo.getCountTextUser({count:A.totalCount},B);B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.and"),[])));jive.soy.metoo.getCountText({count:A.guestCount},B);B.append('</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section  class="jive-modal-content clearfix">',(!A.guest)?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+((A.bidirectionalGraph)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.filter.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.connections.filter.label"),[])))+"</label>"+((A.activityType=="bookmark")?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.sidebar.filter.notes"),[]))+"</label>":"")+"</nav>":"");jive.soy.metoo.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},B);jive.soy.metoo.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,id:"modal-liked-friends",classNames:"liked-friends-list js-friends-list",show:false},B);if(A.activityType=="bookmark"){jive.soy.metoo.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},B);jive.soy.metoo.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},B)}B.append("</section></div>");return C?"":B.toString()};jive.soy.metoo.renderUserList=function(B,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(B.id),'" class="',soy.$$escapeHtml(B.classNames),'"',(!B.show)?' style="display: none;"':"","><tbody>");var F=B.users;var A=F.length;if(A>0){for(var D=0;D<A;D++){var E=F[D];jive.soy.metoo.displayUserRow({activityType:B.activityType,user:E,currentUserID:B.currentUserID,currentUserPartner:B.currentUserPartner,onlyFriends:B.onlyFriends,onlyNotes:B.onlyNotes},C)}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">',(B.activityType=="bookmark")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.bookmarks"),[])):(B.activityType=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.likes"),[])):(B.activityType=="metoo")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.modal.empty.msg.likes"),[])):(B.activityType=="follow")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.follow"),[])):(B.activityType=="connections")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.connections"),[])):(B.activityType=="membership")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.membership"),[])):"","</p></td></tr>")}C.append("</tbody></table>");return G?"":C.toString()};jive.soy.metoo.renderUserNotesList=function(A,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var F=A.users;var E=F.length;if(E>0){for(var B=0;B<E;B++){var D=F[B];if(D.prop.bookmarknotes){jive.soy.metoo.displayUserRow({activityType:A.activityType,user:D,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},C)}}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>')}C.append("</tbody></table>");return G?"":C.toString()};jive.soy.metoo.displayYou=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(A.username)},B);B.append('" data-userid="',soy.$$escapeHtml(A.ID),'" class="jiveTT-hover-user">',soy.$$escapeHtml(A.i18n.acclaimLikedYou),"</a>");return C?"":B.toString()};jive.soy.metoo.displayUserRow=function(A,C){var B=C||new soy.StringBuilder();if(!A.onlyFriends||A.onlyFriends&&A.currentUserID!=A.user.id&&A.user.prop.connections.targetUserACurrentFriend){if(A.onlyNotes&&A.user.prop.hasBookmarknotes||!A.onlyNotes){B.append('<tr data-user-id="',soy.$$escapeHtml(A.user.id),'">');if(!A.onlyNotes){B.append('<td class="j-td-avatar ',(A.user.prop.hasBookmarknotes)?"j-td-topalign":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35,currentUserPartner:A.currentUserPartner}),B);B.append("</td>")}B.append('<td class="j-td-name">');if(A.currentUserID==A.user.id){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])}),B)}else{jive.shared.displayutil.userDisplayNameLink(A.user,B)}B.append((!A.onlyNotes)?"<!-- TODO: show truncated version of the notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""):"<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""),"</td>");if(A.activityType!="bookmark"){if(!A.onlyNotes){B.append('<td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){if(A.user.id!=A.currentUserID&&A.user.visible){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"bookmarked-user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}}B.append("</td>")}}B.append("</tr>")}}return C?"":B.toString()};jive.soy.metoo.privateBookmarkNotification=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.privateBookmarks"),[])),"</td></tr>");return C?"":B.toString()};jive.soy.metoo.getCountText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count||typeof (A.count)!="undefined")?soy.$$escapeHtml(A.count):"0",(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.guest"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.hadquestion"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.guests"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.hadquestion"),[])));return C?"":B.toString()};jive.soy.metoo.getCountTextUser=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(A.count),(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.person"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.people"),[])));return C?"":B.toString()}
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('MeTooActivity.Info');  // Creates the jive.Activity namespace if it does not already exist.

/**
 * Handles UI for a list of link items
 *
 * @extends jive.AbstractView
 * @depends path=/resources/scripts/apps/shared/controllers/switchboard.js
 * @depends path=/resources/scripts/apps/shared/views/abstract_view.js
 * @depends template=jive.browse.activityinfo.*
 *
 * @depends template=jive.soy.metoo.*
 */
jive.MeTooActivity.Info.MeTooActivityInfoView = jive.AbstractView.extend(function(protect) {
    var $ = jQuery;

    // a piece of content can have bookmarks that are both public and private. the UI needs to indicate that there may
    // be items that are not shown
    function isBookmarkType(value) {
        return value === 'bookmark';
    }


    this.init = function(options) {
        
    	/* Apple customization to get the latest value of Email updates toggle flag*/
        if('/activity'==window.location.pathname) {
	        var userId = window._jive_effective_user_id;
	        var URL = '/__services/v2/rest/emailNotification/';
	        ajaxSettings = {
	                contentType: "application/json; charset=utf-8"
	            };
	        $.ajax($.extend({
	            type: 'GET',
	            dataType: 'json',
	            success: function(promise, success) {
	            	if(promise) {
	            		$('.ios-switch').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-ja').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-ko').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$('.ios-switch-cn').animate({'backgroundPosition' : '0'}, 150, 'linear');
	            		$j('#activity_email_updates_on').prop('checked',true);
	                	$j('#activity_email_updates_off').prop('checked',false)
	            	}
	            	else {
	            		$('.ios-switch').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-ja').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-ko').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$('.ios-switch-cn').animate({'backgroundPosition' : '-37'}, 150, 'linear');
	            		$j('#activity_email_updates_on').prop('checked',false);
	                	$j('#activity_email_updates_off').prop('checked',true)
	            	}
	            	
	            },
	            error: function(promise, error){
	                var source = this;
	                return function(xhr, textStatus, err) {
	                    var jsonResp, message, code;
	                    jsonResp = JSON.parse(xhr.responseText);
	                    message = jsonResp ? jsonResp.message : null;
	                    code = (jsonResp && jsonResp.code) ? jsonResp.code : xhr.status;
	                    if (textStatus !== 'error' || xhr.status >= 100) {
	                        source.maybeEmitError(promise, genericError, [message, code]);
	                    }
	                };
	            
	            },
	            timeout: 120000
	        }, ajaxSettings || {}, {
	            url: URL+userId+'/'+'getEmailNotificationToggleFlag'
	        }));
        }
        
        /* Apple customization ends here*/

    	/* Apple customization on Email updated toggle button click*/
    	$('.ios-switch, .ios-switch-ja, .ios-switch-ko, .ios-switch-cn').on('click', function(e) {
    		
    		var toggleFlag = $j('#activity_email_updates_on').prop('checked');
    		var userId = window._jive_effective_user_id;
            var URL = '/__services/v2/rest/emailNotification/';
            ajaxSettings = {
                    contentType: "application/json; charset=utf-8"
                };
            $.ajax($.extend({
                type: 'POST',
                dataType: 'json',
                success: function(promise, success) {
                },
                error: function(promise, error){
                    var source = this;
                    return function(xhr, textStatus, err) {
                        var jsonResp, message, code;
                        jsonResp = JSON.parse(xhr.responseText);
                        message = jsonResp ? jsonResp.message : null;
                        code = (jsonResp && jsonResp.code) ? jsonResp.code : xhr.status;
                        if (textStatus !== 'error' || xhr.status >= 100) {
                            source.maybeEmitError(promise, genericError, [message, code]);
                        }
                    };
                
                },
                timeout: 120000
            }, ajaxSettings || {}, {
                url: URL+userId+'/'+!toggleFlag
            }));
		});
        
        /* Apple customization ends here*/
        
        // properties
        var view = this;
        this.$modal = null;
        this.pageSize = options.pageSize;
        this.soyParams = {};

        
        // private methods
        this.renderModal = function(soyParams) {
            return $j(jive.soy.metoo.renderMeTooModal(soyParams));
        };

        /*
         * This exists so that if an unfollowed user listed in the Everyone tab becomes followed,
         * a row will be added to the Connections tab.
         */
        this.handleFollow = function(data) {
            if (this.$modal) {
                var $tables = this.$modal.find('table.js-everyone-list, table.js-friends-list'),
                    rowSelector = 'tr[data-user-id=' + data.id + ']';

                if (!$tables.eq(1).find(rowSelector).length) {
                    $tables.eq(0).find(rowSelector).clone().prependTo($tables.eq(1).find('tbody'));
                }
            }
        };


        // listen to events
        jive.switchboard.addListener('follow.user.complete', this.handleFollow.bind(this));

        // removed as part of JIVE-10173.
//        jive.switchboard.addListener('follow.create', function(follow) {
//            view.updateBrowseItemCounts('follow', follow.objectType, follow.objectID, true);
//        });
//
//        jive.switchboard.addListener('follow.destroy', function(follow) {
//            view.updateBrowseItemCounts('follow', follow.objectType, follow.objectID, false);
//        });
    };

    this.showUsers = function (userData, params) {
        var view = this,
            options = {
                centered       : true,
                destroyOnClose : true,
                closeFocusSelector: params.context,
                onClose        : function() {
                    $j('.js-pop').remove();
                }
            };

        this.soyParams = protect.buildSoyParams(userData, params);
        this.$modal && this.$modal.remove(); // ensure only one instance of the modal
//        console.debug('%i users shown', this.soyParams.users.length);

        var $content = this.renderModal(this.soyParams);
        if (isBookmarkType(userData.activityType)) {
            var row = jive.soy.acclaim.privateBookmarkNotification();
            $content.find('table.js-everyone-list tbody').each(function() {
                $j(this).append(row);
            });
        }
        this.$modal = $content.lightbox_me(options);

        // attach radio events
        this.$modal.find('#jive-view-picker input:checkbox').click(function() {

            // 4 possible tables: all (0) friends (1), all with notes (2), friends with notes (3)
            var $filters = $j('#jive-view-picker input:checked');

            // if nothing is checked, default to table 0
            var tableIndex = 0;
            // one checked, use it's value as a table index
            if ($filters.length == 1) {
                tableIndex = $filters.val();
            }
            // two checked, use table index 3
            else if ($filters.length == 2) {
                tableIndex = 3;
            }
            view.$modal.find('table').hide();
            view.$modal.find('table').eq(tableIndex).show();
        });

        
        // attach endless scroll
        this.$modal.find('.jive-modal-content').endlessScroll({
            fireDelay : false,
            callback  : function(i) {
                if (view.soyParams.moreResults) {
                    view.emitP('loadUsersFromIndex', params, view.pageSize * i).addCallback(function(userData) {
                        view.soyParams.moreResults = userData.moreResults;
                        view.appendUsers(userData);
                    });
                }
            }
        });
    };


    this.appendUsers = function(userData) {
        var users = userData && userData.items ? userData.items : [];
        if (users.length > 0) {
            //console.debug('%i users appended', users.length);
            this.$modal.find('.j-js-private-bookmark-notification').remove();
            //grab rows from rendered table with same id as the currently visible table
            var $tbody = this.$modal.find('.jive-modal-content tbody:visible');
            var tableId = $tbody.parent().attr('id');
            var $renderedModal = this.renderModal($j.extend({}, this.soyParams, { users: users }));
            var $rows = $renderedModal.find('table#' + tableId + ' tr');
            $tbody.append($rows.clone());
            if (isBookmarkType(this.soyParams.activityType)) {
                var row = jive.soy.acclaim.privateBookmarkNotification();
                $tbody.append(row);
            }
        }
    };


    protect.buildSoyParams = function(userData, params) {
        return {
            activityType       : params.activityType,
            bidirectionalGraph : userData.bidirectionalGraph,
            currentUserID      : userData.currentUserID,
            currentUserPartner : userData.currentUserPartner,
            moreResults        : userData.moreResults,
            objectID           : params.objectID,
            objectType         : params.objectType,
            totalCount         : userData.totalCount,
            users              : userData.items,
            youID              : params.youID || userData.currentUserID,
            youPartner         : params.youPartner || userData.currentUserPartner,
	        guestCount         : userData.prop.guestCount
	    
       };
    };

    // removed as part of JIVE-10173
//    protect.updateBrowseItemCounts = function(type, objectType, objectID, increment){
//        var $browseItem = $j('.js-browse-item[data-object-type=' + objectType + '][data-object-id=' + objectID + ']');
//        var $activitySource = $browseItem.find("a.js-activityinfo-source[data-activity-type='" + type + "']");
//        var countData = $activitySource.data("activity-count");
//        var count = countData ? parseInt(countData) : 0;  //because IE8 is that lame
//        count = (increment) ? ++count : --count;
//        count = (count < 0) ? 0 : count;    //just in case something is really off, make sure we never go negative
//        $activitySource.text(count);
//        $activitySource.data("activity-count", count);    //make sure data is kept in the loop
//    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('MeTooActivity');
/**
 * Interface to aci content REST service.
 *
 * @extends jive.RestService
 * @depends path=/resources/scripts/apps/shared/models/rest_service.js
 */
jive.MeTooActivity.ItemSource = jive.RestService.extend(function(protect) {
    protect.resourceType = "activity";
    protect.pluralizedResourceType = protect.resourceType;

     /**
     * Get a list of users who have liked, commented on, or bookmarked a piece of content.
     *
     * /activity/users/{activityType}/{objectType}/{objectID}
     */
    this.getContentActivityUsers = function(params, start, count) {
        var options = {
            cache : false,

            data : {
                count: count,
                start: start
            },

            url : [this.RESOURCE_ENDPOINT, 'users', 'metoo', params.objectType, params.objectID].join('/')
        };

        return this.commonAjaxRequest(new jive.conc.Promise(), 'GET', options);
    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

jive.namespace('MeTooActivity.Info');  // Creates the jive.OrgChart namespace if it does not already exist.

/**
 * Displays users who have acted on a piece of content
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/info/views/activity_info_view.js
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/model/activity_source.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/conc/promise.js
 */
jive.MeTooActivity.Info.Main = jive.oo.Class.extend(function(protect) {
    this.init = function() {
        // private variables
        this.pageSize = 20;

        // Set up component instances.
        this.source = new jive.MeTooActivity.ItemSource();
        this.view = new jive.MeTooActivity.Info.MeTooActivityInfoView({ pageSize: this.pageSize });

        // listen for load more event (endless scroll)
        var self = this;
        this.view.addListener('loadUsersFromIndex', function(params, startIndex, promise) {
            self.source.getContentActivityUsers(params, startIndex, self.pageSize).addCallback(function(response) {
                promise.emitSuccess(response);
            });
        });
    };

    /**
     * Asynchronously gathers a list of users corresponding to a set of parameters.
     *
     * @param {object} params
     * @param {string} params.activityType bookmark|children|connections|follow|like|membership
     * @param {string|number} objectID
     * @param {string|number} objectType
     * @param startIndex
     * @returns {Promise}
     */
    this.showUsers = function(params, startIndex) {
        var view    = this.view,
            promise = new jive.conc.Promise();
        
        this.source.getContentActivityUsers(params, startIndex, this.pageSize).addCallback(function(response) {
            view.showUsers(response, params);
            promise.emitSuccess($j.extend({ totalCount: response.totalCount }, params));
        }).addErrback(function() {
            promise.emitError();
        });


        return promise;
    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 * Handles all requests to show users associated with certain types of acclaim. These types include:
 *      - bookmarks
 *      - children
 *      - connections (following)
 *      - followers
 *      - likes
 *      - members (of a group)
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/browse/activity/info/main.js
 * @depends path=/resources/scripts/jive/dispatcher.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/conc/observable.js
 */
if (!jive.MeTooacclaim) {
    jive.MeTooacclaim = (function($) {
        var acclaim       = jive.conc.observable({}),
            userDisplay   = new jive.MeTooActivity.Info.Main(),
            acclaimEvents = {
                showBookmarks   : 'bookmark',
                showChildren    : 'children',
                showConnections : 'connections',
                showFollowers   : 'follow',
                showMetoo      : 'metoo',
                showMembers     : 'membership'
            };

        jive.dispatcher.listen(Object.keys(acclaimEvents), function(payload, event) {
            payload = $.extend({ activityType: acclaimEvents[event] }, payload);
                delete payload.count;
                delete payload.command;
            var params = $.extend({ objectID: payload.objectId, context: this }, payload);
                delete params.objectId;

            acclaim.emit('beforeFetch', payload);
            userDisplay.showUsers(params, 0).addCallback(function(response) {
                acclaim.emit('afterFetch', $.extend({ totalCount: response.totalCount }, payload));
            }).addErrback(function() {
                acclaim.emit('afterFetch', payload);
            });
        });


        return acclaim;
    })(jQuery);
}

;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}if(typeof jive.eae.acclaim.metoo=="undefined"){jive.eae.acclaim.metoo={}}jive.eae.acclaim.metoo.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.metoo.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.metoo.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<span class="j-js-metooliking-control">');jive.eae.acclaim.metoo.activityAcclaimLinkContainer(A,B);B.append("</span>");break}return C?"":B.toString()};jive.eae.acclaim.metoo.activityAcclaimLinkContainer=function(A,D){var B=D||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-metoo-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');jive.eae.acclaim.metoo.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unmetoo":"metoo",classes:"jive-acclaim-likelink"}),B);B.append(" ");var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.metoo.count(soy.$$augmentData(A,{command:"showMetoo",count:A.likeCount,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(A.likeCount)+")",accessibilityLinkLabel:C.toString()}),B);B.append("</span></span></span>");return D?"":B.toString()};jive.eae.acclaim.metoo.acclaimContainerMedium=function(A,D){var B=D||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.metoo.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unmetoo":"metoo",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])),"</span>")}var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.metoo.count(soy.$$augmentData(A,{command:"showMetoo",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:C.toString()}),B);B.append("</span>");return D?"":B.toString()};jive.eae.acclaim.metoo.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?"<a "+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+'" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="metoo")?"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])):"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="metoo")?"  "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])))+"</a>":((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])));return C?"":B.toString()};jive.eae.acclaim.metoo.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.metoo.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.metoo.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.metoo.countLabel(A,B);B.append("<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button"');jive.eae.acclaim.metoo.labelledBy__Ce4(A,B);B.append("</a>");return C?"":B.toString()};jive.eae.acclaim.metoo.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.metoo.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.metoo.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}if(typeof jive.eae.acclaim.metoo=="undefined"){jive.eae.acclaim.metoo={}}jive.eae.acclaim.metoo.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.metoo.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.metoo.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<span class="j-js-metooliking-control">');jive.eae.acclaim.metoo.activityAcclaimLinkContainer(A,B);B.append("</span>");break}return C?"":B.toString()};jive.eae.acclaim.metoo.activityAcclaimLinkContainer=function(A,D){var B=D||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-metoo-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');jive.eae.acclaim.metoo.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unmetoo":"metoo",classes:"jive-acclaim-likelink"}),B);B.append(" ");var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.metoo.count(soy.$$augmentData(A,{command:"showMetoo",count:A.likeCount,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(A.likeCount)+")",accessibilityLinkLabel:C.toString()}),B);B.append("</span></span></span>");return D?"":B.toString()};jive.eae.acclaim.metoo.acclaimContainerMedium=function(A,D){var B=D||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.metoo.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unmetoo":"metoo",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])),"</span>")}var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.metoo.count(soy.$$augmentData(A,{command:"showMetoo",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:C.toString()}),B);B.append("</span>");return D?"":B.toString()};jive.eae.acclaim.metoo.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?"<a "+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+'" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="metoo")?"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])):"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="metoo")?"  "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.unlike"),[])))+"</a>":((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("metoo.liking.like"),[])));return C?"":B.toString()};jive.eae.acclaim.metoo.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.metoo.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.metoo.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.metoo.countLabel(A,B);B.append("<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button"');jive.eae.acclaim.metoo.labelledBy__Ce4(A,B);B.append("</a>");return C?"":B.toString()};jive.eae.acclaim.metoo.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.metoo.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.metoo.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

jive.namespace('MeTooing');

/**
 * Liking REST service.
 *
 * @class
 * @extends jive.RestService
 * @param {Object}  options
 *
 * @depends path=/resources/scripts/jive/rest.js
 */
jive.MeTooing.LikeSource = jive.RestService.extend(function(protect) {
    // Mix in observable to make this class an event emitter.
    jive.conc.observable(this);

    /**
     * Set to "acclaim"; configures the REST endpoints that instances of this
     * class connect to.
     *
     * @name resourceType
     * @fieldOf jive.Liking.LikeSource#
     * @type string
     * @protected
     */
    protect.resourceType = "metoo";
    /**
     * Don't want a pluralizedResourceType, set this to resourceType
     *
     * @name pluralizedResourceType
     * @fieldOf jive.Liking.LikeSource#
     * @type string
     * @protected
     */
    protect.pluralizedResourceType = protect.resourceType;

  /**
     * Fetches the number of likes for an objectType and objectID
     *
     * @methodOf jive.Liking.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.getLikes = function(objectType, objectID){
        var url = this.RESOURCE_ENDPOINT + '/' + objectType + '/' + objectID + '/mixedScoredisplay';
        var likeType = 'metoo';

        return this.commonAjaxRequest(new jive.conc.Promise(), 'POST', {url:url, data:{ratingType:likeType}});
    };

  /**
     * determines if the object is liked by the user
     *
     * @methodOf jive.Liking.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.getLikeData = function(objectType, objectID){
        var url = this.RESOURCE_ENDPOINT + '/' + objectType + '/' + objectID;
        var likeType = 'metoo';

        return this.commonAjaxRequest(new jive.conc.Promise(), 'GET', {url:url, data:{ratingType:likeType}});
    };

  /**
     * determines if the object is liked by the user
     *
     * @methodOf jive.Liking.LikeSource#
     * @param {Number}  objectType the type of content object
     * @param {Number} objectID the ID of the content object
     * @returns {jive.conc.Promise} promise that is fulfilled when the data is ready
     */
    this.setLiked = function(like, objectType, objectID){
        var url, data,
            likeType = 'metoo',
            voteVal  = 1,
            promise = new jive.conc.Promise();

        if (like) {
            var trialQueryParams = '';
            data = {ratingType:likeType, voteValue:voteVal};
            if (jive.Trial && jive.Trial.Controller) {
                // a jive trial is going on, need to possibly send extra query params if this "like" is part of a certain quest.
                var activeQuestData = jive.Trial.Controller.getActiveQuestAndStep();
                if (activeQuestData.activeQuestID == '1836538113' && activeQuestData.activeQuestStep == 1) {
                    data.fromQuest = activeQuestData.activeQuestID;
                    promise.addCallback(function() {
                        jive.dispatcher.dispatch("trial.like.created");
                        jive.dispatcher.dispatch("trial.updatePercentComplete");
                    });
                }
            }
            url = '/' + this.resourceType + '/' + objectType + '/' + objectID;
        }
        else{
            url = '/' + this.resourceType + '/' + objectType + '/' + objectID + '/removevote';
            data = {ratingType:likeType};
        }
        $j.post(jive.rest.url(url), data, function() {
            promise.emitSuccess();
        });
        return promise;
    };

});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 * Handles all like/unlike functionality
 *
 * @depends path=/plugins/other-plugin/resources/script/apps/metoo/models/metoo_source.js
 * @depends path=/resources/scripts/jive/dispatcher.js
 * @depends template=jive.eae.acclaim.metoo.*
 * @throws throws an exception if the widget type is unknown
 */

if (!jive.MeToo) {
    jive.namespace('MeToo', (function(model, likeControl) {
        function updateUI($element, isLiked, objectType, objectId) {
            var $container      = $element.closest('.js-acclaim-metoo-container'),
                $new,
                likeCount       = $container.data('likes'),
                soyParams       = {
                    canLike    : true,
                    liked      : isLiked,
                    objectId   : objectId,
                    objectType : objectType,
                    type       : $container.data('type'),
                    showIcon   : $container.data('showicon')
                };


            // adjust the likeCount. ensure it is always 0 or more
            likeCount += isLiked ? 1 : -1;
            likeCount  = likeCount < 0 ? 0 : likeCount;
            soyParams.likeCount = likeCount;

            /*
             * Widget type can be one of the following values:
             *
             * mini   - used in the activity stream (see acclaim.soy)
             * small  - identical to mini in presentation, but the DOM structure is a little different (see acclaim.ftl)
             * medium - used on a content detail page. a larger like/count display area (see acclaim.ftl)
             */
            switch (soyParams.type) {
            case 'mini':
                $new = $element.closest('.j-js-metooliking-control').html(likeControl(soyParams));
                break;

            case 'medium':
                $new = $container.data('likes', likeCount).html(likeControl(soyParams));
                break;

            case 'small':
                $new = $j(likeControl($j.extend({ showGlyph: true }, soyParams)));
                var $control = $container.closest('.j-js-metooliking-control');

                if ($control.length > 0) {
                    $control.replaceWith($new);
                } else {
                    $container.replaceWith($new);
                }
                break;

            default:
                throw 'Unknown widget type';
            }

            if($new)
                $new.find('a. jive-acclaim-likelink').focus();
        }

        var inFlightRequests = {};
        jive.dispatcher.listen(['metoo', 'unmetoo'], function(payload, event, target) {
            var key = payload.objectType + "_" + payload.objectId;
            if(inFlightRequests[key]){
                //For any given entity descriptor, we can have at most one request pending.
                //This partially mitigates a data design issue in the acclaim subsystem that allows duplicate likes.
                console.log("duplicate metoo request, ignoring", payload, event, target);
                return;
            }else{
                inFlightRequests[key] = true;
            }

            var isLiked = event === 'metoo';
            model.setLiked(isLiked, payload.objectType, payload.objectId).addCallback(function() {
                updateUI($j(target), isLiked, payload.objectType, payload.objectId);
                jive.switchboard.emit("acclaim.recorded", isLiked, payload.objectType, payload.objectID);
            }).always(function (){
                delete inFlightRequests[key];
            });
        });


        return {};
    })(new jive.MeTooing.LikeSource({}), jive.eae.acclaim.metoo.likeControl));
}

;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}if(typeof jive.eae.acclaim.helpful=="undefined"){jive.eae.acclaim.helpful={}}jive.eae.acclaim.helpful.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.helpful.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.helpful.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<!--  <span class="j-js-metooliking-control"> -->');jive.eae.acclaim.helpful.activityAcclaimLinkContainer(A,B);B.append("<!-- </span> -->");break}return C?"":B.toString()};jive.eae.acclaim.helpful.activityAcclaimLinkContainer=function(A,C){var B=C||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><!--  <span id="acclaim-container-',soy.$$escapeHtmlRcdata(A.objectType),"-",soy.$$escapeHtmlRcdata(A.objectId),'" class="acclaim-container" style="margin:0px;"> --><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-container acclaim-container  acclaim-like-container  font-color-meta-light"><span class="j-social-action"><span class="j-helpful-btn-star j-ui-elem"></span>');jive.eae.acclaim.helpful.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unmarkhelpful":"helpful",classes:"jive-acclaim-likelink"}),B);jive.eae.acclaim.helpful.count(soy.$$augmentData(A,{command:"showHelpful",count:A.likeCount,classes:"jive-acclaim-likedlink",text:soy.$$escapeHtml(A.likeCount),accessibilityLinkLabel:(A.likeCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.singular"),[A.likeCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.plural"),[A.likeCount]))}),B);B.append("</span></span><!-- </span> -->");return C?"":B.toString()};jive.eae.acclaim.helpful.acclaimContainerMedium=function(A,C){var B=C||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.helpful.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unmarkhelpful":"helpful",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><!-- commenting <span class="jive-icon-med jive-icon-like"> as part of RRP-338:Remove "thumbs up" icon from Helpful Voters modal  and need to replace with star icon later if possible--><!-- <span class="jive-icon-med jive-icon-like"></span> -->',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])),"</span>")}jive.eae.acclaim.helpful.count(soy.$$augmentData(A,{command:"showHelpful",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:(A.likeCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.singular"),[A.likeCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.plural"),[A.likeCount]))}),B);B.append("</span>");return C?"":B.toString()};jive.eae.acclaim.helpful.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?'<a style="display:inline;margin: 0 0px 0 0;" '+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+' jive-thread-reply-btn-helpful jive-acclaim-likelink" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="helpful")?"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))+">":"  "+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="helpful")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))+"</a>":"</a>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[]))):((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.helpful.answer"),[])));return C?"":B.toString()};jive.eae.acclaim.helpful.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.helpful.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.helpful.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.helpful.countLabel(A,B);B.append(" (<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button" style="display:inline;padding-left: 0px;margin-right: 0px;"');jive.eae.acclaim.helpful.labelledBy__Ce4(A,B);B.append("</a>)");return C?"":B.toString()};jive.eae.acclaim.helpful.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.helpful.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.helpful.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<span class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer(A,B);B.append("</span>");break}return C?"":B.toString()};jive.eae.acclaim.activityAcclaimLinkContainer=function(A,D){var B=D||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink"}),B);B.append(" ");var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(A.likeCount)+")",accessibilityLinkLabel:C.toString()}),B);B.append("</span></span></span>");return D?"":B.toString()};jive.eae.acclaim.acclaimContainerMedium=function(A,D){var B=D||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])),"</span>")}var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:C.toString()}),B);B.append("</span>");return D?"":B.toString()};jive.eae.acclaim.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?"<a "+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+'" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="like")?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+"</a>":((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])));return C?"":B.toString()};jive.eae.acclaim.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()}
;
jive.namespace("Liking");jive.Liking.LikeSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="acclaim";a.pluralizedResourceType=a.resourceType;this.getLikes=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e+"/scoredisplay";var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:{ratingType:b}})};this.getLikeData=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e;var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:{ratingType:b}})};this.setLiked=function(b,d,e){var c,g,h="like",j=1,k=new jive.conc.Promise();if(b){var f="";g={ratingType:h,voteValue:j};if(jive.Trial&&jive.Trial.Controller){var i=jive.Trial.Controller.getActiveQuestAndStep();if(i.activeQuestID=="1836538113"&&i.activeQuestStep==1){g.fromQuest=i.activeQuestID;k.addCallback(function(){jive.dispatcher.dispatch("trial.like.created");jive.dispatcher.dispatch("trial.updatePercentComplete")})}}c="/"+this.resourceType+"/"+d+"/"+e+"/addvote"}else{c="/"+this.resourceType+"/"+d+"/"+e+"/removevote";g={ratingType:h}}$j.post(jive.rest.url(c),g,function(){k.emitSuccess()});return k}});
;
if(!jive.Like){jive.namespace("Like",(function(c,d){function b(k,j,e,h){var l=k.closest(".js-acclaim-container"),g,f=l.data("likes"),m={canLike:true,liked:j,objectId:h,objectType:e,type:l.data("type"),showIcon:l.data("showicon")};f+=j?1:-1;f=f<0?0:f;m.likeCount=f;switch(m.type){case"mini":g=k.closest(".j-js-liking-control").html(d(m));break;case"medium":g=l.data("likes",f).html(d(m));break;case"small":g=$j(d($j.extend({showGlyph:true},m)));var i=l.closest(".j-js-liking-control");if(i.length>0){i.replaceWith(g)}else{l.replaceWith(g)}break;default:throw"Unknown widget type"}if(g){g.find("a. jive-acclaim-likelink").focus()}}var a={};jive.dispatcher.listen(["like","unlike"],function(i,f,h){var e=i.objectType+"_"+i.objectId;if(a[e]){console.log("duplicate like request, ignoring",i,f,h);return}else{a[e]=true}var g=f==="like";c.setLiked(g,i.objectType,i.objectId).addCallback(function(){if(g){$j(jive.eae.acclaim.likeConfirmation()).message({style:"success"})}else{$j(jive.eae.acclaim.unlikeConfirmation()).message({style:"success"})}b($j(h),g,i.objectType,i.objectId);jive.switchboard.emit("acclaim.recorded",g,i.objectType,i.objectID)}).always(function(){delete a[e]})});return{}})(new jive.Liking.LikeSource({}),jive.eae.acclaim.likeControl))};
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisSource=function(){var c=jive.rest.url("/morelikethis");function b(d){if(typeof d=="function"){d={success:d}}return d}function a(d,h,g,f){f=b(f);var e=c+"/"+d+"/"+h+"/type/"+d+"?numResults="+g;$j.ajax({type:"GET",url:e,dataType:"json",success:function(i){if(typeof f.success=="function"){f.success.call(i,i.morelikethisresultobject)}},error:function(i){if(typeof f.error=="function"){f.error.call(i)}}});return this}this.getMoreLike=a};
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisView=function(C,F){var D=F.noContentMessage,E=F.errorMessage,B="#"+C;function G(I){var H="";if(I.length>0){H+='<ul class="j-icon-list">';I.forEach(function(J){var K={"jiveObjectURL":J.objectURL,"id":J.id,"type":J.objectType,"name":'<span class="'+J.objectClass+'"></span>'+J.subject};var L=jive.shared.displayutil.containerDisplayNameLink({"container":K,"hideTooltip":true});H+="<li>"+L+"</li>"});H+="</ul>"}else{H="<p>"+D+"</p>"}$j(B).empty().append(H)}function A(){$j(B).empty().append("<p>"+E+"</p>")}this.setContent=G;this.displayError=A}
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.Main=function(d){var b=d.objectType,h=d.objectID,a=d.containerID,e=d.numResults||5,g,f;function c(){f.getMoreLike(b,h,e,{success:function(i){g.setContent(i)},error:function(){g.displayError()}})}g=new jive.MoreLikeThisApp.MoreLikeThisView(a,{noContentMessage:d.noContentMessage,errorMessage:d.errorMessage});f=new jive.MoreLikeThisApp.MoreLikeThisSource();$j(document).ready(function(){c()})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.user=="undefined"){jive.user={}}if(typeof jive.user.registration=="undefined"){jive.user.registration={}}jive.user.registration.page=function(A,C){var B=C||new soy.StringBuilder();B.append("<html><head><title>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.createNewAccount.header"),[])),'</title><meta name="nouserbar" content="true"/><link rel="stylesheet" href="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/styles/zapatec/styles/aqua.css")),'" type="text/css" media="screen" /></head><body class="jive-body-formpage jive-body-formpage-register jive-setup-wizard">');if(!A.preview){jive.shared.soy.resourceInlineJs({code:"$j(function() {var userRegApp = new jive.UserRegistration.Main({forceSecure: "+soy.$$escapeHtml(A.forceSecure)+", form:"+JSON.stringify(A.form).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", page:true, successURL: '"+soy.$$escapeJsString(A.successURL)+"'});});"},B)}B.append('<!-- BEGIN layout --><div class="j-layout j-layout-l clearfix"><!-- BEGIN large column --><div class="j-column-wrap-l"><div class="j-column j-column-l"><!-- BEGIN registration form --><div class="j-box j-enhanced jive-box jive-box-form jive-standard-formblock-container jive-login-reg-formblock clearfix"><div class="jive-box-body jive-standard-formblock"><div id="jive-register-formblock"><div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"><div><ul id="j-form-errors"/></div></div><h1>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.createNewAccount.header"),[])),"</h1>");jive.user.registration.formFields(A.form,B);B.append("</div></div></div></div></div></div></body></html>");return C?"":B.toString()};jive.user.registration.modal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-user-registration-form-modal" class="jive-modal j-modal j-modal-register jive-modal-medium"><div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"><div><ul id="j-form-errors"/></div></div><header class="j-modal-header"><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.createNewAccount.header"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix">');jive.user.registration.formFields(A,B);B.append("</section></div>");return C?"":B.toString()};jive.user.registration.formFields=function(A,G){var B=G||new soy.StringBuilder();B.append((A.requiredOnly)?'<span class="required font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.all_fields_required"),[]))+"</span>":"",'<form id="jive-user-registration-form" class="j-form">');var D=A.fields;var F=D.length;for(var E=0;E<F;E++){var C=D[E];jive.user.registration.formField(soy.$$augmentData(C,{requiredOnly:A.requiredOnly,usernameIsEmail:A.usernameIsEmail}),B)}B.append('<input type="hidden" id="timeZoneID" name="timeZoneID"/><input type="hidden" id="validationKey" name="',soy.$$escapeHtml(A.validationKey),'"/><div class="j-form-row"><input type="button" name="cancel" id="cancel" class="close" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'"/></div></form>',(!A.allFieldsIncluded)?'<p class="j-form-row j-additional-info font-color-meta">Additional information can be provided after registration by editing your profile.</p>':"");return G?"":B.toString()};jive.user.registration.formField=function(A,C){var B=C||new soy.StringBuilder();if(A.name=="firstname"){B.append('<div class="j-form-row j-first-name-last-name-row clearfix"><span class="j-first-name">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</span>")}else{if(A.name=="lastname"){B.append('<span class="j-last-name">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</span></div>")}else{if(A.name=="termsandconditions"){B.append('<div class="j-form-row">');jive.user.registration.termsAndConditionsInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.name=="humanvalidation"){B.append('<div class="j-form-row">');jive.user.registration.humanValidationInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.name=="username"){B.append('<div class="j-form-row">');if(A.usernameIsEmail){jive.user.registration.formFieldLabel(soy.$$augmentData(A,{required:false}),B);jive.user.registration.readOnly(soy.$$augmentData(A,{message:jive.i18n.i18nText(jive.i18n.getMsg("account.usernameIsEmail"),[])}),B)}else{jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(A,B);jive.user.registration.errorsContainer(A,B)}B.append("</div>")}else{if(A.name=="email"){B.append('<div class="j-form-row">');if(A.usernameIsEmail&&A.val){jive.user.registration.hidden(A,B)}else{jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(A,B);jive.user.registration.errorsContainer(A,B)}B.append("</div>")}else{if(A.type=="text"||A.type=="phone"||A.type=="email"||A.type=="decimal"||A.type=="number"||A.type=="url"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="zip"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.textInput(soy.$$augmentData(A,{maxlength:10}),B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="largetext"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.largeTextInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="password"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.passwordInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="date"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.dateInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="address"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.addressInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="singlelist"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.selectInput(soy.$$augmentData(A,{multiple:false}),B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="multilist"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.selectInput(soy.$$augmentData(A,{multiple:true}),B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{if(A.type=="boolean"){B.append('<div class="j-form-row">');jive.user.registration.formFieldLabel(A,B);jive.user.registration.booleanInput(A,B);jive.user.registration.errorsContainer(A,B);B.append("</div>")}else{B.append("[No input template defined yet for type ",soy.$$escapeHtml(A.type),"]</div>")}}}}}}}}}}}}}}}return C?"":B.toString()};jive.user.registration.formFieldLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<label for="',soy.$$escapeHtml(A.name),'" ',(A.description)?'title="'+soy.$$escapeHtml(A.description)+'"':"",">",soy.$$escapeHtml(A.displayName),(A.required&&!A.requiredOnly)?'<span class="required font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required.parens"),[]))+"</span>":"","</label>");return C?"":B.toString()};jive.user.registration.readOnly=function(A,C){var B=C||new soy.StringBuilder();B.append('<div style="margin: 5px 5px 15px 5px">',(A.val)?"<strong>"+soy.$$escapeHtml(A.val)+"</strong>":""," <span>",soy.$$escapeHtml(A.message),'</span><input type="hidden" name="',soy.$$escapeHtml(A.name),'" value="',(A.val)?soy.$$escapeHtml(A.val):"",'"/></div>');return C?"":B.toString()};jive.user.registration.hidden=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="hidden" name="',soy.$$escapeHtml(A.name),'" value="',soy.$$escapeHtml(A.val),'"/>');return C?"":B.toString()};jive.user.registration.textInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<input name="',soy.$$escapeHtml(A.name),'" id="',soy.$$escapeHtml(A.name),'" class="field" type="text" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'" ',(A.required)?'aria-required="true" required':""," ",(A.val)?'value="'+soy.$$escapeHtml(A.val)+'"':""," ",(A.size)?'size="'+soy.$$escapeHtml(A.size)+'"':""," ",(A.maxlength)?'maxlength="'+soy.$$escapeHtml(A.maxlength)+'"':"","/>");return C?"":B.toString()};jive.user.registration.largeTextInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<textarea name="',soy.$$escapeHtml(A.name),'" id="',soy.$$escapeHtml(A.name),'" class="field" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'" cols="30" rows="3" name="',soy.$$escapeHtml(A.name),'" ',(A.required)?'aria-required="true" required':"","></textarea>");return C?"":B.toString()};jive.user.registration.dateInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="field" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'">');jive.shared.form.datepicker({name:A.name,required:A.required,initialize:true,value:A.val},B);B.append("</div>");return C?"":B.toString()};jive.user.registration.selectInput=function(B,G){var C=G||new soy.StringBuilder();if(B.prop&&B.prop.options){C.append('<select name="',soy.$$escapeHtml(B.name),'" id="',soy.$$escapeHtml(B.name),'" data-field-name="',soy.$$escapeHtml(B.name),'" data-field-type="',soy.$$escapeHtml(B.type),'" class="field" ',(B.multiple)?'multiple="true"':""," ",(B.required)?'aria-required="true" required':"",">");var A=B.prop.options;var F=A.length;for(var D=0;D<F;D++){var E=A[D];C.append('<option value="',soy.$$escapeHtml(E.value),'" ',(E.defaultOption)?'selected="true"':"",">",soy.$$escapeHtml(E.value),"</option>")}C.append("</select>")}else{C.append("[No options have been configured for this field.]")}return G?"":C.toString()};jive.user.registration.booleanInput=function(A,G){var C=G||new soy.StringBuilder();if(A.prop&&A.prop.options){C.append('<div class="field" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'">');var B=A.prop.options;var F=B.length;for(var D=0;D<F;D++){var E=B[D];C.append('<label><input name="',soy.$$escapeHtml(A.name),'" type="radio" value="',soy.$$escapeHtml(E.value),'" ',(E.defaultOption)?'selected="true"':"","/> ",soy.$$escapeHtml(E.value),"</label>")}C.append("</div>")}else{C.append("[No options have been configured for this field.]")}return G?"":C.toString()};jive.user.registration.addressInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="field" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'"><ul><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.street1"),[])),' <input type="text" class="street1"></label></li><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.street2"),[])),'  <input type="text" class="street2"></label></li><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.city"),[])),'  <input type="text" class="city"></label></li><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.state"),[])),'  <input type="text" class="state"></label></li><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.zip"),[])),'  <input type="text" class="zip" size="10"></label></li><li><label>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.country"),[])),'  <input type="text" class="country"></label></li><ul></div>');return C?"":B.toString()};jive.user.registration.passwordInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<input name="',soy.$$escapeHtml(A.name),'" id="',soy.$$escapeHtml(A.name),'" class="field" type="password" autocomplete="off" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'" ',(A.required)?'aria-required="true" required':"",(A.prop.strength)?'data-strength="'+soy.$$escapeHtml(A.prop.strength)+'"':"",(A.prop.minlengthpattern)?'data-minlengthpattern="'+soy.$$escapeHtml(A.prop.minlengthpattern)+'"':"",">");if(A.prop.strength){jive.user.registration.passwordStrength(A.prop,B)}return C?"":B.toString()};jive.user.registration.termsAndConditionsInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-form-row j-form-row-tac" id="j-form-row-tac"><!-- Agree --><input id="agree" type="checkbox" class="field" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'"',(A.val=="true")?'checked="checked"':"",'><label for="agree">');jive.shared.soy.i18nHelper({i18nKey:"reg.i_agree_to_t_n_c.checkbox",arg0:soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"terms-and-conditions!input.jspa?displayOnly=true"))},B);B.append((A.required&&!A.requiredOnly)?'<span class="required font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required.parens"),[]))+"</span>":"","</label></div>");return C?"":B.toString()};jive.user.registration.humanValidationInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-form-row j-form-row-captcha" id="j-form-row-captcha"><label for="captchaInput">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("reg.enter_the_code.label"),[])),(A.required&&!A.requiredOnly)?'<span class="required font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required.parens"),[]))+"</span>":"",'</label><div id="js-captcha">');jive.user.registration.drawCaptcha({captchaImageURL:soy.$$escapeHtml(A.prop.captchaImageURL)},B);B.append('</div><input name="',soy.$$escapeHtml(A.name),'" id="captchaInput" class="field" type="text" data-field-name="',soy.$$escapeHtml(A.name),'" data-field-type="',soy.$$escapeHtml(A.type),'" size="10" maxlength="10" onfocus="this.select();"/><span class="j-field-desc">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("reg.preventsAutoRegistr.text"),[])),"</span></div>");return C?"":B.toString()};jive.user.registration.drawCaptcha=function(A,C){var B=C||new soy.StringBuilder();B.append('<img src="',A.captchaImageURL,'" id="jive-captcha" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("reg.preventsAutoRegistr.tooltip"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("reg.preventsAutoRegistr.tooltip"),[])),'"/>');return C?"":B.toString()};jive.user.registration.errorsContainer=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-form-field-errors" style="display:none" data-field-name="',soy.$$escapeHtml(A.name),'"></div>');return C?"":B.toString()};jive.user.registration.errors=function(A,G){var C=G||new soy.StringBuilder();var E=A.errors;var B=E.length;for(var D=0;D<B;D++){var F=E[D];if(F.message){C.append("<p>");jive.user.registration.localizedFieldError(F,C);C.append("</p>")}else{if(F.textKey){C.append("<p>");jive.user.registration.keyedFieldError(F,C);C.append("</p>")}}}return G?"":C.toString()};jive.user.registration.localizedFieldError=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-error-message">',A.message,"</span>");return C?"":B.toString()};jive.user.registration.keyedFieldError=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-error-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.textKey),[A.args])),"</span>");return C?"":B.toString()};jive.user.registration.generalErrors=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"><div><ul id="j-form-errors"/></div></div>');return C?"":B.toString()};jive.user.registration.passwordStrength=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-pw-strength"><label for="jive-pw-strength-bar"><span class="jive-icon-sml jive-icon-lock"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.label"),[])),'<span id="jivePwStrength"><!-- text updated but hidden for accessibility --></span><span id="jive-pw-strength-bar"><span id="jive-pw-strength-length"></span><span id="jive-pw-req-strength" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.min.indicator"),[])),'"',(A.minimumPasswordStrength=="HIGH")?'class="jive-pw-req-strong"':(A.minimumPasswordStrength=="MEDIUMHIGH")?'class="jive-pw-req-good"':(A.minimumPasswordStrength=="MEDIUM")?'class="jive-pw-req-fair"':'class="jive-pw-req-weak"',"></span></span></label><p><strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.title"),[])),'</strong></p><ul id="jive-pw-tips"><li id="pw-tip-lowercase"><span class="jive-icon-sml jive-icon-forbidden"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.charType.lowercase"),[])),'</li><li id="pw-tip-uppercase"><span class="jive-icon-sml jive-icon-forbidden"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.charType.uppercase"),[])),'</li><li id="pw-tip-numeral"><span class="jive-icon-sml jive-icon-forbidden"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.charType.numeral"),[])),'</li><li id="pw-tip-punctuate"><span class="jive-icon-sml jive-icon-forbidden"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.charType.punctuation"),[])),'</li><li id="pw-tip-min-length"><span class="jive-icon-sml jive-icon-forbidden"></span>',(A.minimumPasswordStrength=="HIGH")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.minlength"),[8])):(A.minimumPasswordStrength=="MEDIUMHIGH")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.minlength"),[7])):(A.minimumPasswordStrength=="MEDIUM")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.minlength"),[7])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.minlength"),[6])),'</li><li id="pw-tip-recommend-length"><span class="jive-icon-sml jive-icon-forbidden"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.tips.length"),[])),"</li></ul></div>");return C?"":B.toString()};jive.user.registration.accountPendingApproval=function(A,C){var B=C||new soy.StringBuilder();B.append("<div><h3>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.wizard.complete.mod.header"),[])),"</h3><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.wizard.complete.mod.instr1"),[])),' <a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"index.jspa")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.wizard.complete.mod.instr2"),[])),"</a>. &nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.wizard.complete.mod.instr3"),[])),"</p></div>");return C?"":B.toString()};jive.user.registration.passwordMatchErrorMessage=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.err.pwdsDoNotMatch.text"),[])));return C?"":B.toString()};jive.user.registration.passwordStrengthMessageUnknown=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.unknown"),[])));return C?"":B.toString()};jive.user.registration.passwordStrengthMessageHigh=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.high"),[])));return C?"":B.toString()};jive.user.registration.passwordStrengthMessageMediumHigh=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.medhigh"),[])));return C?"":B.toString()};jive.user.registration.passwordStrengthMessageMedium=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.password.strength.medium"),[])));return C?"":B.toString()};jive.user.registration.passwordStrengthMessageLow=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('account.password.strength.weak"'),[])));return C?"":B.toString()};jive.user.registration.unavailablePage=function(A,C){var B=C||new soy.StringBuilder();B.append("<html><head><title>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.regUnavailablePg.title"),[])),'</title><meta name="nosidebar" content="true" /><meta name="nouserbar" content="true" /></head><body class="jive-body-formpage"><!-- BEGIN header & intro  --><header class="j-page-header"><h1>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("account.regUnavailablePg.title"),[])),"</h1><p>");jive.shared.soy.i18nHelper({i18nKey:"account.regUnavailablePg.info",arg0:'<a href="mailto:'+soy.$$escapeHtml(A.adminEmailAddress)+'">'+soy.$$escapeHtml(A.adminEmailAddress)+"</a>",noAutoEscape:true},B);B.append('</p></header><!-- END header & intro --><!-- BEGIN main body column --><div id="jive-body-maincol-container"><div id="jive-body-maincol"></div></div><!-- END main body column --></body></html>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.authentication=="undefined"){jive.authentication={}}jive.authentication.loginModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-user-authentication-form-modal" class="jive-modal ',(A.captchaField)?"jive-modal-medium":"jive-modal-narrow",' j-modal j-modal-login"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.login"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix">');jive.authentication.loginForm(A,B);B.append("</section></div>");return C?"":B.toString()};jive.authentication.loginForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<form id="jive-user-authentication-form" class="j-form"><div class="j-form-row" id="jive-login-username">',(A.usernameIsEmail)?'<label for="username" class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+"</label>":'<label for="username" class="font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.username"),[]))+"</label>",'<input name="username" size="30" maxlength="150" value="" id="username" type="text" class="field"></div><div class="j-form-row" id="jive-login-password"><label for="password" class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.password"),[])),'</label><input name="password" size="30" maxlength="150" value="" id="password" type="password" class="field" autocomplete="off"></div>');if(A.captchaField){jive.user.registration.humanValidationInput(A.captchaField,B)}B.append((A.rememberMe)?'<div  class="j-form-row" id="jive-login-rememberme"><input name="autoLogin" id="autoLoginCb" value="true" type="checkbox"><label for="autoLoginCb">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remember_me"),[]))+"</label></div>":"",'<div class="j-form-row"><input type="submit" name="submit" class="jive-form-button-submit j-btn-callout" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.login"),[])),'" data-submit-text="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("login.processing.text"),[])),'" disabled="disabled"/><input type="button" name="cancel" id="cancel" class="close" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'"/></div>',(A.passwordReset)?'<div id="jive-login-forgotpwd" class="jive-login-forgotpwd font-color-meta"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"emailPasswordToken!input.jspa"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("login.forgot_pwd.link"),[]))+"</a></div>":"",(A.forgotUsername)?'<div id="jive-login-forgot-username" class="jive-login-forgot-username font-color-meta"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"forgot-username!input.jspa"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("login.forgot_username.link"),[]))+"</a></div>":"","</form>");return C?"":B.toString()};jive.authentication.sourceForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<form action="',soy.$$escapeHtml(A.action),'" method="POST" style="display:none"><input name="username" type="hidden" value="',soy.$$escapeHtml(A.username),'"/><input name="password" type="hidden" value="',soy.$$escapeHtml(A.password),'"/>',(A.captcha)?'<input name="user_guess" type="hidden" value="'+soy.$$escapeHtml(A.captcha)+'"/>':"",(A.rememberMe)?'<input name="autoLogin" type="hidden" value="true"/>':"","</form>");return C?"":B.toString()}
;
jive.namespace("Authentication");jive.Authentication.LoginModalView=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.options=c||{};$j(function(){var d=$j("#navLogin, #jive-guest-link-auth");d.click(function(f){b.renderForm();f.preventDefault()})})};a.renderForm=function(){var b=this;var c=$j(jive.authentication.loginModal({rememberMe:b.options.rememberMe,passwordReset:b.options.passwordReset,forgotUsername:b.options.forgotUsername,captchaField:b.options.captchaField,usernameIsEmail:b.options.usernameIsEmail}));b.$lb=c.lightbox_me({destroyOnClose:true,onLoad:function(){b.$usernameField=c.find('input[name="username"]');b.$passwordField=c.find('input[name="password"]');b.$rememberMeField=c.find('input[name="autoLogin"]');b.$captchaField=c.find("#captchaInput");b.$submitButton=c.find('input[name="submit"]');b.attachBlurHandlers(c);b.attachSaveHandler(c);b.focusOnFirstInput(c)}})};a.focusOnFirstInput=function(b){b.find(":input:first").focus()};a.attachBlurHandlers=function(c){var b=this;c.find("input.field").keyup(function(d){b.checkRequiredFields();d.preventDefault()})};a.attachSaveHandler=function(c){var b=this;c.submit(function(d){b.submitForm($j(this));d.preventDefault()})};a.checkRequiredFields=function(){var b=this;if(b.$usernameField.val()==""||b.$passwordField.val()==""){b.$submitButton.attr("disabled","disabled")}else{b.$submitButton.removeAttr("disabled")}};a.submitForm=function(d){var b=this;if(d.attr("disabled")!="disabled"){d.val(d.data("submit-text"));d.attr("disabled","disabled");b.showSpinner();var c={username:b.$usernameField.val(),password:b.$passwordField.val()};if(b.$captchaField.length){c=$j.extend(c,{captcha:b.$captchaField.val()})}if(b.$rememberMeField.length){c=$j.extend(c,{rememberMe:b.$rememberMeField.is(":checked")})}b.emitP("login",c).addCallback(function(){b.handleLogin()}).always(function(){b.hideSpinner()})}};a.handleLogin=function(){if(this.$lb){this.$lb.trigger("close")}}});
;
jive.namespace("Authentication");jive.Authentication.Source=jive.oo.Class.extend(function(a){this.init=function(b){var d=this;var c=(b&&b.uri)||jive.app.url({path:"/cs_login"});d.uri=(b&&b.forceSecure)?jive.secure(c):c};this.login=function(c){var d=this;var e=new jive.conc.Promise();var b=$j(jive.authentication.sourceForm($j.extend({action:d.uri},c)));$j("body").append(b);b.submit();b.remove();e.emitSuccess();return e}});
;
jive.namespace("Authentication");jive.Authentication.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;b.options=c;$j(function(){b.authenticationSource=c.authenticationSource||new jive.Authentication.Source();b.loginModalView=new jive.Authentication.LoginModalView(c);b.loginModalView.addListener("login",function(d,e){b.authenticationSource.login(d).addCallback(function(){e.emitSuccess()})})})}});
;
jive.namespace("UserRegistration");jive.UserRegistration.PasswordStrengthView=jive.AbstractView.extend(function(a){var b=jQuery;this.initView=function(){var c=this;var d=$j("#jive-user-registration-form");c.initPattern(d);c.initTips(d)};a.initPattern=function(e){var d=this;var c=e.find("input[name='password']");d.patPassMinLen=c.data("minlengthpattern")||".{6,}";d.patPassMin=new RegExp(d.patPassMinLen);d.patPassBetter=new RegExp(".{8,}");d.patPassLC=new RegExp("[a-z]");d.patPassUC=new RegExp("[A-Z]");d.patPassNum=new RegExp("[0-9]");d.patPassPunc=new RegExp("[-_\\W]")};a.initTips=function(d){var c=this;var e=$j("#jive-pw-strength");d.find("input[type='password']").blur(function(){c.hideEle(e,true)}).focus(function(){c.showEle(e,true)}).keyup(function(){c.getPasswordStrength($j(this).val())})};a.getPasswordStrength=function(d){var c=this;c.emitP("passwordstrength",d).addCallback(function(e){c.updatePasswordStrengthMessage(e,d)})};a.updatePasswordStrengthMessage=function(g,f){var c=this;var e=jive.user.registration.passwordStrengthMessageUnknown();var d="jive-pw-null";if("HIGH"==g){e=jive.user.registration.passwordStrengthMessageHigh();d="jive-pw-strong"}if("MEDIUMHIGH"==g){e=jive.user.registration.passwordStrengthMessageMediumHigh();d="jive-pw-good"}else{if("MEDIUM"==g){e=jive.user.registration.passwordStrengthMessageMedium();d="jive-pw-fair"}else{if("LOW"==g){e=jive.user.registration.passwordStrengthMessageLow();d="jive-pw-weak"}}}$j("#jivePwStrength").text(e);$j("#jive-pw-strength").attr("class",d);$j("#jive-pw-strength").addClass("jive-pw-show-tips");c.checkPwCharTypes(f)};a.checkPwCharTypes=function(e){var d=this;var c=$j("#jive-pw-tips li .jive-icon-sml");c.attr({"class":"jive-icon-sml jive-icon-forbidden"});if(d.patPassMin.test(e)){$j("#pw-tip-min-length .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassBetter.test(e)){$j("#pw-tip-recommend-length .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassLC.test(e)){$j("#pw-tip-lowercase .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassUC.test(e)){$j("#pw-tip-uppercase .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassNum.test(e)){$j("#pw-tip-numeral .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassPunc.test(e)){$j("#pw-tip-punctuate .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}};a.showEle=function(d,c){if(c){d.animate({opacity:1},300)}else{d.css({opacity:1})}d.addClass("jive-pw-show-tips").removeClass("jive-pw-hide-tips")};a.hideEle=function(e,d){var c=this;if(d){e.animate({opacity:0},300)}else{e.css({opacity:0})}e.addClass("jive-pw-hide-tips").removeClass("jive-pw-show-tips")}});
;
var jstz={};jstz.HEMISPHERE_SOUTH="SOUTH";jstz.HEMISPHERE_NORTH="NORTH";jstz.HEMISPHERE_UNKNOWN="N/A";jstz.olson={};jstz.TimeZone=function(c,b,a){this.utc_offset=c;this.olson_tz=b;this.uses_dst=a};jstz.TimeZone.prototype.display=function(){this.ambiguity_check();var a="<b>UTC-offset</b>: "+this.utc_offset+"<br/>";a+="<b>Zoneinfo key</b>: "+this.olson_tz+"<br/>";a+="<b>Zone uses DST</b>: "+(this.uses_dst?"yes":"no")+"<br/>";return a};jstz.TimeZone.prototype.ambiguity_check=function(){var a,c,b,d;a=jstz.olson.ambiguity_list[this.olson_tz];if(typeof(a)==="undefined"){return}c=a.length;b=0;for(;b<c;b+=1){d=a[b];if(jstz.date_is_dst(jstz.olson.dst_start_dates[d])){this.olson_tz=d;return}}};jstz.date_is_dst=function(b){var a,c;c=((b.getMonth()>5?jstz.get_june_offset():jstz.get_january_offset()));a=jstz.get_date_offset(b);return(c-a)!==0};jstz.get_date_offset=function(a){return -a.getTimezoneOffset()};jstz.get_timezone_info=function(){var a,b,c;a=jstz.get_january_offset();b=jstz.get_june_offset();c=a-b;if(c<0){return{utc_offset:a,dst:1,hemisphere:jstz.HEMISPHERE_NORTH}}else{if(c>0){return{utc_offset:b,dst:1,hemisphere:jstz.HEMISPHERE_SOUTH}}}return{utc_offset:a,dst:0,hemisphere:jstz.HEMISPHERE_UNKNOWN}};jstz.get_january_offset=function(){return jstz.get_date_offset(new Date(2011,0,1,0,0,0,0))};jstz.get_june_offset=function(){return jstz.get_date_offset(new Date(2011,5,1,0,0,0,0))};jstz.determine_timezone=function(){var c,b,a;c=jstz.get_timezone_info();b="";if(c.hemisphere===jstz.HEMISPHERE_SOUTH){b=",s"}a=c.utc_offset+","+c.dst+b;return{timezone:jstz.olson.timezones[a],key:a}};jstz.olson.timezones={"-720,0":new jstz.TimeZone("-12:00","Etc/GMT+12",false),"-660,0":new jstz.TimeZone("-11:00","Pacific/Pago_Pago",false),"-600,1":new jstz.TimeZone("-11:00","America/Adak",true),"-660,1,s":new jstz.TimeZone("-11:00","Pacific/Apia",true),"-600,0":new jstz.TimeZone("-10:00","Pacific/Honolulu",false),"-570,0":new jstz.TimeZone("-10:30","Pacific/Marquesas",false),"-540,0":new jstz.TimeZone("-09:00","Pacific/Gambier",false),"-540,1":new jstz.TimeZone("-09:00","America/Anchorage",true),"-480,1":new jstz.TimeZone("-08:00","America/Los_Angeles",true),"-480,0":new jstz.TimeZone("-08:00","Pacific/Pitcairn",false),"-420,0":new jstz.TimeZone("-07:00","America/Phoenix",false),"-420,1":new jstz.TimeZone("-07:00","America/Denver",true),"-360,0":new jstz.TimeZone("-06:00","America/Guatemala",false),"-360,1":new jstz.TimeZone("-06:00","America/Chicago",true),"-360,1,s":new jstz.TimeZone("-06:00","Pacific/Easter",true),"-300,0":new jstz.TimeZone("-05:00","America/Bogota",false),"-300,1":new jstz.TimeZone("-05:00","America/New_York",true),"-270,0":new jstz.TimeZone("-04:30","America/Caracas",false),"-240,1":new jstz.TimeZone("-04:00","America/Halifax",true),"-240,0":new jstz.TimeZone("-04:00","America/Santo_Domingo",false),"-240,1,s":new jstz.TimeZone("-04:00","America/Asuncion",true),"-210,1":new jstz.TimeZone("-03:30","America/St_Johns",true),"-180,1":new jstz.TimeZone("-03:00","America/Godthab",true),"-180,0":new jstz.TimeZone("-03:00","America/Argentina/Buenos_Aires",false),"-180,1,s":new jstz.TimeZone("-03:00","America/Montevideo",true),"-120,0":new jstz.TimeZone("-02:00","America/Noronha",false),"-120,1":new jstz.TimeZone("-02:00","Etc/GMT+2",true),"-60,1":new jstz.TimeZone("-01:00","Atlantic/Azores",true),"-60,0":new jstz.TimeZone("-01:00","Atlantic/Cape_Verde",false),"0,0":new jstz.TimeZone("00:00","Etc/UTC",false),"0,1":new jstz.TimeZone("00:00","Europe/London",true),"60,1":new jstz.TimeZone("+01:00","Europe/Berlin",true),"60,0":new jstz.TimeZone("+01:00","Africa/Lagos",false),"60,1,s":new jstz.TimeZone("+01:00","Africa/Windhoek",true),"120,1":new jstz.TimeZone("+02:00","Asia/Beirut",true),"120,0":new jstz.TimeZone("+02:00","Africa/Johannesburg",false),"180,1":new jstz.TimeZone("+03:00","Europe/Moscow",true),"180,0":new jstz.TimeZone("+03:00","Asia/Baghdad",false),"210,1":new jstz.TimeZone("+03:30","Asia/Tehran",true),"240,0":new jstz.TimeZone("+04:00","Asia/Dubai",false),"240,1":new jstz.TimeZone("+04:00","Asia/Yerevan",true),"270,0":new jstz.TimeZone("+04:30","Asia/Kabul",false),"300,1":new jstz.TimeZone("+05:00","Asia/Yekaterinburg",true),"300,0":new jstz.TimeZone("+05:00","Asia/Karachi",false),"330,0":new jstz.TimeZone("+05:30","Asia/Kolkata",false),"345,0":new jstz.TimeZone("+05:45","Asia/Kathmandu",false),"360,0":new jstz.TimeZone("+06:00","Asia/Dhaka",false),"360,1":new jstz.TimeZone("+06:00","Asia/Omsk",true),"390,0":new jstz.TimeZone("+06:30","Asia/Rangoon",false),"420,1":new jstz.TimeZone("+07:00","Asia/Krasnoyarsk",true),"420,0":new jstz.TimeZone("+07:00","Asia/Jakarta",false),"480,0":new jstz.TimeZone("+08:00","Asia/Shanghai",false),"480,1":new jstz.TimeZone("+08:00","Asia/Irkutsk",true),"525,0":new jstz.TimeZone("+08:45","Australia/Eucla",true),"525,1,s":new jstz.TimeZone("+08:45","Australia/Eucla",true),"540,1":new jstz.TimeZone("+09:00","Asia/Yakutsk",true),"540,0":new jstz.TimeZone("+09:00","Asia/Tokyo",false),"570,0":new jstz.TimeZone("+09:30","Australia/Darwin",false),"570,1,s":new jstz.TimeZone("+09:30","Australia/Adelaide",true),"600,0":new jstz.TimeZone("+10:00","Australia/Brisbane",false),"600,1":new jstz.TimeZone("+10:00","Asia/Vladivostok",true),"600,1,s":new jstz.TimeZone("+10:00","Australia/Sydney",true),"630,1,s":new jstz.TimeZone("+10:30","Australia/Lord_Howe",true),"660,1":new jstz.TimeZone("+11:00","Asia/Kamchatka",true),"660,0":new jstz.TimeZone("+11:00","Pacific/Noumea",false),"690,0":new jstz.TimeZone("+11:30","Pacific/Norfolk",false),"720,1,s":new jstz.TimeZone("+12:00","Pacific/Auckland",true),"720,0":new jstz.TimeZone("+12:00","Pacific/Tarawa",false),"765,1,s":new jstz.TimeZone("+12:45","Pacific/Chatham",true),"780,0":new jstz.TimeZone("+13:00","Pacific/Tongatapu",false),"840,0":new jstz.TimeZone("+14:00","Pacific/Kiritimati",false)};jstz.olson.dst_start_dates={"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"Atlantic/Stanley":new Date(2011,8,4,7,0,0,0),"America/Asuncion":new Date(2011,9,2,3,0,0,0),"America/Santiago":new Date(2011,9,9,3,0,0,0),"America/Campo_Grande":new Date(2011,9,16,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2011,2,13,2,0,0,0),"America/New_York":new Date(2011,2,13,7,0,0,0),"Asia/Gaza":new Date(2011,2,26,23,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Minsk":new Date(2011,2,27,3,0,0,0),"Europe/Istanbul":new Date(2011,2,27,7,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Africa/Cairo":new Date(2011,3,29,4,0,0,0),"Asia/Yerevan":new Date(2011,2,27,4,0,0,0),"Asia/Baku":new Date(2011,2,27,8,0,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0)};jstz.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Asuncion":["Atlantic/Stanley","America/Asuncion","America/Santiago","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Gaza","Asia/Beirut","Europe/Minsk","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Africa/Cairo"],"Asia/Yerevan":["Asia/Yerevan","Asia/Baku"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"]};
;
jive.namespace("UserRegistration");jive.UserRegistration.RegistrationFormView=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.options=c||{};b.inlineValidationFields=["username","email","name","firstname","lastname","password"];b.passwordStrengthView=new jive.UserRegistration.PasswordStrengthView(c);this.passwordStrengthView.addListener("passwordstrength",function(e,d){b.emitP("passwordstrength",e).addCallback(function(f){d.emitSuccess(f)})});if(c.form){b.form=c.form}$j(function(){if(c.page&&c.form){b.initPageForm()}else{var d=$j("#jive-nav-link-reg, #jive-guest-link-reg");d.click(function(f){b.initModalForm();f.preventDefault()})}})};a.initPageForm=function(){var b=this;var c=$j("#jive-user-registration-form");b.setupForm(c);b.passwordStrengthView.initView();b.focusOnFirstInput(c)};a.initModalForm=function(){var b=this;if(!b.form){b.showSpinner();b.emitP("register").addCallback(function(c){b.form=c;b.renderForm();b.passwordStrengthView.initView()}).always(function(){b.hideSpinner()})}else{b.renderForm()}};a.renderForm=function(){var b=this;var c=$j(jive.user.registration.modal(b.form));b.setupForm(c);c.lightbox_me({destroyOnClose:true,closeClick:false})};a.focusOnFirstInput=function(b){b.find(":input:first").focus()};a.setupForm=function(c){var b=this;b.attachInlineValidationHandlers(c);b.attachTermsHandler(c);b.attachSaveHandler(c);b.attachCancelHandler(c);b.determineTimeZone(b.form);b.decorateFields(c);b.attachUsernameCaptchaHandler(c)};a.attachUsernameCaptchaHandler=function(b){b.find(".field[name='username']").change(function(){a.updateRegistrationCaptcha(b)})};a.attachInlineValidationHandlers=function(c){var b=this;$j(b.inlineValidationFields).each(function(d,e){c.find(".field[name='"+e+"']").blur(function(){b.validateSingleField($j(this),e)})});c.find(".field[name='passwordconfirm']").blur(function(){var d=b.findViewFieldByName("password").val();b.confirmPassword(d,$j(this))})};a.attachTermsHandler=function(c){var b=this;c.find("#js-reg-terms-link").click(function(d){window.open($j(this).attr("href"),"jive_terms_and_conditions");d.preventDefault()})};a.attachSaveHandler=function(c){var b=this;c.find("input[name='save']").click(function(d){b.submitForm($j(this));d.preventDefault()})};a.attachCancelHandler=function(c){var b=this;if(b.options.page){c.find("input[name='cancel']").click(function(d){window.history.back();d.preventDefault()})}};a.determineTimeZone=function(c){var b=jstz.determine_timezone().timezone;if(b){c.timeZoneID=b.olson_tz}};a.decorateFields=function(c){var b=c.find("input[data-field-type='url']");b.attr("placeholder","http://");if(b.placeHeld){b.placeHeld()}};a.submitForm=function(c){var b=this;if(c.attr("disabled")!="disabled"){c.attr("disabled","disabled");b.showSpinner();b.gatherFormValues();b.hideGeneralErrors();b.emitP("submit",b.form).addCallback(function(d){if(d.moderated){b.displayModerationMessage()}else{b.attemptLogin(d)}}).addErrback(function(d){$j(d.fields).each(function(e,g){var f=b.findViewFieldByName(g.name);b.updateFieldValue(g,f);b.showFieldErrors(g,f)});b.updateRegistrationCaptcha(c.parents("form"))}).always(function(){b.hideSpinner();c.removeAttr("disabled")})}};a.updateRegistrationCaptcha=function(b){var d=b.find(".field[name='humanvalidation']");if(d.length>0){var g=b.find(".field[name='username']").val();var f=$j("#js-captcha");var e=f.find("img");var c=$j.deparam.querystring(e.attr("src"));c.username=g;e.attr("src",$j.param.querystring(e.attr("src"),c))}};a.attemptLogin=function(d){var b=this;var e=d.usernameIsEmail?b.findModelFieldByName("email").val:b.findModelFieldByName("username").val;var c={username:e,password:b.findModelFieldByName("password").val};if(d.loginCaptcha){c=$j.extend(c,{captcha:d.loginCaptcha})}b.showSpinner();b.emitP("login",c).addCallback(function(){b.handleLogin()}).addErrback(function(){b.handleLogin()}).always(function(){b.hideSpinner()})};a.handleLogin=function(){var b=this;if(!b.options.page){b.emit("close")}};a.displayModerationMessage=function(){var c=this;var b=(c.options.page)?$j("#jive-register-formblock"):$j("#jive-user-registration-form-modal").find(".jive-modal-content");b.html(jive.user.registration.accountPendingApproval())};a.gatherFormValues=function(){var b=this;var c=$j("#jive-user-registration-form .field");c.each(function(e,g){var f=$j(g);var d=b.findModelFieldByName(f.data("field-name"));if(d){d.val=b.getValFromField(d.type,f)}else{console.warn("No corresponding field in model found for field "+g.name)}})};a.getValFromField=function(d,c){var b=this;try{if(d=="address"){return b.getAddressValue(c)}else{if(d=="boolean"){return b.getBooleanValue(c)}else{if(d=="date"){return b.getDateValue(c)}else{if(b.isCheckbox(c)){return b.getCheckboxValue(c)}else{return $j.trim(c.val())}}}}}catch(f){console.log(f)}return null};a.getAddressValue=function(b){return{street1:b.find("input.street1").val(),street2:b.find("input.street2").val(),city:b.find("input.city").val(),state:b.find("input.state").val(),zip:b.find("input.zip").val(),country:b.find("input.country").val()}};a.getDateValue=function(b){return b.find("input").val()};a.getBooleanValue=function(b){return b.find("input").val()};a.isCheckbox=function(b){return b.attr("type")=="checkbox"};a.getCheckboxValue=function(b){return b.is(":checked")};a.showFieldErrors=function(f,c){var b=this;if(c&&c.length>0){b.hideFieldErrors(f);if(f.errors.length>0){var e=jive.user.registration.errors(f);var d=$j('.j-form-field-errors[data-field-name="'+f.name+'"]');if(d.length==1){d.html(e);d.fadeIn("fast")}else{console.error("No valid error container found for field name "+f.name)}}}else{b.addGeneralError(f)}};a.addGeneralError=function(b){$j("#j-form-errors").closest(".jive-error-box").show();$j(b.errors).each(function(c,d){$j("#j-form-errors").append("<li>"+jive.user.registration.localizedFieldError(d)+"</li>")})};a.hideGeneralErrors=function(){$j("#j-form-errors").closest(".jive-error-box").hide();$j("#j-form-errors").children().remove()};a.hideFieldErrors=function(b){$j('.j-form-field-errors[data-field-name="'+b.name+'"]').fadeOut("fast")};a.updateFieldValue=function(c,b){if(c&&b.length>0){if(c.val){b.val(c.val)}}};a.findViewFieldByName=function(b){return $j("#jive-user-registration-form .field[data-field-name='"+b+"']")};a.findModelFieldByName=function(b){var c=null;$j(this.form.fields).each(function(d,e){if(e.name==b){c=e;return false}});return c};a.validateSingleField=function(e,d){var b=this;var f=e.val();if(f&&f.length>0){f=$j.trim(f);var c=b.findModelFieldByName(d);b.emitP("validate",{name:d,val:b.getValFromField(c.type,e)}).addErrback(function(g){b.showFieldErrors(g,e);b.updateFieldValue(g,e)}).addCallback(function(g){b.hideFieldErrors(g);b.updateFieldValue(g,e)})}};a.confirmPassword=function(c,d){var b=this;var e=d.val();if(e!=c){b.showFieldErrors({name:"passwordconfirm",errors:[{code:4001,message:jive.user.registration.passwordMatchErrorMessage()}]},d)}else{b.hideFieldErrors({name:"passwordconfirm"})}}});
;
jive.namespace("UserRegistration");jive.UserRegistration.Source=jive.RestService.extend(function(a){a.resourceType=a.pluralizedResourceType="userregistration";this.getForm=function(c){var b=this.RESOURCE_ENDPOINT+"/?requiredOnly="+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.validate=function(c){var b=this.RESOURCE_ENDPOINT+"/field/validation";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)})};this.checkPasswordStrength=function(c){var b=this.RESOURCE_ENDPOINT+"/passwordstrength";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify({val:c})})};this.saveForm=function(c){var b=this.RESOURCE_ENDPOINT+"/";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)})};this.showGenericSaveError=function(){this.displayError(this.errorSaving())};this.showGenericFindError=function(){this.displayError(this.errorFinding())};this.errorCallback=function(d,b){var c=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){if(j instanceof SyntaxError){}else{throw j}}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(!c.unloaded){c.maybeEmitError(d,b,[g,f,i])}}}});
;
jive.namespace("UserRegistration");jive.UserRegistration.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;b.options=c||{};this.requiredFieldsOnly=(c.form&&c.form.requiredOnly)||c.requiredFieldsOnly||true;this.userRegSource=c.userRegSource||new jive.UserRegistration.Source(c);this.userRegSource.suppressGenericErrorMessages();this.authenticationSource=c.authenticationSource||new jive.Authentication.Source();this.userRegFormView=new jive.UserRegistration.RegistrationFormView(c);this.userRegFormView.addListener("register",function(d){b.userRegSource.getForm(b.requiredFieldsOnly).addCallback(function(e){d.emitSuccess(e)}).addErrback(function(){b.userRegSource.showGenericFindError()})});this.userRegFormView.addListener("validate",function(d,e){b.userRegSource.validate(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(g,f,h){if(f!=400){b.userRegSource.showGenericSaveError()}e.emitError(h)})});this.userRegFormView.addListener("passwordstrength",function(e,d){b.userRegSource.checkPasswordStrength(e).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(){b.userRegSource.showGenericSaveError();d.emitError()})});this.userRegFormView.addListener("submit",function(d,e){b.userRegSource.saveForm(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(h,f,g){if(f!=400){b.userRegSource.showGenericSaveError()}e.emitError(g)})});this.userRegFormView.addListener("login",function(d,e){b.authenticationSource.login(d).addCallback(function(){e.emitSuccess()})})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.create=="undefined"){jive.nav.menu.create={}}jive.nav.menu.create.contentTypes=function(H,E){var C=E||new soy.StringBuilder();var J=H.sections;var D=J.length;for(var B=0;B<D;B++){var F=J[B];if(F.visible){C.append('<ul id="create-list-',soy.$$escapeHtml(B),'" class="j-icon-list js-create-list">');var K=F.items;var A=K.length;for(var I=0;I<A;I++){var G=K[I];if(G.visible){jive.nav.menu.create.contentTypeLinkItem(soy.$$augmentData(G,{smallView:true}),C)}}C.append("</ul>")}}return E?"":C.toString()};jive.nav.menu.create.contentTypeLinkItem=function(A,C){var B=C||new soy.StringBuilder();if(A.uploadable){B.append("<li>");jive.nav.menu.create.contentTypeLink(soy.$$augmentData(A.uploadLink,{upload:true,smallView:true}),B);B.append("</li>")}B.append("<li>");jive.nav.menu.create.contentTypeLink(A,B);B.append("</li>");return C?"":B.toString()};jive.nav.menu.create.contentTypeLink=function(A,C){var B=C||new soy.StringBuilder();if(A.iconCss){B.append('<a href="');jive.nav.menu.create.contentTypeHref(soy.$$augmentData(A,{legacy:((A.linkCss).match(new RegExp("js-legacy-create",""))||[]).length>0}),B);B.append('" class="',soy.$$escapeHtml(A.linkCss),'"',(A.urlParams&&A.urlParams.contentType)?' data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'"':"",(A.upload)?' data-upload="true"':"");if(((A.linkCss).match(new RegExp("quick",""))||[]).length>0){B.append(' data-quick-create-url="');jive.nav.menu.create.contentTypeHref(soy.$$augmentData(A,{legacy:true}),B);B.append('"')}B.append('><span class="',soy.$$escapeHtml(A.iconCss)," jive-icon-",(A.iconSize)?soy.$$escapeHtml(A.iconSize):(A.smallView)?"med":"big",'"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.smallView&&A.smallNameKey?A.smallNameKey:A.nameKey),[])),"</a>")}B.append((!A.smallView&&A.descriptionKey)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.descriptionKey),[]))+"</p>":"");return C?"":B.toString()};jive.nav.menu.create.contentTypeHref=function(A,C){var B=C||new soy.StringBuilder();B.append((A.legacy)?(A.urlParams)?soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},(function(){var F={};var E=[["sr","cmenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),A.urlParams))):soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString((function(){var F={};var E=[["sr","cmenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"javascript:void(0)");return C?"":B.toString()};jive.nav.menu.create.quick=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-quickcreate">');jive.shared.displayutil.a11yBoundary({type:"dialog"},B);B.append('<header class="j-modal-header"><h2 class="js-title">',soy.$$escapeHtml(A.title),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content">',A.body,"</section>");jive.shared.displayutil.a11yBoundary({type:"dialog",isEnd:true},B);B.append("</div>");return C?"":B.toString()}
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo["abstract"]=function(){};jive.oo._abstract=jive.oo["abstract"];
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.loading=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta-light j-menu-loading clearfix"><img src="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-image-loading.gif")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),'" /> <span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),"</span></p>");return C?"":B.toString()}
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.AbstractListView=jive.AbstractView.extend(function(B,C){var A;this.init=function(E,G,F){var D=this;D.$body=$j("body");D.$pop=$j(".j-pop");D.$menu=$j(G);D.$button=$j(E);D.menuOpts=F||{};D.popoverOpen=false;D.$button.click(function(H){if(!D.popoverOpen){D.$button.addClass("active");D.showSpinner();if(D.spinning){D.spinning=false;D.openPopover();D.spinning=true}D.emitP("toggle").addCallback(function(I){D.data=I||D.data;D.render(D.data);D.openPopover()}).always(function(){D.hideSpinner();var I=D.getContent();if(I&&I.length){jive.Accessibility.focusIn(I)}})}H.preventDefault()})};this.render=jive.oo._abstract;B.setContent=function(D,E){this.content=$j(D);if(this.popoverOpen){this.$menu.trigger("popover.html",[this.content,E])}else{this.$menu.children().remove();this.$menu.append(this.content);if(E){E()}}};this.getContent=function(){this.content=this.content||this.$menu.children();return this.content};this.close=function(){this.$menu.trigger("close")};B.createSpinner=function(){if(!this.popoverOpen){this.spinner=new jive.loader.LoaderView();this.setContent(this.spinner.getContent());this.openPopover()}else{C.createSpinner.call(this)}this.spinning=true};B.destroySpinner=function(){this.spinning=false;C.destroySpinner.call(this);if(this.spinner){this.spinner.destroy()}};B.openPopover=function(){var D=this;if(!D.popoverOpen&&!D.spinning){if(!$j.isEmptyObject(D.menuOpts)&&typeof isBeta!=="undefined"&&isBeta=="true"){D.$body.addClass("cntr-popup")}D.$button.addClass("active");D.$menu.popover($j.extend({context:D.$button,onClose:function(){if(typeof isBeta!=="undefined"&&isBeta=="true"){D.$button.removeClass("active");D.$pop.removeClass("j-pop-visible2");D.$body.removeClass("cntr-popup");D.popoverOpen=false}else{D.$button.removeClass("active");D.$pop.removeClass("j-pop-visible2");D.popoverOpen=false}},onLoad:function(){var E=this;window.selected=$("#j-satNav");if(!$j.isEmptyObject(D.menuOpts)){if(typeof isBeta!=="undefined"&&isBeta=="true"){E.showModal()}else{$j(".j-pop").addClass("j-pop-visible2")}}},tabIndexSpec:function(){$("#j-satNav-menu ul li a").each(function(E){$(this).attr("tabindex",E+1)});$(".j-modal-content").keyup(function(E){if(E.keyCode==9){if($(".mission-track").length){$(".js-close-mission").focus()}}});$("#body-apple").attr("tabindex","-1");$("#body-apple").attr("aria-hidden","true")},showModal:function(E){this.tabIndexSpec();window.convertSVG(".reward-tile");setTimeout(function(){$(".j-pop").addClass("j-pop-visible2")},400)}},D.menuOpts));D.popoverOpen=true}}})
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.Main=jive.oo.Class.extend(function(a){a.init=function(c,e,d){var b=this;this.initialized=false;this.listView=this.buildListView(c,e,d);this.itemSource=this.buildItemSource();this.listView.addListener("toggle",function(f){b.populate(f)})};a.populate=function(c){var b=this;if(!b.initialized){if(b.itemSource!=null){b.itemSource.findAll(b.sourceParams()).addCallback(function(d){c.emitSuccess(d);b.initialized=true})}else{c.emitSuccess({});b.initialized=true}}else{c.emitSuccess()}return c};a.invalidate=function(){this.initialized=false};a.sourceParams=function(){return{}};a.buildListView=jive.oo._abstract;a.buildItemSource=jive.oo._abstract});
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo.resolve=function(b,a){var c;return a.superclass.extend(function(e,k){var j=a.definition,i,h=this;if(typeof j=="function"){j.call(h,e,k)}else{for(i in j){if(j.hasOwnProperty(i)){h[i]=j[i]}}}g(h);g(e);f(h);f(e);function g(l){d(l,function(m){if(b[m]===c){delete l[m]}})}function f(l){d(l,function(m){if(b[m]){l[b[m]]=l[m];delete l[m]}})}function d(m,n){for(var l in m){if(b.hasOwnProperty(l)&&m.hasOwnProperty(l)){n(l)}}}})};
;
jive.AbstractFlowController=jive.oo.Class.extend(function(a){a.init=function(d,c){var b=this;this.initialView=c;this.activeView=c;this.transitions=d;this.events=Object.keys(d);this.views=[c].concat(Object.values(d)).unique();this.resetHistory();b.views.forEach(function(e){b.events.forEach(function(f){e.addListener(f,function(){var h=Array.prototype.slice.call(arguments),g=b.transitions[f];b.transitionTo.apply(b,[g].concat(h));b.viewHistory.push({view:g,args:h});b.activeView=g})});e.addListener("back",function(){b.viewHistory.pop();var h=b.viewHistory.last(),f=h.view,g=h.args;if(b.transitionBack){b.transitionBack.apply(b,[f].concat(g))}else{b.transitionTo.apply(b,[f].concat(g))}b.activeView=f})})};a.transitionTo=jive.oo._abstract;a.resetHistory=function(){this.viewHistory=[{view:this.initialView,data:[]}]}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.CreateFlowController=jive.oo.compose(jive.oo.resolve({init:"initFlowController"},jive.AbstractFlowController),jive.oo.resolve({init:"initListView"},jive.Navbar.Menu.AbstractListView)).extend(function(a,b){a.init=function(c,e,f,d){this.initFlowController(f,d);this.initListView(c,e);this.views.forEach(function(g){g.addListener("browse",function(){jQuery(e).trigger("close")})})};this.render=function(c){this.activeView=this.initialView;this.activeView.render(c);this.setContent(this.activeView.getContent());this.setClass();this.resetHistory()};this.getContent=function(){return this.activeView.getContent()};a.setContent=function(c,d){this.setClass();b.setContent.call(this,c,d)};a.transitionTo=function(d){var f=Array.prototype.slice.call(arguments,1),c=this,e=this.activeView.getClass?this.activeView.getClass():"",h=d.getClass?d.getClass():"";var i=d.render.apply(d,f).addCallback(function(){var j=d.getContent();c.setContent(j,function(){j.find(":input:visible").first().focus()})});var g=f.last();if(f.last()&&f.last().emitSuccess&&f.last().emitError){i.addCallback(g.emitSuccess.bind(g));i.addErrback(g.emitError.bind(g))}};a.setClass=function(){var c=this.$menu,d=this.activeView.getClass?this.activeView.getClass():"";this.views.filter(function(e){return e.getClass||e.getClassToRemove}).forEach(function(f){var e=f.getClassToRemove?f.getClassToRemove():f.getClass;c.removeClass(e)});if(d){c.addClass(d)}}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.Main=jive.Navbar.Menu.Main.extend(function(a,c){var b=jive.Navbar.Menu.Create;a.init=function(e,f){var d=this;c.init.call(this,e,f);this.suggestedContainers=new jive.Placepicker.SuggestedContainersSource({containerType:containerType,containerID:containerID});this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource("create",{containerType:containerType,containerID:containerID});this.quickCreateSource=new b.QuickCreateSource();this.userPrefSource=new jive.Browse.User.ItemSource();this.contentTypes={};this.currentContainerType=containerType;this.currentContainerID=containerID;this.listView.addListener("toggle",function(g){g.addCallback(function(h){d.initializeData(h)})});jive.localexchange.addListener("actions.create",function(g){d.selectedContentType=g.contentType;d.upload=g.upload;d.populate(new jive.conc.Promise()).addCallback(function(i){d.initializeData(i);var h=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:d.selectedContentType,upload:d.upload},d.contentTypes[d.selectedContentType]));h.showPicker();d.invalidate()})});jive.Accessibility.main.addHotkey("c",false,false,false,jive.Accessibility.clickAction($j(e)))};a.buildListView=function(g,h){var e=new b.TypeChooserView(),f=new b.ContainerChooserView(),i=new b.QuickCreateView(),d=this;d.flowController=new b.CreateFlowController(g,h,{contentType:f,toggleView:e},e);e.addListener("contentType",function(k,j){d.selectedContentType=k;d.upload=j}).addListener("toggleView",function(k,j){d.userPrefSource.setUserProperty({userID:"current",propName:"CreateMenuService.smallView",propValue:String(k)});d.initializeData(j)});f.addListener("render",function(j){d.suggestedContainers.get(d.selectedContentType).addCallback(function(k){j.emitSuccess(jQuery.extend({upload:d.upload,selectedContentType:d.contentTypes[d.selectedContentType]},k))})});f.addListener("search",function(j,k){d.containers.findAll({query:j,contentType:d.selectedContentType,maxReturned:10}).addCallback(function(l){k.emitSuccess(jQuery.extend({contentType:d.selectedContentType,containerType:containerType,containerID:containerID,upload:d.upload},l))})});f.addListener("browse",function(k){var j=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:d.selectedContentType,containerType:k.containerType,containerID:k.containerID,upload:d.upload},k.selectedContentType));j.showPicker()});e.addListener("quickCreate",function(k,j){d.selectedContentType=k;d.url=j;if(jive.DirectMessaging.isContentTypeEqualTo(k)){d.flowController.close();jive.DirectMessaging.create({trackingID:"cmenu"}).showModal()}else{i.render()}});i.addListener("fetch",function(j){d.flowController.close();d.quickCreateSource.fetch(d.url,j)});return d.flowController};a.buildItemSource=function(){return new jive.Navbar.Menu.CreateSource()};a.sourceParams=function(){return{containerType:containerType,containerID:containerID}};a.initializeData=function(e){var d=this;if(e){e.sections.reduce(function(f,g){return f.concat(g.items)},[]).filter(function(f){return f.urlParams&&f.urlParams.contentType}).forEach(function(f){if(f.id===null){delete f.id}if(d.currentContainerType&&typeof f.urlParams.containerType=="undefined"){f.urlParams.containerType=""+d.currentContainerType}if(d.currentContainerID&&typeof f.urlParams.containerID=="undefined"){f.urlParams.containerID=""+d.currentContainerID}d.contentTypes[f.urlParams.contentType]=jQuery.extend({id:f.urlParams.contentType,headingKey:f.headingKey,personalContainerTitleKey:f.personalContainerTitleKey,personalContainerCaptionKey:f.personalContainerCaptionKey,searchPlaceholderKey:f.searchPlaceholderKey},f)})}$j("a.js-container-context").each(function(){$j(this).querystring("containerType="+d.currentContainerType+"&containerID="+d.currentContainerID);$j(this).removeClass("js-container-context")})}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.TypeChooserView=jive.AbstractView.extend(function(A){var B=jQuery;this.getContent=function(){return this.content};this.getClass=function(){return"j-choose-type j-small-view"};this.getClassToRemove=function(){return"j-choose-type j-small-view j-large-view"};this.render=function(D){var C=B(jive.nav.menu.create.contentTypes(this.data||D)),F=new jive.conc.Promise(),E=this;E.updateCurrentContainer();E.$items=C.filter(".js-create-list");E.$items.find("a").click(function(){var H=B(this).attr("data-content-type"),G=!!B(this).attr("data-upload");E.showSpinner({size:"small",showLabel:false,context:B(this).parent("li")});if(H&&B(this).hasClass("js-createmenu-containerchooser")){E.emitP("contentType",H,G).always(function(){E.hideSpinner()});return false}});E.$items.find("a.quick").click(function(){var H=B(this).attr("data-content-type"),G=B(this).data("quick-create-url");E.emit("quickCreate",H,G);return false});E.flatFind(C,".js-use-small-menu").click(function(G){E.data.smallView=true;E.emit("toggleView",true,E.data);G.preventDefault()});E.flatFind(C,".js-use-large-menu").click(function(G){E.data.smallView=false;E.emit("toggleView",false,E.data);G.preventDefault()});this.content=C;this.data=this.data||D;if(E.currentContainerType&&E.currentContainerID){$j(C).find("a.js-container-context").each(function(){$j(this).querystring("containerType="+E.currentContainerType+"&containerID="+E.currentContainerID)})}F.emitSuccess();return F};A.flatFind=function(D,C){return D.find(C).andSelf().filter(C)};A.updateCurrentContainer=function(){var C=this;if(containerType&&containerID&&(typeof C.currentContainerType=="undefined"||typeof C.currentContainerID=="undefined")){C.currentContainerID=containerID;C.currentContainerType=containerType}}})
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateView=jive.AbstractView.extend(function(a){var b=jQuery;this.render=function(){var d=new jive.conc.Promise();var c=this;c.emitP("fetch").addCallback(function(f){var h=c.separateScripts(f.body),g=h[0],e=h[1],j=(g.match(/data-title\s*=\s*(['"])(.+?)\1/)||[])[2]||"",i;j=b("<div/>",{html:j}).text();i=b(jive.nav.menu.create.quick({title:j,body:g}));i.lightbox_me({closeSelector:".close",closeClick:false,closeEsc:false,destroyOnClose:true,initialFocusSelector:"input[type=text]:first",additionalFocusSelectors:"div[contenteditable]",closeFocusSelector:"#navCreate",onLoad:function(){e();d.emitSuccess()},onClose:function(){i.trigger("lightboxclose");delete c.content}});c.content=i});return d}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.ContainerChooserView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Navbar.Menu.Create;this.getContent=function(){return this.content};this.getClass=function(){return"j-choose-container"};this.render=function(){var e=new jive.conc.Promise(),d=this;this.emitP("render").addCallback(function(g){var f,h,i;d.content=c(jive.placepicker.containers(g));d.content.find(".back").one("click",function(j){d.emit("back");j.preventDefault()});d.content.filter(".j-menu-quick-bottomlink").one("click",function(j){d.emit("browse",g);j.preventDefault()});h=d.flatFind(d.content,".j-places-list");i=new jive.Placepicker.ContainerSearchView(d.flatFind(d.content,"input[name=container-filter]"),h);d.proxyListener(i,"search");e.emitSuccess()});return e};a.flatFind=function(e,d){return e.find("*").andSelf().filter(d)}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateSource=jive.oo.Class.extend(function(a){this.fetch=function(b,d){var c=d||new jive.conc.Promise();$j.get(b,function(e){c.emitSuccess({body:e})});return c}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.CreateSource=jive.RestService.extend(function(a){a.resourceType=a.pluralizedResourceType="createmenu"});
;
jive.namespace("Placepicker");jive.Placepicker.SuggestedContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);$j.extend(this.defaultParams,{containerType:c.containerType,containerID:c.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});
;
jive.namespace("Browse.User");jive.Browse.User.ItemSource=jive.RestService.extend(function(a){a.resourceType="user";this.findAll=function(d){var c=(d.userID)?d.userID:"current";var b=this.RESOURCE_ENDPOINT+"/"+c+"/browse";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:d||{}})};this.findAllOrgChart=function(d){var c=(d.userID)?d.userID:"current";var b=this.RESOURCE_ENDPOINT+"/"+c+"/orgchart";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:d||{}})};this.getDirectReportCount=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/directreports/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.getDirectReports=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/directreports";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.getUserProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.setUserProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c.propValue})};this.removeUserProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:b})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.wall=="undefined"){jive.wall={}}jive.wall.renderStatusSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-successful-post clearfix"><h3 class="font-color-okay">',(A.entry&&A.entry.status=="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status.post.success.title"),[])),'</h3><a href="javascript:void(0);" class="j-success-post-dismiss close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status.post.success.dismiss"),[])),"</a>");jive.wall.renderActivityStatus(A,B);jive.statusinput.attachments.renderAttachments(A,B);B.append("</div>");return C?"":B.toString()};jive.wall.renderActivityStatus=function(A,C){var B=C||new soy.StringBuilder();B.append(A.entry.message);return C?"":B.toString()};jive.wall.commentForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="comment-form clearfix">');if(A.canComment){jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:32,currentUserPartner:A.user.partner}),B);B.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content"><div class="jive-info-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-warn-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"></div><form id="s-c-form-',soy.$$escapeHtmlAttribute(A.statusID),'" name="',soy.$$escapeHtmlAttribute(A.statusID),'" data-status-id="',soy.$$escapeHtmlAttribute(A.statusID),'" class="j-form j-mb-comment-form js-mb-comment-form">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,default508Txt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.comment.aria.link.hint"),[]))},B);B.append('<input type="hidden" name="imageURL" /><div class="j-rte-message" ',(!A.visibleToExtCollaborator)?'style="display:none"':"",'><span class="jive-icon-med jive-icon-partner"></span><span class="font-color-meta-light j-browse-external-access"><em>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.content.reply.warn.visible"),[])),"</em></span></div>");jive.wall.statusInputErrorWarnBox(null,B);B.append('<div class="j-status-input-actions j-act-comment-actions clearfix"><input type="button" class="j-comment-submit j-btn-global j-btn-callout" id="',soy.$$escapeHtmlAttribute(A.statusID),'" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.button.comment.label"),[])),'" />');jive.wall.statusInputActionContainer({displayImageBtn:false,canCreateImage:A.canCreateImage,canCreateVideo:false,repost:false,canAtMention:A.canAtMention},B);B.append("</div></form></div>")}B.append("</li>");return C?"":B.toString()};jive.wall.repostForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-repost-form jive-form-container clearfix">',(A.mbCreationModerated)?'<div class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[]))+"</div>":"",'<div class="jive-info-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-warn-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"></div><form id="s-r-form-',soy.$$escapeHtmlAttribute(A.statusID),'" name="',soy.$$escapeHtmlAttribute(A.statusID),'" data-status-id="',soy.$$escapeHtmlAttribute(A.statusID),'" class="js-mb-repost-form">');jive.wall.statusInput({statusInputIdPostfix:"s-r-input-"+soy.$$escapeHtml(A.statusID),messageCSSClasses:"j-eae-txt-area",default508Txt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.default.aria.repost.label"),[]))},B);B.append('<input type="hidden" name="imageURL" />');jive.wall.statusInputErrorWarnBox(null,B);B.append('</form><div class="j-status-input-actions j-act-comment-actions clearfix">');jive.wall.statusInputActionContainer({displayImageBtn:true,canCreateImage:A.canCreateImage,canCreateVideo:true,repost:true,statusID:A.statusID,canAtMention:A.canAtMention},B);B.append("</div></div>");return C?"":B.toString()};jive.wall.statusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="statusInputs-',soy.$$escapeHtmlAttribute(A.statusInputIdPostfix),'" class="j-mb-entry"><div class="j-rc4 jive-statusinput-default font-color-meta  jive-statusinput ',(A.defaultTxtCSSClasses)?A.defaultTxtCSSClasses:"jive-form-element-text",' jive-js-statusinput-default" ',(A.immediatelyFocus)?'style="display:none;"':"",' tabindex="0" role="link"><div class="j-ui-elem triangle"></div>',(A.defaultTxt)?A.defaultTxt:"",(A.default508Txt)?'<span class="j-508-label" id="jive-508-label-message-'+soy.$$escapeHtmlAttribute(A.statusInputIdPostfix)+'">'+soy.$$escapeHtml(A.default508Txt)+"</span>":"",'</div><div id="message-',soy.$$escapeHtmlAttribute(A.statusInputIdPostfix),'" class="j-rc4 jive-js-statusinput ',(A.messageCSSClasses)?A.messageCSSClasses:"jive-statusinput jive-form-element-text",'" style="position:relative;"></div></div>');return C?"":B.toString()};jive.wall.statusInputNotificationBoxes=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-info-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-warn-box" style="display:none" aria-live="polite" aria-atomic="true"></div><div class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"></div>');return C?"":B.toString()};jive.wall.statusInputNotificationBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="',soy.$$escapeHtmlAttribute(A.cssClass),'" style="display:none" aria-live="polite" aria-atomic="true"></div>');return C?"":B.toString()};jive.wall.charLenErrors=function(A,C){var B=C||new soy.StringBuilder();B.append((A.error)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.chars.over"),[A.numChars])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.chars.remaining"),[A.numChars])));return C?"":B.toString()};jive.wall.submitErrors=function(A,C){var B=C||new soy.StringBuilder();B.append((A.key=="over")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.over"),[])):(A.key=="none")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.none"),[])):"");return C?"":B.toString()};jive.wall.statusInputErrorWarnBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-wall-error" style="display:none"><strong>');if(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.over.many"),[])==1){jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.over.one",arg0:'<span class="j-number-over"></span>',noAutoEscape:true},B)}else{jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.over.many",arg0:'<span class="j-number-over"></span>',noAutoEscape:true},B)}B.append('</strong></span><span class="j-wall-warn" style="display:none"><strong>');jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.left",arg0:'<span class="j-number-left"></span>',noAutoEscape:true},B);B.append('</strong></span><span class="jive-js-error-general j-rc2 j-mb-message" style="display:none" aria-live="polite" aria-atomic="true"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.statusInput.error"),[])),"</strong></span>");return C?"":B.toString()};jive.wall.statusInputActionContainer=function(A,C){var B=C||new soy.StringBuilder();B.append((A.canCreateImage&&A.displayImageBtn)?'<div class="jive-js-image-container j-attachment-container clearfix"></div>':"",(A.repost)?'<input type="button" class="j-repost-submit j-btn-callout" data-statusid="'+soy.$$escapeHtmlAttribute(A.statusID)+'" value="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.repost"),[]))+'"><input type="button" class="close" value="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+'">':"",(A.canCreateImage&&A.displayImageBtn)?'<a href="javascript:void(0);" class="j-btn-global j-wall-meta-image jive-js-imgattach-button" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[]))+'"><span class="jive-icon-med jive-icon-photo"></span></a>':"",(A.canAtMention)?'<a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'"><label id="j-status-mention-wall-label" class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'</label><span class="jive-icon-med jive-icon-mention" aria-labelledby="j-status-mention-wall-label"></span></a>':"",(A.canCreateImage)?'<div class="j-wall-meta-image-container j-attach-tab j-rc4"><form method="post" enctype="multipart/form-data"><input type="file" name="image" /><input type="hidden" name="imageURL" /></form></div>':"",(A.canCreateVideo)?'<div class="j-wall-meta-video-container j-attach-tab j-rc4"><form method="post"><input type="file" name="image" /><input type="hidden" name="imageURL" /></form></div>':"");return C?"":B.toString()};jive.wall.deleteCommentConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-narrow" id="jive-modal-delete-we-comment"><header><h2 class="jive-modal-title jive-modal-delete-we-comment">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment"),[])),'</h2></header><div class="jive-modal-content jive-modal-delete-we-comment clearfix"><div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment.confirm_del"),[])),'</div></div><div class="jive-form-buttons"><input id="we-comment-delete-submit-button" type="button" class="jive-modal-close j-btn-callout" name="delete" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment.button"),[])),'"><input id="we-comment-delete-close-button" type="button" class="jive-modal-close close" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'"></div></div></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.containers=="undefined"){jive.statusinput.containers={}}jive.statusinput.containers.microbloggingStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-',soy.$$escapeHtmlAttribute(A.statusID),'" class="j-mb">');jive.wall.statusInputNotificationBoxes(null,B);jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:46,useLinks:true,showHover:true,currentUserPartner:A.user.partner}),B);B.append('<form id="form-',soy.$$escapeHtmlAttribute(A.statusID),'" name="',soy.$$escapeHtmlAttribute(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.default.text"),[])),default508Txt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.default.aria.post.label"),[])),immediatelyFocus:A.focusStatusUpdate},B);jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtmlAttribute(A.statusID),'"/><input type="hidden" name="statusInputType" value="mb"/>');jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.mb.submit.text",displayImageBtn:A.canCreateMbImage,i18nCancelKey:"eae.mb.comment.cancel.text",displayAtMentionBtn:A.canAtMention},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:A.canCreateMbImage,canCreateVideo:A.canCreateMbVideo},B);if(A.latestStatusUpdate){B.append('<div class="j-mb-last-update font-color-meta" style="',(!A.latestStatusUpdate.text)?"display:none":"",'">');jive.statusinput.containers.microbloggingStatusInputLastUpdate(A,B);B.append("</div>")}B.append("</div>");return C?"":B.toString()};jive.statusinput.containers.microbloggingStatusInputModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-update-status-quick" class="jive-userbar-slidedown-status" data-title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.heading.status"),[])),'">',(A.isModerated)?'<div class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[]))+"</div>":"",'<div id="jive-quickstatuscreate-form">');jive.statusinput.containers.microbloggingStatusInput({statusID:"mb-modal-editor",user:A.user,focusStatusUpdate:true,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,canAtMention:A.canAtMention},B);B.append('</div></div><script type="text/javascript">$j(function() {var mb_create_modal = new jive.MicroBlogging.MBCreateModalController(); mb_create_modal.getMicrobloggingView().focus();});<\/script>');return C?"":B.toString()};jive.statusinput.containers.microbloggingStatusInputModalSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",(A.wallentry.status!="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.post.success.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])),"</p>");return C?"":B.toString()};jive.statusinput.containers.microbloggingStatusInputLastUpdate=function(A,C){var B=C||new soy.StringBuilder();B.append("<strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.last_update"),[])),"</strong> ",A.latestStatusUpdate.text,' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.latestStatusUpdate.url),'" class="j-comment-count j-inline-link font-color-meta-light" title="',(A.latestStatusUpdate.commentcount==1)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.comments.singular"),[A.latestStatusUpdate.commentcount])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.comments.plural"),[A.latestStatusUpdate.commentcount])),'"><span class="jive-icon-sml jive-glyph-comment"></span>',soy.$$escapeHtml(A.latestStatusUpdate.commentcount),"</a></strong>");return C?"":B.toString()};jive.statusinput.containers.microbloggingStatusInputSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-mb-success" class="j-mb-success-msg j-rc4"><header class="font-color-new">',(A.entry.status!="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.post.success.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])),'<a href="javascript:void(0)" class="j-js-mb-success-dismiss j-mb-dismiss"><span class="jive-icon-sml jive-glyph-remove"></span></a></header><p>',A.entry.message,"</p><p>");if(A.entry&&A.entry.meta&&A.entry.meta.length>0){jive.statusinput.containers.renderAttachmentsContainer({id:"attachmentContainer-success",entry:A.entry,visible:true},B);B.append("<script type=\"text/javascript\">$j(function() {window.setInterval(function(){var attachmentView = new jive.MicroBlogging.AttachmentView({selector:'#attachmentContainer-success'}); attachmentView.postRender();}, 0);});<\/script>")}B.append("</p><div>");return C?"":B.toString()};jive.statusinput.containers.microbloggingCommentStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-mb j-js-mb-comment j-act-reply-form">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-',soy.$$escapeHtmlAttribute(A.statusID),'" name="',soy.$$escapeHtmlAttribute(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.comment.default.text"),[])),default508Txt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.comment.aria.hint"),[]))},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtmlAttribute(A.statusID),'"/><input type="hidden" name="contentID" value="',soy.$$escapeHtmlAttribute(A.jiveObject.id),'"/><input type="hidden" name="typeID" value="',soy.$$escapeHtmlAttribute(A.jiveObject.objectType),'"/><input type="hidden" name="statusInputType" value="mbComment"/>',(A.visibleToExtCollaborator)?'<div class="j-rte-message"><span class="jive-icon-med jive-icon-partner"></span><span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.content.reply.warn.visible"),[]))+"</em></span></div>":"");jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.mb.submit.text",displayImageBtn:false,i18nCancelKey:"eae.mb.comment.cancel.text",displayAtMentionBtn:A.canAtMention},B);jive.wall.statusInputErrorWarnBox(null,B);B.append('</form><div class="j-status-input-attach-action-container clearfix j-rc4"></div></div>');return C?"":B.toString()};jive.statusinput.containers.repostStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-eae-repost-form j-act-reply-form">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-',soy.$$escapeHtmlAttribute(A.statusID),'" name="',soy.$$escapeHtmlAttribute(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:"",default508Txt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.default.aria.repost.label"),[]))},B);jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtmlAttribute(A.statusID),'"/><input type="hidden" name="subject" value="',soy.$$escapeHtmlAttribute(A.jiveObject.subject),'"/><input type="hidden" name="contentID" value="',soy.$$escapeHtmlAttribute(A.jiveObject.id),'"/><input type="hidden" name="typeID" value="',soy.$$escapeHtmlAttribute(A.jiveObject.objectType),'"/><input type="hidden" name="statusInputType" value="repost"/>');jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.menu.repost",displayImageBtn:A.canCreateMbImage,displayAtMentionBtn:A.canAtMention,i18nCancelKey:"eae.mb.comment.cancel.text"},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:A.canCreateMbImage,canCreateVideo:A.canCreateMbVideo},B);B.append("</div>");return C?"":B.toString()};jive.statusinput.containers.statusInputActions=function(A,C){var B=C||new soy.StringBuilder();B.append("<div id='",(A.idPrefix)?A.idPrefix:"status-input-actions-",soy.$$escapeHtmlAttribute(A.statusID),'\' class="j-status-input-actions" style="display:none"><a href="javascript:void(0);" class="j-status-input-submit j-btn-global j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nSubmitKey),[])),"</a>",(A.i18nCancelKey)?'<a href="javascript:void(0);" class="j-status-input-cancel j-btn-global close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nCancelKey),[]))+"</a>":"",(A.displayImageBtn)?'<p id="jive-js-imgattach-button-desc" class="j-508-label" aria-hidden="true">Press enter to select this button to upload an image.  If using JAWS, press Shift-Enter to select this button.</p><a href="javascript:void(0);" class="jive-js-imgattach-button j-wall-meta-image j-btn-global" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[]))+'" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[]))+'" aria-describedby="jive-js-imgattach-button-desc"><span class="jive-icon-med jive-icon-photo"></span></a>':"",(A.displayAtMentionBtn)?'<a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'"><span class="jive-icon-med jive-icon-mention" aria-labelledby="j-status-mention-label"></span></a>':"",'<span class="j-js-status-input-characters-remaining j-status-input-chars-left j-rc4"></span></div>');return C?"":B.toString()};jive.statusinput.containers.statusInputActionContainer=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-status-input-attach-action-container clearfix j-rc4">',(A.canCreateImage)?'<div class="j-meta-image-container j-attach-tab clearfix"><form method="post" enctype="multipart/form-data"><input type="file" name="image" /><input type="hidden" name="imageURL" /><input type="hidden" name="privateDM" value="'+((A.isPrivateDM)?"true":"false")+'" /></form></div>':"",(A.canCreateVideo)?'<div class="j-meta-video-container j-attach-tab clearfix"><form method="post"><input type="file" name="image" /><input type="hidden" name="imageURL" /><input type="hidden" name="privateDM" value="'+((A.isPrivateDM)?"true":"false")+'" /></form></div>':"","</div>");return C?"":B.toString()};jive.statusinput.containers.statusInputType=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="hidden" name="statusInputType" value="',soy.$$escapeHtmlAttribute(A.type),'"/>');return C?"":B.toString()};jive.statusinput.containers.renderAttachmentsContainer=function(A,C){var B=C||new soy.StringBuilder();B.append("<div ",(A.id)?'id="'+A.id+'" ':"",'class="jive-js-attachment-container j-attachment-container clearfix" ',(A.visible)?'style="display:block"':"",">");if(A.entry&&A.entry.meta){jive.statusinput.attachments.renderAttachments(A,B)}B.append("</div>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.attachments=="undefined"){jive.statusinput.attachments={}}jive.statusinput.attachments.renderAttachments=function(D,G){var E=G||new soy.StringBuilder();if(D.entry.meta){E.append('<a class="j-attachment-arrow j-attachment-arrow-left clearfix" href="javascript:void(0);"><span class="jive-icon-link-back"></span></a><ul class="j-attached-items clearfix">');var C=D.entry.meta;var F=C.length;for(var B=0;B<F;B++){var A=C[B];jive.statusinput.attachments.renderAttachment(soy.$$augmentData(D,{attachment:A,entry:D.entry,removable:D.removable}),E)}E.append((D.removable)?"<li class='j-attached-loading'></li>":"",'</ul><a class="j-attachment-arrow j-attachment-arrow-right clearfix" href="javascript:void(0);"><span class="jive-icon-link-forward"></span></a>')}return G?"":E.toString()};jive.statusinput.attachments.renderAttachment=function(A,C){var B=C||new soy.StringBuilder();switch(A.attachment.objectType){case 102:jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentData(A,{linkUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.entry.jiveObjectURL),containerClass:"j-attached-document"}),B);break;case 111:jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentData(A,{linkUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.fullImageUrl),containerClass:"j-attached-image"}),B);break;case 801:B.append('<li class="j-attached-video" ',(A.attachment.id)?'id="'+A.attachment.id+'"':"",'><a rel="fb" href="',A.attachment.properties.videoURL,'" style="width: ',soy.$$escapeHtml(A.attachment.properties.thumbnailWidth),"px; height: ",soy.$$escapeHtml(A.attachment.properties.thumbnailHeight),'px" class="j-attach-anchor j-attach-video"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.properties.thumbnailURL),'" width="',soy.$$escapeHtml(A.attachment.properties.thumbnailWidth),'" height="',soy.$$escapeHtml(A.attachment.properties.thumbnailHeight),'" alt="" /><span class="j-icon-play" style="display: none; position: absolute; left: ',soy.$$escapeHtml((A.attachment.properties.thumbnailWidth+12-40)/2),'px; top: 20px; "></span></a>',(A.removable)?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a>":"","</li>");break}return C?"":B.toString()};jive.statusinput.attachments.renderCommonAttachment=function(A,C){var B=C||new soy.StringBuilder();B.append("<li",(A.attachment.id)?' id="'+A.attachment.id+'"':"",(A.containerClass)?' class="'+soy.$$escapeHtml(A.containerClass)+'"':"",'><a href="',soy.$$escapeHtml(A.linkUrl),'" ',(A.attachment.originalURL)?'jiveOriginalURL="'+soy.$$escapeHtml(A.attachment.originalURL)+'"':"",'style="display: block;',(A.attachment.thumbnailWidth)?"width: "+soy.$$escapeHtml(A.attachment.thumbnailWidth)+"px;":"",(A.attachment.thumbnailHeight)?"height:"+soy.$$escapeHtml(A.attachment.thumbnailHeight)+"px;":"",'" class="j-attach-anchor"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.imageThumbnailUrl),'" ',(A.attachment.thumbnailWidth)?'width="'+soy.$$escapeHtml(A.attachment.thumbnailWidth)+'"':""," ",(A.attachment.thumbnailHeight)?'height="'+soy.$$escapeHtml(A.attachment.thumbnailHeight)+'"':"",' alt=""/></a>',(A.removable)?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a>":"","</li>");return C?"":B.toString()}
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommonController=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(c){if(!c){c={}}this.microbloggingService=new jive.MicroBlogging.MicroBloggingSource();this.metaService=new jive.MetaSource();this.draftWallEntry=null;this.viewOptions=c.viewOptions||{};this.initMBView();this.manuallyRenderView=c.manuallyRenderView||false;this.submitURLParams={objectType:14,objectID:1};if(c.trackingID){this.submitURLParams.trackingID=c.trackingID}var b=this;this.microbloggingView.addListener("submit",function(d,e){b.submitHandler(d,e)}).addListener("linkURLMatch",function(d,e){console.log("linkURL match");b.metaService.createLink(d).addCallback(function(f){e.emitSuccess(f,d)}).addErrback(function(g,f){e.emitError(g,f)})}).addListener("imageURLMatch",function(f,d,e,h){b.draftData=e;function g(){var i=b.metaService.createImage(b.draftWallEntry.wallentry,f,f!=null,d);i.addCallback(function(j){h.emitSuccess(j,f)}).addErrback(function(k,j){h.emitError(k,j)})}if(b.draftWallEntry==null){b.createDraft(g,h)}else{g()}}).addListener("removeImage",function(e,d){b.metaService.remove(e).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){d.emitError(g,f)})}).addListener("youtubeURLMatch",function(f,e,g){b.draftData=e;function d(){b.metaService.createVideo(b.draftWallEntry.wallentry,f).addCallback(function(h){b.metaService.fetch(h.id).addCallback(function(i){if(i.meta.length>0){g.emitSuccess(b.metaService.normalizeVideoData(i),f)}else{g.emitError(message,status)}}).addErrback(function(j,i){g.emitError(j,i)})}).addErrback(function(i,h){g.emitError(i,h)})}if(b.draftWallEntry==null){b.createDraft(d,g)}else{d()}}).addListener("cancel",function(){b.emit("cancel")});if(!this.manuallyRenderView){this.renderView()}};a.submitHandler=function(c,d){var b;if(this.draftWallEntry!=null){b=$j.extend(true,{},this.draftWallEntry,c)}else{b=c}this.submitServiceCall(b,d)};a.submitServiceCall=function(c,d){var b=this;this.microbloggingService.publishEntry(this.submitURLParams,c).addCallback(function(e){b.submitSuccessCallback(e,d)}).addErrback(function(f,e){b.submitErrCallback(f,e,d)})};a.submitSuccessCallback=function(b,c){this.draftWallEntry=null;b.wallentry=this.metaService.normalizeVideoData(b.wallentry);c.emitSuccess(b);this.emitP("submitSuccess",b)};a.submitErrCallback=function(c,b,d){d.emitError(c,b);this.emitP("submitError",c,b)};a.createDraft=function(d,c){var b=this;this.microbloggingService.createDraft({objectType:14,objectID:1},{wallentry:{}}).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})};a.initMBView=function(){throw"initMBView method is abstract. Need to implmenet in subclass"};this.renderView=function(){this.microbloggingView.postRender()};this.getMicrobloggingView=function(){return this.microbloggingView}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="wall";a.pluralizedResourceType=a.resourceType;this.publishEntry=function(b,d){var c=this.RESOURCE_ENDPOINT+"/"+b.objectType+"/"+b.objectID+(b.trackingID?"?sr="+b.trackingID:"");if(jive.Trial&&jive.Trial.Controller){var e=jive.Trial.Controller.getActiveQuestAndStep();if(e.activeQuestID=="1836538113"&&e.activeQuestStep==0){d.wallentry.fromQuest=e.activeQuestID}}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.createDraft=function(b,d){var c=this.RESOURCE_ENDPOINT+"/"+b.objectType+"/"+b.objectID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.repost=function(b,d){var c=this.RESOURCE_ENDPOINT+"/repost/"+b.wallEntryID;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d},d)};this.createRepostDraft=function(b,d){var c=this.RESOURCE_ENDPOINT+"/repost/"+b.wallEntryID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)}});
;
jive.MetaSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="meta";a.pluralizedResourceType=a.resourceType;this.createLink=function(d){var e=new jive.conc.Promise(),b=this,c={url:jive.action.url("link-meta",{url:encodeURIComponent(d)}),dataType:"html",success:function(f){console.log("jive.MetaSource.createLink SUCCESS "+f);e.emitSuccess(f)},error:function(f){console.log("jive.MetaSource.createLink ERROR "+f);b.errorCallback(e,this.errorSaving)}};$j.ajax(c);return e};this.createVideo=function(d,g){var f=new jive.conc.Promise(),b=this,e={contentObjectType:d.objectType,object:d.objectId,videoURL:encodeURIComponent(g)},c={url:jive.action.url("video-link-meta",e),dataType:"json",success:function(h){console.log("jive.MetaSource.createVideo SUCCESS "+h);f.emitSuccess(h)},error:function(h){console.log("jive.MetaSource.createVideo ERROR "+h);b.errorCallback(f,this.errorSaving)}};$j.ajax(c);return f};this.normalizeVideoData=function(b){if(b.meta&&b.meta.length>0){b.meta.forEach(function(d){var c=d.properties;if(c!=undefined){var g={};if(c.entry!=undefined&&c.entry.length!=0){var f=c.entry;for(var e=0;e<f.length;e++){g[f[e].key]=f[e].value}}d.properties=g}})}else{b.meta=[]}return b};this.createImage=function(f,d,b,k){var h=this,c=this.RESOURCE_ENDPOINT+"/imageJackson/"+f.objectType+"/"+f.objectId+"/attachment",g="",j=new jive.conc.Promise();if(b){console.log("Got image url");g=encodeURIComponent(d);c=this.RESOURCE_ENDPOINT+"/imageJackson/"+f.objectType+"/"+f.objectId}var i={url:c,dataType:"xml",data:{imageURL:g},contentType:"text/xml; charset=utf-8",complete:function(m,l){if($j(m.responseXML).find("meta id").length>0){h.fetch($j(m.responseXML).find("meta id").text()).addCallback(function(p){j.emitSuccess(p)}).addErrback(function(q,p){h.errorCallback(j,this.errorSaving)})}else{var o=$j(m.responseXML).find("code").text();var n=$j(m.responseXML).find("message").text();j.emitError(n,o)}},error:function(n,p,o){console.log("Error jive.Wall.ImageMetaSource create"+n+", "+p+", "+o);var m=$j(n.responseXML).find("code").text();var l=$j(n.responseXML).find("message").text();h.errorCallback(j,this.errorSaving)}};if(b){var e=k.find("input[name=image]");if(e.length>0){e.val("")}}else{k.find("input[name=imageURL]").val("")}k.ajaxSubmit(i);return j};this.fetch=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.remove=function(c){var b=this.RESOURCE_ENDPOINT+"/remove/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.mention_warnings=="undefined"){jive.statusinput.mention_warnings={}}jive.statusinput.mention_warnings.jsI18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()}
;
if(!jive.Selection){jive.Selection=$Class.extend({init:function(b,a,e,d,c){this._supportsDomRange=$j.isFunction(window.getSelection);this._selection=jive.Selection.getSelection(d,c);if(b!=null){if(this._supportsDomRange){if(this._selection.rangeCount==0){this._selection.addRange(jive.Selection.createRangeAtNode(b,c))}}this._doc=c;this._win=d;this._range=this.getRangeAt(0);this.moveToNodeAndCollapse(b,a,e)}else{this._range=this.getRangeAt(0)}},getSelection:function(){return this._selection},getRangeAt:function(a){return jive.Selection.getRangeAt(this._selection,a,this._doc)},makeRangeTheSelection:function(){if(!this._supportsDomRange){this._selection.empty();this._range.select()}else{if(this._selection.rangeCount>0){this._selection.removeAllRanges()}this._selection.addRange(this._range)}},rangeInsertNode:function(d){if(!this._supportsDomRange){var a=this.getRangeStartContainer();var c=this.getRangeStartOffset();var b=a.parentNode;if(a.nodeType==3){var g=new String(a.nodeValue);var f=document.createTextNode(g.substring(0,c));var e=document.createTextNode(g.substring(c));b.insertBefore(f,a);b.insertBefore(d,a.nextSibling);b.insertBefore(e,d.nextSibling);b.removeChild(a);this.moveToNodeAndCollapse(d,true)}else{b.insertBefore(d,a.nextSibling)}}else{this._range.insertNode(d)}},setRangeStart:function(b,a){if(!this._supportsDomRange){this._setRangeStartEndHelper(b,a,false)}else{this._range.setStart(b,a)}},setRangeEnd:function(a,b){if(!this._supportsDomRange){this._setRangeStartEndHelper(a,b,true)}else{this._range.setEnd(a,b)}},getRangeStartContainer:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(true).container}else{return this._range.startContainer}},getRangeEndContainer:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(false).container}else{return this._range.endContainer}},getRangeStartOffset:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(true).offset}else{return this._range.startOffset}},getRangeEndOffset:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(false).offset}else{return this._range.endOffset}},getWordAtRange:function(){return this._wordAtRangeCommon()},replaceWordAtRange:function(c,b,a){return this._wordAtRangeCommon(c,b,a)},_wordAtRangeCommon:function(e,a,b){var q=this.getRangeStartContainer();var k=jive.Selection.replaceNbspWithWhitespace(q.nodeValue);if(this.alignRangeWithNearestTextNode(q)){q=this.getRangeStartContainer();k=q.nodeValue}if(e==null){if(this._normalizeTextNode(q,this.getRangeStartOffset())){k=q.nodeValue;this._range.collapse(true);this.makeRangeTheSelection()}}var i=this.getRangeStartOffset();var o=new String(k).substring(0,i);var g=new String(k).substring(i);var f=/\S+$/,p=/^\S+/;if(e!=null&&e.length>0){a=a||"";b=b||{tag:"txt"};var l=a+e;o=o.replace(f,"");g=g.replace(p,"");if((g==null||g.length==0)&&b.tag!="txt"){g=" "}var c;if(b.tag=="txt"){c=document.createTextNode(l)}else{c=document.createElement(b.tag);for(var n in b.attrs){c.setAttribute(n,b.attrs[n])}c.innerHTML=l}var h=q.parentNode;if(o!=null&&o.length>0){h.insertBefore(document.createTextNode(o),q)}h.insertBefore(c,q);var j=null;if(g!=null&&g.length>0){j=document.createTextNode(g);h.insertBefore(j,q)}h.removeChild(q);var d=j==null?c:j;this.moveToNodeAndCollapse(d);return c}else{o=o.match(f);g=g.match(p);var m=(o==null?"":o)+(g==null?"":g);return m}},_normalizeTextNode:function(d,h){h=h||0;if(d==null||!d.nodeValue||jive.Selection.replaceNbspWithWhitespace(d.nodeValue).search(/\S+/)==-1){return false}var c="";var a=d.parentNode;function g(k){var j=k?d.previousSibling:d.nextSibling;while(j!=null&&j.nodeType==3&&jive.Selection.replaceNbspWithWhitespace(j.nodeValue).search(/\S+/)>-1){if(k){c=j.nodeValue+c}else{c+=j.nodeValue}var i=k?j.previousSibling:j.nextSibling;a.removeChild(j);j=i}}g(true);var f=c.length+h;c+=d.nodeValue;g(false);if(c!=d.nodeValue){if(!this._supportsDomRange){var e=this._range.duplicate();var b=document.createTextNode(c);a.replaceChild(b,d);this._range=e.duplicate();this._range.moveStart("character",f)}else{d.nodeValue=c;this.setRangeStart(d,f)}this._range.collapse(true);this.makeRangeTheSelection();return true}return false},insertNodeAtRange:function(b,c){var a=typeof b=="string"?document.createTextNode(b):b;c=c||0;if(this._supportsDomRange){this._range.collapse(true)}this.rangeInsertNode(a);if(a.nodeType==3){if(!this._normalizeTextNode(a,c)){if(!this._supportsDomRange){this._range.moveStart("character",c);this._range.collapse(true)}else{this.setRangeStart(b,c)}this.makeRangeTheSelection()}}},selectNode:function(a){this._range.selectNode(a)},collapseRange:function(a){this._range.collapse(!!a)},selectNodeContents:function(a){if(!this._supportsDomRange){var d=this.getRangeStartOffset()*-1;var c=this._range.duplicate();c.moveToElementText(c.parentElement());c.setEndPoint("StartToEnd",this._range);var b=c.text.length;this._range.moveStart("character",d);this._range.moveEnd("character",b);this._range.select()}else{this.getSelection().selectAllChildren(a)}},moveToNodeAndCollapse:function(b,a,c){if(a){this.setRangeStart(b,c)}else{this.setRangeEnd(b,c)}this._range.collapse(a);this.makeRangeTheSelection()},alignRangeWithNearestTextNode:function(a){a=a||this.getRangeStartContainer();if(a.nodeType!=3){var f=$j(a).contents();if(f.length>0){var c=this.getRangeStartOffset();var e=f.get(c);if(e.nodeType==3){this.init(d,false);return true}else{return this.alignRangeWithNearestTextNode(e)}}else{f=$j(a).parent().contents();var g=f.index(a);var b=false;var d=f.filter(function(h){return h<g&&this.nodeType==3}).last();if(d.length==0){d=f.filter(function(h){return h>g&&this.nodeType==3}).first();b=true}if(d.length>0){this.init(d[0],b,b?0:d[0].length);return true}else{if(f.length){d=f.first();this.init(d[0],b,b?0:d[0].length);return true}else{throw ("alignRangeWithNearestTextNode Failed to find a text node to align with.")}}}}return false},_getIERangeContainerHelper:function(c){var g=c?this._getIERangeStartOffsetHelper():this._getIERangeEndOffsetHelper();var a=this._range.parentElement();var e=0;var f=a.childNodes;if(f.length==0){return a}for(var d=0;d<f.length;d++){var h=f[d];var b=$j(h).text().length;if(b==0&&h.nodeName=="BR"){b=2}if(g<=e+b){return{container:h,offset:g-e}}else{e+=b}}return{container:h,offset:e};throw ("Error jive.selection._getIERangeContainerHelper could not find range container")},_getIERangeStartOffsetHelper:function(){var a=this._range.duplicate();a.moveToElementText(a.parentElement());a.setEndPoint("EndToStart",this._range);return a.text.length},_getIERangeEndOffsetHelper:function(){return this._range.text.length+this._getIERangeStartOffsetHelper()},_setRangeStartEndHelper:function(h,k,g){var n=h.nodeType==3;var l=n?h.parentNode:h;var i=this._range.duplicate();i.moveToElementText(l);k=k||0;var c=$j(h).parent().contents();var p=c.index(h);var a;if(n){a=c.slice(0,p).text().length+k}else{a=c.slice(0,p+k).text().length}i.moveStart("character",a);var f;var e;if(n){f=p+1;e=jive.Selection.replaceNbspWithWhitespace($j(h).text()).substring(k)}else{f=p+k+1;e=jive.Selection.replaceNbspWithWhitespace(c.slice(p+k))}var o=new RegExp("(.*)"+e);function j(){return new String(i.text).replace(new RegExp(c.slice(f).text()+"$"),"")}var b=j();var d=0;while(b!=e){b=j();var m=b.match(o);if(m!=null&&m.length==2){i.moveStart("character",m[1].length)}else{throw ("jive.Selection _setRangeStartEndHelper failed to setRange Start or End")}d++;if(d==10){throw ("jive.Selection _setRangeStartEndHelper failed to setRange Start or End")}}if(g){this._range.setEndPoint("EndToStart",i)}else{this._range.setEndPoint("StartToStart",i)}}});jive.Selection.getSelection=function(b,a){if(!b){b=window}if(!a){a=document}if(b.getSelection){return b.getSelection()}else{if(a.all){return a.selection}else{if(a.getSelection){return a.getSelection()}}}throw ("jive.Selection.getSelector Error: unable to obtain seleciton object")};jive.Selection.getRangeAt=function(b,a,c){if(!c){c=document}if(b.getRangeAt){return b.getRangeAt(a)}else{if(c.selection){return b.createRange()}}throw ("jive.Selection.getRangeAt Error: unable to obtain seleciton object")};jive.Selection.moveCursorAfter=function(b,c){if(!c){c=document}var d=c.createElement("span");d.setAttribute("data-jive-statusinputadd","true");d.innerHTML="&nbsp;";b.parentNode.insertBefore(d,b);b.parentNode.insertBefore(b,d);var a=new jive.Selection(d,true);b.parentNode.removeChild(d)};jive.Selection.createRangeAtNode=function(b,c){if(!c){c=document}if(c.createRange){var a=c.createRange();a.selectNodeContents(b);return a}else{if(b.createRange){return b.createRange()}}throw ("jive.Selection.createRange Error: unable to obtain range object")};jive.Selection.replaceNbspWithWhitespace=function(a){if(a==null){return a}else{return String(a).replace(/\xA0/g," ")}}};
;
(function(B,A){if(typeof define=="function"&&define.amd){define(B)}else{if(typeof module!="undefined"&&typeof exports=="object"){module.exports=B()}else{A.rangy=B()}}})(function(){var U="object",D="function",a="undefined";var A=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var Q=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var L=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var h=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function d(q,n){var m=typeof q[n];return m==D||(!!(m==U&&q[n]))||m=="unknown"}function Y(n,m){return !!(typeof n[m]==U&&n[m])}function F(n,m){return typeof n[m]!=a}function W(m){return function(q,p){var n=p.length;while(n--){if(!m(q,p[n])){return false}}return true}}var J=W(d);var T=W(Y);var G=W(F);function Z(m){return m&&J(m,h)&&G(m,L)}function k(m){return Y(m,"body")?m.body:m.getElementsByTagName("body")[0]}var B=[].forEach?function(m,n){m.forEach(n)}:function(n,p){for(var o=0,m=n.length;o<m;++o){p(n[o],o)}};var V={};var c=(typeof window!=a&&typeof document!=a);var K={isHostMethod:d,isHostObject:Y,isHostProperty:F,areHostMethods:J,areHostObjects:T,areHostProperties:G,isTextRange:Z,getBody:k,forEach:B};var H={version:"1.3.0-beta.1",initialized:false,isBrowser:c,supported:true,util:K,features:{},modules:V,config:{alertOnFail:true,alertOnWarn:false,preferTextRange:false,autoInitialize:(typeof rangyAutoInitialize==a)?true:rangyAutoInitialize}};function g(m){if(typeof console!=a&&d(console,"log")){console.log(m)}}function P(n,m){if(c&&m){alert(n)}else{g(n)}}function M(m){H.initialized=true;H.supported=false;P("Rangy is not supported in this environment. Reason: "+m,H.config.alertOnFail)}H.fail=M;function N(m){P("Rangy warning: "+m,H.config.alertOnWarn)}H.warn=N;var O;if({}.hasOwnProperty){K.extend=O=function(s,q,m){var t,r;for(var n in q){if(q.hasOwnProperty(n)){t=s[n];r=q[n];if(m&&t!==null&&typeof t=="object"&&r!==null&&typeof r=="object"){O(t,r,true)}s[n]=r}}if(q.hasOwnProperty("toString")){s.toString=q.toString}return s};K.createOptions=function(m,o){var n={};O(n,o);if(m){O(n,m)}return n}}else{M("hasOwnProperty not supported")}if(!c){M("Rangy can only run in a browser")}(function(){var m;if(c){var n=document.createElement("div");n.appendChild(document.createElement("span"));var p=[].slice;try{if(p.call(n.childNodes,0)[0].nodeType==1){m=function(q){return p.call(q,0)}}}catch(o){}}if(!m){m=function(s){var r=[];for(var t=0,q=s.length;t<q;++t){r[t]=s[t]}return r}}K.toArray=m})();var I;if(c){if(d(document,"addEventListener")){I=function(o,m,n){o.addEventListener(m,n,false)}}else{if(d(document,"attachEvent")){I=function(o,m,n){o.attachEvent("on"+m,n)}}else{M("Document does not have required addEventListener or attachEvent method")}}K.addListener=I}var l=[];function C(m){return m.message||m.description||String(m)}function i(){if(!c||H.initialized){return }var o;var v=false,p=false;if(d(document,"createRange")){o=document.createRange();if(J(o,Q)&&G(o,A)){v=true}}var r=k(document);if(!r||r.nodeName.toLowerCase()!="body"){M("No body element found");return }if(r&&d(r,"createTextRange")){o=r.createTextRange();if(Z(o)){p=true}}if(!v&&!p){M("Neither Range nor TextRange are available");return }H.initialized=true;H.features={implementsDomRange:v,implementsTextRange:p};var n,t;for(var m in V){if((n=V[m]) instanceof X){n.init(n,H)}}for(var q=0,s=l.length;q<s;++q){try{l[q](H)}catch(u){t="Rangy init listener threw an exception. Continuing. Detail: "+C(u);g(t)}}}H.init=i;H.addInitListener=function(m){if(H.initialized){m(H)}else{l.push(m)}};var S=[];H.addShimListener=function(m){S.push(m)};function e(o){o=o||window;i();for(var n=0,m=S.length;n<m;++n){S[n](o)}}if(c){H.shim=H.createMissingNativeApi=e}function X(m,o,n){this.name=m;this.dependencies=o;this.initialized=false;this.supported=false;this.initializer=n}X.prototype={init:function(){var p=this.dependencies||[];for(var o=0,m=p.length,q,n;o<m;++o){n=p[o];q=V[n];if(!q||!(q instanceof X)){throw new Error("required module '"+n+"' not found")}q.init();if(!q.supported){throw new Error("required module '"+n+"' not supported")}}this.initializer(this)},fail:function(m){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+m)},warn:function(m){H.warn("Module "+this.name+": "+m)},deprecationNotice:function(m,n){H.warn("DEPRECATED: "+m+" in module "+this.name+"is deprecated. Please use "+n+" instead")},createError:function(m){return new Error("Error in Rangy "+this.name+" module: "+m)}};function R(m,o,p){var n=new X(m,o,function(s){if(!s.initialized){s.initialized=true;try{p(H,s);s.supported=true}catch(r){var q="Module '"+m+"' failed to load: "+C(r);g(q);if(r.stack){g(r.stack)}}}});V[m]=n;return n}H.createModule=function(m){var p,o;if(arguments.length==2){p=arguments[1];o=[]}else{p=arguments[2];o=arguments[1]}var n=R(m,o,p);if(H.initialized&&H.supported){n.init()}};H.createCoreModule=function(m,n,o){R(m,n,o)};function f(){}H.RangePrototype=f;H.rangePrototype=new f();function b(){}H.selectionPrototype=new b();H.createCoreModule("DomUtil",[],function(p,n){var AE="undefined";var r=p.util;if(!r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){n.fail("document missing a Node creation method")}if(!r.isHostMethod(document,"getElementsByTagName")){n.fail("document missing getElementsByTagName method")}var AQ=document.createElement("div");if(!r.areHostMethods(AQ,["insertBefore","appendChild","cloneNode"]||!r.areHostObjects(AQ,["previousSibling","nextSibling","childNodes","parentNode"]))){n.fail("Incomplete Element implementation")}if(!r.isHostProperty(AQ,"innerHTML")){n.fail("Element is missing innerHTML property")}var AS=document.createTextNode("test");if(!r.areHostMethods(AS,["splitText","deleteData","insertData","appendData","cloneNode"]||!r.areHostObjects(AQ,["previousSibling","nextSibling","childNodes","parentNode"])||!r.areHostProperties(AS,["data"]))){n.fail("Incomplete Text Node implementation")}var AV=function(AW,AY){var AX=AW.length;while(AX--){if(AW[AX]===AY){return true}}return false};function t(AX){var AW;return typeof AX.namespaceURI==AE||((AW=AX.namespaceURI)===null||AW=="http://www.w3.org/1999/xhtml")}function AF(AX){var AW=AX.parentNode;return(AW.nodeType==1)?AW:null}function z(AX){var AW=0;while((AX=AX.previousSibling)){++AW}return AW}function AH(AW){switch(AW.nodeType){case 7:case 10:return 0;case 3:case 8:return AW.length;default:return AW.childNodes.length}}function w(AX,AW){var AY=[],AZ;for(AZ=AX;AZ;AZ=AZ.parentNode){AY.push(AZ)}for(AZ=AW;AZ;AZ=AZ.parentNode){if(AV(AY,AZ)){return AZ}}return null}function v(AW,AX,AZ){var AY=AZ?AX:AX.parentNode;while(AY){if(AY===AW){return true}else{AY=AY.parentNode}}return false}function AO(AW,AX){return v(AW,AX,true)}function AM(AX,AW,Aa){var AY,AZ=Aa?AX:AX.parentNode;while(AZ){AY=AZ.parentNode;if(AY===AW){return AZ}AZ=AY}return null}function o(AX){var AW=AX.nodeType;return AW==3||AW==4||AW==8}function m(AX){if(!AX){return false}var AW=AX.nodeType;return AW==3||AW==8}function s(AZ,AX){var AW=AX.nextSibling,AY=AX.parentNode;if(AW){AY.insertBefore(AZ,AW)}else{AY.appendChild(AZ)}return AZ}function AG(Ab,AY,AX){var Aa=Ab.cloneNode(false);Aa.deleteData(0,AY);Ab.deleteData(AY,Ab.length-AY);s(Aa,Ab);if(AX){for(var AZ=0,AW;AW=AX[AZ++];){if(AW.node==Ab&&AW.offset>AY){AW.node=Aa;AW.offset-=AY}else{if(AW.node==Ab.parentNode&&AW.offset>z(Ab)){++AW.offset}}}}return Aa}function AT(AW){if(AW.nodeType==9){return AW}else{if(typeof AW.ownerDocument!=AE){return AW.ownerDocument}else{if(typeof AW.document!=AE){return AW.document}else{if(AW.parentNode){return AT(AW.parentNode)}else{throw n.createError("getDocument: no document found for node")}}}}}function y(AW){var AX=AT(AW);if(typeof AX.defaultView!=AE){return AX.defaultView}else{if(typeof AX.parentWindow!=AE){return AX.parentWindow}else{throw n.createError("Cannot get a window object for node")}}}function AU(AW){if(typeof AW.contentDocument!=AE){return AW.contentDocument}else{if(typeof AW.contentWindow!=AE){return AW.contentWindow.document}else{throw n.createError("getIframeDocument: No Document object found for iframe element")}}}function AR(AW){if(typeof AW.contentWindow!=AE){return AW.contentWindow}else{if(typeof AW.contentDocument!=AE){return AW.contentDocument.defaultView}else{throw n.createError("getIframeWindow: No Window object found for iframe element")}}}function AK(AW){return AW&&r.isHostMethod(AW,"setTimeout")&&r.isHostObject(AW,"document")}function AJ(AZ,AX,AW){var AY;if(!AZ){AY=document}else{if(r.isHostProperty(AZ,"nodeType")){AY=(AZ.nodeType==1&&AZ.tagName.toLowerCase()=="iframe")?AU(AZ):AT(AZ)}else{if(AK(AZ)){AY=AZ.document}}}if(!AY){throw AX.createError(AW+"(): Parameter must be a Window object or DOM node")}return AY}function u(AX){var AW;while((AW=AX.parentNode)){AX=AW}return AX}function AN(AZ,Ab,AY,Aa){var AW,Ac,Ae,Ad,AX;if(AZ==AY){return Ab===Aa?0:(Ab<Aa)?-1:1}else{if((AW=AM(AY,AZ,true))){return Ab<=z(AW)?-1:1}else{if((AW=AM(AZ,AY,true))){return z(AW)<Aa?-1:1}else{Ac=w(AZ,AY);if(!Ac){throw new Error("comparePoints error: nodes have no common ancestor")}Ae=(AZ===Ac)?Ac:AM(AZ,Ac,true);Ad=(AY===Ac)?Ac:AM(AY,Ac,true);if(Ae===Ad){throw n.createError("comparePoints got to case 4 and childA and childB are the same!")}else{AX=Ac.firstChild;while(AX){if(AX===Ae){return -1}else{if(AX===Ad){return 1}}AX=AX.nextSibling}}}}}}var AC=false;function AB(AW){var AY;try{AY=AW.parentNode;return false}catch(AX){return true}}(function(){var AW=document.createElement("b");AW.innerHTML="1";var AX=AW.firstChild;AW.innerHTML="<br />";AC=AB(AX);p.features.crashyTextNodes=AC})();function AD(AW){if(!AW){return"[No node]"}if(AC&&AB(AW)){return"[Broken node]"}if(o(AW)){return'"'+AW.data+'"'}if(AW.nodeType==1){var AX=AW.id?' id="'+AW.id+'"':"";return"<"+AW.nodeName+AX+">[index:"+z(AW)+",length:"+AW.childNodes.length+"]["+(AW.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return AW.nodeName}function AL(AX){var AW=AT(AX).createDocumentFragment(),AY;while((AY=AX.firstChild)){AW.appendChild(AY)}return AW}var x;if(typeof window.getComputedStyle!=AE){x=function(AW,AX){return y(AW).getComputedStyle(AW,null)[AX]}}else{if(typeof document.documentElement.currentStyle!=AE){x=function(AW,AX){return AW.currentStyle[AX]}}else{n.fail("No means of obtaining computed style properties found")}}function q(AW){this.root=AW;this._next=AW}q.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){var AY=this._current=this._next;var AX,AW;if(this._current){AX=AY.firstChild;if(AX){this._next=AX}else{AW=null;while((AY!==this.root)&&!(AW=AY.nextSibling)){AY=AY.parentNode}this._next=AW}}return this._current},detach:function(){this._current=this._next=this.root=null}};function AP(AW){return new q(AW)}function AA(AW,AX){this.node=AW;this.offset=AX}AA.prototype={equals:function(AW){return !!AW&&this.node===AW.node&&this.offset==AW.offset},inspect:function(){return"[DomPosition("+AD(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function AI(AW){this.code=this[AW];this.codeName=AW;this.message="DOMException: "+this.codeName}AI.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};AI.prototype.toString=function(){return this.message};p.dom={arrayContains:AV,isHtmlNamespace:t,parentElement:AF,getNodeIndex:z,getNodeLength:AH,getCommonAncestor:w,isAncestorOf:v,isOrIsAncestorOf:AO,getClosestAncestorIn:AM,isCharacterDataNode:o,isTextOrCommentNode:m,insertAfter:s,splitDataNode:AG,getDocument:AT,getWindow:y,getIframeWindow:AR,getIframeDocument:AU,getBody:r.getBody,isWindow:AK,getContentDocument:AJ,getRootContainer:u,comparePoints:AN,isBrokenNode:AB,inspectNode:AD,getComputedStyleProperty:x,fragmentFromNodeChildren:AL,createIterator:AP,DomPosition:AA};p.DOMException=AI});H.createCoreModule("DomRange",["DomUtil"],function(u,q){var o=u.dom;var AC=u.util;var AP=o.DomPosition;var Ai=u.DOMException;var s=o.isCharacterDataNode;var AM=o.getNodeIndex;var As=o.isOrIsAncestorOf;var A3=o.getDocument;var Ap=o.comparePoints;var Ag=o.splitDataNode;var Ao=o.getClosestAncestorIn;var Ah=o.getNodeLength;var A4=o.arrayContains;var AG=o.getRootContainer;var AW=u.features.crashyTextNodes;function AI(A6,A5){return(A6.nodeType!=3)&&(As(A6,A5.startContainer)||As(A6,A5.endContainer))}function y(A5){return A5.document||A3(A5.startContainer)}function AL(A5){return new AP(A5.parentNode,AM(A5))}function Al(A5){return new AP(A5.parentNode,AM(A5)+1)}function v(A6,A8,A7){var A5=A6.nodeType==11?A6.firstChild:A6;if(s(A8)){if(A7==A8.length){o.insertAfter(A6,A8)}else{A8.parentNode.insertBefore(A6,A7==0?A8:Ag(A8,A7))}}else{if(A7>=A8.childNodes.length){A8.appendChild(A6)}else{A8.insertBefore(A6,A8.childNodes[A7])}}return A5}function A2(A8,A7,A5){t(A8);t(A7);if(y(A7)!=y(A8)){throw new Ai("WRONG_DOCUMENT_ERR")}var A9=Ap(A8.startContainer,A8.startOffset,A7.endContainer,A7.endOffset),A6=Ap(A8.endContainer,A8.endOffset,A7.startContainer,A7.startOffset);return A5?A9<=0&&A6>=0:A9<0&&A6>0}function AS(A7){var A6;for(var A8,A9=y(A7.range).createDocumentFragment(),A5;A8=A7.next();){A6=A7.isPartiallySelectedSubtree();A8=A8.cloneNode(!A6);if(A6){A5=A7.getSubtreeIterator();A8.appendChild(AS(A5));A5.detach()}if(A8.nodeType==10){throw new Ai("HIERARCHY_REQUEST_ERR")}A9.appendChild(A8)}return A9}function Ak(A6,A9,A5){var A7,BB;A5=A5||{stop:false};for(var A8,BA;A8=A6.next();){if(A6.isPartiallySelectedSubtree()){if(A9(A8)===false){A5.stop=true;return }else{BA=A6.getSubtreeIterator();Ak(BA,A9,A5);BA.detach();if(A5.stop){return }}}else{A7=o.createIterator(A8);while((BB=A7.next())){if(A9(BB)===false){A5.stop=true;return }}}}}function z(A6){var A5;while(A6.next()){if(A6.isPartiallySelectedSubtree()){A5=A6.getSubtreeIterator();z(A5);A5.detach()}else{A6.remove()}}}function Ad(A6){for(var A7,A8=y(A6.range).createDocumentFragment(),A5;A7=A6.next();){if(A6.isPartiallySelectedSubtree()){A7=A7.cloneNode(false);A5=A6.getSubtreeIterator();A7.appendChild(Ad(A5));A5.detach()}else{A6.remove()}if(A7.nodeType==10){throw new Ai("HIERARCHY_REQUEST_ERR")}A8.appendChild(A7)}return A8}function AB(A7,A5,A8){var BA=!!(A5&&A5.length),A9;var BB=!!A8;if(BA){A9=new RegExp("^("+A5.join("|")+")$")}var A6=[];Ak(new r(A7,false),function(BD){if(BA&&!A9.test(BD.nodeType)){return }if(BB&&!A8(BD)){return }var BE=A7.startContainer;if(BD==BE&&s(BE)&&A7.startOffset==BE.length){return }var BC=A7.endContainer;if(BD==BC&&s(BC)&&A7.endOffset==0){return }A6.push(BD)});return A6}function AK(A5){var A6=(typeof A5.getName=="undefined")?"Range":A5.getName();return"["+A6+"("+o.inspectNode(A5.startContainer)+":"+A5.startOffset+", "+o.inspectNode(A5.endContainer)+":"+A5.endOffset+")]"}function r(A7,A6){this.range=A7;this.clonePartiallySelectedTextNodes=A6;if(!A7.collapsed){this.sc=A7.startContainer;this.so=A7.startOffset;this.ec=A7.endContainer;this.eo=A7.endOffset;var A5=A7.commonAncestorContainer;if(this.sc===this.ec&&s(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=(this.sc===A5&&!s(this.sc))?this.sc.childNodes[this.so]:Ao(this.sc,A5,true);this._last=(this.ec===A5&&!s(this.ec))?this.ec.childNodes[this.eo-1]:Ao(this.ec,A5,true)}}}r.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return !!this._next},next:function(){var A5=this._current=this._next;if(A5){this._next=(A5!==this._last)?A5.nextSibling:null;if(s(A5)&&this.clonePartiallySelectedTextNodes){if(A5===this.ec){(A5=A5.cloneNode(true)).deleteData(this.eo,A5.length-this.eo)}if(this._current===this.sc){(A5=A5.cloneNode(true)).deleteData(0,this.so)}}}return A5},remove:function(){var A6=this._current,A7,A5;if(s(A6)&&(A6===this.sc||A6===this.ec)){A7=(A6===this.sc)?this.so:0;A5=(A6===this.ec)?this.eo:A6.length;if(A7!=A5){A6.deleteData(A7,A5-A7)}}else{if(A6.parentNode){A6.parentNode.removeChild(A6)}else{}}},isPartiallySelectedSubtree:function(){var A5=this._current;return AI(A5,this.range)},getSubtreeIterator:function(){var A6;if(this.isSingleCharacterDataNode){A6=this.range.cloneRange();A6.collapse(false)}else{A6=new A0(y(this.range));var BA=this._current;var A8=BA,A5=0,A9=BA,A7=Ah(BA);if(As(BA,this.sc)){A8=this.sc;A5=this.so}if(As(BA,this.ec)){A9=this.ec;A7=this.eo}AO(A6,A8,A5,A9,A7)}return new r(A6,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Av=[1,3,4,5,7,8,10];var At=[2,9,11];var AN=[5,6,10,12];var AZ=[1,3,4,5,7,8,10,11];var AQ=[1,3,4,5,7,8];function An(A5){return function(A7,A9){var A6,A8=A9?A7:A7.parentNode;while(A8){A6=A8.nodeType;if(A4(A5,A6)){return A8}A8=A8.parentNode}return null}}var AU=An([9,11]);var AX=An(AN);var n=An([6,10,12]);function AE(A6,A5){if(n(A6,A5)){throw new Ai("INVALID_NODE_TYPE_ERR")}}function Aj(A5,A6){if(!A4(A6,A5.nodeType)){throw new Ai("INVALID_NODE_TYPE_ERR")}}function Au(A5,A6){if(A6<0||A6>(s(A5)?A5.length:A5.childNodes.length)){throw new Ai("INDEX_SIZE_ERR")}}function p(A6,A5){if(AU(A6,true)!==AU(A5,true)){throw new Ai("WRONG_DOCUMENT_ERR")}}function Ar(A5){if(AX(A5,true)){throw new Ai("NO_MODIFICATION_ALLOWED_ERR")}}function Ay(A6,A5){if(!A6){throw new Ai(A5)}}function AA(A5){return(AW&&o.isBrokenNode(A5))||!A4(At,A5.nodeType)&&!AU(A5,true)}function A1(A5,A6){return A6<=(s(A5)?A5.length:A5.childNodes.length)}function Ab(A5){return(!!A5.startContainer&&!!A5.endContainer&&!AA(A5.startContainer)&&!AA(A5.endContainer)&&A1(A5.startContainer,A5.startOffset)&&A1(A5.endContainer,A5.endOffset))}function t(A5){if(!Ab(A5)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+A5.inspect()+")")}}var m=document.createElement("style");var Ac=false;try{m.innerHTML="<b>x</b>";Ac=(m.firstChild.nodeType==3)}catch(Ax){}u.features.htmlParsingConforms=Ac;var Ae=Ac?function(A7){var A6=this.startContainer;var A8=A3(A6);if(!A6){throw new Ai("INVALID_STATE_ERR")}var A5=null;if(A6.nodeType==1){A5=A6}else{if(s(A6)){A5=o.parentElement(A6)}}if(A5===null||(A5.nodeName=="HTML"&&o.isHtmlNamespace(A3(A5).documentElement)&&o.isHtmlNamespace(A5))){A5=A8.createElement("body")}else{A5=A5.cloneNode(false)}A5.innerHTML=A7;return o.fragmentFromNodeChildren(A5)}:function(A6){var A7=y(this);var A5=A7.createElement("body");A5.innerHTML=A6;return o.fragmentFromNodeChildren(A5)};function Az(A7,A5){t(A7);var BB=A7.startContainer,BA=A7.startOffset,A8=A7.endContainer,A6=A7.endOffset;var A9=(BB===A8);if(s(A8)&&A6>0&&A6<A8.length){Ag(A8,A6,A5)}if(s(BB)&&BA>0&&BA<BB.length){BB=Ag(BB,BA,A5);if(A9){A6-=BA;A8=BB}else{if(A8==BB.parentNode&&A6>=AM(BB)){A6++}}BA=0}A7.setStartAndEnd(BB,BA,A8,A6)}function AT(A6){t(A6);var A5=A6.commonAncestorContainer.parentNode.cloneNode(false);A5.appendChild(A6.cloneContents());return A5.innerHTML}var AY=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var x=0,AJ=1,Aw=2,Aq=3;var AF=0,AH=1,AV=2,w=3;AC.extend(u.rangePrototype,{compareBoundaryPoints:function(BA,A7){t(this);p(this.startContainer,A7.startContainer);var BC,A6,BB,A5;var A9=(BA==Aq||BA==x)?"start":"end";var A8=(BA==AJ||BA==x)?"start":"end";BC=this[A9+"Container"];A6=this[A9+"Offset"];BB=A7[A8+"Container"];A5=A7[A8+"Offset"];return Ap(BC,A6,BB,A5)},insertNode:function(A6){t(this);Aj(A6,AZ);Ar(this.startContainer);if(As(A6,this.startContainer)){throw new Ai("HIERARCHY_REQUEST_ERR")}var A5=v(A6,this.startContainer,this.startOffset);this.setStartBefore(A5)},cloneContents:function(){t(this);var A7,A6;if(this.collapsed){return y(this).createDocumentFragment()}else{if(this.startContainer===this.endContainer&&s(this.startContainer)){A7=this.startContainer.cloneNode(true);A7.data=A7.data.slice(this.startOffset,this.endOffset);A6=y(this).createDocumentFragment();A6.appendChild(A7);return A6}else{var A5=new r(this,true);A7=AS(A5);A5.detach()}return A7}},canSurroundContents:function(){t(this);Ar(this.startContainer);Ar(this.endContainer);var A5=new r(this,true);var A6=(A5._first&&(AI(A5._first,this))||(A5._last&&AI(A5._last,this)));A5.detach();return !A6},surroundContents:function(A6){Aj(A6,AQ);if(!this.canSurroundContents()){throw new Ai("INVALID_STATE_ERR")}var A5=this.extractContents();if(A6.hasChildNodes()){while(A6.lastChild){A6.removeChild(A6.lastChild)}}v(A6,this.startContainer,this.startOffset);A6.appendChild(A5);this.selectNode(A6)},cloneRange:function(){t(this);var A5=new A0(y(this));var A6=AY.length,A7;while(A6--){A7=AY[A6];A5[A7]=this[A7]}return A5},toString:function(){t(this);var A7=this.startContainer;if(A7===this.endContainer&&s(A7)){return(A7.nodeType==3||A7.nodeType==4)?A7.data.slice(this.startOffset,this.endOffset):""}else{var A5=[],A6=new r(this,true);Ak(A6,function(A8){if(A8.nodeType==3||A8.nodeType==4){A5.push(A8.data)}});A6.detach();return A5.join("")}},compareNode:function(A7){t(this);var A6=A7.parentNode;var A9=AM(A7);if(!A6){throw new Ai("NOT_FOUND_ERR")}var A8=this.comparePoint(A6,A9),A5=this.comparePoint(A6,A9+1);if(A8<0){return(A5>0)?AV:AF}else{return(A5>0)?AH:w}},comparePoint:function(A5,A6){t(this);Ay(A5,"HIERARCHY_REQUEST_ERR");p(A5,this.startContainer);if(Ap(A5,A6,this.startContainer,this.startOffset)<0){return -1}else{if(Ap(A5,A6,this.endContainer,this.endOffset)>0){return 1}}return 0},createContextualFragment:Ae,toHtml:function(){return AT(this)},intersectsNode:function(A8,A5){t(this);Ay(A8,"NOT_FOUND_ERR");if(A3(A8)!==y(this)){return false}var A7=A8.parentNode,BA=AM(A8);Ay(A7,"NOT_FOUND_ERR");var A9=Ap(A7,BA,this.endContainer,this.endOffset),A6=Ap(A7,BA+1,this.startContainer,this.startOffset);return A5?A9<=0&&A6>=0:A9<0&&A6>0},isPointInRange:function(A5,A6){t(this);Ay(A5,"HIERARCHY_REQUEST_ERR");p(A5,this.startContainer);return(Ap(A5,A6,this.startContainer,this.startOffset)>=0)&&(Ap(A5,A6,this.endContainer,this.endOffset)<=0)},intersectsRange:function(A5){return A2(this,A5,false)},intersectsOrTouchesRange:function(A5){return A2(this,A5,true)},intersection:function(A5){if(this.intersectsRange(A5)){var A8=Ap(this.startContainer,this.startOffset,A5.startContainer,A5.startOffset),A6=Ap(this.endContainer,this.endOffset,A5.endContainer,A5.endOffset);var A7=this.cloneRange();if(A8==-1){A7.setStart(A5.startContainer,A5.startOffset)}if(A6==1){A7.setEnd(A5.endContainer,A5.endOffset)}return A7}return null},union:function(A5){if(this.intersectsOrTouchesRange(A5)){var A6=this.cloneRange();if(Ap(A5.startContainer,A5.startOffset,this.startContainer,this.startOffset)==-1){A6.setStart(A5.startContainer,A5.startOffset)}if(Ap(A5.endContainer,A5.endOffset,this.endContainer,this.endOffset)==1){A6.setEnd(A5.endContainer,A5.endOffset)}return A6}else{throw new Ai("Ranges do not intersect")}},containsNode:function(A6,A5){if(A5){return this.intersectsNode(A6,false)}else{return this.compareNode(A6)==w}},containsNodeContents:function(A5){return this.comparePoint(A5,0)>=0&&this.comparePoint(A5,Ah(A5))<=0},containsRange:function(A5){var A6=this.intersection(A5);return A6!==null&&A5.equals(A6)},containsNodeText:function(A7){var A8=this.cloneRange();A8.selectNode(A7);var A6=A8.getNodes([3]);if(A6.length>0){A8.setStart(A6[0],0);var A5=A6.pop();A8.setEnd(A5,A5.length);return this.containsRange(A8)}else{return this.containsNodeContents(A7)}},getNodes:function(A5,A6){t(this);return AB(this,A5,A6)},getDocument:function(){return y(this)},collapseBefore:function(A5){this.setEndBefore(A5);this.collapse(false)},collapseAfter:function(A5){this.setStartAfter(A5);this.collapse(true)},getBookmark:function(A5){var A9=y(this);var A7=u.createRange(A9);A5=A5||o.getBody(A9);A7.selectNodeContents(A5);var A8=this.intersection(A7);var BA=0,A6=0;if(A8){A7.setEnd(A8.startContainer,A8.startOffset);BA=A7.toString().length;A6=BA+A8.toString().length}return{start:BA,end:A6,containerNode:A5}},moveToBookmark:function(BC){var A8=BC.containerNode;var A5=0;this.setStart(A8,0);this.collapse(true);var BA=[A8],A6,A7=false,BD=false;var BB,A9,BE;while(!BD&&(A6=BA.pop())){if(A6.nodeType==3){BB=A5+A6.length;if(!A7&&BC.start>=A5&&BC.start<=BB){this.setStart(A6,BC.start-A5);A7=true}if(A7&&BC.end>=A5&&BC.end<=BB){this.setEnd(A6,BC.end-A5);BD=true}A5=BB}else{BE=A6.childNodes;A9=BE.length;while(A9--){BA.push(BE[A9])}}}},getName:function(){return"DomRange"},equals:function(A5){return A0.rangesEqual(this,A5)},isValid:function(){return Ab(this)},inspect:function(){return AK(this)},detach:function(){}});function Af(A5){A5.START_TO_START=x;A5.START_TO_END=AJ;A5.END_TO_END=Aw;A5.END_TO_START=Aq;A5.NODE_BEFORE=AF;A5.NODE_AFTER=AH;A5.NODE_BEFORE_AND_AFTER=AV;A5.NODE_INSIDE=w}function AR(A5){Af(A5);Af(A5.prototype)}function AD(A5,A6){return function(){t(this);var BC=this.startContainer,BB=this.startOffset,A7=this.commonAncestorContainer;var A9=new r(this,true);var BA,BD;if(BC!==A7){BA=Ao(BC,A7,true);BD=Al(BA);BC=BD.node;BB=BD.offset}Ak(A9,Ar);A9.reset();var A8=A5(A9);A9.detach();A6(this,BC,BB,BC,BB);return A8}}function Am(A6,BA){function A9(BC,BB){return function(BD){Aj(BD,Av);Aj(AG(BD),At);var BE=(BC?AL:Al)(BD);(BB?A5:A8)(this,BE.node,BE.offset)}}function A5(BC,BE,BF){var BD=BC.endContainer,BB=BC.endOffset;if(BE!==BC.startContainer||BF!==BC.startOffset){if(AG(BE)!=AG(BD)||Ap(BE,BF,BD,BB)==1){BD=BE;BB=BF}BA(BC,BE,BF,BD,BB)}}function A8(BB,BC,BF){var BE=BB.startContainer,BD=BB.startOffset;if(BC!==BB.endContainer||BF!==BB.endOffset){if(AG(BC)!=AG(BE)||Ap(BC,BF,BE,BD)==-1){BE=BC;BD=BF}BA(BB,BE,BD,BC,BF)}}var A7=function(){};A7.prototype=u.rangePrototype;A6.prototype=new A7();AC.extend(A6.prototype,{setStart:function(BB,BC){AE(BB,true);Au(BB,BC);A5(this,BB,BC)},setEnd:function(BB,BC){AE(BB,true);Au(BB,BC);A8(this,BB,BC)},setStartAndEnd:function(){var BD=arguments;var BF=BD[0],BE=BD[1],BC=BF,BB=BE;switch(BD.length){case 3:BB=BD[2];break;case 4:BC=BD[2];BB=BD[3];break}BA(this,BF,BE,BC,BB)},setBoundary:function(BC,BD,BB){this["set"+(BB?"Start":"End")](BC,BD)},setStartBefore:A9(true,true),setStartAfter:A9(false,true),setEndBefore:A9(true,false),setEndAfter:A9(false,false),collapse:function(BB){t(this);if(BB){BA(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)}else{BA(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)}},selectNodeContents:function(BB){AE(BB,true);BA(this,BB,0,BB,Ah(BB))},selectNode:function(BC){AE(BC,false);Aj(BC,Av);var BD=AL(BC),BB=Al(BC);BA(this,BD.node,BD.offset,BB.node,BB.offset)},extractContents:AD(Ad,BA),deleteContents:AD(z,BA),canSurroundContents:function(){t(this);Ar(this.startContainer);Ar(this.endContainer);var BB=new r(this,true);var BC=(BB._first&&AI(BB._first,this)||(BB._last&&AI(BB._last,this)));BB.detach();return !BC},splitBoundaries:function(){Az(this)},splitBoundariesPreservingPositions:function(BB){Az(this,BB)},normalizeBoundaries:function(){t(this);var BI=this.startContainer,BD=this.startOffset,BH=this.endContainer,BB=this.endOffset;var BE=function(BL){var BK=BL.nextSibling;if(BK&&BK.nodeType==BL.nodeType){BH=BL;BB=BL.length;BL.appendData(BK.data);BK.parentNode.removeChild(BK)}};var BJ=function(BM){var BL=BM.previousSibling;if(BL&&BL.nodeType==BM.nodeType){BI=BM;var BK=BM.length;BD=BL.length;BM.insertData(0,BL.data);BL.parentNode.removeChild(BL);if(BI==BH){BB+=BD;BH=BI}else{if(BH==BM.parentNode){var BN=AM(BM);if(BB==BN){BH=BM;BB=BK}else{if(BB>BN){BB--}}}}}};var BG=true;if(s(BH)){if(BH.length==BB){BE(BH)}}else{if(BB>0){var BF=BH.childNodes[BB-1];if(BF&&s(BF)){BE(BF)}}BG=!this.collapsed}if(BG){if(s(BI)){if(BD==0){BJ(BI)}}else{if(BD<BI.childNodes.length){var BC=BI.childNodes[BD];if(BC&&s(BC)){BJ(BC)}}}}else{BI=BH;BD=BB}BA(this,BI,BD,BH,BB)},collapseToPoint:function(BB,BC){AE(BB,true);Au(BB,BC);this.setStartAndEnd(BB,BC)}});AR(A6)}function Aa(A5){A5.collapsed=(A5.startContainer===A5.endContainer&&A5.startOffset===A5.endOffset);A5.commonAncestorContainer=A5.collapsed?A5.startContainer:o.getCommonAncestor(A5.startContainer,A5.endContainer)}function AO(A6,A8,A5,A9,A7){A6.startContainer=A8;A6.startOffset=A5;A6.endContainer=A9;A6.endOffset=A7;A6.document=o.getDocument(A8);Aa(A6)}function A0(A5){this.startContainer=A5;this.startOffset=0;this.endContainer=A5;this.endOffset=0;this.document=A5;Aa(this)}Am(A0,AO);AC.extend(A0,{rangeProperties:AY,RangeIterator:r,copyComparisonConstants:AR,createPrototypeRange:Am,inspect:AK,toHtml:AT,getRangeDocument:y,rangesEqual:function(A6,A5){return A6.startContainer===A5.startContainer&&A6.startOffset===A5.startOffset&&A6.endContainer===A5.endContainer&&A6.endOffset===A5.endOffset}});u.DomRange=A0});H.createCoreModule("WrappedRange",["DomRange"],function(y,q){var m,n;var u=y.dom;var v=y.util;var p=u.DomPosition;var AA=y.DomRange;var w=u.getBody;var AC=u.getContentDocument;var x=u.isCharacterDataNode;if(y.features.implementsDomRange){(function(){var AG;var AN=AA.rangeProperties;function AD(AP){var AQ=AN.length,AR;while(AQ--){AR=AN[AQ];AP[AR]=AP.nativeRange[AR]}AP.collapsed=(AP.startContainer===AP.endContainer&&AP.startOffset===AP.endOffset)}function AI(AR,AU,AQ,AV,AS){var AP=(AR.startContainer!==AU||AR.startOffset!=AQ);var AW=(AR.endContainer!==AV||AR.endOffset!=AS);var AT=!AR.equals(AR.nativeRange);if(AP||AW||AT){AR.setEnd(AV,AS);AR.setStart(AU,AQ)}}var AF;m=function(AP){if(!AP){throw q.createError("WrappedRange: Range must be specified")}this.nativeRange=AP;AD(this)};AA.createPrototypeRange(m,AI);AG=m.prototype;AG.selectNode=function(AP){this.nativeRange.selectNode(AP);AD(this)};AG.cloneContents=function(){return this.nativeRange.cloneContents()};AG.surroundContents=function(AP){this.nativeRange.surroundContents(AP);AD(this)};AG.collapse=function(AP){this.nativeRange.collapse(AP);AD(this)};AG.cloneRange=function(){return new m(this.nativeRange.cloneRange())};AG.refresh=function(){AD(this)};AG.toString=function(){return this.nativeRange.toString()};var AM=document.createTextNode("test");w(document).appendChild(AM);var AJ=document.createRange();AJ.setStart(AM,0);AJ.setEnd(AM,0);try{AJ.setStart(AM,1);AG.setStart=function(AP,AQ){this.nativeRange.setStart(AP,AQ);AD(this)};AG.setEnd=function(AP,AQ){this.nativeRange.setEnd(AP,AQ);AD(this)};AF=function(AP){return function(AQ){this.nativeRange[AP](AQ);AD(this)}}}catch(AL){AG.setStart=function(AQ,AR){try{this.nativeRange.setStart(AQ,AR)}catch(AP){this.nativeRange.setEnd(AQ,AR);this.nativeRange.setStart(AQ,AR)}AD(this)};AG.setEnd=function(AQ,AR){try{this.nativeRange.setEnd(AQ,AR)}catch(AP){this.nativeRange.setStart(AQ,AR);this.nativeRange.setEnd(AQ,AR)}AD(this)};AF=function(AP,AQ){return function(AS){try{this.nativeRange[AP](AS)}catch(AR){this.nativeRange[AQ](AS);this.nativeRange[AP](AS)}AD(this)}}}AG.setStartBefore=AF("setStartBefore","setEndBefore");AG.setStartAfter=AF("setStartAfter","setEndAfter");AG.setEndBefore=AF("setEndBefore","setStartBefore");AG.setEndAfter=AF("setEndAfter","setStartAfter");AG.selectNodeContents=function(AP){this.setStartAndEnd(AP,0,u.getNodeLength(AP))};AJ.selectNodeContents(AM);AJ.setEnd(AM,3);var AO=document.createRange();AO.selectNodeContents(AM);AO.setEnd(AM,4);AO.setStart(AM,2);if(AJ.compareBoundaryPoints(AJ.START_TO_END,AO)==-1&&AJ.compareBoundaryPoints(AJ.END_TO_START,AO)==1){AG.compareBoundaryPoints=function(AQ,AP){AP=AP.nativeRange||AP;if(AQ==AP.START_TO_END){AQ=AP.END_TO_START}else{if(AQ==AP.END_TO_START){AQ=AP.START_TO_END}}return this.nativeRange.compareBoundaryPoints(AQ,AP)}}else{AG.compareBoundaryPoints=function(AQ,AP){return this.nativeRange.compareBoundaryPoints(AQ,AP.nativeRange||AP)}}var AE=document.createElement("div");AE.innerHTML="123";var AH=AE.firstChild;var AK=w(document);AK.appendChild(AE);AJ.setStart(AH,1);AJ.setEnd(AH,2);AJ.deleteContents();if(AH.data=="13"){AG.deleteContents=function(){this.nativeRange.deleteContents();AD(this)};AG.extractContents=function(){var AP=this.nativeRange.extractContents();AD(this);return AP}}else{}AK.removeChild(AE);AK=null;if(v.isHostMethod(AJ,"createContextualFragment")){AG.createContextualFragment=function(AP){return this.nativeRange.createContextualFragment(AP)}}w(document).removeChild(AM);AG.getName=function(){return"WrappedRange"};y.WrappedRange=m;y.createNativeRange=function(AP){AP=AC(AP,q,"createNativeRange");return AP.createRange()}})()}if(y.features.implementsTextRange){var r=function(AI){var AG=AI.parentElement();var AE=AI.duplicate();AE.collapse(true);var AH=AE.parentElement();AE=AI.duplicate();AE.collapse(false);var AF=AE.parentElement();var AD=(AH==AF)?AH:u.getCommonAncestor(AH,AF);return AD==AG?AD:u.getCommonAncestor(AG,AD)};var o=function(AD){return AD.compareEndPoints("StartToEnd",AD)==0};var s=function(AD,AP,AN,AE,AH){var AQ=AD.duplicate();AQ.collapse(AN);var AF=AQ.parentElement();if(!u.isOrIsAncestorOf(AP,AF)){AF=AP}if(!AF.canHaveHTML){var AM=new p(AF.parentNode,u.getNodeIndex(AF));return{boundaryPosition:AM,nodeInfo:{nodeIndex:AM.offset,containerElement:AM.node}}}var AG=u.getDocument(AF).createElement("span");if(AG.parentNode){AG.parentNode.removeChild(AG)}var AY,AW=AN?"StartToStart":"StartToEnd";var AR,AI,AO,AS;var AK=(AH&&AH.containerElement==AF)?AH.nodeIndex:0;var AT=AF.childNodes.length;var AJ=AT;var AV=AJ;while(true){if(AV==AT){AF.appendChild(AG)}else{AF.insertBefore(AG,AF.childNodes[AV])}AQ.moveToElementText(AG);AY=AQ.compareEndPoints(AW,AD);if(AY==0||AK==AJ){break}else{if(AY==-1){if(AJ==AK+1){break}else{AK=AV}}else{AJ=(AJ==AK+1)?AK:AV}}AV=Math.floor((AK+AJ)/2);AF.removeChild(AG)}AS=AG.nextSibling;if(AY==-1&&AS&&x(AS)){AQ.setEndPoint(AN?"EndToStart":"EndToEnd",AD);var AL;if(/[\r\n]/.test(AS.data)){var AU=AQ.duplicate();var AX=AU.text.replace(/\r\n/g,"\r").length;AL=AU.moveStart("character",AX);while((AY=AU.compareEndPoints("StartToEnd",AU))==-1){AL++;AU.moveStart("character",1)}}else{AL=AQ.text.length}AO=new p(AS,AL)}else{AR=(AE||!AN)&&AG.previousSibling;AI=(AE||AN)&&AG.nextSibling;if(AI&&x(AI)){AO=new p(AI,0)}else{if(AR&&x(AR)){AO=new p(AR,AR.data.length)}else{AO=new p(AF,u.getNodeIndex(AG))}}}AG.parentNode.removeChild(AG);return{boundaryPosition:AO,nodeInfo:{nodeIndex:AV,containerElement:AF}}};var AB=function(AD,AF){var AG,AJ,AH=AD.offset;var AK=u.getDocument(AD.node);var AE,AL,AM=w(AK).createTextRange();var AI=x(AD.node);if(AI){AG=AD.node;AJ=AG.parentNode}else{AL=AD.node.childNodes;AG=(AH<AL.length)?AL[AH]:null;AJ=AD.node}AE=AK.createElement("span");AE.innerHTML="&#feff;";if(AG){AJ.insertBefore(AE,AG)}else{AJ.appendChild(AE)}AM.moveToElementText(AE);AM.collapse(!AF);AJ.removeChild(AE);if(AI){AM[AF?"moveStart":"moveEnd"]("character",AH)}return AM};n=function(AD){this.textRange=AD;this.refresh()};n.prototype=new AA(document);n.prototype.refresh=function(){var AG,AD,AF;var AE=r(this.textRange);if(o(this.textRange)){AD=AG=s(this.textRange,AE,true,true).boundaryPosition}else{AF=s(this.textRange,AE,true,false);AG=AF.boundaryPosition;AD=s(this.textRange,AE,false,false,AF.nodeInfo).boundaryPosition}this.setStart(AG.node,AG.offset);this.setEnd(AD.node,AD.offset)};n.prototype.getName=function(){return"WrappedTextRange"};AA.copyComparisonConstants(n);var z=function(AD){if(AD.collapsed){return AB(new p(AD.startContainer,AD.startOffset),true)}else{var AG=AB(new p(AD.startContainer,AD.startOffset),true);var AF=AB(new p(AD.endContainer,AD.endOffset),false);var AE=w(AA.getRangeDocument(AD)).createTextRange();AE.setEndPoint("StartToStart",AG);AE.setEndPoint("EndToEnd",AF);return AE}};n.rangeToTextRange=z;n.prototype.toTextRange=function(){return z(this)};y.WrappedTextRange=n;if(!y.features.implementsDomRange||y.config.preferTextRange){var t=(function(AD){return AD("return this;")()})(Function);if(typeof t.Range=="undefined"){t.Range=n}y.createNativeRange=function(AD){AD=AC(AD,q,"createNativeRange");return w(AD).createTextRange()};y.WrappedRange=n}}y.createRange=function(AD){AD=AC(AD,q,"createRange");return new y.WrappedRange(y.createNativeRange(AD))};y.createRangyRange=function(AD){AD=AC(AD,q,"createRangyRange");return new AA(AD)};y.createIframeRange=function(AD){q.deprecationNotice("createIframeRange()","createRange(iframeEl)");return y.createRange(AD)};y.createIframeRangyRange=function(AD){q.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)");return y.createRangyRange(AD)};y.addShimListener(function(AE){var AD=AE.document;if(typeof AD.createRange=="undefined"){AD.createRange=function(){return y.createRange(AD)}}AD=AE=null})});H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(v,p){v.config.checkSelectionRanges=true;var AU="boolean";var AX="number";var o=v.dom;var AA=v.util;var Ai=AA.isHostMethod;var Am=v.DomRange;var r=v.WrappedRange;var Ah=v.DOMException;var AP=o.DomPosition;var Ae;var AC;var z=v.features;var Au="Control";var At=o.getDocument;var As=o.getBody;var AZ=Am.rangesEqual;function s(Aw){return(typeof Aw=="string")?/^backward(s)?$/i.test(Aw):!!Aw}function AL(Ay,Aw){if(!Ay){return window}else{if(o.isWindow(Ay)){return Ay}else{if(Ay instanceof AR){return Ay.win}else{var Ax=o.getContentDocument(Ay,p,Aw);return o.getWindow(Ax)}}}}function AB(Aw){return AL(Aw,"getWinSelection").getSelection()}function AF(Aw){return AL(Aw,"getDocSelection").document.selection}function Ar(Aw){var Ax=false;if(Aw.anchorNode){Ax=(o.comparePoints(Aw.anchorNode,Aw.anchorOffset,Aw.focusNode,Aw.focusOffset)==1)}return Ax}var Ap=Ai(window,"getSelection"),Ag=AA.isHostObject(document,"selection");z.implementsWinGetSelection=Ap;z.implementsDocSelection=Ag;var AI=Ag&&(!Ap||v.config.preferTextRange);if(AI){Ae=AF;v.isSelectionValid=function(Ax){var Ay=AL(Ax,"isSelectionValid").document,Aw=Ay.selection;return(Aw.type!="None"||At(Aw.createRange().parentElement())==Ay)}}else{if(Ap){Ae=AB;v.isSelectionValid=function(){return true}}else{p.fail("Neither document.selection or window.getSelection() detected.")}}v.getNativeSelection=Ae;var Af=Ae();var AS=v.createNativeRange(document);var AT=As(document);var Ac=AA.areHostProperties(Af,["anchorNode","focusNode","anchorOffset","focusOffset"]);z.selectionHasAnchorAndFocus=Ac;var AE=Ai(Af,"extend");z.selectionHasExtend=AE;var Av=(typeof Af.rangeCount==AX);z.selectionHasRangeCount=Av;var Al=false;var Aj=true;var AM=AE?function(Az,Aw){var Ay=Am.getRangeDocument(Aw);var Ax=v.createRange(Ay);Ax.collapseToPoint(Aw.endContainer,Aw.endOffset);Az.addRange(Ab(Ax));Az.extend(Aw.startContainer,Aw.startOffset)}:null;if(AA.areHostMethods(Af,["addRange","getRangeAt","removeAllRanges"])&&typeof Af.rangeCount==AX&&z.implementsDomRange){(function(){var Ax=window.getSelection();if(Ax){var A1=Ax.rangeCount;var A3=(A1>1);var A5=[];var A7=Ar(Ax);for(var A2=0;A2<A1;++A2){A5[A2]=Ax.getRangeAt(A2)}var A4=As(document);var A0=A4.appendChild(document.createElement("div"));A0.contentEditable="false";var Az=A0.appendChild(document.createTextNode("\u00a0\u00a0\u00a0"));var Ay=document.createRange();Ay.setStart(Az,1);Ay.collapse(true);Ax.addRange(Ay);Aj=(Ax.rangeCount==1);Ax.removeAllRanges();if(!A3){var A6=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(A6&&parseInt(A6[1])>=36){Al=false}else{var Aw=Ay.cloneRange();Ay.setStart(Az,0);Aw.setEnd(Az,3);Aw.setStart(Az,2);Ax.addRange(Ay);Ax.addRange(Aw);Al=(Ax.rangeCount==2)}}A4.removeChild(A0);Ax.removeAllRanges();for(A2=0;A2<A1;++A2){if(A2==0&&A7){if(AM){AM(Ax,A5[A2])}else{v.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend");Ax.addRange(A5[A2])}}else{Ax.addRange(A5[A2])}}}})()}z.selectionSupportsMultipleRanges=Al;z.collapsedNonEditableSelectionsSupported=Aj;var u=false,x;if(AT&&Ai(AT,"createControlRange")){x=AT.createControlRange();if(AA.areHostProperties(x,["item","add"])){u=true}}z.implementsControlRange=u;if(Ac){AC=function(Aw){return Aw.anchorNode===Aw.focusNode&&Aw.anchorOffset===Aw.focusOffset}}else{AC=function(Aw){return Aw.rangeCount?Aw.getRangeAt(Aw.rangeCount-1).collapsed:false}}function n(Ay,Aw,Az){var Ax=Az?"end":"start",A0=Az?"start":"end";Ay.anchorNode=Aw[Ax+"Container"];Ay.anchorOffset=Aw[Ax+"Offset"];Ay.focusNode=Aw[A0+"Container"];Ay.focusOffset=Aw[A0+"Offset"]}function AK(Ax){var Aw=Ax.nativeSelection;Ax.anchorNode=Aw.anchorNode;Ax.anchorOffset=Aw.anchorOffset;Ax.focusNode=Aw.focusNode;Ax.focusOffset=Aw.focusOffset}function AY(Aw){Aw.anchorNode=Aw.focusNode=null;Aw.anchorOffset=Aw.focusOffset=0;Aw.rangeCount=0;Aw.isCollapsed=true;Aw._ranges.length=0}function Ab(Aw){var Ax;if(Aw instanceof Am){Ax=v.createNativeRange(Aw.getDocument());Ax.setEnd(Aw.endContainer,Aw.endOffset);Ax.setStart(Aw.startContainer,Aw.startOffset)}else{if(Aw instanceof r){Ax=Aw.nativeRange}else{if(z.implementsDomRange&&(Aw instanceof o.getWindow(Aw.startContainer).Range)){Ax=Aw}}}return Ax}function y(Ay){if(!Ay.length||Ay[0].nodeType!=1){return false}for(var Ax=1,Aw=Ay.length;Ax<Aw;++Ax){if(!o.isAncestorOf(Ay[0],Ay[Ax])){return false}}return true}function Ad(Ax){var Aw=Ax.getNodes();if(!y(Aw)){throw p.createError("getSingleElementFromRange: range "+Ax.inspect()+" did not consist of a single element")}return Aw[0]}function AW(Aw){return !!Aw&&typeof Aw.text!="undefined"}function Aa(Ay,Ax){var Aw=new r(Ax);Ay._ranges=[Aw];n(Ay,Aw,false);Ay.rangeCount=1;Ay.isCollapsed=Aw.collapsed}function AH(Az){Az._ranges.length=0;if(Az.docSelection.type=="None"){AY(Az)}else{var Ay=Az.docSelection.createRange();if(AW(Ay)){Aa(Az,Ay)}else{Az.rangeCount=Ay.length;var Aw,A0=At(Ay.item(0));for(var Ax=0;Ax<Az.rangeCount;++Ax){Aw=v.createRange(A0);Aw.selectNode(Ay.item(Ax));Az._ranges.push(Aw)}Az.isCollapsed=Az.rangeCount==1&&Az._ranges[0].collapsed;n(Az,Az._ranges[Az.rangeCount-1],false)}}}function AO(Ax,A0){var Ay=Ax.docSelection.createRange();var Aw=Ad(A0);var A4=At(Ay.item(0));var A1=As(A4).createControlRange();for(var Az=0,A2=Ay.length;Az<A2;++Az){A1.add(Ay.item(Az))}try{A1.add(Aw)}catch(A3){throw p.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}A1.select();AH(Ax)}var AD;if(Ai(Af,"getRangeAt")){AD=function(Ay,Aw){try{return Ay.getRangeAt(Aw)}catch(Ax){return null}}}else{if(Ac){AD=function(Ax){var Ay=At(Ax.anchorNode);var Aw=v.createRange(Ay);Aw.setStartAndEnd(Ax.anchorNode,Ax.anchorOffset,Ax.focusNode,Ax.focusOffset);if(Aw.collapsed!==this.isCollapsed){Aw.setStartAndEnd(Ax.focusNode,Ax.focusOffset,Ax.anchorNode,Ax.anchorOffset)}return Aw}}}function AR(Aw,Ay,Ax){this.nativeSelection=Aw;this.docSelection=Ay;this._ranges=[];this.win=Ax;this.refresh()}AR.prototype=v.selectionPrototype;function AN(Aw){Aw.win=Aw.anchorNode=Aw.focusNode=Aw._ranges=null;Aw.rangeCount=Aw.anchorOffset=Aw.focusOffset=0;Aw.detached=true}var Aq=[];function Ak(A0,Az){var Aw=Aq.length,Ax,Ay;while(Aw--){Ax=Aq[Aw];Ay=Ax.selection;if(Az=="deleteAll"){AN(Ay)}else{if(Ax.win==A0){if(Az=="delete"){Aq.splice(Aw,1);return true}else{return Ay}}}}if(Az=="deleteAll"){Aq.length=0}return null}var AJ=function(Ay){if(Ay&&Ay instanceof AR){Ay.refresh();return Ay}Ay=AL(Ay,"getNativeSelection");var Ax=Ak(Ay);var Aw=Ae(Ay),Az=Ag?AF(Ay):null;if(Ax){Ax.nativeSelection=Aw;Ax.docSelection=Az;Ax.refresh()}else{Ax=new AR(Aw,Az,Ay);Aq.push({win:Ay,selection:Ax})}return Ax};v.getSelection=AJ;v.getIframeSelection=function(Aw){p.deprecationNotice("getIframeSelection()","getSelection(iframeEl)");return v.getSelection(o.getIframeWindow(Aw))};var m=AR.prototype;function w(A2,Ax){var A3=At(Ax[0].startContainer);var A0=As(A3).createControlRange();for(var Az=0,A1,Aw=Ax.length;Az<Aw;++Az){A1=Ad(Ax[Az]);try{A0.add(A1)}catch(Ay){throw p.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}A0.select();AH(A2)}if(!AI&&Ac&&AA.areHostMethods(Af,["removeAllRanges","addRange"])){m.removeAllRanges=function(){this.nativeSelection.removeAllRanges();AY(this)};var q=function(Ax,Aw){AM(Ax.nativeSelection,Aw);Ax.refresh()};if(Av){m.addRange=function(Ax,A1){if(u&&Ag&&this.docSelection.type==Au){AO(this,Ax)}else{if(s(A1)&&AE){q(this,Ax)}else{var Az;if(Al){Az=this.rangeCount}else{this.removeAllRanges();Az=0}var Aw=Ab(Ax).cloneRange();try{this.nativeSelection.addRange(Aw)}catch(Ay){}this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==Az+1){if(v.config.checkSelectionRanges){var A0=AD(this.nativeSelection,this.rangeCount-1);if(A0&&!AZ(A0,Ax)){Ax=new r(A0)}}this._ranges[this.rangeCount-1]=Ax;n(this,Ax,t(this.nativeSelection));this.isCollapsed=AC(this)}else{this.refresh()}}}}}else{m.addRange=function(Aw,Ax){if(s(Ax)&&AE){q(this,Aw)}else{this.nativeSelection.addRange(Ab(Aw));this.refresh()}}}m.setRanges=function(Ax){if(u&&Ag&&Ax.length>1){w(this,Ax)}else{this.removeAllRanges();for(var Ay=0,Aw=Ax.length;Ay<Aw;++Ay){this.addRange(Ax[Ay])}}}}else{if(Ai(Af,"empty")&&Ai(AS,"select")&&u&&AI){m.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var Az;if(this.anchorNode){Az=At(this.anchorNode)}else{if(this.docSelection.type==Au){var Ax=this.docSelection.createRange();if(Ax.length){Az=At(Ax.item(0))}}}if(Az){var Ay=As(Az).createTextRange();Ay.select();this.docSelection.empty()}}}catch(Aw){}AY(this)};m.addRange=function(Aw){if(this.docSelection.type==Au){AO(this,Aw)}else{v.WrappedTextRange.rangeToTextRange(Aw).select();this._ranges[0]=Aw;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;n(this,Aw,false)}};m.setRanges=function(Aw){this.removeAllRanges();var Ax=Aw.length;if(Ax>1){w(this,Aw)}else{if(Ax){this.addRange(Aw[0])}}}}else{p.fail("No means of selecting a Range or TextRange was found");return false}}m.getRangeAt=function(Aw){if(Aw<0||Aw>=this.rangeCount){throw new Ah("INDEX_SIZE_ERR")}else{return this._ranges[Aw].cloneRange()}};var AV;if(AI){AV=function(Ax){var Aw;if(v.isSelectionValid(Ax.win)){Aw=Ax.docSelection.createRange()}else{Aw=As(Ax.win.document).createTextRange();Aw.collapse(true)}if(Ax.docSelection.type==Au){AH(Ax)}else{if(AW(Aw)){Aa(Ax,Aw)}else{AY(Ax)}}}}else{if(Ai(Af,"getRangeAt")&&typeof Af.rangeCount==AX){AV=function(Ay){if(u&&Ag&&Ay.docSelection.type==Au){AH(Ay)}else{Ay._ranges.length=Ay.rangeCount=Ay.nativeSelection.rangeCount;if(Ay.rangeCount){for(var Ax=0,Aw=Ay.rangeCount;Ax<Aw;++Ax){Ay._ranges[Ax]=new v.WrappedRange(Ay.nativeSelection.getRangeAt(Ax))}n(Ay,Ay._ranges[Ay.rangeCount-1],t(Ay.nativeSelection));Ay.isCollapsed=AC(Ay)}else{AY(Ay)}}}}else{if(Ac&&typeof Af.isCollapsed==AU&&typeof AS.collapsed==AU&&z.implementsDomRange){AV=function(Ay){var Aw,Ax=Ay.nativeSelection;if(Ax.anchorNode){Aw=AD(Ax,0);Ay._ranges=[Aw];Ay.rangeCount=1;AK(Ay);Ay.isCollapsed=AC(Ay)}else{AY(Ay)}}}else{p.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}}}m.refresh=function(Ax){var Aw=Ax?this._ranges.slice(0):null;var Az=this.anchorNode,A0=this.anchorOffset;AV(this);if(Ax){var Ay=Aw.length;if(Ay!=this._ranges.length){return true}if(this.anchorNode!=Az||this.anchorOffset!=A0){return true}while(Ay--){if(!AZ(Aw[Ay],this._ranges[Ay])){return true}}return false}};var AQ=function(A0,Ay){var Ax=A0.getAllRanges();A0.removeAllRanges();for(var Az=0,Aw=Ax.length;Az<Aw;++Az){if(!AZ(Ay,Ax[Az])){A0.addRange(Ax[Az])}}if(!A0.rangeCount){AY(A0)}};if(u&&Ag){m.removeRange=function(A0){if(this.docSelection.type==Au){var Ay=this.docSelection.createRange();var Aw=Ad(A0);var A4=At(Ay.item(0));var A2=As(A4).createControlRange();var Ax,A3=false;for(var Az=0,A1=Ay.length;Az<A1;++Az){Ax=Ay.item(Az);if(Ax!==Aw||A3){A2.add(Ay.item(Az))}else{A3=true}}A2.select();AH(this)}else{AQ(this,A0)}}}else{m.removeRange=function(Aw){AQ(this,Aw)}}var t;if(!AI&&Ac&&z.implementsDomRange){t=Ar;m.isBackward=function(){return t(this)}}else{t=m.isBackward=function(){return false}}m.isBackwards=m.isBackward;m.toString=function(){var Ay=[];for(var Ax=0,Aw=this.rangeCount;Ax<Aw;++Ax){Ay[Ax]=""+this._ranges[Ax]}return Ay.join("")};function An(Ax,Aw){if(Ax.win.document!=At(Aw)){throw new Ah("WRONG_DOCUMENT_ERR")}}m.collapse=function(Ax,Ay){An(this,Ax);var Aw=v.createRange(Ax);Aw.collapseToPoint(Ax,Ay);this.setSingleRange(Aw);this.isCollapsed=true};m.collapseToStart=function(){if(this.rangeCount){var Aw=this._ranges[0];this.collapse(Aw.startContainer,Aw.startOffset)}else{throw new Ah("INVALID_STATE_ERR")}};m.collapseToEnd=function(){if(this.rangeCount){var Aw=this._ranges[this.rangeCount-1];this.collapse(Aw.endContainer,Aw.endOffset)}else{throw new Ah("INVALID_STATE_ERR")}};m.selectAllChildren=function(Ax){An(this,Ax);var Aw=v.createRange(Ax);Aw.selectNodeContents(Ax);this.setSingleRange(Aw)};m.deleteFromDocument=function(){if(u&&Ag&&this.docSelection.type==Au){var A0=this.docSelection.createRange();var Az;while(A0.length){Az=A0.item(0);A0.remove(Az);Az.parentNode.removeChild(Az)}this.refresh()}else{if(this.rangeCount){var Ax=this.getAllRanges();if(Ax.length){this.removeAllRanges();for(var Ay=0,Aw=Ax.length;Ay<Aw;++Ay){Ax[Ay].deleteContents()}this.addRange(Ax[Aw-1])}}}};m.eachRange=function(Az,Ay){for(var Ax=0,Aw=this._ranges.length;Ax<Aw;++Ax){if(Az(this.getRangeAt(Ax))){return Ay}}};m.getAllRanges=function(){var Aw=[];this.eachRange(function(Ax){Aw.push(Ax)});return Aw};m.setSingleRange=function(Aw,Ax){this.removeAllRanges();this.addRange(Aw,Ax)};m.callMethodOnEachRange=function(Aw,Ay){var Ax=[];this.eachRange(function(Az){Ax.push(Az[Aw].apply(Az,Ay))});return Ax};function Ao(Aw){return function(Ay,Az){var Ax;if(this.rangeCount){Ax=this.getRangeAt(0);Ax["set"+(Aw?"Start":"End")](Ay,Az)}else{Ax=v.createRange(this.win.document);Ax.setStartAndEnd(Ay,Az)}this.setSingleRange(Ax,this.isBackward())}}m.setStart=Ao(true);m.setEnd=Ao(false);v.rangePrototype.select=function(Aw){AJ(this.getDocument()).setSingleRange(this,Aw)};m.changeEachRange=function(Ax){var Aw=[];var Ay=this.isBackward();this.eachRange(function(Az){Ax(Az);Aw.push(Az)});this.removeAllRanges();if(Ay&&Aw.length==1){this.addRange(Aw[0],"backward")}else{this.setRanges(Aw)}};m.containsNode=function(Ax,Aw){return this.eachRange(function(Ay){return Ay.containsNode(Ax,Aw)},true)||false};m.getBookmark=function(Aw){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[Aw])}};m.moveToBookmark=function(A0){var Aw=[];for(var Az=0,Ay,Ax;Ay=A0.rangeBookmarks[Az++];){Ax=v.createRange(this.win);Ax.moveToBookmark(Ay);Aw.push(Ax)}if(A0.backward){this.setSingleRange(Aw[0],"backward")}else{this.setRanges(Aw)}};m.toHtml=function(){var Aw=[];this.eachRange(function(Ax){Aw.push(Am.toHtml(Ax))});return Aw.join("")};if(z.implementsTextRange){m.getNativeTextRange=function(){var Ay,Ax;if((Ay=this.docSelection)){var Aw=Ay.createRange();if(AW(Aw)){return Aw}else{throw p.createError("getNativeTextRange: selection is a control selection")}}else{if(this.rangeCount>0){return v.WrappedTextRange.rangeToTextRange(this.getRangeAt(0))}else{throw p.createError("getNativeTextRange: selection contains no range")}}}}function AG(A2){var A1=[];var Az=new AP(A2.anchorNode,A2.anchorOffset);var Ax=new AP(A2.focusNode,A2.focusOffset);var Ay=(typeof A2.getName=="function")?A2.getName():"Selection";if(typeof A2.rangeCount!="undefined"){for(var A0=0,Aw=A2.rangeCount;A0<Aw;++A0){A1[A0]=Am.inspect(A2.getRangeAt(A0))}}return"["+Ay+"(Ranges: "+A1.join(", ")+")(anchor: "+Az.inspect()+", focus: "+Ax.inspect()+"]"}m.getName=function(){return"WrappedSelection"};m.inspect=function(){return AG(this)};m.detach=function(){Ak(this.win,"delete");AN(this)};AR.detachAll=function(){Ak(null,"deleteAll")};AR.inspect=AG;AR.isDirectionBackward=s;v.Selection=AR;v.selectionPrototype=m;v.addShimListener(function(Aw){if(typeof Aw.getSelection=="undefined"){Aw.getSelection=function(){return AJ(Aw)}}Aw=null})});var E=false;var j=function(m){if(!E){E=true;if(!H.initialized&&H.config.autoInitialize){i()}}};if(c){if(document.readyState=="complete"){j()}else{if(d(document,"addEventListener")){document.addEventListener("DOMContentLoaded",j,false)}I(window,"load",j)}}return H},this)
;
define("jive.conc.FreshActionQueue",["jquery"],function(a){return function b(){var c=[];function d(g){var f=new a.Deferred();c.push(g);function e(){var h=c.lastIndexOf(g);if(h>-1){c=c.slice(h+1);g.then(function(){f.resolve.apply(f,arguments)},function(){f.reject.apply(f,arguments)})}}g.then(e,e,function(){f.notify.apply(f,arguments)});return f.promise()}return{push:d}}});
;
jive.namespace("StatusInput");if(!jive.StatusInput.StatusInputs){jive.StatusInput.StatusInputs=$Class.extend({init:function(a,b){this._container=$j(a);this._i18n=b.i18n;this._statusInputIdPostfix=b.idPostfix;this.statusInputs={};var c=this;$j(document).asyncReady(function(){c._docReadyInit(b);c.emit("ready")})},getSubmitVals:function(a){return this.getStatusInput(a).getSubmitVals(true)},resetText:function(a){this.getStatusInput(a).resetText()},_docReadyInit:function(a){var b=this;this._container.find(".jive-js-statusinput").each(function(){var c=$j(this).attr("id");b.statusInputs[c]=new jive.StatusInput.StatusInput($j(this),a)})},getStatusInput:function(a){return this.statusInputs[a]}});jive.conc.observable(jive.StatusInput.StatusInputs.prototype);jive.conc.observable(jive.StatusInput.StatusInputs.prototype);jive.StatusInput.StatusInput=$Class.extend({init:function(a,b){b.mobileUI=b.mobileUI||jive.rte.mobileUI;this._container=$j(a);var c=this._container.get(0);c.insertBefore(document.createTextNode(""),c.firstChild);this.mobileUI=b.mobileUI;if(this.mobileUI){this._container=$j("<input type='text' class='rteReplacement'/>");$j(a).before(this._container);$j(a).remove()}this._mobileEditor=b.mobileUI;this._i18n=b.i18n;this._selection=null;this._replacedInitialText=false;this._statusInputIdPostfix=b.idPostfix;this._initTypeAhead();this._initDD(b);this._initDDHandlers();this._maxCharCount=b.maxCharCount;this._maxCharCountBeforeWarning=((this._maxCharCount)?(b.maxCharCountBeforeWarn||this._maxCharCount*0.8):0);this._previousMatchReqsSpaceAfter=null;this._previousPasteVal=null;this._previousSanitizedHTML=null;this._supportsDomRange=$j.isFunction(window.getSelection);this._id=this._container.attr("id");var d=this;define(["jive.conc.FreshActionQueue"],function(e){d._actionQueue=new e()});$j(document).bind("keyup mouseup",function(f){f.stopPropagation();switch(f.which){case 1:case 2:case 3:break;case 13:f.preventDefault();break;case 27:d._dd.hide();return;break;default:break}});this._container.bind("keypress",function(f){switch(f.which){case 13:f.preventDefault();if(this._mobileEditor){return false}break}});this.delay=(function(){var e=0;return function(g,f){clearTimeout(e);e=setTimeout(g,f)}})();this._container.bind("keydown",function(h){h.stopPropagation();switch(h.which){case 13:h.preventDefault();break;case 37:if(!$j.browser.msie){if(d._selection._selection.anchorNode&&d._selection._selection.anchorNode.parentNode==d._container[0].firstChild&&d._selection._selection.anchorOffset==0){$j(d._container[0]).html("&nbsp"+$j(d._container[0]).html());d._selection.moveToNodeAndCollapse(d._container[0].firstChild,true,0)}}else{var g=document.selection.createRange(),f=rangy.getSelection();if(g&&g.parentElement()==d._container[0].firstChild&&f.anchorOffset==0){$j(d._container[0]).html("&nbsp"+$j(d._container[0]).html());d._selection.moveToNodeAndCollapse(d._container[0].firstChild,true,0)}}return;break;case 38:case 40:if(d._dd.isVisible()){h.preventDefault()}break;case 32:d._processToken();break;case 9:d._processToken();return;default:break}d.delay(function(){d._selection=new jive.Selection();switch(h.which){case 13:if(this._mobileEditor){return false}if(d._dd.isVisible()){d._dd.hide();return false}if($j.browser.msie&&parseFloat($j.browser.version.charAt(0))<9){var i=document.selection.createRange();i.pasteHTML("<br data-jive-statusinputadd='true' />");i.select();break}var j=document.createElement("br");j.setAttribute("data-jive-statusinputadd","true");var k=document.createTextNode("");d._selection.insertNodeAtRange(j);d._selection.selectNode(j);d._selection.collapseRange(false);d._selection.insertNodeAtRange(k);d._selection.selectNodeContents(k);break;case 27:d._dd.hide();d.emit("escapeKeyPress");return;break;case 32:d._dd.hide();d._processCompleteToken();return;break;case 37:case 39:return;break;case 38:return;break;case 40:return;break;default:break}if((d._mobileEditor&&d._container.val().length==0)||(!d._mobileEditor&&d._container.text().length==0)){d._dd.hide();if(d._maxCharCount){d.emit("characterLenMsg","ok",{charCount:d.getCharCount()})}return}d.sanitizeHTML();if(!d._replacedInitialText){d._replacedInitialText=true}d._processToken();if(d._maxCharCount){var e=d.getCharCount();if(e>d._maxCharCountBeforeWarning){if(d.getCharCount()>d._maxCharCount){d.emit("characterLenMsg","error",{charCount:e,charOver:e-d._maxCharCount})}else{d.emit("characterLenMsg","warning",{charCount:e,charLeft:d._maxCharCount-e})}}else{d.emit("characterLenMsg","ok",{charCount:d.getCharCount()})}}},75)});this._container.bind("focus",function(f){d._onContainerFocus(f)});this._container.blur(function(f){d._processCompleteToken();d.emit("blur");d.sanitizeHTMLInterval=window.clearInterval(d.sanitizeHTMLInterval)});this._addInstanceToInstanceObj()},_onContainerFocus:function(a){this.sanitizeHTML();this.sanitizeHTMLInterval=window.setInterval($j.proxy(this.sanitizeHTML,this),500)},_triggerContainerFocus:function(){if(!this._container.is(":focus")){this._container.trigger("focus")}},_initTypeAhead:function(){var g=this;function c(){return g._checkTokens()}function l(m){return[27,38,40,9].indexOf(m.keyCode)>=0}function i(m){m.stopPropagation();m.preventDefault();return false}function f(o){var n;if(c()){var m=g._dd.isVisible();var p=new $j.Event(o.type,{keyCode:o.keyCode});if(o.keyCode==13||o.keyCode==32){if(m&&g.typeAheadProxy.data("typeAhead").getSelected().length>0){n=i(o)}}else{if(l(o)){if(m){i(o);n=false}else{if(o.keyCode==27){i(o)}}if(m&&o.type=="keydown"&&o.keyCode==9){if($j("a.jive-js-friends.j-active").length){$j("a.jive-js-history").click()}else{if($j("a.jive-js-history.j-active").length){$j("a.jive-js-friends").click()}}}}}g.typeAheadProxy.trigger(p)}else{g.typeAheadProxy.trigger("close")}return n}function h(){if(g._isMention()){var m=g._getMention();if(m&&m.length>=2){g._actionQueue.push(g._obtainSearchData(m)).then(function(n){g._dd.renderSearchData(n)})}else{g._showFriendsList()}}}this.typeAheadProxy=$j("<input type='text' />").typeAhead({hasFocus:function b(){var m=$j(document.activeElement);return m.get(0)===g._container.get(0)||m.closest(g._container).length>0},itemSelector:".j-autocomplete-results li",chooseOnSpace:true,ariaParent:this._container,focusTarget:this._container,keystrokeWait:400}).on("selectionChosen",function d(r,p,o,t){if(!g._dd.isVisible()){return}o=o.find("a");var s=o.attr("data-id");if(o.hasClass("jive-js-status-input-create")){var m={newtag:1};g._dd.emit("interactionFinished",{index:-1,value:'<span class="jive-icon-med jive-icon-tag"></span>'+s,href:_jive_base_url+"/tags#/?tags="+s,html:o.html()},null,m)}else{o.find(".j-508-label").remove();var q=o.html(),n=o.attr("href");if(!s&&o.attr("data-objectType")&&o.attr("__default_attr")){s=o.attr("data-objectType")+"-"+o.attr("__default_attr")}g._dd.emit("interactionFinished",{value:q,href:n,id:s})}}).on("keystroke",function(){h();g._processToken()}).on("focusWaitFinished",function(){if(!g._dd.isVisible()){g._selection=new jive.Selection();g._processToken()}}).on("close blurWaitFinished",function(){g._dd.hide()});var e=this._container.on("keydown keyup",function(m){g._selection=new jive.Selection();if(f(m)===false){m.stopImmediatePropagation()}}).attr("aria-autocomplete","list").attr("role","combobox").attr("tabindex","0");if(this._i18n&&this._i18n.ariaLabel){e.attr("aria-label",this._i18n.ariaLabel)}if(this._statusInputIdPostfix){var j="jive-508-label-";if(this._statusInputIdPostfix=="mbASHeader"&&this._container&&this._container.length>0){var k=this._container.attr("id");if(k){j=j+k}}else{j=j+"message-"+this._statusInputIdPostfix}var a=$j("#"+j);if(a&&a.length>0){e.attr("aria-labelledby",j)}}},_addInstanceToInstanceObj:function(){jive.StatusInput.StatusInput.instances[this._id]=this},_generateIconClass:function(c){var b={"jive-icon-blog":"jive-link-blog-small","jive-icon-doctype-compressed":"jive-icon-doctype-compressed-small","jive-icon-discussion":"jive-icon-discussion-small","jive-icon-discussion-bridged":"jive-icon-discussion-bridged-small","jive-icon-discussion-correct":"jive-icon-discussion-correct-small","jive-icon-discussion-question":"jive-icon-discussion-question-small","jive-icon-doctype-acrobat":"jive-icon-doctype-acrobat-small","jive-icon-doctype-document":"jive-icon-doctype-document-small","jive-icon-doctype-image":"jive-icon-doctype-image-small","jive-icon-doctype-presentation":"jive-icon-doctype-presentation-small","jive-icon-doctype-spreadsheet":"jive-icon-doctype-spreadsheet-small","jive-icon-document":"jive-link-wiki-small","jive-icon-external-site":"jive-link-url-small","jive-icon-group":"jive-link-socialgroup-small","jive-icon-poll":"jive-link-poll-small","jive-icon-profile":"jive-link-profile-small","jive-icon-project":"jive-link-project-small","jive-icon-tag":"jive-link-tag-small","jive-icon-space":"jive-link-community-small"},a=$j.map(c,function(d){return d in b?b[d]:null});return a.shift()||""},getContainer:function(){return this._container},getSubmitVals:function(a){if(a){this._truncateNodes()}var b;if(this._mobileEditor){b=jive.util.escapeHTML(this._container.val())}else{b=this._container.html()}b=b.replace(/<\/?br _[^>]*>/gi,"");b=b.replace(/(<\/?)(\w+)([^>]*>)/gi,function(f,e,d,c){return e+d.toLowerCase()+c.replace(/((data-jive-statusInputadd)|(data-jive-truncation-flag))=["']true["']/gi,"")});b=b.replace(/(<\/?[aA]\s+[^>]*href=")([^"]*)("[^>]*>)/gi,function(g,f,e,d){if(g.search(/<\w+[^>]*data-jive-statusinputinteral="true"[^>]*>/gi)!=-1){var c=e.replace(/https?\:\/\//,"").split("/").slice(1).join("/");return f+"/"+c+d}else{return g}});return b},_truncateNodes:function(){if(this.getCharCount()>this._maxCharCount){var g=this._container[0].childNodes;var f=0;var e=false;for(var c=0;c<g.length;c++){var b=g[c];if(e){this._container[0].removeChild(b)}else{var a=$j(b).text().length;if(f+a>this._maxCharCount){var d=this._maxCharCount-f;this._truncateNode(b,d);e=true}f+=a}}}},_truncateNode:function(c,a){if(c.nodeType==3){var d=c.nodeValue;if(d.length<a){return a-d.length}else{c.nodeValue=c.nodeValue.substr(0,a);return 0}}else{var e=c.childNodes;for(var b=0;b<e.length;b++){if(a==0){c.removeChild(e[b])}else{a=this._truncateNode(e[b],a)}}}},truncateAnchors:function(){$j(this._container).find("[data-jive-statusinputadd=true]:not([data-jive-truncation-flag=true],[data-jive-statusinputinteral=true])").each(function(){var a=$j(this);a.contents().filter(function(){return this.nodeType==3}).each(function(){var b=$j(this);b.replaceWith(document.createTextNode(jive.util.truncateStr(b.text())))});a.attr("data-jive-truncation-flag",true)})},sanitizeHTML:function(){var a=this._container.html();if(this._previousSanitizedHTML==a){return}var g=this._container[0];if(g.childNodes.length==0||(g.childNodes.length==1&&g.lastChild.nodeName.toLowerCase()=="br")){g.insertBefore(document.createTextNode(""),g.lastChild)}var c=g.lastChild;if(!$j.browser.msie&&(c==null||c.nodeType==3||c.nodeName&&c.nodeName.toLowerCase()!="br")){var d=document.createElement("br");d.setAttribute("_moz_dirty","");g.appendChild(d)}this.truncateAnchors();if(!$j.browser.msie){a=a.replace(/<\/?br[^>]*>$/mi,"")}var j=this;this._container.find("a[data-jive-statusinputadd=true]").filter(function(){return $j(this).text()==""}).each(function(){if(!j._selection){j._selection=new jive.Selection()}var l=j._selection.getRangeStartContainer();var o=$j(this);if($j(l).parents(o).length>0){var n=o.parent().contents(":not(br)");var q=n.index(o);var p;var m=0;if(q>0){p=n[q-1];m=$j(p).text().length}else{if(q<n.length-1){p=n[q+1]}}if(!p&&o.parent()[0]!==j._container[0]){p=o.parent()[0]}if(p){j._selection.moveToNodeAndCollapse(p,true,m)}}o.remove()});var e=this._container.children("[data-jive-statusInputadd!=true]");if(!$j.browser.msie){e=e.filter(":not(:last)")}e.filter("br").not("[_moz_dirty]").each(function(){$j(this).replaceWith("<br />")});e=e.not("br");if(e.length>0){var b,f=0,i=function(l){return/^style$/i.test(l.nodeName||"")},h=function(l){return/^(i|b|strong)$/i.test(l.nodeName||"")},k=function(l){if(/^(p|div)$/i.test(l.tagName)){return f++>0}return false};e.each(function(){var m=$j(this);if(i(this)){m.remove()}else{if(h(this)){var l=m.contents();l.each(function(){var n=$j(this);if(n.not("br")){n.replaceWith(n.text())}});m.replaceWith(l)}else{if(k(this)){m.before('<br data-statusInputadd="true" />')}b=document.createTextNode(m.text());j._container[0].replaceChild(b,this)}}});if(this._selection&&b){this._selection.moveToNodeAndCollapse(b,true,b.nodeValue.length)}}this._previousPasteVal=this._container.text();this._previousSanitizedHTML=this._container.html()},resetText:function(){this._setText("");this._replacedInitialText=false;this.emit("characterLenMsg","ok",{charCount:this.getCharCount()})},getCharCount:function(){if(this.mobileUI){return this._container.val().length}else{return this._container.text().length}},_setText:function(a){if(this._mobileEditor){this._container.val(jive.util.unescapeHTML(a))}else{this._container.html(a)}},_focus:function(a){this._container.focus()},_createNewSelectionUtil:function(){var a=false;if($j.browser.msie){if(this._container.contents().length==0){this._selection=null;return}}else{var b=this._container[0].lastChild;if(!b){this.sanitizeHTML();b=this._container[0].lastChild}a=b.nodeName.toLowerCase()=="br"}this._selection=new jive.Selection(this._container[0].lastChild,a)},_isMatch:function(b,a){return a.search(new RegExp(this._getPatterns()[b],"gi"))>-1},_matchUtil:function(b,a){return a.match(new RegExp(this._getPatterns()[b],"gi"))},_isMention:function(){var a=this._selection.getWordAtRange();return this._isMatch("mention",a)},_getMention:function(){var b=this._selection.getWordAtRange(),a=this._matchUtil("mention",b)[0];return a.substr(1,a.length)},_checkTokens:function checkTokens(){var c=this._selection.getWordAtRange();var b=this._getTokens();var a=false;$j.each(Object.keys(b),function(){var d=b[this];if(c.match(d.regExp)){a=true;return false}});return a},_processToken:function(){if(!this._mobileEditor){var a=this._selection.getWordAtRange();if(a===""){this._processCompleteToken()}else{this._processPartialToken(a,this._selection.getRangeStartContainer())}}},_processCompleteToken:function(){if(!this._dd.isVisible()){var a=this._tokenCallbacks||[];a.forEach(function(b){b()});if(a.length<1){this._dd.hide()}this._tokenCallbacks=[]}},_processPartialToken:function(f,d){var c=[],e=this._getTokens(),a=false,b=this;Object.keys(e).forEach(function(g){var h=e[g],i=f.match(h.regExp);if(i){a=true;i.push(d);if(h.complete){c.push(function(){h.complete.apply(b,i)})}if(h.keypress){h.keypress.apply(b,i)}}});if(!a){this._dd.hide()}this._tokenCallbacks=c},_obtainData:function(b){var a,c;if(!jive.StatusInput.StatusInput.dataCache.hasOwnProperty(b)){c=$j.getJSON(b);c.then(function(d){jive.StatusInput.StatusInput.dataCache[b]=d})}else{a=new $j.Deferred();a.resolve(jive.StatusInput.StatusInput.dataCache[b]);c=a.promise()}return c},_obtainSearchData:function(a){return this._obtainData(jive.rest.url("/emention/search/")+encodeURI(a)+"*")}});jive.StatusInput.StatusInput.dataCache={};jive.StatusInput.StatusInput.instances={};$j(document).asyncReady(function(){window.setInterval(function(){jive.StatusInput.StatusInput.dataCache={}},300000)});jive.StatusInput.StatusInput.sanitizeHTMLIntervalHandler=function(){for(var a in jive.StatusInput.StatusInput.instances){jive.StatusInput.StatusInput.instances[a].sanitizeHTML()}};jive.StatusInput.StatusInput.getRegExpsFromPatterns=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c],e;if($j.isArray(d)){e=d.map(function(f){return"("+f+")"}).join("|")}else{e=d}b[c]=new RegExp(e)});return b};jive.StatusInput.StatusInput.Patterns={mention:"@([^@ ]+)?"};jive.StatusInput.StatusInput.Tokens={mention:{regExp:new RegExp(jive.StatusInput.StatusInput.Patterns.mention,"i"),keypress:function(b,a){var c=this;if(a&&a.length>=2){this._actionQueue.push(this._obtainSearchData(a)).then(function(d){c._dd.renderSearchData(d)})}else{}}}};jive.conc.observable(jive.StatusInput.StatusInput.prototype);jive.StatusInput.renderAttachmentsWrapper=function(b,a,c){if(b.attachments){a.append(jive.statusinput.attachments.renderAttachments({entry:{meta:b.attachments},removable:c}))}else{a.append(jive.statusinput.attachments.renderAttachments($j.extend({},b,{removable:c})))}if(c){a.slideDown("fast",function(){$j(this).animate({opacity:1},500)})}else{a.css("opacity","1").show()}jive.StatusInput.bindAttachment(a.find("ul.j-attached-items"),c)};jive.StatusInput.renderAttachmentWrapper=function(b,a,c){a.append(jive.statusinput.attachments.renderAttachment($j.extend(b,{removable:c})))};jive.StatusInput.bindAttachment=function(b,d){var a=0,c;b.find("li:visible").each(function(){a+=$j(this).outerWidth()});b.css("width",a+"px").data("innerWidth",a);c=b.width()-b.closest(".j-attachment-container").width();if(c>0&&d){b.animate({left:(c*-1-40)},300)}b.find("li a.j-attach-anchor").unbind("hover").hover(function(){$j(this).find(".j-icon-play").stop().fadeTo("fast",0.6)},function(){$j(this).find(".j-icon-play").stop().fadeOut("fast")});b.parent().find("a.j-attachment-arrow").unbind().mousedown(function(){try{var g;var i=$j(this).outerWidth()*2;c=b.width()-b.closest(".j-attachment-container").width();var f=parseInt(b.css("left"));if(isNaN(f)){f=0}if($j(this).hasClass("j-attachment-arrow-right")&&c>0){g=f+(c+i);b.stop().animate({left:(-c-i)},g*5,"linear")}else{if(c>0){g=f*-1;b.stop().animate({left:0},g*5,"linear")}}}catch(h){console.log(h)}}).mouseup(function(){b.stop();return false}).click(function(){return false});if(!d){jive.StatusInput.sizeContainer(b.parent().parent())}else{jive.StatusInput.showArrows()}};$j(window).resize((function(){var a;return function(){var b=$j(window).width();if(a&&b!==a){jive.StatusInput.sizeContainer()}a=b}})());jive.StatusInput.sizeContainer=function(b){var a;b=b||$j(document);b.find(".j-attachment-container:visible:has(ul.j-attached-items)").hide().each(function(){var c=$j(this),d=c.closest(".jive-table-cell-activity"),f=c.closest(".j-wall-repost-content"),g=c.parent(),e;if(d.length>0){e=d.width()}else{if(f.length>0){e=f.width()}else{if(c.closest(".j-wall-form").length>0){e=0}else{if($j.browser.msie){e=g.width()-12}else{e=g.width()}}}}a=c.find("ul.j-attached-items").data("innerWidth")||Number.POSITIVE_INFINITY;if(e>0){$j(this).width(Math.min(e,a)).show()}else{c.show()}});jive.StatusInput.showArrows(b)};jive.StatusInput.showArrows=function(a){a=a||$j(document);a.find("ul.j-attached-items:visible").each(function(){var c=$j(this),b=c.parent();if(b.innerWidth()<c.innerWidth()){b.find("a.j-attachment-arrow").css("display","block");c.css("margin","0 20px")}else{b.find("a.j-attachment-arrow").hide();c.css({margin:"0",left:0})}})}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.dropdown=="undefined"){jive.statusinput.dropdown={}}jive.statusinput.dropdown.ddLoading=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-pop js-pop j-js-autocomplete"><span class="belowArrow pointer" style="left: 6px;"></span><div class="j-menu j-pop-main j-autocomplete-container j-rc5"><div class="loading"></div></div></div>');return C?"":B.toString()};jive.statusinput.dropdown.ddSearchContent=function(A,C){var B=C||new soy.StringBuilder();jive.statusinput.dropdown.ddOutputEntries(A,B);B.append('<p class="j-actions font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.search.hint"),["Hint: Use an underscore to search multiple words"])),"</p>");return C?"":B.toString()};jive.statusinput.dropdown.ddSearch=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-pop js-pop j-js-autocomplete"><span class="belowArrow pointer" style="left: 6px;"></span><div class="j-menu j-pop-main j-autocomplete-container j-rc5">');jive.statusinput.dropdown.ddSearchContent(A,B);B.append("</div></div>");return C?"":B.toString()};jive.statusinput.dropdown.ddTagsContent=function(A,C){var B=C||new soy.StringBuilder();if(A.currentTagText){jive.statusinput.dropdown.ddOutputTags(soy.$$augmentData(A,{shouldCreateTag:soy.$$escapeHtml(A.shouldCreateTag),creationHTML:(A.allowTagCreation)?'<a class="jive-js-status-input-selectable jive-js-status-input-create" href="javascript:void(0)" data-id="'+soy.$$escapeHtml(A.currentTagText)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.create.title"),["create #"]))+soy.$$escapeHtml(A.currentTagText)+"</a>":""}),B)}else{B.append('<p class="font-color-meta j-autocomplete-tag-prompt">',(A.allowTagCreation)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.title"),["Continue typing to search tags or create new tags"])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.title_no_create"),["Continue typing to search tags"])),"</p>")}return C?"":B.toString()};jive.statusinput.dropdown.ddTags=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-pop js-pop j-js-autocomplete"><span class="belowArrow pointer" style="left: 6px;"></span><div class="j-menu j-pop-main j-rc5">');jive.statusinput.dropdown.ddTagsContent(A,B);B.append("</div></div>");return C?"":B.toString()};jive.statusinput.dropdown.ddFriendsContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-actions font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.friends.title"),["Friends"])),'</p><div class="j-autocomplete-nav clearfix"><span><a class="jive-js-friends js-tab j-active" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.people.link.text"),[])),'</a></span><span><a class="jive-js-history js-tab" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.link.text"),["History"])),"</a></span></div>");jive.statusinput.dropdown.ddOutputEntries(soy.$$augmentData(A,{emptyEntriesStr:jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.self.nopeople.label"),[])}),B);return C?"":B.toString()};jive.statusinput.dropdown.ddFriends=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-pop js-pop j-js-autocomplete"><span class="belowArrow pointer" style="left: 6px;"></span><div class="j-pop-main j-menu">');jive.statusinput.dropdown.ddFriendsContent(A,B);B.append("</div></div>");return C?"":B.toString()};jive.statusinput.dropdown.ddHistoryContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-actions font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.title"),["History"])),'</p><div class="j-autocomplete-nav clearfix"><span><a class="jive-js-friends js-tab" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.people.link.text"),[])),'</a></span><span><a class="jive-js-history js-tab j-active" href="javascript:void(0);"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.link.text"),["History"])),"</a></span></div>");jive.statusinput.dropdown.ddOutputEntries(soy.$$augmentData(A,{emptyEntriesStr:jive.i18n.i18nText(jive.i18n.getMsg("userbar.no_history_to_view.text"),["No history"])}),B);return C?"":B.toString()};jive.statusinput.dropdown.ddHistory=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-pop js-pop j-js-autocomplete"><span class="belowArrow pointer" style="left: 6px;"></span><div class="j-pop-main j-menu">');jive.statusinput.dropdown.ddHistoryContent(A,B);B.append("</div></div>");return C?"":B.toString()};jive.statusinput.dropdown.ddOutputEntries=function(A,G){var D=G||new soy.StringBuilder();D.append('<ul class="j-autocomplete-results" role="listbox">');var C=A.entries;var E=C.length;if(E>0){for(var F=0;F<E;F++){var B=C[F];D.append('<li role="option">',B.html,"</li>")}}else{D.append((A.emptyEntriesHTML)?"<li>"+A.emptyEntriesHTML+"</li>":'<li class="j-ac-empty">'+soy.$$escapeHtml(A.emptyEntriesStr)+"</li>")}D.append("</ul>");return G?"":D.toString()};jive.statusinput.dropdown.ddOutputTags=function(C,G){var F=G||new soy.StringBuilder();F.append('<ul class="j-autocomplete-results" role="listbox">',(C.shouldCreateTag=="true")?'<li role="option">'+C.creationHTML+"</li>":"");var B=C.entries;var D=B.length;for(var E=0;E<D;E++){var A=B[E];F.append('<li role="option">',A.html,"</li>")}F.append("</ul>");return G?"":F.toString()}
;
jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputDropDown){jive.MicroBlogging.StatusInputDropDown=$Class.extend({init:function(c,b,a){this._$statusInputContainer=$j(c);this._typeAhead=b;this._i18n=a.i18n;this._dd=null;this._data={search:null,friends:null,history:null};this._allowTagCreation=a.allowTagCreation==undefined?true:a.allowTagCreation},renderFriendsData:function(b){var a=this;this._renderData(b,"friends",jive.statusinput.dropdown.ddFriends,{fnHandleRender:function(){a._renderFriendsDataHelper()},renderIfDataIsNull:true})},renderHistoryData:function(b){var a=this;this._renderData(b,"history",jive.statusinput.dropdown.ddHistory,{fnHandleRender:function(){a._renderHistoryDataHelper()},renderIfDataIsNull:true})},renderTagsData:function(b,c){var a=true;if(b){$j.each(b.tagSearchResult,function(e,d){if(d.name===c){a=false}})}if(this._allowTagCreation||c==null||b!=null&&b.tagSearchResult.length>0){this._renderData(this._normalizeTagsData(b),"tags",jive.statusinput.dropdown.ddTags,{renderIfDataIsNull:true,selectionPrefix:"#",extraTemplateData:{currentTagText:c,allowTagCreation:this._allowTagCreation,shouldCreateTag:a}})}else{this.hide()}},renderSearchData:function(a){this._renderData(a,"search",jive.statusinput.dropdown.ddSearch)},hide:function(){if(this._dd!=null){this._dd.hide()}},show:function(){if(this._dd!=null){this._dd.slideDown("fast")}},isVisible:function(){return this._dd&&this._dd.is(":visible")},selectItem:function(a){if(this._dd==null){return}this._typeAhead.setSelected(this._typeAhead.getSelectable().eq(a))},_renderFriendsDataHelper:function(){var a=this;this._dd.find(".jive-js-history").click(function(b){a.emit("historyLinkClicked");b.stopPropagation()})},_renderHistoryDataHelper:function(){var a=this;this._dd.find(".jive-js-friends").click(function(b){a.emit("friendsLinkClicked");b.stopPropagation()})},_normalizeTagsData:function(c){var d={mentionCollection:""};if(c!=null&&c.tagSearchResult){for(var b=0;b<c.tagSearchResult.length;b++){var a=c.tagSearchResult[b];if(a.found){if(d.mentionCollection==""){d.mentionCollection={};d.mentionCollection.entries=new Array()}d.mentionCollection.entries.push({html:'<a  class="jive-js-status-input-selectable" href="'+_jive_base_url+"/tags#/?tags="+encodeURIComponent(a.name)+'"><span class="jive-icon-med jive-icon-tag"></span>'+jive.util.escapeHTML(a.name)+"</a>",id:a.name})}}}return d},_getCollectionFromData:function(a){return a.mentionCollection},_getCollectionEntriesFromData:function(a){return a.mentionCollection.entries},_renderData:function(c,e,l,o){o=o||{};var h=o.fnHandleRender;var i=o.renderIfDataIsNull||false;var a=o.fnHandleRenderNoData;var k=o.selectionPrefix;var b=o.extraTemplateData||{};if(typeof this._getCollectionFromData(c)=="object"||i){var j=this._data[e]=c;var f=this._getCollectionEntriesFromData(j)||{};var g=this;var d=l.call(this,$j.extend({i18n:g._i18n,entries:f},b));var n=$j(".j-js-autocomplete");if(n.length>0){n.remove()}this._$statusInputContainer.after(d);this._dd=$j(".j-js-autocomplete");var m=this._$statusInputContainer.position();this._dd.css("top",(m.top+this._$statusInputContainer.parent().height())+"px");this._dd.css("left",m.left+"px");this._typeAhead.setSuggestElement(this._dd);if(h!=null){h()}this.show()}else{j=null;if(a!=null){a()}else{this.hide()}}}});jive.MicroBlogging.StatusInputDropDown.selectedItemClassName="jive-js-status-input-selected";jive.MicroBlogging.StatusInputDropDown.selectableItemClassName="jive-js-status-input-selectable";jive.conc.observable(jive.MicroBlogging.StatusInputDropDown.prototype);jive.MicroBlogging.StatusInputDropDown.delay=(function(){var a=0;return function(c,b){clearTimeout(a);a=setTimeout(c,b)}})()};
;
jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputs){jive.MicroBlogging.StatusInputs=jive.StatusInput.StatusInputs.extend({_docReadyInit:function(a){this._container.find(".jive-js-statusinput").each(function(d,b){var f=$j(b).attr("id"),e=this.emit.bind(this,"characterLenMsg"),c=this.emit.bind(this,"atMentionFinished");this.statusInputs[f]=new jive.MicroBlogging.StatusInput(b,a).addListener("characterLenMsg",e).addListener("atMentionFinished",c)}.bind(this))}});jive.MicroBlogging.StatusInput=jive.StatusInput.StatusInput.extend({init:function(a,b){this._super(a,b);this._focusOnRdy=b.focusOnRdy;this._allowTagCreation=b.allowTagCreation==undefined?true:b.allowTagCreation;this._doNotAnimate=b.doNotAnimate==undefined?false:b.doNotAnimate;var c=this;if(b.defaultValue){c._container.prev(".jive-js-statusinput-default").hide()}else{this._origHeight=0}this._container.bind("click",function(d){c._triggerContainerFocus()});this._container.prev(".jive-js-statusinput-default").keydown(function(d){if(d.keyCode==13||d.keyCode==32){c._triggerContainerFocus()}});this._container.prev().click(function(){c._triggerContainerFocus()})},_setOriginalHeight:function(){if(this._origHeight==0){this._origHeight=$j(this._container).height()}},triggerOnFocusAnimation:function(){if(this._focusOnRdy){this._triggerContainerFocus()}},_onContainerFocus:function(a){this._super(a);this._container.prev(".jive-js-statusinput-default").hide();$j("#j-js-mb-success").hide();if(!this._doNotAnimate){this._setOriginalHeight();this._container.animate({minHeight:Math.max(this._origHeight*2.2,15)},150);this._container.addClass("j-mb-focused")}this._container.attr("contentEditable",true);this.emit("focus")},_initDD:function(a){this._dd=new jive.MicroBlogging.StatusInputDropDown(this._container,this.typeAheadProxy.data("typeAhead"),a)},_initDDHandlers:function(){var a=this;this._dd.addListener("interactionFinished",function(g,f,k){if(g!=null){var j=$j("<div />").html(g.value),i=jive.util.escapeHTML(j.text()),h=j.find("span"),c=$j.extend({"data-jive-statusInputadd":"true",href:g.href,"data-jive-statusInputInteral":"true"},k||{});if(g.id){c.jiveID=g.id}var d=(h.attr("class")||"").split(/\s+/);c["class"]=a._generateIconClass(d);var b=document.createTextNode(" ");var e=a._selection.replaceWordAtRange(i,f||"",{tag:"a",attrs:c});e.parentNode.insertBefore(b,e.nextSibling);a._selection.moveToNodeAndCollapse(b,false,b.nodeValue.length)}a._dd.hide();a._focus(true);a.emit("atMentionFinished",g.id,g.value)});this._dd.addListener("friendsLinkClicked",function(){a._showFriendsList(true)});this._dd.addListener("historyLinkClicked",function(){a._showHistoryList(true)})},_getTokens:function(){return jive.MicroBlogging.StatusInput.Tokens},_getPatterns:function(){return jive.MicroBlogging.StatusInput.Patterns},_showFriendsList:function(a){var b=this;this._actionQueue.push(this._obtainFriendsData(a)).then(function(c){b._dd.renderFriendsData(c);if(a){b._dd.selectItem(0)}})},_showHistoryList:function(a){var b=this;this._actionQueue.push(this._obtainHistoryData(a)).then(function(c){b._dd.renderHistoryData(c);if(a){b._dd.selectItem(0)}})},_showTagsList:function(b){var a=this;this._actionQueue.push(this._obtainTagsData(b)).then(function(c){a._dd.renderTagsData(c,b)})},_obtainFriendsData:function(a){return this._obtainData(jive.rest.url("/emention/friends"))},_obtainHistoryData:function(a){return this._obtainData(jive.rest.url("/emention/history"))},_obtainTagsData:function(a){return this._obtainData(jive.rest.url("/tags/search?query="+encodeURIComponent(a)+"*"))},handleAtMentionButtonClick:function(){this._replacedInitialText=true;var c=this._selection==null?null:this._selection.getRangeStartContainer();if(this._selection==null||$j(c).parents("#"+this._container.attr("id")).length==0||this._container.contents().length==0){this._createNewSelectionUtil()}else{this._selection.alignRangeWithNearestTextNode(c)}if(this._selection==null){this._container.append(document.createTextNode("@"));this._selection=new jive.Selection(this._container[0].lastChild,false,1)}else{var e=this._selection.getRangeStartContainer();var d=" @ ";var b=document.createTextNode(d);var a=Math.min(d.length,2);if(!$j.browser.msie&&e.tagName&&e.tagName.toLowerCase()=="br"){$j(b).insertBefore(e);this._selection.moveToNodeAndCollapse(b,true,a);this._container.focus()}else{this._container.focus();this._selection=new jive.Selection();this._selection.insertNodeAtRange(b,a)}}this._showFriendsList()},swapLinkFor:function(a,c){function b(g,e,f){if(g.nodeType==3){var d=null;var k=g.nodeValue;if(k.indexOf(e)<0){return}if(k.indexOf(e)==0){g.nodeValue=k.substring(e.length);g.parentNode.insertBefore($j(c)[0],g);d=g}else{if(k.indexOf(e)==(k.length-e.length)){g.nodeValue=k.substring(0,k.indexOf(e));g.parentNode.insertBefore($j(c)[0],g);g.parentNode.insertBefore(g,g.previousSibling);d=$j(c)[0]}else{var l=k.substring(0,k.indexOf(e));var m=k.substring(k.indexOf(e)+e.length);g.nodeValue=m;g.parentNode.insertBefore(document.createTextNode(l),g);g.parentNode.insertBefore($j(c)[0],g);d=g}}if(d.nodeType==3&&d.nodeValue.length>1){var j=document.createTextNode(d.nodeValue.substring(1));d.nodeValue=d.nodeValue.substring(0,1);g.parentNode.insertBefore(j,d);g.parentNode.insertBefore(d,j)}jive.Selection.moveCursorAfter(d)}if(g.nodeType==1){if(g.nodeName.toLowerCase()=="a"){return}else{for(var h=0;h<g.childNodes.length;h++){b(g.childNodes[h],e,f)}}}}b(this._container[0],a,c)}});(function(a){var b={mention:"^@([^@ ]+)?",tags:"^#([^# ]+)?",youtubeURL:"https?\\://(?:[\\w\\-]+\\.)?youtube\\.com/watch\\S*[&?]v=([^&\\s]+)\\S*",imageURL:"https?\\://\\S+(\\.png|\\.jpg|\\.gif|\\.jpeg)",linkURL:"https?\\://\\S+",httpNoSsl:"http\\://\\S+"};a.Patterns=b;a.Tokens={mention:{regExp:new RegExp(b.mention,"i"),keypress:function(d,c){}},tags:{regExp:new RegExp(b.tags,"i"),keypress:function(d,c){console.debug("# tag");if(c&&c.length>=2){this._showTagsList(c)}else{this._dd.renderTagsData()}}},youtubeURL:{regExp:new RegExp(b.youtubeURL,"i"),complete:function(c,e){console.debug("youtube URL");var d=new RegExp(b.httpNoSsl,"i");if(c.match(d)){c=c.replace("http","https")}this.emit("youtubeURLMatch",c);this.emit("linkURLMatch",c);this._dd.hide()}},imageURL:{regExp:new RegExp(b.imageURL,"i"),keypress:function(d,f,e){console.debug("image URL");if(!$j(e).parent().attr("data-jive-statusinputImageURL")){this.emit("imageURLMatch",d);var c={href:d};c["data-jive-statusinputadd"]=true;c["data-jive-statusinputImageURL"]=true;this._selection.replaceWordAtRange(d,null,{tag:"a",attrs:c});this._focus(true)}this._dd.hide()}},linkURL:{regExp:new RegExp(b.linkURL,"i"),complete:function(c,d){console.debug("link URL");if(!$j(d).parent().attr("data-jive-statusinputImageURL")){this.emit("linkURLMatch",c)}this._dd.hide()}}}})(jive.MicroBlogging.StatusInput)};
;
jive.namespace("MicroBlogging");jive.MicroBlogging.AttachmentView=jive.AbstractView.extend(function(a,b){this.init=function(c){b.init.call(this,c);this.isCreateForm=c.isCreateForm||true;this.resizeHandlerRegistered=false};a.getSoyTemplate=function(c){return jive.statusinput.attachments.renderAttachment(c)};a.getSoyTemplateAttachments=function(c){return jive.statusinput.attachments.renderAttachments(c)};a.renderAttachments=function(d){var c=this.getContent();c.append(this.getSoyTemplateAttachments($j.extend({removable:this.isCreateForm},d)));if(this.isCreateForm){c.slideDown("fast",function(){$j(this).animate({opacity:1},500)})}else{c.css("opacity","1").show()}c=null};a.renderAttachment=function(d){var c=this.getContent().find("li.j-attached-loading");c.before(this.getSoyTemplate($j.extend({removable:this.isCreateForm},d)));c=null};a.registerResizeHandler=function(){if(!this.resizeHandlerRegistered){var c=this;$j(window).resize((function(){var d;return function(){var e=$j(window).width();if(d&&e!==d){c.resize()}d=e}})());this.resizeHandlerRegistered=true}};this.postRender=function(){b.postRender.call(this);var e=this.getContent();this.registerResizeHandler();var d=e.find("ul.j-attached-items"),c=this;e.find("a.j-attachment-arrow").unbind();e.find("a.j-attachment-arrow").mousedown(function(){try{c.scrollHandler($j(this),d)}catch(f){console.log(f)}}).mouseup(function(){d.stop();return false}).click(function(){return false});this.resize()};this.add=function(e,f){var c=this,g=f.meta,d=this.getContent(),i=d.find("ul.j-attached-items"),h=g[0];$j.extend(h,{originalURL:e});if(i.length>0){this.renderAttachment({attachment:h});c.postRender()}else{this.renderAttachments({attachments:g})}d.find("li:not(.j-attached-loading):last > .j-remove-attachment").click(function(){c.emitP("removeImage",h.id).addCallback(function(j){c.removeAttachment(h.id)}).addErrback(function(k,j){console.log("error removing attachment with id "+h.id)});return false});this.hideLoadingNotification();this.resize();this.scrollHandler(d.find("a.j-attachment-arrow-right"),d.find("ul.j-attached-items"));g=null;d=null;i=null};this.showLoadingNotification=function(){var c=this.getContent().find("li.j-attached-loading");if(c.length==0){this.renderAttachments({entry:{meta:[]}})}c.show();c=null};this.hideLoadingNotification=function(){var c=this.getContent().find("li.j-attached-loading");c.hide();if(c.length&&c.siblings("li:not(.j-attached-loading)").size()==0){this.reset()}c=null};this.reset=function(){this.getContent().html("").hide().find("li.j-attached-loading").hide();this.metaData=[]};this.removeAttachment=function(d){var c=$j("#"+d);if(c.size()>0&&c.siblings("li:not(.j-attached-loading)").size()==0){this.reset()}c.remove();if(this.metaData){this.metaData=this.metaData.filter(function(e){return d!==e.id})}c=null};this.removeAllAttachments=function(){var d=this;var c=this.getContent().find("ul.j-attached-items li:not(.j-attached-loading)").map(function(){return parseInt(this.id)});for(var f=0,e=c.length;f<e;f++){d.emitP("removeImage",c[f]).addCallback(function(g){d.removeAttachment(c[f])}).addErrback(function(h,g){console.log("error removing attachment with id "+c[f])})}c=null};this.hide=function(){this.hideAllMenus();this.getContent().hide()};this.resize=function(){var d=0,c=this.getContent();c.find("li.j-attached-image, li.j-attached-video").each(function(){d+=$j(this).outerWidth()});var e=this.getAttachmentScrollDim();if(e.containerWidth<e.attachmentsWidth){this.showArrows()}else{this.hideArrows()}c.find("ul.j-attached-items").css("width",e.attachmentsWidth+"px");d=null;c=null};this.scrollHandler=function(e,d){var f,i=e.outerWidth()*2,h=this.getAttachmentScrollDim(),g=h.attachmentsWidth-h.containerWidth,c=parseInt(d.css("left"));if(isNaN(c)){c=0}if(e.hasClass("j-attachment-arrow-right")&&g>0){f=c+(g+i);d.stop().animate({left:(-g-i)},f*5,"linear")}else{if(g>0){f=c*-1;d.stop().animate({left:0},f*5,"linear")}}};a.getAttachmentScrollDim=function(){var c=this.getContent(),d={containerWidth:c.context.width,attachmentsWidth:0};c.find("li.j-attached-image, li.j-attached-video").each(function(){d.attachmentsWidth+=$j(this).outerWidth()});c=null;return d};a.showArrows=function(){var c=this.getContent();c.find("a.j-attachment-arrow").css("display","block");c.find("ul.j-attached-items").css("margin-left","20px");c=null};a.hideArrows=function(){var c=this.getContent();c.find("a.j-attachment-arrow").hide();c.find("li.j-attached-image, li.j-attached-video").first().css("margin-left","0px");c=null}});jive.MicroBlogging.AttachmentView.views={};
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommonView=jive.AbstractView.extend(function(a,b){this.init=function(c){b.init.call(this,c);this.idPostfix=c.idPostfix;this.maxCharCount=c.maxCharCount;this.statusInput=null;this.attachmentsView=null;this.$waitingViewElem=null;this.$formElem=null;this.$imageFormElem=null;this.mobileUI=c.mobileUI||jive.rte.mobileUI;this.atMentionBtn=c.atMentionBtn;this.imagesEnabled=c.imagesEnabled||window._jive_images_enabled||false;this.imgAttachmentBtn=c.imgAttachmentBtn;this.submitBtn=c.submitBtn;this.cancelBtn=c.cancelBtn;if(c.supportAttachments==undefined){this.supportAttachments=true}else{this.supportAttachments=c.supportAttachments}this.doNotAnimate=!!c.doNotAnimate;this.allowTagCreation=c.allowTagCreation};this.postRender=function(){var c=this;if(this.mobileUI&&this.atMentionBtn.length){this.atMentionBtn.remove()}this.createFormElem();this.createWaitingViewElem();this.createWatingView();this.createActionContainer();this.statusInput=new jive.MicroBlogging.StatusInput(this.getContent().find(".jive-js-statusinput"),{maxCharCount:this.maxCharCount,idPostfix:this.idPostfix,focusOnRdy:true,doNotAnimate:this.doNotAnimate,allowTagCreation:this.allowTagCreation,i18n:{}});this.statusInput.addListener("characterLenMsg",c.handleCharacterLenMsg.bind(c)).addListener("atMentionFinished",c.handleAtMentionResult.bind(c));this.atMentionBtn.click(function(d){c.handleAtMentionClick(d,$j(this))});if(this.imgAttachmentBtn&&this.imagesEnabled){this.imgAttachmentBtn.jiveFileButton({name:"image",title:jive.i18n.getMsg("we.form.addimage"),id:"imageFile"}).bind("choose",function(f,g){var d=c._getMetaImageContainer().find("form");d.prepend(g);d.submit();d=null});this.imgAttachmentBtn.keydown(function(d){if(d.keyCode==13){$j(this).find("input[name=image]").click()}})}this._getMetaImageContainer().find("form").submit(function(){var d=$j(this);if(d.find("input[type=file]").val()==""){d=null;return false}c.handleImageURLMatch(null);d=null;return false});this.submitBtn.click(function(d){c.handleSubmitClick(d)});if(this.cancelBtn){this.cancelBtn.click(function(d){c.attachmentsView.removeAllAttachments();c.attachmentsView.reset();c.resetStatusInput();c.emit("cancel")})}this.statusInput.addListener("linkURLMatch",function(d){c.handleLinkURLMatch(d)}).addListener("imageURLMatch",function(d){if(!c.supportAttachments){return}c.handleImageURLMatch(d)}).addListener("youtubeURLMatch",function(d){if(!c.supportAttachments){return}c.handleYoutubeURLMatch(d)}).addListener("focus",function(d){c.handleFocus(d)});this.attachmentsView=new jive.MicroBlogging.AttachmentView(this._getAttachmentsViewOptions());this.attachmentsView.addListener("removeImage",function(e,d){if(!c.supportAttachments){return}c.emitP("removeImage",e).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){d.emitError(g,f)})})};this.getStatusInput=function(){return this.statusInput};this.focus=function(){this.statusInput._focus()};this.createWaitingViewElem=function(){throw"createWaitingViewElem method is abstract. Need to implmenet in subclass"};this.createWatingView=function(){this.waitingView=new jive.shared.FormWaitingView(this.$waitingViewElem)};this.enableForm=function(){this.waitingView.enableForm()};this.disableForm=function(){this.waitingView.disableForm()};this.createFormElem=function(){throw"createFormElem method is abstract. Need to implement in subclass"};this.createActionContainer=function(){this.$actionContainer=this.$formElem.find("[id^=status-input-actions-]")};this.handleAtMentionClick=function(d,c){this.statusInput.handleAtMentionButtonClick();this.emit("atMentionClick");d.stopPropagation()};this.handleAtMentionResult=function(){return null};this.handleCharacterLenMsg=function(d){var f=arguments[1]||{},c=this.$formElem.eq(0).find(".j-js-status-input-characters-remaining"),e=({ok:{msg:""},warning:{msg:jive.wall.charLenErrors({error:false,numChars:f.charLeft}),className:"warning"},error:{msg:jive.wall.charLenErrors({error:true,numChars:f.charOver}),className:"danger"}})[d];c.html(e.msg).removeClass("warning danger");if(d!=="ok"){c.addClass(e.className)}};this.handleLinkURLMatch=function(d){var c=this;this.emitP("linkURLMatch",d).addCallback(function(f,e){c.renderResolvedLink(e,f)}).addErrback(function(f,e){c.renderError(f,e)})};this.renderResolvedLink=function(d,c){this.statusInput.swapLinkFor(d,c)};a.getDraftData=function(){return null};this._getAttachmentsViewOptions=function(){return{selector:this.selector+" .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().find("div.j-status-input-attach-action-container div.j-meta-image-container")};this.handleImageURLMatch=function(d){this.attachmentsView.showLoadingNotification();this.setDataForURLImage(d);var c=this;this.emitP("imageURLMatch",d,this.$imageFormElem,this.getDraftData()).addCallback(function(f,e){c.renderImageAttachment(e,f)}).addErrback(function(f,e){c.attachmentsView.hideLoadingNotification();c.renderError(f,e)})};this.handleYoutubeURLMatch=function(d){this.attachmentsView.showLoadingNotification();var c=this;this.emitP("youtubeURLMatch",d,this.getDraftData()).addCallback(function(f,e){c.renderVideoAttachment(e,f)}).addErrback(function(f,e){c.renderError(f,e)})};this.renderImageAttachment=function(c,d){this.attachmentsView.add(c,d)};this.renderVideoAttachment=function(c,d){this.attachmentsView.add(c,d)};a.setDataForURLImage=function(c){this.$imageFormElem.find("input[name=imageURL]").val(c)};this.handleFocus=function(d){var c=this;if(this.$actionContainer.is(":hidden")){this._initialStatusInputHeight=this.statusInput.getContainer().height();if(!this.imagesEnabled){this.imgAttachmentBtn.hide()}if(($j.browser.msie&&$j.browser.version<7)){this.$actionContainer.show();this.$actionContainer.addClass("j-act-comment-actions clearfix")}else{this.$actionContainer.addClass("j-act-comment-actions clearfix");this.$actionContainer.css({opacity:0,height:1}).show().animate({height:"24px",opacity:1},200,"linear",function(){$j(this).css("height","auto")})}this.$formElem.closest("article").find("div.j-act-reply-form").addClass("r-active");this.$formElem.closest("article").find("div.eae-reply-avatar").fadeIn("fast")}if(c.getContent().find("#j-js-mb-success").length){c.getContent().find("#j-js-mb-success").fadeOut("fast",function(){$j(this).remove();c.getContent().find(".j-mb-last-update").show()})}this.emit("focus")};this.handleSubmitClick=function(d){if(this.statusInput.getCharCount()!=0||this.attachmentsView.getContent().find("li:not(.j-attached-loading)").length){if(this.maxCharCount&&this.statusInput.getCharCount()>this.maxCharCount){this.renderError(jive.wall.submitErrors({key:"over"}));this.emit("submitError",jive.wall.submitErrors({key:"over"}))}else{$j(".jive-js-error-general",this.$formElem).hide();this.waitingView.disableForm();var c=this;this.emitP("submit",this.getDataFromDom()).addCallback(function(f,e){c.renderResponse(f)}).addErrback(function(f,e){c.renderError(f,e)})}}else{this.renderError(jive.wall.submitErrors({key:"none"}));this.emit("submitError",jive.wall.submitErrors({key:"none"}))}};this.getDataFromDom=function(){throw"getDataFromDom method is abstract. Need to implmenet in subclass"};this.normalizeData=function(){return this.statusInput.getSubmitVals()};this.renderError=function(e,c){this.waitingView.enableForm();var d=$j(".jive-js-error-general",this.$formElem);d.text(e);d.slideDown(100);d.attr("aria-invalid","true");d=null;setTimeout(function(){$j(".jive-js-error-general",this.$formElem).fadeOut("fast")},3500)};this.renderResponse=function(c){this.waitingView.enableForm();this.attachmentsView.reset()};this.renderResponseCommon=function(e){this.getContent().find("#j-js-mb-success").fadeOut("fast");var d=this.getContent().find(".j-mb-last-update");if(d.length){d.hide();if(e.wallentry.status!="AWAITING_MODERATION"){var f=$j(e.wallentry.message).text();f=$j("<div/>").text(f).html();d.html(jive.statusinput.containers.microbloggingStatusInputLastUpdate({latestStatusUpdate:{text:f,url:e.wallentry.URL,commentcount:0}}))}}var c=$j(jive.statusinput.containers.microbloggingStatusInputSuccess({entry:e.wallentry}));c.hide();c.find(".j-js-mb-success-dismiss").click(function(){c.fadeOut("fast",function(){$j(".j-mb-hint").show();d.show()})});this.getContent().append(c);c.animate({height:"toggle"},{duration:600},function(){if(e.wallentry.meta&&e.wallentry.meta.length>0){c.find(".jive-js-attachment-container").slideDown("fast",function(){$j(this).animate({opacity:1},500)})}});this.resetStatusInput()};this.resetStatusInput=function(){this.statusInput.resetText();this.$actionContainer.hide();this.$formElem.closest("article").find("div.eae-reply-avatar").hide();this.$formElem.closest("article").find("div.j-act-reply-form").removeClass("r-active");var c=this.statusInput.getContainer();c.css("minHeight","24px");c.prev(".jive-js-statusinput-default").show();c.removeClass("j-mb-focused");c.removeAttr("contenteditable");c=null}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingView=jive.MicroBlogging.CommonView.extend(function(a,b){this.init=function(c){this.options=c;b.init.call(this,c)};a.getSoyTemplate=function(c){return jive.statusinput.containers.microbloggingStatusInput(c)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){var c=this.getContent();this.$formElem=c.find("form");this.$imageFormElem=c.find("div.j-meta-image-container form")};this.renderResponse=function(c){b.renderResponse.call(this,c);this.renderResponseCommon(c)};this.getDataFromDom=function(){return{wallentry:{message:this.normalizeData()}}};this.handleAtMentionResult=function(h,e){var f=this;if(h&&h.split("-").length==2){var d=h.split("-")[0],g=h.split("-")[1];if(d!=3){var c=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});if(c&&d){c.checkEntitlement(d,g).addCallback(function(i){if(!i){var j="";if(d==700){j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}$j("<p>"+e+" "+j+"</p>").message({style:"warn"})}})}}}}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MBCreateModalController=jive.MicroBlogging.CommonController.extend(function(a,b){this.init=function(c){if(!c){c={}}c.trackingID="cmenu";this.options=c;b.init.call(this,c)};a.initMBView=function(){var c=$j("#j-js-mb-modal-editor");this.microbloggingView=new jive.MicroBlogging.MicroBloggingView({selector:"#j-js-mb-modal-editor",idPostfix:"mbASHeader",atMentionBtn:c.find("a.jive-js-mention-button"),imgAttachmentBtn:c.find("a.jive-js-imgattach-button"),submitBtn:c.find("a.j-status-input-submit"),maxCharCount:420})};a.submitSuccessCallback=function(c,d){b.submitSuccessCallback.call(this,c,d);$j("div.jive-modal-quickcreate").trigger("close");$j(jive.statusinput.containers.microbloggingStatusInputModalSuccess({wallentry:c.wallentry})).message({style:"success"})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.direct_messaging=="undefined"){jive.soy.direct_messaging={}}jive.soy.direct_messaging.modal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-modal-direct-messaging" class="jive-modal j-pop">');jive.shared.displayutil.a11yBoundary({type:"dialog"},B);B.append('<header class="j-modal-header"><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.sendADirectMessage"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content j-pop-main clearfix"><div id="share-error" class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true"></div><form class="j-form"><p class="ie-zindex-fix"><label for="recipients">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.label.to"),[])),'</label><input type="text" name="share-users" id="recipients" class="j-user-autocomplete j-autocomplete-input jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="off" role="combobox"/></p><p class="j-direct-message-label-area"><label for="jive-direct-message-body">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.label.message"),[])),'</label></p><div id="statusInputs-direct-message-text" class="j-mb-entry"><span class="j-508-label" id="jive-508-label-message-direct-message-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.input.aria.label"),[])),'</span><div class="j-rc4 jive-statusinput-default font-color-meta  jive-statusinput jive-form-element-text jive-js-statusinput-default"></div><div id="message-direct-message-text" class="j-rc4 jive-js-statusinput jive-statusinput jive-form-element-textarea" style="position:relative; min-height:120px;max-height:250px;overflow:auto"></div></div>');jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<div class="j-status-input-actions j-pop-row j-last j-act-comment-actions clearfix"><input class="js-direct-messaging-form-submitBtn j-btn-global j-btn-callout" type="submit" name="share-content-submit" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.send.button"),[])),'"/><button type="button" class="close j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'</button><a href="javascript:void(0);" class="j-btn-global j-wall-meta-image jive-js-imgattach-button" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[])),'"><span class="jive-icon-med jive-icon-photo"></span></a><a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[])),'"><label id="j-direct-messaging-mention-label" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[])),'</label><span class="jive-icon-med jive-icon-mention" aria-labelledby="j-direct-messaging-mention-label"></span></a></div></form>');jive.statusinput.containers.statusInputActionContainer({canCreateImage:true,canCreateVideo:false,isPrivateDM:true},B);B.append("</div>");jive.shared.displayutil.a11yBoundary({type:"dialog",isEnd:true},B);B.append("</div>");return C?"":B.toString()};jive.soy.direct_messaging.successMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.sendSuccess"),[])),"</p>");return C?"":B.toString()};jive.soy.direct_messaging.notRelated=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.notrelated"),[])),"</p>");return C?"":B.toString()}
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MicroBloggingController=jive.MicroBlogging.CommonController.extend(function(a){this.getMessageObject=function(){var b={message:this.microbloggingView.getMessage()};if(this.draftWallEntry&&this.draftWallEntry.wallentry){b=$j.extend(true,this.draftWallEntry.wallentry,b)}return b};a.initMBView=function(){var b=$j("#jive-modal-direct-messaging");this.microbloggingView=new jive.DirectMessaging.MicroBloggingView({selector:"#statusInputs-direct-message-text",idPostfix:"mbASHeader",atMentionBtn:b.find("a.jive-js-mention-button"),imgAttachmentBtn:b.find("a.jive-js-imgattach-button"),submitBtn:b.find("a.js-direct-messaging-form-submitBtn")})};a.createDraft=function(d,c){var b=this;this.microbloggingService.createDraft({objectType:14,objectID:1},{wallentry:{privateDM:true}}).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})}});
;
jive.namespace("DirectMessaging");jive.DirectMessaging.create=function(c){var d=new jive.Browse.User.ItemSource(),b=new jive.DirectMessaging.MessageSource(d,c),a=new jive.DirectMessaging.CreateMessageView();return new jive.DirectMessaging.Main(b,a)};jive.DirectMessaging.sendMessageToUserIds=function(c){var b=new jive.conc.Promise(),a=jive.DirectMessaging.create();b.addCallback($j.proxy(a.showModal,a));a.addRecipientsById(c,b)};jive.DirectMessaging.isContentTypeEqualTo=function(a){return a+""==="109016030"};
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MessageSource=jive.RestService.extend(function(a,b){jive.conc.observable(this);a.resourceType="wall";a.pluralizedResourceType=a.resourceType;this.init=function(d,c){this.urlParams="/14/1";if(c&&c.trackingID){this.urlParams+="?sr="+c.trackingID}this.userSource=d;b.init.call(this,c)};this.getUsersByIds=function(){var c=this,f=new jive.conc.Promise(),e=Array.prototype.slice.call(arguments),g=[];function d(){if(e.length>0){c.userSource.get(e.shift()).addCallback(function(h){g.push(h);d()})}else{f.emitSuccess(g)}}d();return f};this.sendMessage=function(d){var c=new jive.conc.Promise();$j.ajax({data:JSON.stringify({wallentry:$j.extend({},d,{privateDM:true})}),type:"POST",url:this.RESOURCE_ENDPOINT+this.urlParams,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,g,f){c.emitSuccess(e)},error:function(g,i,h){try{var f=$j.parseJSON(g.responseText);if(f&&f.error&&f.error.message){c.emitError(f.error.message,f.error.code)}}catch(e){c.emitError(null,g&&g.status)}}});return c}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.common=="undefined"){jive.eae.common={}}jive.eae.common.rteTextArea=function(A,C){var B=C||new soy.StringBuilder();B.append('<textarea id="',soy.$$escapeHtmlAttribute(jive.soy.func.randomString()),'" class=\'wysiwygtext\' name="body" rows="15" cols="30" ></textarea>');return C?"":B.toString()};jive.eae.common.rtePanel=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-panel-rte-wrap clearfix"><div class="j-panel-rte-loading j-act-reply" style="display:none"><div class="j-rte-placeholder"></div></div><div class="j-panel-rte j-act-reply" style="display:none"><div class="j-reply-to j-js-reply-to"></div><div class="j-act-reply-form">',(A.user.anonymous)?'<div class="jive-reply-post-anonymous j-form"><div><label for="replyGuestName-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span><input class="replyGuestName" type="text" name="replyGuestName" id="replyGuestName-id"></label></div><div><label for="replyGuestName-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+'</span><input class="replyGuestEmail" type="text" name="replyGuestEmail" id="replyGuestEmail-id"></label></div>'+((!A.hideGuestURLField)?'<div><label for="replyGuestUrl-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.wsite_address.label"),[]))+'<input class="replyGuestUrl" type="text" name="replyGuestUrl" id="replyGuestUrl-id"></label></div>':"")+"</div>":"",'<p class="jive-error-text jive-comment-error jive-error-box" style="display:none;padding:5px;color:#c20000;font-weight:bold"></p><form method="post" action="javascript:void(0);" name="jive-comment-post-form" class="j-panel-rte-view sammy-app-1288289329294-553-">');jive.eae.common.rteTextArea(null,B);B.append((A.externallyVisible=="true")?'<div class="j-rte-message"><span class="jive-icon-med jive-icon-partner"></span><span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.content.reply.warn.visible"),[]))+"</em></span></div>":"",'<div class="jive-form-buttons"><input type="submit" name="post" class="j-btn-global j-btn-callout" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("we.comment.singular"),[])),"\" /><a href='#' class='j-panel-hide-rte-link j-btn-global'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</a></div></form></div></div></div>");return C?"":B.toString()};jive.eae.common.replyingToText=function(B,D){var C=D||new soy.StringBuilder();if(B.type=="user"){var A=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(B.object,A);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.reply_to.gtitle"),[])),arg0:A.toString(),noAutoEscape:true},C)}else{if(B.type=="content"){jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.comment.on.originalX",arg0:(B.object.contentTypeName)?soy.$$escapeHtml(String(B.object.contentTypeName).toLowerCase()):"",noAutoEscape:true},C)}}C.append(' <img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/inline-reply-arrow.png"))),'"/>',(B.externallyVisible=="true")?"":"");return D?"":C.toString()};jive.eae.common.replyCountText=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-act-replycount">',(A.activityContainer.jiveObject.typeThread||A.activityContainer.jiveObject.typeShare||A.activityContainer.jiveObject.typeDirectMessage)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.reply.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.replies.lc"),[])))+"</a>":(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'#comments" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomment.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomments.lc"),[])))+"</a>":'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'#comments" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comment.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comments.lc"),[])))+"</a>");if(A.showCurrentCount){jive.eae.common.currentCountText(A,B)}B.append("</span>");return C?"":B.toString()};jive.eae.common.currentCountText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.numCurrent)?'<span class="j-new-count font-color-new">'+((A.activityContainer.numCurrentSubActivities)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.new"),[A.activityContainer.numCurrentSubActivities])):(A.streamType!="communications")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.new"),[])):"")+"</span>":(A.forceCount)?'<span class="j-new-count font-color-new">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.new"),[1]))+"</span>":"");return C?"":B.toString()};jive.eae.common.collapsedExcerptText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.deletedType=="reply")?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.deleted.reply.description"),[]))+"</em>":(A.deletedType=="comment")?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.deleted.comment.description"),[]))+"</em>":(A.deletedType=="mention")?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.deleted.mention.description"),[]))+"</em>":(A.text)?((A.moderated)?'<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.posts.waitingMod.text"),[]))+"</div>":"")+A.text+((A.hasMoreText)?"&hellip;":""):"");return C?"":B.toString()};jive.eae.common.subactivity=function(A,D){var B=D||new soy.StringBuilder();if(A.activityContainer.jiveObject.activityContentExcerptTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.activityContentExcerptTemplate,data:(function(){var G={};var F=[["activityContainer",A.activityContainer],["activity",A.activity],["streamType",A.streamType],["user",A.user],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo],["isHidden",A.isHidden],["addedInline",A.addedInline],["hideStub",A.hideStub],["forceCurrent",A.forceCurrent]];for(var E=0;E<F.length;E+=1){G[F[E][0]]=F[E][1]}return G})(),failGracefully:true},B)}else{B.append('<div id="node-collapsed-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="j-act-node',(A.addedInline)?" j-js-addedInline":"",(A.activityContainer.canReply)?" j-act-rte-replyable":"",(A.streamType=="communications"&&(A.activity.current||A.forceCurrent))?" j-current":"",(A.streamType=="communications"&&(A.activity.content.typeMention||A.activity.containsMention))?" j-act-contains-mention":"",'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',(A.activity.content.typeMention)?soy.$$escapeHtmlAttribute(A.activity.content.context.id):soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',(A.activity.content.typeMention)?soy.$$escapeHtmlAttribute(A.activity.content.context.objectType):soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><div id="excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="',(A.activity.content.deleted)?"j-mod font-color-meta-light":"reply j-act-comment",'">');if(A.activity.content.deleted){jive.eae.common.collapsedExcerptText({text:"",hasMoreText:false,deletedType:A.activity.content.deletedMention?"mention":"comment",moderated:false},B);B.append(" ",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])))}else{B.append((A.streamType=="communications"&&(A.activity.content.typeMention||A.activity.containsMention))?'<div class="j-act-mentioned font-color-okay"><span class="jive-icon-med jive-icon-mention-label"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.were.incontext"),[]))+"</div>":"",'<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,currentUserPartner:A.user.partner}),B);B.append('</div><div class="j-excerpt',(!A.activity.content.summaryIsExcerpt)?" j-non-excerpt":"",' clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var C=new soy.StringBuilder();jive.eae.common.activityContentText({activity:A.activity,noAutoescape:true},C);jive.eae.common.activityContentCommon({contentTxt:C.toString(),hasMoreText:A.activity.hasMoreText},B)}B.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",">");if(A.activity.content.deleted){B.append('<div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.common.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append('</div><div class="j-author-act font-color-meta-light">',(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</div>")}else{B.append('<div class="j-author-act font-color-meta-light">');jive.eae.common.activityAuthorNoVerb({activityUser:A.activity.activityUser,object:A.activity.content},B);B.append(" ",(A.activity.type=="mentioned"&&A.activity.content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.context.jiveObjectURL)+'" class="font-color-meta-light">':(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.type=="mentioned"&&A.activity.content.context.jiveObjectURL||A.activity.content.jiveObjectURL)?"</a>":"",'</div><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.common.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append("</div>");jive.eae.common.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},B);B.append('<div class="j-meta-actions font-color-meta">');jive.eae.common.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.typeMention?A.activity.content.context.objectType:A.activity.content.objectType,objectId:A.activity.content.typeMention?A.activity.content.context.id:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,user:A.user,location:"subActivity",streamType:A.streamType},B);B.append("</div>")}B.append("</div>")}B.append("</div></div>")}return D?"":B.toString()};jive.eae.common.activityAuthor=function(A,C){var B=C||new soy.StringBuilder();if(!A.activityUser.anonymous){if(A.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activityUser,{renderInvisible:A.object.typeExternalActivity}),B)}else{if(A.deleted){}else{B.append(soy.$$escapeHtml(A.activityUser.displayName))}}}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityUser},B)}if(!A.object.typeShare){B.append(" ");jive.eae.activitystream.include.activityVerbPhrase(A,B)}else{B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.shared"),[]))," ")}return C?"":B.toString()};jive.eae.common.activityAuthorNoVerb=function(A,C){var B=C||new soy.StringBuilder();if(!A.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activityUser,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityUser},B)}B.append(" ");if(A.object.parentAuthor&&!A.object.typeWallEntryComment){jive.eae.common.displayParentAuthor({parentAuthor:A.object.parentAuthor},B)}else{if(A.object.context&&A.object.context.parentAuthor&&!A.object.context.typeWallEntryComment){jive.eae.common.displayParentAuthor({parentAuthor:A.object.context.parentAuthor},B)}}return C?"":B.toString()};jive.eae.common.displayParentAuthor=function(B,E){var C=E||new soy.StringBuilder();var A=new soy.StringBuilder();var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(B.parentAuthor,D);jive.shared.soy.escapeHelper({stringToEscape:D.toString()},A);jive.shared.soy.i18nHelper({i18nKey:"activity.type.toX",arg0:A.toString(),noAutoEscape:true},C);return E?"":C.toString()};jive.eae.common.activityNavActions=function(A,E){var B=E||new soy.StringBuilder();if(A.location!="subActivity"){if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){B.append(' <span class="j-bullet">&#8226;</span> ');if(A.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:String(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},B)}else{var C=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},C);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:C.toString(),noAutoEscape:true},B)}}}B.append((A.object.canRepost)?' <span class="j-bullet">&#8226;</span> <span class="j-repost-item" id="j-repost-item-'+soy.$$escapeHtmlAttribute(jive.soy.func.randomString())+"-"+soy.$$escapeHtmlAttribute(A.object.id)+'"><a href="#" class="j-repost" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost"),[]))+"</a></span>":"");if(A.user&&!A.user.anonymous&&A.activityContainer.sharable&&!A.object.typeExternalActivity&&(A.location=="Title"||A.location=="parentPreview")){B.append(' <span class="j-bullet">&#8226;</span> ');jive.soy.share.control({objectId:soy.$$escapeHtml(A.activityContainer.jiveObject.typeThread?A.activityContainer.jiveObject.threadID:A.objectId),objectType:soy.$$escapeHtml(A.activityContainer.jiveObject.typeThread?1:A.objectType),type:"text"},B)}if(A.user&&!A.user.anonymous&&A.object.typeExternalActivity&&A.activityContainer.sharable){B.append(' <span class="j-bullet">&#8226;</span> ');jive.soy.share.control({objectId:A.objectId,objectType:A.objectType,type:"text"},B)}B.append((A.activityContainer.canReply&&!A.object.deleted&&!A.activityContainer.jiveObject.typeWallEntry&&!A.activityContainer.jiveObject.typeDirectMessage&&!A.activityContainer.jiveObject.typeShare&&!A.object.bookmarkedContent)?' <span class="j-bullet">&#8226;</span> <a class="j-reply-rte" href="javascript:void(0);">'+((A.object.typeDocument&&!(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)||A.object.typeBlogPost||A.object.typeExternalActivity||A.object.typeExternalURL||A.object.typePoll)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[])):(A.object.typeDocument&&(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129))?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.addauthorcomment"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.reply"),[])))+"</a>":"",(A.object.typeWallEntry&&A.activityContainer.canReply&&!A.object.deleted&&A.streamType!="communications"&&A.location=="parentPreview")?' <span class="j-bullet">&#8226;</span> <a id="showMicroRTE_'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.domIDPostfix)+'" class="j-reply-micro" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[]))+"</a>":"");if(A.likable&&!A.object.deleted&&!A.activityContainer.jiveObject.typeDirectMessage){if(A.activityContainer.jiveObject.objectType==2&&A.location=="Title"){B.append(' <span class="j-bullet">&#8226;</span> <span class="j-js-metooliking-control">');jive.eae.acclaim.metoo.likeControl({canLike:A.user&&(!A.object.typeWallEntry||A.object.canRate)&&!A.amAnAuthor,liked:A.liked,likeCount:A.likeCount,objectId:A.objectId,objectType:A.objectType,showIcon:false,type:"mini"},B);B.append("</span>")}else{B.append('<span class="j-js-liking-control"></span>')}}B.append(((A.location=="Title"||A.location=="parentPreview")&&A.streamType!="all"&&A.streamType!="profile"&&A.streamType!="context"&&A.streamType!="communications"&&(!A.filterType||A.filterType.indexOf("all")!=-1))?' <span class="j-bullet">&#8226;</span> <a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a>":"");return E?"":B.toString()};jive.eae.common.repostModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-repost-modal" id="jive-js-repost-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.repost.default.text"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'<span class="j-close-icon j-ui-elem" role="img"></span></a><div class="j-act-mb"><div class="jive-modal-content clearfix">',(A.mbCreationModerated)?'<div class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[]))+"</div>":"");jive.eae.common.entryRepost(A,B);B.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.comment"),[])),"</h4>");jive.statusinput.containers.repostStatusInput({statusID:"eae-editor-repost-"+A.object.domIDPostfix,jiveObject:A.object,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,canAtMention:A.canAtMention},B);B.append("</div></div></div>");return C?"":B.toString()};jive.eae.common.repostModalSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",(A.wallentry.status!="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.success"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])),"</p>");return C?"":B.toString()};jive.eae.common.entryRepost=function(A,D){var B=D||new soy.StringBuilder();B.append('<div class="j-wall-repost-content"><div class="j-wall-repost-header">');var C=new soy.StringBuilder();if(!A.author.anonymous){jive.shared.displayutil.userDisplayNameLink(A.author,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.object},C)}jive.shared.soy.i18nHelper({i18nKey:"eae.mb.repost.originally_posted_by",arg0:C.toString(),noAutoEscape:"true"},B);B.append("</div>",(A.object&&A.object.text)?A.object.text:"");jive.eae.common.renderStreamAttachments({idPrefix:"reposted-attachments",object:A.object,domIDPostfix:A.object.domIDPostfix},B);B.append("</div>");return D?"":B.toString()};jive.eae.common.parentPreviewLinks=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="font-color-meta-light paren">(</span><a href=\'#\' class="j-js-show-full-content j-act-preview font-color-meta" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'" ',(A.activityContainer.jiveObject.typePoll)?'data-containerID="'+soy.$$escapeHtmlAttribute(A.activityContainer.container.id)+'" data-containerType="'+soy.$$escapeHtmlAttribute(A.activityContainer.container.type)+'" ':"",' aria-hidden="false" ',(A.activityContainer.jiveObject.typeTask||A.activityContainer.jiveObject.typeExternalActivity)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.show_details"),[]))+'">':'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full.link.title"),[]))+'">','<span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full.more"),[])),'</span></a><a href=\'#\' class="j-js-hide-full-content j-act-preview font-color-meta" style="display:none;" aria-hidden="true" ',(A.activityContainer.jiveObject.typeTask||A.activityContainer.jiveObject.typeExternalActivity)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.show_details"),[]))+'">':'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">','<span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full.less"),[])),'</span></a><span class="font-color-meta-light paren">)</span>');return C?"":B.toString()};jive.eae.common.microRTEContainer=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject&&(A.activityContainer.canReply||A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.canComment&&A.activityContainer.jiveObject.id==A.object.id)){B.append('<div id="microRTEContainer_',soy.$$escapeHtmlAttribute(A.object.domIDPostfix),'" class="j-act-reply j-act-micro-rte" style="display:none;"><div class="r-active">');if(!A.activityContainer.jiveObject.typeDirectMessage&&!A.activityContainer.jiveObject.typeShare&&!A.activityContainer.jiveObject.typeWallEntry){B.append('<div class="j-act-replyinfo">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.collapsed.commenting_on"),[])),' <span class="jive-icon-sml ',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><strong>');jive.eae.common.activityContainerJoSubject(A,B);B.append("</strong></div>")}B.append((A.user.anonymous)?'<div class="jive-reply-post-anonymous j-form"><div><label for="replyGuestName-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span><input class="replyGuestName" type="text" name="replyGuestName" id="replyGuestName-id"></label></div><div><label for="replyGuestEmail-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+'</span><input class="replyGuestEmail" type="text" name="replyGuestEmail" id="replyGuestEmail-id"></label></div><div><label for="replyGuestUrl-id">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.wsite_address.label"),[]))+'<input class="replyGuestUrl" type="text" name="replyGuestUrl" id="replyGuestUrl-id"></label></div></div>':"");if(A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.canComment||A.activityContainer.jiveObject.typeDirectMessage&&A.activityContainer.canReply||A.activityContainer.jiveObject.typeShare&&A.activityContainer.canReply){jive.statusinput.containers.microbloggingCommentStatusInput({isCollapsedActivity:true,user:A.user,statusID:"eae-mb-comment-editor-"+A.object.domIDPostfix,jiveObject:A.activityContainer.jiveObject,canAtMention:A.canAtMention,visibleToExtCollaborator:A.object.visibleToExtCollaborator},B)}B.append("</div></div>")}return C?"":B.toString()};jive.eae.common.repliedToIcon=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-icon-sml jive-icon-arrow-top"></span>');return C?"":B.toString()};jive.eae.common.activityContentCommon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.contentTxt!="")?"<p>"+A.contentTxt+((A.hasMoreText)?"&hellip;":"")+"</p>":"");return C?"":B.toString()};jive.eae.common.generateUserMetaData=function(A,C){var B=C||new soy.StringBuilder();B.append("{anonymous: ",soy.$$escapeHtml(A.user.anonymous),", avatarID: ",soy.$$escapeHtml(A.user.avatarID),", displayName: '",soy.$$escapeHtml(A.user.displayName),"', email: '",soy.$$escapeHtml(A.user.email),"', enabled: ",soy.$$escapeHtml(A.user.enabled),", entitled: ",soy.$$escapeHtml(A.user.entitled),", id: ",soy.$$escapeHtml(A.user.id),", objectType: ",soy.$$escapeHtml(A.user.objectType),", username: '",soy.$$escapeHtml(A.user.username),"'}");return C?"":B.toString()};jive.eae.common.renderStreamAttachments=function(A,C){var B=C||new soy.StringBuilder();if(A.object.meta&&A.object.meta.length>0){jive.statusinput.containers.renderAttachmentsContainer({id:(A.idPrefix)?soy.$$escapeHtml(A.idPrefix+"-attachmentContainer-"+A.domIDPostfix):soy.$$escapeHtml("attachmentContainer-"+A.domIDPostfix),entry:A.object,visible:true},B);jive.shared.soy.resourceInlineJs({code:"$j(function() {var id = '"+((A.idPrefix)?soy.$$escapeHtml(A.idPrefix+"-attachmentContainer-"+A.domIDPostfix):soy.$$escapeHtml("attachmentContainer-"+A.domIDPostfix))+"', attachmentView = new jive.MicroBlogging.AttachmentView({selector:'#' + id}); attachmentView.postRender(); jive.MicroBlogging.AttachmentView.views[id] = attachmentView;});"},B)}else{if(A.object.typeExternalActivity&&A.object.mediaLink){B.append('<div class="j-act-attachment"><a href="');jive.eae.common.formatMediaLinkUrl__C2bf6(A.object,B);B.append('" target="_blank" title="',soy.$$escapeHtmlAttribute(A.object.mediaLink.filename?A.object.mediaLink.filename:""),'">',(A.object.mediaLink.thumbnailUrl)?'<div class="j-media-attachment"><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.object.mediaLink.thumbnailUrl))+'" title="'+soy.$$escapeHtmlAttribute(A.object.mediaLink.title)+'" alt="" width="'+soy.$$escapeHtmlAttribute(A.object.mediaLink.thumbnailWidth)+'" height="'+soy.$$escapeHtmlAttribute(A.object.mediaLink.thumbnailHeight)+'"/></div>':(A.object.mediaLink.iconClass)?'<span class="jive-icon-med '+soy.$$escapeHtmlAttribute(A.object.mediaLink.iconClass)+'"></span><span>'+soy.$$escapeHtml(A.object.mediaLink.title)+"</span>":"","</a></div>")}}return C?"":B.toString()};jive.eae.common.formatMediaLinkUrl=function(A,C){var B=C||new soy.StringBuilder();B.append((A.mediaLink.contentUrl)?(((A.mediaLink.contentUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.contentUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.contentUrl):(((A.mediaLink.imageUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.imageUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.imageUrl));return C?"":B.toString()};jive.eae.common.activityContainerJoSubject=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.subject)?A.activityContainer.jiveObject.subject:"");return C?"":B.toString()};jive.eae.common.activityContentText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activity&&A.activity.content)?(A.activity.content.deleted)?(A.activity.content.typeThread)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.deleted.reply.description"),[]))+"</em>":"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.deleted.reply.description"),[]))+"</em>":(A.activity.content.typeExternalActivity)?(A.activity.content.summary)?(A.noAutoescape)?A.activity.content.summary:soy.$$escapeHtml(A.activity.content.summary):"":((A.activity.moderated)?'<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.posts.waitingMod.text"),[]))+"</div>":"")+((A.activity.content.html)?(A.noAutoescape)?A.activity.content.html:soy.$$escapeHtml(A.activity.content.html):(A.activity.content.text)?(A.noAutoescape)?A.activity.content.text:soy.$$escapeHtml(A.activity.content.text):""):"");return C?"":B.toString()};jive.eae.common.jsI18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()};jive.eae.common.groupedUsers=function(G,E){var C=E||new soy.StringBuilder();var H=G.groupedUserList;var J=H.length;for(var I=0;I<J;I++){var F=H[I];if(F&&(I<3||I==3&&G.groupedUserList.length==4)){C.append((I==J-1&&G.groupedUserList.length>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[]))+" ":"");if(((F.username).match(new RegExp("^__invited__",""))||[]).length){C.append(soy.$$escapeHtml(F.email))}else{if(!F.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(F,{displayNameOverride:(G.user&&G.user.id==F.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C)}else{jive.shared.displayutil.renderGuestDisplayName({message:F},C)}}C.append((G.groupedUserList.length!=4&&I!=2||G.groupedUserList.length==4&&I!=3)?((G.groupedUserList.length>2)?",":"")+" ":"")}}if(G.groupedUserList.length>4){C.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[])),' <a href=\'#\' class="j-js-show-grouped-users" data-linkedID="grouped-user-set-',soy.$$escapeHtmlAttribute(G.othersListLinkID),'">',soy.$$escapeHtml(G.groupedUserList.length-3)," ",(G.groupedUserList.length>4)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.others"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.other"),[])),'</a><div class="j-js-grouped-users js-grouped-users-popover" data-linkedID="grouped-user-set-',soy.$$escapeHtmlAttribute(G.othersListLinkID),'" style="display:none"><ul class="j-grouped-user-list j-simple-list">');var B=G.groupedUserList;var D=B.length;for(var A=0;A<D;A++){var K=B[A];if(K&&A>=3){if(((K.displayName).match(new RegExp("^__invited__",""))||[]).length){C.append(soy.$$escapeHtml(K.email))}else{if(!K.anonymous){C.append('<li class="j-grouped-user">');jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(K,{displayNameOverride:(G.user&&G.user.id==K.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C);C.append("</li>")}else{C.append('<li class="j-grouped-user">');jive.shared.displayutil.renderGuestDisplayName({message:K},C);C.append("</li>")}}}}C.append("</ul></div>")}return E?"":C.toString()};jive.eae.common.contentTypeClassName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeExternalActivity)?"j-act-app":(A.activityContainer.jiveObject.typeDirectMessage)?"j-act-dm":(A.activityContainer.jiveObject.typeAnnouncement)?"j-act-announcement":(A.activityContainer.jiveObject.typeMention)?"j-act-mention":(A.activityContainer.jiveObject.typeShare)?"j-act-share":(A.activityContainer.jiveObject.typeExternalURL)?"j-act-bookmark":(A.activityContainer.jiveObject.typeThread)?"j-act-discussion j-thread-post":(A.activityContainer.jiveObject.typeDocument)?"j-act-document":(A.activityContainer.jiveObject.typeBlogPost)?"j-act-blog":(A.activityContainer.jiveObject.typePoll)?"j-act-poll":(A.activityContainer.jiveObject.typeTask)?"j-act-task":"j-act-generic");return C?"":B.toString()};jive.eae.common.contentTypeDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeExternalActivity)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.app"),[])):(A.activityContainer.jiveObject.typeDirectMessage)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.direct_message"),[])):(A.activityContainer.jiveObject.typeAnnouncement)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.announcement"),[])):(A.activityContainer.jiveObject.typeMention)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.mention"),[])):(A.activityContainer.jiveObject.typeShare)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.share"),[])):(A.activityContainer.jiveObject.typeExternalURL)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.bookmark"),[])):(A.activityContainer.jiveObject.typeThread)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[])):(A.activityContainer.jiveObject.typeDocument)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.document"),[])):(A.activityContainer.jiveObject.typeBlogPost)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.blog"),[])):(A.activityContainer.jiveObject.typePoll)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.poll"),[])):(A.activityContainer.jiveObject.typeTask)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.task"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.activity"),[])));return C?"":B.toString()};jive.eae.common.contentTypeParentPreviewStylingClassName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeThread)?"j-thread-post":(A.activityContainer.jiveObject.typeDocument)?"j-doc jive-content":(A.activityContainer.jiveObject.typeBlogPost)?"jive-content":(A.activityContainer.jiveObject.typeTask)?"j-task":(A.activityContainer.activityList[0].content.typeExternalActivity&&A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install")?"jive-content j-appinstall  j-rc5":"jive-content j-rc5");return C?"":B.toString()};jive.eae.common.loadingSpinner=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-loading-spinner"></span>');return C?"":B.toString()};jive.eae.common.digestSubItem=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.activityTemplate){if(A.user){jive.shared.soy.render({templateName:A.activity.content.activityTemplate,data:(function(){var F={};var E=[["activity",A.activity],["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["fromTemplate",A.fromTemplate]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{jive.shared.soy.render({templateName:A.activity.content.activityTemplate,data:(function(){var F={};var E=[["activity",A.activity],["activityContainer",A.activityContainer],["streamType",A.streamType],["fromTemplate",A.fromTemplate]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}}else{B.append("<div>");jive.eae.common.subactivity({activity:A.activity,activityContainer:A.activityContainer,user:A.user,isHidden:false,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,addedInline:false,hideStub:false,forceCurrent:false},B);B.append("</div>")}return C?"":B.toString()};jive.eae.common.readingPaneBottomReplyLinkKey=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeDocument||A.activityContainer.jiveObject.typeBlogPost||A.activityContainer.jiveObject.typeExternalURL||A.activityContainer.jiveObject.typePoll)?"eae.inbox.comment.on.originalX":"eae.inbox.reply.to.originalX");return C?"":B.toString()};jive.eae.common.formatMediaLinkUrl__C2bf6=function(A,C){var B=C||new soy.StringBuilder();B.append((A.mediaLink.contentUrl)?(((A.mediaLink.contentUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.contentUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.contentUrl):(((A.mediaLink.imageUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.imageUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.imageUrl));return C?"":B.toString()}
;
jive.namespace("DirectMessaging");jive.DirectMessaging.CreateMessageView=function(){jive.conc.observable(this);var d={},b,a=[];function c(f){var e=f.find("input[name=share-users]").val().split(/\s*,\s*/);return $j.extend(microbloggingController.getMessageObject(),{userIDs:e})}this.notifyError=function(g,f){$j("<p />").html(g).message({style:"error"});if(f&&f===4001){var e=jive.eae.common.jsI18nHelper({key:"we.directMessaging.cannot_be_empty.text"});var h=jive.eae.common.jsI18nHelper({key:"we.directMessaging.notEnoughRecipients"});if(g==e){$j("#message-direct-message-text").attr("aria-invalid","true").attr("aria-describedby",g).focus()}else{if(g==h){$j("#recipients").attr("aria-invalid","true").attr("aria-describedby",g).focus()}}}};this.notifySuccess=function(){$j(jive.soy.direct_messaging.successMessage()).message({style:"success"})};this.setRecipients=function(e){a=e.concat([]);return this};this.hideModal=function(){b.trigger("close");return this};this.lockSubmit=function(){b.find("input.js-direct-messaging-form-submitBtn").prop("disabled",true)};this.unlockSubmit=function(){b.find("input.js-direct-messaging-form-submitBtn").prop("disabled",false)};this.openModal=function(){var e=this;b=$j(jive.soy.direct_messaging.modal());var f=b.find("input[type=text]").eq(0);b.lightbox_me({destroyOnClose:true,closeClick:false,closeEsc:false,additionalFocusSelectors:"div#message-direct-message-text"});jive.DirectMessaging.CreateMessageView.initializeUserPicker(f).setUsers(a);a=[];microbloggingController=jive.DirectMessaging.CreateMessageView.initializeMicroBloggingController();b.find("form.j-form").submit((function(h,g){e.lockSubmit();g.emit("form-submit",c($j(this)));h.preventDefault()}).partial(undefined,this))}};jive.DirectMessaging.CreateMessageView.initializeMicroBloggingController=function(){return new jive.DirectMessaging.MicroBloggingController()};jive.DirectMessaging.CreateMessageView.initializeUserPicker=function(a){return new jive.UserPicker.Main({multiple:true,listAllowed:true,emailAllowed:false,canInvitePartners:true,$input:a,relatedMessage:$j(jive.soy.direct_messaging.notRelated())})};
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MicroBloggingView=jive.MicroBlogging.CommonView.extend(function(a,b){this.init=function(c){b.init.call(this,$j.extend({},c||{},{doNotAnimate:true}))};this.getMessage=function(){return this.statusInput.getSubmitVals(false)||""};this.createFormElem=function(){this.$formElem=this.getContent().closest("form:eq(0)");this.$imageFormElem=this._getMetaImageContainer().find("form")};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this._getAttachmentsViewOptions=function(){return{selector:"#jive-modal-direct-messaging .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().closest("form").next().find("div.j-meta-image-container")};this.handleSubmitClick=function(c){};this.handleAtMentionResult=function(i,e){var g=this;if(i&&i.split("-").length==2){var d=i.split("-")[0],h=i.split("-")[1];var c=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});var f=$j("#jive-modal-direct-messaging div.j-result-list li").map(function(){return $j(this).data("user-id")+""}).get();if(c&&d){c.checkEntitlement(d,h,f).addCallback(function(j){if(!j){var k="";if(d==3){k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(d==700){k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+e+" "+k+"</p>").message({style:"warn"})}})}}}});
;
jive.namespace("DirectMessaging");jive.DirectMessaging.Main=function(c,a){function b(f,e){a.unlockSubmit();a.notifyError(f,e)}function d(){a.hideModal();a.notifySuccess()}this.onSubmit=function(e){c.sendMessage(e).addCallback(d).addErrback(b);return this};this.addRecipientsById=function(f,e){e=e||new jive.conc.Promise();c.getUsersByIds(f).addCallback(function(g){a.setRecipients(g);e.emitSuccess()})};this.showModal=function(){a.openModal();return this};this.hideModal=function(){a.hideModal();return this};a.addListener("form-submit",this.onSubmit.bind(this))};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}jive.nav.menu.generic=function(A,G){var B=G||new soy.StringBuilder();B.append("<ul>");var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(C.visible){jive.nav.menu.link(C,B)}}B.append("</ul>");return G?"":B.toString()};jive.nav.menu.link=function(A,C){var B=C||new soy.StringBuilder();B.append((A.id!="jive-nav-link-password-edit"&&A.id!="jive-nav-link-help"&&A.id!="jive-nav-link-user-home"&&A.id!="jive-nav-link-theme")?"<li"+((A.itemCss)?' class="'+soy.$$escapeHtml(A.itemCss)+'"':"")+'><a id="'+soy.$$escapeHtml(A.id)+'" href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+'"'+((A.urlParams&&A.urlParams.contentType)?' data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'" ':"")+((A.headingKey)?' data-heading-key="'+soy.$$escapeHtml(A.headingKey)+'" ':"")+((A.linkCss)?'class="'+soy.$$escapeHtml(A.linkCss)+'"':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[]))+"</a></li>":"");return C?"":B.toString()}
;
if(typeof apple=="undefined"){var apple={}}if(typeof apple.header=="undefined"){apple.header={}}if(typeof apple.header.search=="undefined"){apple.header.search={}}apple.header.search.results=function(A,G){var B=G||new soy.StringBuilder();if(A.bean.results){B.append("<ul><li>",(A.bean.totalResults==0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.plugin.question.text.nofound"),[""])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.plugin.question.text.found"),[A.bean.totalResults])),(A.bean.containerBrowseID==0)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/search.jspa")+"?"+encodeURIComponent("facet")+"="+encodeURIComponent("content")+"&"+encodeURIComponent("type")+"="+encodeURIComponent("discussion")+"&"+encodeURIComponent("q")+"="+encodeURIComponent(A.bean.query)+"&"+encodeURIComponent("sort")+"="+encodeURIComponent("relevanceDesc")+"&"+encodeURIComponent("showAnsweredFirst")+"="+encodeURIComponent("true"))+'" class="ask-a-question-search-all">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.plugin.question.text.viewall"),[]))+"</a>":'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/search.jspa")+"?"+encodeURIComponent("facet")+"="+encodeURIComponent("content")+"&"+encodeURIComponent("type")+"="+encodeURIComponent("discussion")+"&"+encodeURIComponent("q")+"="+encodeURIComponent(A.bean.query)+"&"+encodeURIComponent("sort")+"="+encodeURIComponent("relevanceDesc")+"&"+encodeURIComponent("showAnsweredFirst")+"="+encodeURIComponent("true")+"&"+encodeURIComponent("place")+"="+encodeURIComponent("/places/"+A.bean.containerBrowseID))+'" class="ask-a-question-search-all">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.askaquestion.search.space"),[A.bean.container.name]))+"</a>","</li>");var D=A.bean.results;var E=D.length;for(var F=0;F<E;F++){var C=D[F];B.append('<li><a href="',soy.$$escapeHtml(C.objectURL),"?q=",soy.$$escapeHtml(A.bean.query),'" class="ask-a-question-result-item"><span class="',soy.$$escapeHtml(C.objectCSS),'" /><span class="j-search-result">',soy.$$escapeHtml(C.subject),"</span><em>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.plugin.question.askedby"),[C.userDisplayName,(C.created?dateFormat(parseFloat(C.created),"mmmm d, yyyy"):"")])),"</em></a></li>")}B.append("</ul>")}return G?"":B.toString()}
;
jive.namespace("Navbar.Menu.Satellite");jive.Navbar.Menu.Satellite.Source=jive.RestService.extend(function(A){A.resourceType=A.pluralizedResourceType="satellitemenu"})
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.user=="undefined"){jive.browse.user={}}jive.browse.user.userProfileImage=function(A,C){var B=C||new soy.StringBuilder();B.append((A.prop.profileImage.url)?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)))+'" class="j-user-photo '+((!A.prop.profileImage.viewingSelf)?"jiveTT-hover-user":"")+'" data-userId="'+soy.$$escapeHtmlAttribute(A.id)+'"><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","",A.prop.profileImage.url)))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.image.primary"),[]))+'" width="200"/>'+((A.prop.isVisibleToPartner)?'<div class="j-browse-external-access"><span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+'"></span><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+"</span></div>":"")+"</a>"+((A.prop.profileImage.viewingSelf&&A.prop.profileImage["default"])?'<span class="j-profile-img-text j-rc3"><a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/edit-profile-avatar!input.jspa")))+"?targetUser="+soy.$$escapeUri(A.id)+'" class="j-btn-global">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.image.text.add.photo"),[]))+"</a></span>":""):"");return C?"":B.toString()}
;
if(typeof bv=="undefined"){var bv={}}if(typeof bv.visual=="undefined"){bv.visual={}}bv.visual.renderStatusLevel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-status-levels">',(A.user.metadata)?'<img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.user.metadata["userLevel"].imageUrl))+'" alt=""><span class="level-points">'+soy.$$escapeHtml(A.user.metadata["userLevel"].name)+" <span>("+soy.$$escapeHtml(A.user.metadata["userLevel"].points)+" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("jivemacro.points.label"),[]))+")</span> </span>":"","</span>");return C?"":B.toString()};bv.visual.renderMyRewards=function(A,G){var C=G||new soy.StringBuilder();if(A.user.metadata.isBetaUser){C.append('<div class="status-row reward-tile"><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.rewards"),[])),"</h3><ul>");if(typeof (A.user.metadata.rewards)=="undefined"){C.append('<li class="listTypeNone"><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri("")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.learn.more.rewards"),[])),"...</a></li>")}else{if(A.user.metadata.rewards){var E=A.user.metadata.rewards;var F=E.length;for(var B=0;B<F;B++){var D=E[B];switch(B){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:C.append('<li class="listTypeNone popuplistspace"><a href="javascript:void(0)" class="target-mission" role="button" aria-label="',soy.$$escapeHtmlAttribute(D.name),'" aria-expanded="false" data-user="',soy.$$escapeHtmlAttribute(A.user.id),'"  data-type="reward" data-name="',soy.$$escapeHtmlAttribute(A.user.username),'" data-mid="',soy.$$escapeHtmlAttribute(D.id),'" data-parent="false"><div class="status-image ',soy.$$escapeHtmlAttribute(D.complete),'"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(D.imageUrl)),'" class="svg" alt="" /></div></a></li>');break;case 9:C.append('<li class="listTypeliNone"><a href="/people/',soy.$$escapeHtmlAttribute(A.user.username),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("gamification.more.rewards"),[])),'" class="view-more">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.more.rewards"),[])),"...</a></li>");break;default:}if(B==F-1){jive.shared.soy.resourceInlineJs({code:"window.convertSVG('.reward-tile'); $(\"#j-satNav-menu ul li a\").each(function (i) { $(this).attr('tabindex', i+1 ); });"},C)}}}}C.append("</ul></div>")}return G?"":C.toString()};bv.visual.renderMyExpertise=function(B,G){var C=G||new soy.StringBuilder();if(B.user.metadata.isBetaUser){C.append('<div class="status-row expertise"><h3>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.expertise"),[])),"</h3><ul>");if(B.user.metadata.expertise){if(B.user.metadata.expertise==0){C.append('<li class="listTypeliNone"><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri("/docs/DOC-9254")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.learn.more.expertise"),[])),"...</a></li>")}else{var F=B.user.metadata.expertise;var A=F.length;for(var D=0;D<A;D++){var E=F[D];switch(D){case 0:case 1:case 2:case 3:C.append('<li class="status-tile expertise-tile"><a href="javascript:void(0)" class="target-mission" role="button" aria-label="',soy.$$escapeHtmlAttribute(E.parentName),'" data-user="',soy.$$escapeHtmlAttribute(B.user.id),'" data-type="expertise" data-name="',soy.$$escapeHtmlAttribute(B.user.username),'" data-mid="',soy.$$escapeHtmlAttribute(E.id),'" data-parent="false"><div class="status-image"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(E.imageUrl)),'" class="svg"  alt="" /></div><span class="status-label">',soy.$$escapeHtml(E.parentName),'</span><span class="status-level sml"><span class="dashes level',(E.complete)?soy.$$escapeHtmlAttribute(E.absoluteOrder):soy.$$escapeHtmlAttribute(E.absoluteOrder-1),'"></span><span class="progress-dashes"></span></span></a></li>');break;case 4:C.append('<li class="listTypeliNone"><a href="/people/',soy.$$escapeHtmlAttribute(B.user.username),'" class="view-more">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("gamification.more.expertise"),[])),"...</a></li>");break;default:}}}}C.append("</ul></div>")}return G?"":C.toString()};bv.visual.renderStatusLevelPeople=function(A,C){var B=C||new soy.StringBuilder();B.append('\t<span class="j-status-levels"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.metadata["userLevel"].imageUrl)),'" alt="',soy.$$escapeHtmlAttribute(A.metadata["userLevel"].name),'" title="',soy.$$escapeHtmlAttribute(A.metadata["userLevel"].name),'"><span class="level-points">',soy.$$escapeHtml(A.metadata["userLevel"].name),"</span></span>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}if(typeof jive.people.profile=="undefined"){jive.people.profile={}}jive.people.profile.statusLevel=function(A,C){var B=C||new soy.StringBuilder();B.append("\t",(A.ready)?'<span class="j-status-levels"><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.imagePath))+'" alt="'+soy.$$escapeHtml(A.name)+'" title="'+soy.$$escapeHtml(A.name)+'"/>'+((A.showPoints)?soy.$$escapeHtml(A.name)+" ("+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("stslvl.points"),[A.pointLevel]))+")":"")+"</span>":"");return C?"":B.toString()};jive.people.profile.customStatusLevel=function(A,C){var B=C||new soy.StringBuilder();B.append("\t",(A.ready)?'<span class="j-status-levels"><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.imagePath))+'" alt="'+soy.$$escapeHtml(A.name)+'" title="'+soy.$$escapeHtml(A.name)+'"/>'+((A.showPoints)?soy.$$escapeHtml(A.name)+" ":"")+"</span>":"");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.satelliteNav=function(A,C){var B=C||new soy.StringBuilder();if(A.showSatelliteMenu){B.append('<span id="j-satNav-indicator"></span><a href="javascript:void(0)" id="j-satNav" class="j-globalNavLink j-ui-elem apple-ui-navlink" aria-label="',soy.$$escapeHtml(A.user.displayNameOverride?A.user.displayNameOverride:A.user.displayName),'"><span class="nav-link j-ui-elem">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{hideLink:true,hideTooltip:true,size:26}),B);B.append((A.avatarOnly!=true)?(A.user.metadata.isBetaUser)?'<span class="j-user-name j-username-navLabel">'+soy.$$escapeHtml(A.user.displayNameOverride?A.user.displayNameOverride:A.user.displayName)+"</span>":'<span class="j-user-name j-username-navLabel">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.plugin.question.text.home.header"),[]))+" "+soy.$$escapeHtml(A.user.displayNameOverride?A.user.displayNameOverride:A.user.displayName)+"</span>":"",'</span></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/logout.jspa")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.welcome.logout"),[])),"</a>");jive.shared.soy.resourceInlineJs({code:"$j(function(){new jive.Navbar.Menu.Satellite.Main('#j-satNav','#j-satNav-menu',{darkPopover:true,user:"+JSON.stringify(A.user).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+"});});"},B)}else{B.append('<ul id="j-satNav"><li class="welcome-guest">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.welcome.gtitle"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.global.guest"),[])),'</li><li class="login">&nbsp;&nbsp;|&nbsp;&nbsp;<a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/login.jspa"),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.login.link"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.login.link"),[])),"</a></li></ul>")}B.append('<div id="j-satNav-menu" aria-label="User Profile Navigation" role="dialog" style="display:none;"></div>');return C?"":B.toString()};jive.nav.profileMenu=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="mini-prof-wraper"><div class="modal-overflow"><div class="modal-container"><div class="j-modal-content"><section class="j-user-profile">');if(A.user.metadata.isBetaUser){C.append('<img src="/people/',soy.$$escapeHtml(A.user.displayName),'/avatar/70.png" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.image.primary"),[])),'" class="beta-img" width="70"/>')}else{C.append('<span class="sansbeta">');jive.browse.user.userProfileImage(A.user,C);C.append("</span>")}C.append("<ul><li>",(A.user.metadata.isBetaUser)?'<a class="j-user-name font-color-normal showisbeta" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.view.menu"),[]))+'">'+soy.$$escapeHtml(A.user.displayNameOverride?A.user.displayNameOverride:A.user.displayName)+"</a>":'<a class="j-user-name font-color-normal shownonbeta" href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.user.username))+'">'+soy.$$escapeHtml(A.user.displayNameOverride?A.user.displayNameOverride:A.user.displayName)+"</a>","</li>",(A.user.prop.profile.title)?'<li class="font-color-meta-light j-user-prop title">'+soy.$$escapeHtml(A.user.prop.profile.title)+"</li>":"",(A.user.prop.profile.department)?'<li class="j-user-prop department">'+soy.$$escapeHtml(A.user.prop.profile.department)+"</li>":"",'</ul><ul class="j-other-info"><li><strong class="showisbeta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.tooltip.user.email"),[])),'&nbsp;</strong><!-- &nbsp;<a href="mailto:',soy.$$escapeHtml(A.user.email),'">',soy.$$escapeHtml(A.user.email),"</a>-->",soy.$$escapeHtml(A.user.email),"</li>",(A.user.prop.profile.location)?'<li class=""><strong class="showisbeta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.tooltip.user.location"),[]))+"&nbsp;</strong>"+soy.$$escapeHtml(A.user.prop.profile.location)+"</li>":"",(A.user.prop.profile.primaryPhoneNumber)?"<li>"+soy.$$escapeHtml(A.user.prop.profile.primaryPhoneNumber.phoneNumber)+"</li>":"","<!-- Call to status level visualization macro jfrankin@apple.com -->");if(A.user.metadata.isBetaUser){bv.visual.renderStatusLevel(A,C)}else{if(A.user.prop.statuslevel){jive.people.profile.statusLevel(soy.$$augmentData(A.user.prop.statuslevel,{showPoints:true}),C)}}C.append('</li></ul></section><div class="bottom-wrapper">');if(A.user.metadata.isBetaUser){bv.visual.renderMyExpertise(A,C);bv.visual.renderMyRewards(A,C)}C.append('<section class="j-satellite-links j-nav-menu j-menu">');var F=A.satelliteMenuView.sections;var D=F.length;for(var E=0;E<D;E++){var B=F[E];if(B.visible){C.append('<h3 class="j-nav-menu-section font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.nameKey),[])),"</h3>");jive.nav.menu.generic({links:B.items},C)}}C.append("</section>",(A.user.metadata.isBetaUser)?'<div class="text-center"><a href="/people/'+soy.$$escapeHtml(A.user.displayName)+'" aria-label="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.view_profile.link"),[]))+'" class="j-social-button j-view-profile j-ui-elem"><span class="j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.view_profile.link"),[]))+"</span></a></div>":"",'</section><a href="javascript:void(0)" class="close-modal js-close" aria-label="Close modal" role="button"></a></div></div></div></div>');return G?"":C.toString()}
;
jive.namespace("Navbar.Menu.Satellite");jive.Navbar.Menu.Satellite.View=jive.Navbar.Menu.AbstractListView.extend(function(A,B){var C=jQuery;this.render=function(F){var D=this;var E=$j(jive.nav.profileMenu({satelliteMenuView:F,user:this.menuOpts.user}));this.setContent(E);D.$menu.on("click.satelliteNav","a.quick",function(G){G.preventDefault();D.emit("modalize",C(this).attr("href"))})}})
;
jive.namespace("Navbar.Menu.Satellite");jive.Navbar.Menu.Satellite.Main=jive.Navbar.Menu.Main.extend(function(A,B){this.init=function(D,F,E){var C=this;B.init.call(this,D,F,E);C.quickCreateView=new jive.Navbar.Menu.Create.QuickCreateView();C.quickCreateSource=new jive.Navbar.Menu.Create.QuickCreateSource();C.listView.addListener("modalize",function(G){C.url=G;C.quickCreateView.render()});C.quickCreateView.addListener("fetch",function(G){C.listView.close();C.quickCreateSource.fetch(C.url,G)})};A.buildListView=function(C,E,D){return new jive.Navbar.Menu.Satellite.View(C,E,D)};A.buildItemSource=function(){return new jive.Navbar.Menu.Satellite.Source()};A.sourceParams=function(){return{containerType:containerType,containerID:containerID}}})
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.apps=="undefined"){jive.nav.menu.apps={}}if(typeof jive.nav.menu.apps.instances=="undefined"){jive.nav.menu.apps.instances={}}jive.nav.menu.apps.instances.content=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-pop-row"><h2 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.subTitle"),[])),'</h2></div><div id="j-quick-launch-apps">');if(A!=null&&A.links&&A.links.length>0){B.append('<ul id="j-quick-launch-apps-list" class="clearfix ');jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count:A.links.length},B);B.append('">');var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];jive.nav.menu.apps.instances.renderAppInstanceLink({appUUID:C.appUUID,url:C.url,largeIconSrc:C.largeIconSrc,smallIconSrc:C.iconSrc,iconSize:A.links.length<=9?128:48,title:C.displayTitle,blockedAppInstance:C.blockedAppInstance},B)}B.append("</ul>")}else{B.append('<div class="j-no-apps-installed j-empty-view"><div class="j-empty-container"><div class="j-ui-elem jive-icon-appsmarket"></div><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.name.plural.capitalized"),["Apps"])),'</h2><p class="font-color-meta"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.no.apps"),["There are currently no apps installed."])),'</strong></p><div class="j-divider"></div><p>');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.apps.market.no.apps.expound",arg0:'<a class="js-launch-app-market" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.catalog.title"),[]))+'<span class="j-ui-elem j-cta-arrow"></span></a>',noAutoEscape:true},B);B.append("</p></div></div>")}B.append('</div><div id="app-market-links" class="j-pop-row j-last"><ul id="j-app-market-nav" class="');jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count:A.links.length},B);B.append('"><li><a id="app-launch-your-apps" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.manage.title"),[])),'</a></li><li><a id="app-launch-market" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.catalog.title"),[])),"</a></li></ul></div>");return G?"":B.toString()};jive.nav.menu.apps.instances.computeWidthIcon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count==0)?"app-list-cols-0 app-list-lg-icon":(A.count==1)?"app-list-cols-1 app-list-lg-icon":(A.count<=4)?"app-list-cols-2 app-list-lg-icon":(A.count<=9)?"app-list-cols-3 app-list-lg-icon":(A.count<=16)?"app-list-cols-4 app-list-sm-icon":(A.count<=25)?"app-list-cols-5 app-list-sm-icon":"app-list-cols-6 app-list-sm-icon");return C?"":B.toString()};jive.nav.menu.apps.instances.renderAppInstanceLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-quick-launch-app-item"><a ',(A.appUUID)?'id="app-ql-'+soy.$$escapeHtmlAttribute(A.appUUID)+'"':"",' href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.url)),'" ',(A.blockedAppInstance)?'class="j-quick-launch-app-warn-alert"':"",'><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.iconSize==48?A.smallIconSrc:A.largeIconSrc)),'" width="',soy.$$escapeHtmlAttribute(A.iconSize?A.iconSize:"128"),'" height="',soy.$$escapeHtmlAttribute(A.iconSize?A.iconSize:"128"),'" class="js-app-icon"/><div class="j-app-title">',(A.blockedAppInstance)?'<span class="jive-icon-med  jive-icon-warn"></span>':"",soy.$$escapeHtml(A.title),"</div></a></li>");return C?"":B.toString()};jive.nav.menu.apps.instances.computeWidthIcon__Cce8=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count==0)?"app-list-cols-0 app-list-lg-icon":(A.count==1)?"app-list-cols-1 app-list-lg-icon":(A.count<=4)?"app-list-cols-2 app-list-lg-icon":(A.count<=9)?"app-list-cols-3 app-list-lg-icon":(A.count<=16)?"app-list-cols-4 app-list-sm-icon":(A.count<=25)?"app-list-cols-5 app-list-sm-icon":"app-list-cols-6 app-list-sm-icon");return C?"":B.toString()}
;
jive.namespace("Apps");jive.AppMarketLaunch=$Class.extend({init:function(a){var b=this;this.appLaunchView=a.appLaunchView},showAppMarket:function(a){if(window.appContainer){window.appContainer.handleMarketContext(a)}},addApp:function(b){var a=$j(jive.nav.menu.apps.instances.renderAppInstanceLink({appLink:b}));this.appLaunchView.showLaunchPad();$j(this.appLaunchView.$menu).find("#j-quick-launch-apps-list").fadeIn(200).append(a)}});
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.Main=jive.Navbar.Menu.Main.extend(function(a,c){var b=jive.Navbar.Menu.Apps.Instances;this.init=function(e,g,f){c.init.call(this,e,g,f);var d=this;if(window.appContainer){window.appContainer.getMarketEvents().addListener("app_install",function(k,o){var n=o&&o.offset();if($j.isArray(k)){for(var m=0,j=k.length;m<j;++m){h(k[m])}}else{h(k)}function h(i){jive.Navbar.Menu.Apps.animatedInstall(i,n).addErrback(function(){d.invalidate();var l=jive.apps.container.renderMessage({messageKey:"appframework.app.installed"});$j("<p/>").html(l).message({style:"info"})})}});window.appContainer.getMarketEvents().addListener("show_app_detail",function(h){if(h&&h.appUUID){var i=jive.app.url({path:"/apps/market/marketapp/"})+h.appUUID;window.open(i)}})}jive.switchboard.addListener("apps_market.apps_have_changed",function(){d.invalidate()})};this.buildListView=function(d,f,e){return new b.ListView(d,f,e)};this.buildItemSource=function(){return new jive.AppInstanceSource()};a.sourceParams=function(){return{ts:new Date().getTime()}}});
;
(function(b){b.path={};var a={rotate:function(f,g){var e=g*3.141592654/180;var h=Math.cos(e),d=Math.sin(e);return[h*f[0]-d*f[1],d*f[0]+h*f[1]]},scale:function(c,d){return[d*c[0],d*c[1]]},add:function(d,c){return[d[0]+c[0],d[1]+c[1]]},minus:function(d,c){return[d[0]-c[0],d[1]-c[1]]}};b.path.bezier=function(g){g.start=b.extend({angle:0,length:0.3333},g.start);g.end=b.extend({angle:0,length:0.3333},g.end);this.p1=[g.start.x,g.start.y];this.p4=[g.end.x,g.end.y];var d=a.minus(this.p4,this.p1);var e=a.scale(d,g.start.length);e=a.rotate(e,g.start.angle);this.p2=a.add(this.p1,e);var c=a.scale(d,-1);var f=a.scale(c,g.end.length);f=a.rotate(f,g.end.angle);this.p3=a.add(this.p4,f);this.f1=function(h){return(h*h*h)};this.f2=function(h){return(3*h*h*(1-h))};this.f3=function(h){return(3*h*(1-h)*(1-h))};this.f4=function(h){return((1-h)*(1-h)*(1-h))};this.css=function(k){var i=this.f1(k),n=this.f2(k),l=this.f3(k),j=this.f4(k);var h=this.p1[0]*i+this.p2[0]*n+this.p3[0]*l+this.p4[0]*j;var m=this.p1[1]*i+this.p2[1]*n+this.p3[1]*l+this.p4[1]*j;return{top:m+"px",left:h+"px"}}};b.path.arc=function(d){for(var c in d){this[c]=d[c]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(g){var f=this.start*(g)+this.end*(1-(g));f=f*3.1415927/180;var e=Math.sin(f)*this.radius+this.center[0];var h=Math.cos(f)*this.radius+this.center[1];return{top:h+"px",left:e+"px"}}};b.fx.step.path=function(e){var d=e.end.css(1-e.pos);for(var c in d){e.elem.style[c]=d[c]}}})(jQuery);
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(f){this.stripDomain(f);var e=b(jive.nav.menu.apps.instances.content({links:f}));this.$menu.html(e);var g=new jive.AppMarketLaunch({appLaunchView:this});window.appsMarketLaunchPad=g;var c=function(h){window.location=jive.app.url({path:"/apps/market"})};b(this.$menu).find("#app-launch-market").unbind("click").click(c);b(this.$menu).find(".js-launch-app-market").unbind("click").click(c);b(this.$menu).find("#app-launch-your-apps").unbind("click").click(function(h){window.location=jive.app.url({path:"/apps/market/yourApps"})});var d=this;jive.switchboard.addListener("at",function(i,h){d.animateInstall(i,h)})};this.showLaunchPad=function(){var c=this;c.$button.click()};this.toggleButton=function(d){var c=this;if(d>0){c.$button.show()}else{c.$button.hide()}};a.stripDomain=function(d){var e=/^https?:\/\/.+?\//;if(d&&d.length){for(var c=0;c<d.length;++c){d[c].url=d[c].url.replace(e,"/");d[c].iconSrc=d[c].iconSrc.replace(e,"/");d[c].largeIconSrc=d[c].largeIconSrc.replace(e,"/");d[c].favIconSrc=d[c].favIconSrc.replace(e,"/")}}}});
;
jive.AppInstanceSource=jive.RestService.extend(function(a){a.init=function(b){this.resourceType="instance";this.pluralizedResourceType="instances";this.RESOURCE_ENDPOINT=jive.api.apps(this.pluralizedResourceType)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.mention=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" role="link"><div>');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,currentUserPartner:A.user.partner}),B);B.append('<span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayName(A.activity.activityUser,B);B.append(" ");if(A.activity.content.mentionedObject.objectType==3){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.in"),[]))," ")}else{jive.shared.soy.i18nHelper({i18nKey:"eae.mention.item.in",arg0:soy.$$escapeHtml(A.activity.content.mentionedObject.name),noAutoEscape:true},B)}B.append(' <span class="title"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+A.activityContainer.jiveObject.objectType),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activity.content.context.jiveObjectCSS),'"></span>',A.activity.content.context.name," ");jive.shared.displayutil.renderAttachmentLink({object:A.activity.content.context},B);B.append('</span><span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.activity.creationTime),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,currentUserPartner:A.user.partner}),B);if(A.activity.content.mentionedObject.objectType==3){B.append('<div class="font-color-meta">');jive.shared.displayutil.userDisplayName(A.activity.activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.in"),[])),"</div>")}else{B.append((A.activityContainer.jiveObject.typeDirectMessage)?'<span class="jive-icon-med jive-icon-direct-message-label" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.label"),[]))+'"></span>':(A.activityContainer.jiveObject.typeShare)?'<span class="jive-icon-med jive-icon-share-label" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("share.label"),[]))+'"></span>':"",'<div class="font-color-meta">');jive.shared.displayutil.userDisplayName(A.activity.activityUser,B);B.append(" ");jive.shared.soy.i18nHelper({i18nKey:"eae.mention.item.in",arg0:soy.$$escapeHtml(A.activity.content.mentionedObject.name),noAutoEscape:true},B);B.append("</div>")}B.append('<div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.mention"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activity.content.context.jiveObjectCSS),'"></span>',A.activity.content.context.name,"</div>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.activitystream=="undefined"){jive.eae.activitystream={}}if(typeof jive.eae.activitystream.include=="undefined"){jive.eae.activitystream.include={}}jive.eae.activitystream.include.activityVerbPhrase=function(I,G){var E=G||new soy.StringBuilder();if(I.object.deleted){E.append('<span class="font-color-meta j-act-deleted">',(I.object.deletedMention)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.user.deleted.mention"),[]))+" ":(I.type==2)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.user.deleted.reply"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.user.deleted.comment"),[]))+" ","</span>")}else{if(I.object.typeThread){E.append((I.type=="created")?(I.object.hasQuestion)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.asked"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.starteddiscussion"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type."+I.type),[])))}else{if(I.object.parentAuthor&&(!I.hideDetailedReplyTo||I.object.typeWallEntryComment)){if(I.object.typeWallEntryComment){var D=new soy.StringBuilder();var B=new soy.StringBuilder();if(I.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(I.object.parentAuthor,B)}else{B.append(soy.$$escapeHtml(I.object.parentAuthor.displayName))}jive.shared.soy.escapeHelper({stringToEscape:B.toString()},D);jive.shared.soy.i18nHelper({i18nKey:"activity.type.wallentrycomment",arg0:D.toString(),noAutoEscape:true},E)}else{if(!I.hideDetailedReplyTo){var H=new soy.StringBuilder();var F=new soy.StringBuilder();if(I.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(I.object.parentAuthor,F)}else{F.append(soy.$$escapeHtml(I.object.parentAuthor.displayName))}jive.shared.soy.escapeHelper({stringToEscape:F.toString()},H);jive.shared.soy.i18nHelper({i18nKey:(I.object.commentContentResource&&I.object.commentContentResource.objectType==129)?"activity.type.authorcommentedinresponseto":(I.object.typeMessage)?"activity.type.repliedinresponseto":"activity.type.commentedinresponseto",arg0:H.toString(),noAutoEscape:true},E);E.append((I.againstObject)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity_stream.on_object"),[]))+" ":"")}}}else{if(I.object.typeMessage||I.type=="share"||I.type=="correct_answer_set"){if(I.type=="correct_answer_set"){var J=new soy.StringBuilder();var L=new soy.StringBuilder();if(I.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(I.object.messageAuthor,L)}else{L.append(soy.$$escapeHtml(I.object.messageAuthor.displayName))}jive.shared.soy.escapeHelper({stringToEscape:L.toString()},J);jive.shared.soy.i18nHelper({i18nKey:"activity.type.replymarkedcorrect",arg0:J.toString(),noAutoEscape:true},E)}else{if(!I.againstObject){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.replied"),[]))," ")}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.replied.to"),[]))," ")}}}else{if(I.object.typeComment){E.append((I.object.commentContentResource&&I.object.commentContentResource.objectType==129)?(!I.againstObject)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.authorcomment"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.authorcommentto"),[]))+" ":(!I.againstObject)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.commented"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.commentedon"),[]))+" ")}else{if(I.object.typePoll&&I.type=="created"){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.startedpoll"),[])))}else{if((I.object.typeBlogPost||I.object.typeDocument)&&I.type=="created"){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.wrote"),[])))}else{if(I.object.typeUserStatus){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])))}else{if(I.object.typeWallEntry){if(I.type=="liked"){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.liked"),[])))}else{if(I.type=="repost"){var M=new soy.StringBuilder();var K=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(I.object.repostedUser,K);jive.shared.soy.escapeHelper({stringToEscape:K.toString()},M);jive.shared.soy.i18nHelper({i18nKey:(I.object.repostedUser.id==I.user.id)?"activity.type.status.repost.your":"activity.type.status.repost",arg0:M.toString(),noAutoEscape:true},E)}else{if(I.object.wallCreationSrc!=""){jive.shared.soy.i18nHelper({i18nKey:"activity.type.status.with.source",arg0:I.object.wallCreationSrc,noAutoEscape:true},E)}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])))}}}}else{if(I.object.typeProjectStatus){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.updatedStatus"),[])))}else{if(I.object.typeUserRelationship){var A=new soy.StringBuilder();var C=new soy.StringBuilder();jive.shared.displayutil.avatar(soy.$$augmentData(I.object.relatedUser,{size:32,currentUserPartner:I.user.partner}),C);jive.shared.displayutil.userDisplayNameLink(I.object.relatedUser,C);jive.shared.soy.escapeHelper({stringToEscape:C.toString()},A);jive.shared.soy.i18nHelper({i18nKey:"activity.type."+I.type,arg0:A.toString(),noAutoEscape:true},E)}else{if(I.object.typeExternalActivity){E.append(I.object.text," ")}else{if(I.object.typeDirectMessage){E.append((I.object.user.id==I.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.directmessage.you.sent"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.directmessage"),[])))}else{E.append((I.type!="")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type."+I.type),[])):"")}}}}}}}}}}}}}return G?"":E.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}jive.eae.inbox.commStream=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(function() {require(['jive.ActivityStream.CommunicationStreamControllerMain'], function(InboxController) {var streamI18n = {likes: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.likes"),[]))+"', comments: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.comments"),[]))+"', tracked: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.tracked"),[]))+"', untracked: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[]))+"', lessthanaminago: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[]))+"', repost_success: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.success"),[]))+"', empty_comment: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.cannot_be_empty.text"),[]))+"', remove_filter: '"+soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.filter.remove.label"),[]))+"'}; if (jive.ActivityStream.GlobalCommunicationStreamController) {jive.ActivityStream.GlobalCommunicationStreamController.tearDown();}jive.ActivityStream.GlobalCommunicationStreamController = new InboxController({contextObjectType: "+soy.$$escapeHtml(A.viewingUser.objectType)+", contextObjectID: "+soy.$$escapeHtml(A.viewingUser.id)+", data:"+JSON.stringify(A.activityStream4JS).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", filterType: "+JSON.stringify(A.filterType).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", i18n:streamI18n, rteOptions: {preferredMode:'"+soy.$$escapeHtml(A.preferredMode)+"', startMode:'"+soy.$$escapeHtml(A.startMode)+"', mobileUI:"+soy.$$escapeHtml(A.mobileUI)+", communityName:'"+soy.$$escapeHtml(A.communityName)+"', hasImagePerms:"+soy.$$escapeHtml(A.hasImagePerms)+"}, lastViewedObjectType: '"+soy.$$escapeHtml(A.lastViewedObjectType)+"', lastViewedObjectID: '"+soy.$$escapeHtml(A.lastViewedObjectID)+"', streamID: "+soy.$$escapeHtml(A.streamID)+", savedRefreshTime: "+soy.$$escapeHtml(A.activityStream4JS.timepoints.last)+", dmEnabled: "+((A.dmEnabled)?"true":"false")+", viewType: '"+soy.$$escapeHtml(A.viewType)+"', listHeight: "+soy.$$escapeHtml(A.listHeight)+", fromHomeMenu: "+soy.$$escapeHtml(A.fromHomeMenu)+", newUserMode: '"+soy.$$escapeHtml(A.newUserMode)+'\'}); jive.switchboard.emit("activity.communication.controller.initialized");});});'},B);B.append('<div id="j-comm-activity-list" class="j-act-container"><div id="previewable-binary-viewer"></div><div id="j-filter-bar" class="j-act-filter-bar j-rc4 j-rc-none-bottom j-all-read clearfix" role="toolbar" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.toolbar"),[])),'"><div class="j-view-controls j-view-toggle"><a href="#" class="j-link-split-view j-pane-toggle j-js-inbox-pane-toggle j-rc4 ',(A.viewType=="split")?"j-active":"",'" data-type="split" id="js-split-pane-ctrl" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.split_pane"),[])),'" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.split_pane"),[])),'" role="button" aria-pressed="',(A.viewType=="split")?"true":"false",'"><span class="j-ui-elem"></span></a><a href="#" class="j-link-full-view j-pane-toggle j-js-inbox-pane-toggle j-rc4 ',(A.viewType=="full")?"j-active":"",'" data-type="full" id="js-full-pane-ctrl" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.full_view"),[])),'" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.full_view"),[])),'" role="button" aria-pressed="',(A.viewType=="full")?"true":"false",'"><span class="j-ui-elem"></span></a></div>',(A.dmEnabled)?'<div id="j-js-inbox-send-dm" class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a href="#" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div>":"",'<div class="j-comm-filter j-ibx-control"><label ',(A.filterType.indexOf("unread")!=-1)?'class="active"':"",'><input type="checkbox" ',(A.filterType.indexOf("unread")!=-1)?'checked="checked"':"",' data-filterName=\'unread\' id="unread-toggle" class="j-all-toggle"><label for="unread-toggle">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.unread"),[])),'</label></label></div><div class="j-read-controls"><span class="j-not-all-read-controls"><a href="#" id="communications-mark-all-read" class="communications-mark-all-read">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.all.read"),[])),'</a></span></div><div><a href="#" id="communications-filter-trigger"  class="j-ibx-control j-filter-select" aria-haspopup="true" aria-owns="filtermenu"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.filter"),[])),'</span><span class="jive-icon-med jive-icon-down j-filter-icon"></span></a></div><div><form id="j-inbox-user-filter-form" class="j-form"><label for="personFilter" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.person_filter"),[])),'</label><input type="text" id="personFilter" name="personFilter" placeholder="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.person_filter"),[])),'" class="j-user-autocomplete j-autocomplete-input j-ui-elem" role="combobox"/></form></div><div id="filters-applied" class="j-filters-applied j-rc6" style="display:none"><span class="j-act-filterview j-act-filter-display-name"></span><a href="#" class="js-remove-filter"><span class="jive-icon-sml jive-glyph-remove"></span></a></div></div>');jive.eae.inbox.commStreamList({activityStream:A.activityStream,filterType:A.filterType,mobileUI:A.mobileUI,viewType:A.viewType,listHeight:A.listHeight,newUserMode:A.newUserMode,instanceName:A.communityName},B);B.append('<div id="js-ibx-resize" class="j-ibx-resize" role="separator" tabindex="0" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.separator"),[])),'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.separator"),[])),'"><span class="j-ibx-resize-ctrl j-ui-elem"></span></div></div>');return C?"":B.toString()};jive.eae.inbox.filtermenu=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="filtermenu" class="j-act-filter-menu j-quick-menu j-menu" style="display:none;"><ul class="j-act-filter-options" role="listbox">',(A.dmEnabled)?'<li role="option"><a data-filterName=\'directmessages\' href="#"><span class="jive-icon-med jive-icon-direct-message-label"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.directmessages"),[]))+"</a></li>":"",'<li role="option"><a data-filterName=\'all\' href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all"),[])),"</a></li></ul></div>");return C?"":B.toString()};jive.eae.inbox.commStreamList=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id=\'j-communications-list\' class="j-comm-stream" role="list" tabindex="-1" style="height:',(A.viewType=="full")?"100%":soy.$$filterCssValue(A.listHeight)+"px",';">');jive.eae.inbox.commStreamListItems({activityStream:A.activityStream,filterType:A.filterType,mobileUI:A.mobileUI,newUserMode:A.newUserMode,instanceName:A.instanceName,loadMoreLabelType:"spinner"},B);B.append("</div>");return C?"":B.toString()};jive.eae.inbox.commStreamListItems=function(A,G){var C=G||new soy.StringBuilder();if(A.activityStream.activityContainerList&&A.activityStream.activityContainerList.length){var D=A.activityStream.activityContainerList;var E=D.length;for(var B=0;B<E;B++){var F=D[B];if(F.activityList.length>0){jive.eae.inbox.groupedCommStreamItem({activityContainer:F,user:A.activityStream.viewingUser,filterType:A.filterType,streamType:"communications",canCreateMbImage:A.activityStream.canCreateMbImage,canCreateMbVideo:A.activityStream.canCreateMbVideo,mobileUI:A.mobileUI,renderLocation:"inbox",newUserMode:A.newUserMode,instanceName:A.instanceName},C)}}if(A.activityStream.hasMore){C.append("<a class='j-js-load-more j-act-append j-rc6' tabindex=\"-1\" href='#'>");jive.eae.inbox.inboxLoadMoreBtn({labelType:A.loadMoreLabelType},C);C.append("</a>")}}else{C.append('<div class="j-act-empty-list font-color-meta">',(A.filterType.indexOf("unread")!=-1)?(A.filterType.indexOf("mentions")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreadmentions"),[])):(A.filterType.indexOf("directmessages")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreaddirectmessages"),[])):(A.filterType.indexOf("shares")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreadshares"),[])):(A.filterType.indexOf("user")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreadbyparticipant"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unread"),[])):(A.filterType.indexOf("mentions")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.mentions"),[])):(A.filterType.indexOf("directmessages")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.directmessages"),[])):(A.filterType.indexOf("shares")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.shares"),[])):(A.filterType.indexOf("user")!=-1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.byparticipant"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.all"),[])),"</div>")}return G?"":C.toString()};jive.eae.inbox.inboxLoadMoreBtn=function(A,C){var B=C||new soy.StringBuilder();B.append((A.labelType=="text")?'<span class="j-more-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.load_more"),[]))+"</span>":(A.labelType=="spinner")?'<img class="j-ibx-load-more-spinner" src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/j-loader-large-wht.gif")))+'" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[]))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[]))+'" />':"");return C?"":B.toString()};jive.eae.inbox.groupedCommStreamItem=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.groupedCommActivityTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.groupedCommActivityTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["filterType",A.filterType],["mobileUI",A.mobileUI],["renderLocation",A.renderLocation],["newUserMode",A.newUserMode],["instanceName",A.instanceName]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{if(A.renderLocation=="inbox"){B.append('<div id="communications_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.commListItemView({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation,newUserMode:A.newUserMode,instanceName:A.instanceName},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal clearfix">');jive.eae.inbox.commListItemView({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation,newUserMode:A.newUserMode,instanceName:A.instanceName},B);B.append("</a>")}}}return C?"":B.toString()};jive.eae.inbox.commListItemView=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.commListItemViewTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.commListItemViewTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["activity",A.activity],["user",A.user],["hidden",A.hidden],["time",A.time],["renderLocation",A.renderLocation],["newUserMode",A.newUserMode],["instanceName",A.instanceName]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append("<span title='",soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+A.activityContainer.jiveObject.objectType),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,"</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time),'</div><div class="title font-color-link">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,"</div>")}}}}return C?"":B.toString()};jive.eae.inbox.commListItemNewCount=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count>1)?'<span class="j-new-count font-color-new">'+soy.$$escapeHtml(A.count)+"</span>":"");return C?"":B.toString()};jive.eae.inbox.expandedCommItemView=function(H,G){var E=G||new soy.StringBuilder();if(H.activityContainer.jiveObject.expandedCommItemViewTemplate){jive.shared.soy.render({templateName:H.activityContainer.jiveObject.expandedCommItemViewTemplate,data:(function(){var M={};var L=[["activityContainer",H.activityContainer],["user",H.user],["streamType",H.streamType],["canCreateMbImage",H.canCreateMbImage],["canCreateMbVideo",H.canCreateMbVideo],["filterType",H.filterType],["mobileUI",H.mobileUI],["newUserMode",H.newUserMode],["instanceName",H.instanceName]];for(var K=0;K<L.length;K+=1){M[L[K][0]]=L[K][1]}return M})(),failGracefully:true},E)}else{E.append('<div class="j-act-exp-view expanded ',(H.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="communications_',H.activityContainer.jiveObject.objectType,"_",H.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(H.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(H.activityContainer.container.id),'" style="display:none;"><div class="j-js-ibx-item');jive.eae.common.contentTypeClassName(H,E);E.append('"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><div id="exp-header-',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.domIDPostfix),'" class="j-init',(H.activityContainer.canReply)?" j-act-rte-replyable":"",(H.activityContainer.mentionInParent)?" j-tlo-mention":"",'" data-extVisible="',soy.$$escapeHtmlAttribute(H.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.objectType),'"><div class="j-act-title" role="heading"><span class="jive-icon-big  ',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,H.activityContainer.jiveObject.jiveObjectURL),'">',H.activityContainer.jiveObject.subject,"</a> ");if(H.activityContainer.container.type&&H.activityContainer.container.type!=-2){E.append(' <span class="j-act-container font-color-meta">');if(H.activityContainer.container.type==2020){var J=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(H.activityContainer.originalAuthor,J);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:J.toString(),arg1:String(H.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},E)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:H.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},E)}E.append("</span>")}E.append('</div><div class="j-act-header-slug j-excerpt">',(H.activityContainer.jiveObject.text)?H.activityContainer.jiveObject.text+((H.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view js-full-content-container j-rc5" style="display:none;"><div class="j-author-act font-color-meta">');if(!H.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(H.activityContainer.originalAuthor,E)}else{jive.shared.displayutil.renderGuestDisplayName({message:H.activityContainer.jiveObject},E)}E.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:H.activityContainer.jiveObject,type:"created",displayAuthorLink:false,hideDetailedReplyTo:true,user:H.user,againstObject:false},E);E.append(' <span class="j-act-time">',soy.$$escapeHtml(H.activityContainer.creationTime),'</span></div><div class="j-act-exp-content-body-view js-full-content-body" style=""></div>');jive.eae.common.renderStreamAttachments({idPrefix:"collapsed",object:H.activityContainer.jiveObject,domIDPostfix:H.activityContainer.jiveObject.domIDPostfix},E);E.append('<div class="j-act-meta clearfix"><div id="exp-body-actions-',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(H.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-extVisible="',soy.$$escapeHtmlAttribute(H.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.common.activityNavActions({object:H.activityContainer.jiveObject,activityContainer:H.activityContainer,amAnAuthor:H.activityContainer.amAnAuthor,objectType:H.activityContainer.jiveObject.objectType,objectId:H.activityContainer.jiveObject.id,liked:H.activityContainer.liked,likeCount:H.activityContainer.likeCount,likable:H.activityContainer.likable,user:H.user,location:"parentPreview",streamType:"communications",filterType:H.filterType},E);E.append('</ul></div></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content show" data-extVisible="',soy.$$escapeHtmlAttribute(H.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.objectType),'" aria-hidden="false"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content hide" style="display:none;" aria-hidden="true"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker-large"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker-large"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(H.activityContainer.untracked)?'style="display: none;"':"",'><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!H.activityContainer.untracked)?'style="display: none;"':"",'><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></div></div><div class="j-act-expand-bar j-rc4 j-rc-none-bottom clearfix">');jive.eae.common.replyCountText({activityContainer:H.activityContainer,streamType:H.streamType,showCurrentCount:true},E);E.append(' <a href="#" class="j-js-show-older j-show-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items">');var D=H.activityContainer.activityList;var F=D.length;for(var C=0;C<F;C++){var A=D[C];if(!A.parentActivity&&!(A.content.typeMention&&A.content.context.objectType==H.activityContainer.jiveObject.objectType)&&(A.current||C==F-1)){jive.eae.common.subactivity({activity:A,activityContainer:H.activityContainer,isHidden:false,user:H.user,streamType:"communications",canCreateMbImage:H.canCreateMbImage,canCreateMbVideo:H.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:C==F-1},E)}}E.append("</div>");if(H.activityContainer.canReply){E.append('<div id="parent-reply-',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable j-act-parent-reply-view clearfix" data-extVisible="',soy.$$escapeHtmlAttribute(H.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(H.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto j-act-original"><a class="j-reply-rte" href="javascript:void(0);">');var I=new soy.StringBuilder();jive.eae.common.readingPaneBottomReplyLinkKey(H,I);jive.shared.soy.i18nHelper({i18nKey:I.toString(),arg0:(H.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml(String(H.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},E);E.append("</a></div></div></div>")}E.append("</div></div></div>")}return G?"":E.toString()};jive.eae.inbox.showMoreEllipses=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-act-node js-ellipses"><div class="j-mod"><a href="#" class="j-js-show-older">&hellip;</a></div></div>');return C?"":B.toString()};jive.eae.inbox.collaboratorParticipantsModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal" id="jive-modal-participants"><header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon close j-ui-elem"></span></a><div class="jive-modal-content clearfix" id="jive-modal-content-container"><div id="jive-modal-scrollto-container"><div id="jive-modal-content-participants" class="clearfix"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients.desc"),[])),'</p><form method="POST" action="#" id="jive-modal-content-participants-form" class="j-form"><div role="combobox"><label for="participants" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients.desc"),[])),'</label><input type="text" name="participants" id="participants" class="j-user-autocomplete j-autocomplete-input j-ui-elem" /></div><div class="jive-form-buttons clearfix"><input type="submit" class="j-btn-callout" name="Finished" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.finished"),[])),'" style="float: left; margin-left: 10px; margin-bottom: 15px;" /></div></form></div><div id="jive-modal-content-browse-participants" class="clearfix"></div></div></div></div>');return C?"":B.toString()};jive.eae.inbox.collaboratorParticipantsI18NHelper=function(B,G){var C=G||new soy.StringBuilder();if(B.activityContainer.jiveObject.typeDirectMessage){var E=new soy.StringBuilder();if(!B.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activityContainer.originalAuthor,E)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},E)}var A=new soy.StringBuilder();if(B.activityContainer.participants.length){jive.eae.common.groupedUsers({groupedUserList:B.activityContainer.participants,user:B.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},A)}else{A.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.yourself"),[])))}jive.shared.soy.i18nHelper({i18nKey:"activity.directmessage.XsentY",arg0:E.toString(),arg1:A.toString(),noAutoEscape:true},C)}else{var F=new soy.StringBuilder();if(!B.activityContainer.jiveObject.user.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activityContainer.jiveObject.user,F)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},F)}var D=new soy.StringBuilder();if(B.activityContainer.participants){jive.eae.common.groupedUsers({groupedUserList:B.activityContainer.participants,user:B.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},D)}else{D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.yourself"),[])))}jive.shared.soy.i18nHelper({i18nKey:"activity.type.XsharedaYwithZ",arg0:F.toString(),arg1:String(B.activityContainer.jiveObject.contentTypeName).toLowerCase(),arg2:D.toString(),noAutoEscape:true},C)}C.append(" ");return G?"":C.toString()};jive.eae.inbox.jsDraggableHelper=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="js-ibx-resize-helper" class="j-ibx-resize-helper"></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.app=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");if(A.activity.content&&(A.activity.content.typeComment||A.activity.content.deleted)){jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B)}else{B.append(soy.$$escapeHtml(A.activity.content.plainSubject))}if(A.activity.content&&A.activity.content.verb!="uri:jiveName:app_install"){B.append(' <span class="title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,"</span>")}jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}if(A.activity.content&&A.activity.content.verb=="uri:jiveName:app_install"){B.append('<div class="font-color-meta">',soy.$$escapeHtml(A.activity.activityUser.displayName)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.installed"),[]))," ",soy.$$escapeHtml(A.time),"</div>")}else{B.append('<div class="font-color-meta">');if(A.activity.content.verb=="post"){B.append(soy.$$escapeHtml(A.activity.content.plainSubjectSnippet)," ",soy.$$escapeHtml(A.time))}else{jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time))}B.append("</div>")}B.append('<div class="title font-color-link">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.appGrouped=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append("<div ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="'+soy.$$escapeHtmlAttribute(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.extraData.appID)+'"':'id="'+soy.$$escapeHtmlAttribute(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.type)+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.id)+'"',' class="j-comm-entry j-js-ibx-item j-act-app clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.lastMentionTime!="0")?" j-mentioned":"",(A.activityContainer.preSelected)?" j-act-active":"",'" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.item.list.app({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" ',(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="homeNavCommItem_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.extraData.appID)+'"':'id="homeNavCommItem_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.type)+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.id)+'"',' class="j-comm-entry j-js-ibx-item j-act-unread',(A.activityContainer.lastMentionTime!="0")?" j-mentioned":"",' font-color-normal clearfix">');jive.eae.inbox.item.list.app({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.document=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.document"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",(!A.activity.type=="notification")?soy.$$escapeHtml(A.time):"",'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.document"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.document=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?"129":A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.item.list.document({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append("<a ",(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType=129&objectID="+A.activityContainer.jiveObject.id)))+'" ':'href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id)))+'" ','id="homeNavCommItem_',(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?"129":A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal">');jive.eae.inbox.item.list.document({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.directMessage=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(': <span class="jive-icon-med jive-icon-direct-message-label" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.label"),[])),'"></span><span class="title">',A.activityContainer.jiveObject.subject,"</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time),'</div><div class="title font-color-link"><span class="jive-icon-med jive-icon-direct-message-label" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.label"),[])),'"></span>',(A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"",A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.directMessage=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item j-act-exp-trigger j-act-dm clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.inbox.item.list.directMessage({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal j-act-exp-trigger">');jive.eae.inbox.item.list.directMessage({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.collaboratorNotification=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="',soy.$$escapeHtmlAttribute(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item j-act-collaborator clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',A.activityContainer.activityList[0].content.templateData.objectID,'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.templateData.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all"><div id="commList-item-',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.domIDPostfix),'" data-current="',(A.activityContainer.activityList[0].current)?soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].current):"",'" role="link"><div id="excerpt_',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.domIDPostfix),'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:22}),B);B.append('<span class="jive-icon-med jive-icon-collaboration-label" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.collaboration.label"),[])),'"></span>');jive.shared.displayutil.userDisplayName(A.activityContainer.activityList[0].activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.collabAdded"),[])),' <span class="title"><span class="',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.templateData.objData.iconCSS),'"></span>',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.displayName),'</span><span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.activityContainer.activityList[0].creationTime),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a></div></div></div>')}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal j-act-collaborator">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:32,hideLink:true,hideTooltip:true}),B);B.append('<div class="font-color-meta">');jive.shared.displayutil.userDisplayName(A.activityContainer.activityList[0].activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.collabAdded"),[])),'</div><div class="title font-color-link"><span class="',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.templateData.objData.iconCSS),'"></span>',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.displayName),"</div></a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.discussion=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-objectID=',(A.activity.content.typeThread)?'"'+soy.$$escapeHtmlAttribute(A.activity.content.id)+'"':'"'+soy.$$escapeHtmlAttribute(A.activity.targetObjectID)+'"'," data-objectType=",(A.activity.content.typeThread)?'"'+soy.$$escapeHtmlAttribute(A.activity.content.objectType)+'"':'"'+soy.$$escapeHtmlAttribute(A.activity.targetObjectType)+'"',' data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex=="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",(!A.activity.type=="notification")?soy.$$escapeHtml(A.time):"",'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.statusUpdate=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append("<span title='",soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.status"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject," ");jive.shared.displayutil.renderAttachmentLink({object:A.activityContainer.jiveObject},B);B.append("</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:"communications",hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time),'</div><div class="title font-color-link">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append("<span title='",soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.status"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.bookmark=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-objectID=',(A.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id)+'"':'"'+soy.$$escapeHtmlAttribute(A.activity.targetObjectID)+'"'," data-objectType=",(A.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType)+'"':'"'+soy.$$escapeHtmlAttribute(A.activity.targetObjectType)+'"',' data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.bookmark"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time),'</div><div class="title font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.bookmark"),[])),"' role='img' class=\"",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.welcome=function(A,C){var B=C||new soy.StringBuilder();B.append((A.renderLocation=="inbox")?'<div id="commList-item-'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.domIDPostfix)+'" data-extVisible="'+soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator)+'" data-objectID="'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id)+'" data-objectType="'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType)+'" data-current="'+((A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"")+'" style="'+((A.hidden)?"display:none":"")+'" role="link"><div id="commList-item-excerpt_'+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.domIDPostfix)+'" class="j-act-welcome"><span class="jive-icon-big jive-icon-welcome acticon"></span><span class="title">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.inbox.message.welcome.label"),[]))+'</span><span class="j-comm-time font-color-meta-light">'+soy.$$escapeHtml(A.time)+'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[]))+'" role="button" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[]))+'" aria-hidden="'+soy.$$escapeHtmlAttribute(!A.activityContainer.read)+'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[]))+'" role="button" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[]))+'" aria-hidden="'+soy.$$escapeHtmlAttribute(A.activityContainer.read)+'" tabindex="-1"></a>':(A.renderLocation=="globalNav")?'<div class="j-badge-oneliner"><span  title=\''+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.welcome.indicator"),[]))+'\' role=\'img\' class="jive-icon-big jive-icon-welcome acticon"></span><span class="title">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("trial.inbox.message.welcome.label"),[]))+"</span></div>":"");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.latestAcclaim=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-acclaim"><span  title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.acclaim"),[])),'\' role=\'img\' class="jive-icon-big jive-icon-acclaim acticon"></span><span class="title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.header"),[])),": </span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.subhead"),[])));jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){B.append('<div class="j-badge-oneliner font-color-link"><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+A.activityContainer.jiveObject.objectType),[])),'\' role=\'img\' class="jive-icon-big jive-icon-acclaim acticon"></span><span class="title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.header"),[])),": </span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.subhead"),[])),"</div>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.announcement=function(A,C){var B=C||new soy.StringBuilder();B.append((A.renderLocation=="inbox")?'<div id="commList-item-'+soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix)+'" data-extVisible="'+soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator)+'" data-objectID="'+soy.$$escapeHtmlAttribute(A.activity.targetObjectID)+'" data-objectType="'+soy.$$escapeHtmlAttribute(A.activity.targetObjectType)+'" data-current="'+((A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"")+'" style="'+((A.hidden)?"display:none":"")+'" role="link"><div id="commList-item-excerpt_'+soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix)+'" class=""><span title=\''+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.announcement"),[]))+'\' role=\'img\' class="jive-icon-big jive-icon-announcement acticon"></span><span class="jive-alert-announcement-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("anncmt.announcement.gtitle"),[]))+':</span> <span class="title">'+A.activityContainer.jiveObject.subject+'</span><span class="j-comm-time font-color-meta-light">'+soy.$$escapeHtml(A.time)+'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[]))+'" role="button" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[]))+'" aria-hidden="'+soy.$$escapeHtmlAttribute(!A.activityContainer.read)+'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[]))+'" role="button" aria-label="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[]))+'" aria-hidden="'+soy.$$escapeHtmlAttribute(A.activityContainer.read)+'" tabindex="-1"></a>':(A.renderLocation=="globalNav")?'<div class="j-badge-oneliner"><span title=\''+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.announcement"),[]))+'\' role=\'img\' class="jive-icon-big jive-icon-announcement acticon"></span><span class="jive-alert-announcement-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("anncmt.announcement.gtitle"),[]))+':</span> <span class="title">'+A.activityContainer.jiveObject.subject+"</span></div>":"");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.list=="undefined"){jive.eae.inbox.item.list={}}jive.eae.inbox.item.list.share=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.typeMention){jive.eae.inbox.item.list.mention(A,B)}else{if(A.renderLocation=="inbox"){B.append('<div id="commList-item-',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activity.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtmlAttribute(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'" role="link"><div id="commList-item-excerpt_',soy.$$escapeHtmlAttribute(A.activity.content.domIDPostfix),'" class="">');if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:22,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append((A.activityContainer.lastMentionTime!="0")?'<span class="jive-icon-med jive-icon-mention-label-inactive" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[]))+'"></span>':"");jive.eae.common.activityAuthor({object:A.activity.content,type:"share",activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(' <span class="title"><span class="jive-icon-med jive-icon-share-label"></span>',A.activityContainer.jiveObject.subject," ");jive.shared.displayutil.renderAttachmentLink({object:A.activityContainer.jiveObject.sharedObject},B);B.append("</span>");jive.eae.inbox.commListItemNewCount({count:A.activityContainer.numCurrentSubActivities},B);B.append('<span class="j-comm-time font-color-meta-light">',soy.$$escapeHtml(A.time),'</span></div></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(!A.activityContainer.read),'" tabindex="-1"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'" role="button" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.read"),[])),'" aria-hidden="',soy.$$escapeHtmlAttribute(A.activityContainer.read),'" tabindex="-1"></a>')}else{if(A.renderLocation=="globalNav"){if(!A.activity.content.deleted){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32,hideLink:true,anonymous:A.activity.activityUser.anonymous,currentUserPartner:A.user.partner}),B)}B.append('<div class="font-color-meta">');jive.eae.common.activityAuthor({object:A.activity.content,type:"share",activityUser:A.activity.activityUser,displayAuthorLink:false,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true,deleted:A.activity.content.deleted},B);B.append(" ",soy.$$escapeHtml(A.time),'</div><div class="title font-color-link"><span class="jive-icon-med jive-icon-share-label"></span>',A.activityContainer.jiveObject.subject,"</div>")}}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.poll=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'" data-containerID="',soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" data-containerType="',soy.$$escapeHtmlAttribute(A.activityContainer.container.type),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.commListItemView({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal">');jive.eae.inbox.commListItemView({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.share=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item j-act-exp-trigger clearfix j-act-share',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.inbox.item.list.share({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal j-act-exp-trigger">');jive.eae.inbox.item.list.share({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.announcement=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="',soy.$$escapeHtmlAttribute(A.streamType),"_",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item j-act-announcement clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.lastMentionTime!="0")?" j-mentioned":"",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.inbox.item.list.announcement({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread',(A.activityContainer.lastMentionTime!="0")?" j-mentioned":"",' font-color-normal j-act-announcement">');jive.eae.inbox.item.list.announcement({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.statusUpdate=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item clearfix',(A.activityContainer.activityList.length==1&&A.activityContainer.activityList[0].parentActivity)?" j-act-mb-new":"",(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.inbox.item.list.statusUpdate({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal',(A.activityContainer.activityList.length==1&&A.activityContainer.activityList[0].parentActivity)?" j-act-mb-new":"",'">');jive.eae.inbox.item.list.statusUpdate({activityContainer:A.activityContainer,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.appUpdate=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append("<div ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="communications_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.extraData.appID)+'"':'id="communications_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.type)+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.id)+'"',' class="j-comm-entry j-js-ibx-item j-act-app clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.lastMentionTime!="0")?" j-mentioned":"",(A.activityContainer.preSelected)?" j-act-active":"",'" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtmlAttribute(A.activityContainer.numUnread),'" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.item.list.app({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" ',(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="homeNavCommItem_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtmlAttribute(A.activityContainer.jiveObject.extraData.appID)+'"':'id="homeNavCommItem_'+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.type)+"_"+soy.$$escapeHtmlAttribute(A.activityContainer.container.id)+'"',' class="j-comm-entry j-js-ibx-item j-act-unread font-color-normal">');jive.eae.inbox.item.list.app({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.inbox=="undefined"){jive.eae.inbox={}}if(typeof jive.eae.inbox.item=="undefined"){jive.eae.inbox.item={}}if(typeof jive.eae.inbox.item.grouped=="undefined"){jive.eae.inbox.item.grouped={}}jive.eae.inbox.item.grouped.mention=function(A,C){var B=C||new soy.StringBuilder();if(A.renderLocation=="inbox"){B.append('<div id="communications_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.type),"_",soy.$$escapeHtmlAttribute(A.activityContainer.container.id),'" class="j-comm-entry j-js-ibx-item j-act-mentions clearfix',(A.activityContainer.read)?" j-act-read":" j-act-unread",(A.activityContainer.preSelected)?" j-act-active":"",'" role="listitem" tabindex="-1" data-extVisible="',soy.$$escapeHtmlAttribute(A.activityContainer.visibleToExtCollaborator),'" data-objectID="',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.context.id),'" data-objectType="',soy.$$escapeHtmlAttribute(A.activityContainer.activityList[0].content.context.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.inbox.item.list.mention({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[0],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</div></div></div>")}else{if(A.renderLocation=="globalNav"){B.append('<a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox?objectType="+A.activityContainer.jiveObject.objectType+"&objectID="+A.activityContainer.jiveObject.id))),'" id="homeNavCommItem_',A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,'" class="j-comm-entry j-js-ibx-item j-act-mentions j-act-unread">');jive.eae.inbox.item.list.mention({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[0],hidden:false,time:A.activityContainer.parentTime,renderLocation:A.renderLocation},B);B.append("</a>")}}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}jive.eae.actionqueue.actions=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.actions.link"),[])),'</title><meta name="nav.active.link" content="jive-nav-link-home" /><meta name="description" content="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])),'" /></head><body class="j-body-home j-body-inbox j-body-inbox-actions"><div class="j-layout j-layout-sl clearfix j-contained j-rc5"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.nav"),[])),'">');jive.welcome.homeSideNav({homeNavHelper:A.homeNavHelper,selectedLinkID:"jive-nav-link-actions"},B);B.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');jive.eae.actionqueue.actionsDynamicPane(A,B);B.append("</div></div></div></body>");return C?"":B.toString()};jive.eae.actionqueue.actionsDynamicPane=function(A,C){var B=C||new soy.StringBuilder();jive.eae.actionqueue.actionsTabs(A,B);B.append('<!-- BEGIN main body --><div id="j-actions-page-content" class="j-stream" role="main" aria-label="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),'">');if(A.actionQueue.currentTab!="jive-tasks"){jive.eae.actionqueue.actionsContent(A,B)}B.append("</div>");jive.shared.soy.resourceInlineJs({code:"$j(function(){require(['jive.ActionQueue.Main'], function(AQMain) {if (jive.ActionQueue && jive.ActionQueue.Controller) {jive.ActionQueue.Controller.init({currentTab: '"+soy.$$escapeHtml(A.actionQueue.currentTab)+"'});}else {jive.ActionQueue.Controller = new AQMain({currentTab: '"+soy.$$escapeHtml(A.actionQueue.currentTab)+"'}); jive.ActionQueue.Controller.attachGlobalEventListeners();}});});"},B);return C?"":B.toString()};jive.eae.actionqueue.actionsTabs=function(A,C){var B=C||new soy.StringBuilder();B.append('<header id="j-actions-page-tabs" class="j-act-header clearfix"><h1 class="header">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[])),'</h1><div id="j-aq-filters"><a id="jive-aq-pending" class="filter ',(!A.isArchived)?"j-sub-selected font-color-normal":"",'" data-type="awaiting_action" href="#"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("actions.show.pending"),[])),'</span> <span class="count">');jive.eae.actionqueue.aqTabCount({count:A.actionsCount},B);B.append('</span></a><a id="jive-aq-archived" class="filter ',(A.isArchived)?"j-sub-selected font-color-normal":"",'" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/actions/archived")),'"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("actions.show.archived"),[])),'</span></a><span id="j-tasks-nav" class="j-aq-tasks"><a id="jive-tasks" href="#"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("actions.tasks.tab"),[])),'</span> <span class="count">');jive.eae.actionqueue.aqTabCount({count:A.tasksCount},B);B.append("</span></a></span></div></header>");return C?"":B.toString()};jive.eae.actionqueue.aqTabCount=function(A,C){var B=C||new soy.StringBuilder();B.append('<span data-count="',soy.$$escapeHtml(A.count),'" class="j-js-update-indicator" ',(A.count==0)?'style="display:none;"':"",">",(A.count>50)?"(50+)":"("+soy.$$escapeHtml(A.count)+")","</span>");return C?"":B.toString()};jive.eae.actionqueue.actionsContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-action-queue" class="j-aq-stream">');jive.eae.actionqueue.actionQueue(A,B);B.append("</div>");return C?"":B.toString()};jive.eae.actionqueue.jsI18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()};jive.eae.actionqueue.actionQueue=function(A,C){var B=C||new soy.StringBuilder();if(A.actionQueue.actionQueueList&&A.actionQueue.actionQueueList.length>0){jive.eae.actionqueue.actionQueueList(A,B)}else{jive.eae.actionqueue.noActionQueueResults(A,B)}return C?"":B.toString()};jive.eae.actionqueue.actionQueueList=function(A,G){var C=G||new soy.StringBuilder();if(A.actionQueue.actionQueueList){var E=A.actionQueue.actionQueueList;var D=E.length;for(var F=0;F<D;F++){var B=E[F];jive.eae.actionqueue.actionQueueItemView({actionQueueItem:B,renderLocation:"actions"},C)}}C.append((A.actionQueue.hasMore)?"<div><a class='j-js-load-more j-act-append j-rc6' href='#'><span class=\"j-rc6 j-more-label\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.load_more"),[]))+"</span></a></div>":"");return G?"":C.toString()};jive.eae.actionqueue.noActionQueueResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-js-aq-noresults j-aq-noresults"><span class="j-empty font-color-meta">',soy.$$escapeHtml(A.archived?jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.no_archived_actions"),[]):jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.no_pending_actions"),[])),"</span></div>");return C?"":B.toString()};jive.eae.actionqueue.actionQueueItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="article_actionqueue_',soy.$$escapeHtml(A.actionQueueItem.entryID),'" data-creationdate="',soy.$$escapeHtml(A.actionQueueItem.creationDate),'" class="j-aq-entry clearfix">');if(A.actionQueueItem.template){jive.shared.soy.render({templateName:A.actionQueueItem.template,data:(function(){var F={};var E=[["data",A.actionQueueItem.templateData],["creationTime",A.actionQueueItem.creationTime],["renderLocation",A.renderLocation]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:false},B)}B.append("</div>");return C?"":B.toString()};jive.eae.actionqueue.excerptActionQueueItemView=function(B,G){var D=G||new soy.StringBuilder();if(B.actionQueueItem.user){jive.shared.displayutil.avatar(soy.$$augmentData(B.actionQueueItem.user,{size:46}),D)}else{if(B.actionQueueItem.nonUserSource){jive.eae.actionqueue.nonUserSourceImage({source:B.actionQueueItem.nonUserSource,size:"46"},D)}}jive.eae.actionqueue.actionQueueItemInfo(B,D);D.append('<div class="j-aq-actions clearfix">');var A=B.actionQueueItem.actions;var C=A.length;for(var F=0;F<C;F++){var E=A[F];jive.eae.actionqueue.actionQueueItemAction({action:E},D)}D.append("</div>");return G?"":D.toString()};jive.eae.actionqueue.nonUserSourceImage=function(A,C){var B=C||new soy.StringBuilder();B.append('<img class="jive-avatar" src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.source.imgurl),'" width="',soy.$$escapeHtml(A.size),'" alt="" height="',soy.$$escapeHtml(A.size),'"/>');return C?"":B.toString()};jive.eae.actionqueue.actionQueueItemInfo=function(A,C){var B=C||new soy.StringBuilder();if(A.actionQueueItem.user){if(!A.actionQueueItem.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.actionQueueItem.user,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(A.actionQueueItem.message),'<a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.actionQueueItem.jiveObject.jiveObjectURL),'" class="title"><span class="jive-icon-med  ',soy.$$escapeHtml(A.actionQueueItem.jiveObject.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.actionQueueItem.jiveObject.renderedSubject),"</a>",(A.actionQueueItem.details)?"<div class='j-action-details clearfix'><a href='#' class='j-js-view-action-details'>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.more"),[]))+"</a></div>":"");return C?"":B.toString()};jive.eae.actionqueue.actionQueueItemAction=function(A,C){var B=C||new soy.StringBuilder();B.append((A.action.href)?'<a href="'+soy.$$escapeHtml(A.action.href)+'" class="j-btn-global j-action-button">'+soy.$$escapeHtml(A.action.name)+"</a>":'<a href="#" name="'+soy.$$escapeHtml(A.action.code)+'" class="j-btn-global j-action-button">'+soy.$$escapeHtml(A.action.name)+"</a>");return C?"":B.toString()};jive.eae.actionqueue.actionQueueItemActionResult=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-action-result">');if(A.data.templateData.template){jive.shared.soy.render({templateName:A.data.templateData.template,data:(function(){var F={};var E=[["data",A.data.templateData]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:false},B)}B.append("</div>");return C?"":B.toString()};jive.eae.actionqueue.actionError=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-action-result" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.error_performing_action"),[])),"</div>");return C?"":B.toString()};jive.eae.actionqueue.actionQueueItemDetails=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(A.actionQueueItem.details));return C?"":B.toString()};jive.eae.actionqueue.guestActions=function(A,C){var B=C||new soy.StringBuilder();B.append('<body class="j-body-inbox j-body-inbox-guest"><header class="j-page-header"><h1>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),'</h1></header><div class="j-login-prompt">');jive.guest.page.whyLoginOrRegister({accountCreationEnabled:A.accountCreationEnabled,validationEnabled:A.validationEnabled,reasons:'<div class="j-rc5"><h3>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.action"),[]))+'</h3><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/apps/app-actions.png"))+'" class="j-aq-screenshot"/><ul class="j-simple-list"><li>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.actions"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.notifications"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.tasks"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.everything"),[]))+"</li></ul></div>"},B);B.append("</div></body>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}if(typeof jive.eae.actionqueue.item=="undefined"){jive.eae.actionqueue.item={}}jive.eae.actionqueue.item.socialGroupJoinRequest=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data j-aq-av clearfix">');if(A.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(A.data.user,{size:A.renderLocation=="actions"?44:32,hideLink:A.renderLocation=="actions"?false:true,currentUserPartner:A.data.currentUserPartner}),B)}B.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.request.label"),[])),"</h4><p>");jive.eae.actionqueue.item.actionQueueItemInfo(A,B);B.append('</p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var D=A.data.actions;var E=D.length;for(var F=0;F<E;F++){var C=D[F];jive.eae.actionqueue.actionQueueItemAction({action:C},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.socialGroupJoinRequestResult=function(A,C){var B=C||new soy.StringBuilder();if(A.data.user){if(!A.data.user.anonymous){if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.user,B)}else{jive.shared.displayutil.userDisplayName(A.data.user,B)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></strong>");return C?"":B.toString()};jive.eae.actionqueue.item.invitationUserRelSuggestion=function(G,E){var C=E||new soy.StringBuilder();C.append('<div class="j-aq-data j-aq-av user-approved clearfix">');if(G.data.targetUser){jive.shared.displayutil.avatar(soy.$$augmentData(G.data.targetUser,{size:G.renderLocation=="actions"?44:32,hideLink:G.renderLocation=="actions"?false:true,currentUserPartner:G.data.currentUserPartner}),C)}C.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.relationship.label"),[])),"</h4><p>");var F=new soy.StringBuilder();if(G.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(G.data.targetUser,F)}else{jive.shared.displayutil.userDisplayName(G.data.targetUser,F)}jive.shared.soy.i18nHelper({i18nKey:G.data.userIsInviter?"eae.inbox.invite.rel.inviter":"eae.inbox.invite.rel.invitee",arg0:F.toString(),noAutoEscape:true},C);C.append("</p>");jive.eae.actionqueue.item.notifiedUsers(G,C);C.append('</div><div class="j-act-meta font-color-meta-light">',(G.creationTime)?"<strong>"+soy.$$escapeHtml(G.creationTime)+"</strong>":"","</div>");if(G.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(G.data.actionable){var H=G.data.actions;var B=H.length;for(var D=0;D<B;D++){var I=H[D];jive.eae.actionqueue.actionQueueItemAction({action:I},C)}}else{if(G.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(G.data.actionTakenKey),[])))}}if(G.data.isFollowing&&G.data.actionable){C.append('<div class="js-follow-user-link j-action-following clearfix" data-userid="',soy.$$escapeHtmlAttribute(G.data.targetUser.id),'"  data-streamsassoc="',soy.$$escapeHtmlAttribute(G.data.streamsAssociatedCount),'" data-bidirectional="false" data-displayname="',soy.$$escapeHtmlAttribute(G.data.user.displayName),'" data-approvals-enabled="',soy.$$escapeHtmlAttribute(G.data.approvalsEnabled),'" style="float:left" aria-live="polite" aria-atomic="true"><a href="#" class="js-follow j-action-button j-btn-global" ',(G.data.isFollowing=="true"||G.data.isPendingApproval=="true")?'style="display:none"':"","><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.startfollowing.button"),[])),' </span><span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span></a><span class="js-pending j-action-button j-btn-global j-disabled" ',(G.data.isPendingApproval=="false")?'style="display:none"':"","><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.follow.pendingapproval.text"),[])),'</span></span><a href="#" class="j-following js-following j-action-button j-btn-global" ',(G.data.isFollowing=="false")?'style="display:none"':"","><span>");var A=new soy.StringBuilder();jive.people.profile.streamsAssociatedCount({count:G.data.streamsAssociatedCount,renderLocation:G.renderLocation},A);jive.shared.soy.i18nHelper({i18nKey:"profile.friends.following.link",arg0:A.toString(),noAutoEscape:true},C);C.append("</span></a></div>")}C.append("</div>")}return E?"":C.toString()};jive.eae.actionqueue.item.userRelApprovalRequest=function(G,D){var C=D||new soy.StringBuilder();C.append('<div class="j-aq-data j-aq-av user-approved clearfix">');if(G.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(G.data.user,{size:G.renderLocation=="actions"?44:32,hideLink:G.renderLocation=="actions"?false:true,currentUserPartner:G.data.currentUserPartner}),C)}C.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.relationship.label"),[])),"</h4><p>");var E=new soy.StringBuilder();if(G.data.isCurrentUser){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!G.data.user.anonymous){if(G.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(G.data.user,E)}else{jive.shared.displayutil.userDisplayName(G.data.user,E)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},E)}}var I=new soy.StringBuilder();if(G.data.isRelatedUser){I.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.you"),[])))}else{if(!G.data.relatedUser.anonymous){if(G.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(G.data.relatedUser,I)}else{jive.shared.displayutil.userDisplayName(G.data.relatedUser,I)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},I)}}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.request_connection",arg0:E.toString(),arg1:I.toString(),arg2:soy.$$escapeHtml(G.data.label),noAutoEscape:true},C);C.append("</p>",(G.data.requestMessage)?'<p class="j-aq-text j-reg-request">&#147;'+soy.$$escapeHtml(G.data.requestMessage)+"&#148;</p>":"");jive.eae.actionqueue.item.notifiedUsers(G,C);C.append('</div><div class="j-act-meta font-color-meta-light">',(G.creationTime)?"<strong>"+soy.$$escapeHtml(G.creationTime)+"</strong>":"","</div>");if(G.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(G.data.actionable){var F=G.data.actions;var A=F.length;for(var B=0;B<A;B++){var H=F[B];jive.eae.actionqueue.actionQueueItemAction({action:H},C)}}else{if(G.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(G.data.actionTakenKey),[])))}}C.append("</div>")}return D?"":C.toString()};jive.eae.actionqueue.item.userRelApprovalRequestResult=function(A,F){var C=F||new soy.StringBuilder();var D=new soy.StringBuilder();if(A.data.isCurrentUser){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!A.data.user.anonymous){if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.user,D)}else{jive.shared.displayutil.userDisplayName(A.data.user,D)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},D)}}var E=new soy.StringBuilder();if(A.data.isRelatedUser){E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.your"),[])))}else{var B=new soy.StringBuilder();if(!A.data.relatedUser.anonymous){if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.relatedUser,B)}else{jive.shared.displayutil.userDisplayName(A.data.relatedUser,B)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.user.plural",arg0:B.toString(),noAutoEscape:true},E)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(A.data.messageKey),arg0:D.toString(),arg1:(A.data.isCurrentUser)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.have"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.has"),[])),arg2:E.toString(),arg3:soy.$$escapeHtml(A.data.label),noAutoEscape:true},C);return F?"":C.toString()};jive.eae.actionqueue.item.userRelNotificationRequest=function(F,D){var A=D||new soy.StringBuilder();A.append('<div class="j-aq-data j-aq-av user-rel-request clearfix">');if(F.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(F.data.user,{size:F.renderLocation=="actions"?44:32,hideLink:F.renderLocation=="actions"?false:true,currentUserPartner:F.data.currentUserPartner}),A)}A.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.relationship.label"),[])),"</h4><p>");var J=new soy.StringBuilder();if(F.data.isCurrentUser){J.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!F.data.user.anonymous){if(F.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(F.data.user,J)}else{jive.shared.displayutil.userDisplayName(F.data.user,J)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},J)}}var I=new soy.StringBuilder();if(F.data.isRelatedUser){I.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.your"),[])))}else{var G=new soy.StringBuilder();if(!F.data.relatedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(F.data.relatedUser,G)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},G)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.user.plural",arg0:G.toString(),noAutoEscape:true},I)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(F.data.messageKey),arg0:J.toString(),arg1:(F.data.isCurrentUser)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.have"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.has"),[])),arg2:I.toString(),arg3:soy.$$escapeHtml(F.data.label),noAutoEscape:true},A);A.append("</p>");jive.eae.actionqueue.item.notifiedUsers(F,A);A.append('</div><div class="j-act-meta font-color-meta-light">',(F.creationTime)?"<strong>"+soy.$$escapeHtml(F.creationTime)+"</strong>":"","</div>");if(F.renderLocation=="actions"){A.append('<div class="j-aq-actions clearfix">');if(F.data.actionable){var H=F.data.actions;var C=H.length;for(var E=0;E<C;E++){var K=H[E];jive.eae.actionqueue.actionQueueItemAction({action:K},A)}}else{if(F.data.actionTakenKey){A.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.data.actionTakenKey),[])))}}if(F.data.isFollowing&&F.data.actionable){A.append('<div class="js-follow-user-link j-action-following clearfix" data-userid="',soy.$$escapeHtmlAttribute(F.data.user.id),'"  data-streamsassoc="',soy.$$escapeHtmlAttribute(F.data.streamsAssociatedCount),'" data-bidirectional="false" data-displayname="',soy.$$escapeHtmlAttribute(F.data.user.displayName),'" data-approvals-enabled="',soy.$$escapeHtmlAttribute(F.data.approvalsEnabled),'" style="float:left" aria-live="polite" aria-atomic="true"><a href="#" class="js-follow j-action-button j-btn-global" ',(F.data.isFollowing=="true"||F.data.isPendingApproval=="true")?'style="display:none"':"","><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.startfollowing.button"),[])),' </span><span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span></a><span class="js-pending j-action-button j-btn-global j-disabled" ',(F.data.isPendingApproval=="false")?'style="display:none"':"","><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.follow.pendingapproval.text"),[])),'</span></span><a href="#" class="j-following js-following j-action-button j-btn-global" ',(F.data.isFollowing=="false")?'style="display:none"':"","><span>");var B=new soy.StringBuilder();jive.people.profile.streamsAssociatedCount({count:F.data.streamsAssociatedCount,renderLocation:F.renderLocation},B);jive.shared.soy.i18nHelper({i18nKey:"profile.friends.following.link",arg0:B.toString(),noAutoEscape:true},A);A.append("</span></a></div>")}A.append("</div>")}return D?"":A.toString()};jive.eae.actionqueue.item.socialGroupJoinNotificationRequest=function(B,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data sg-join-reqest clearfix">',(B.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.messageKey),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.data.objData.href),'" class="title">');if(B.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:B.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(B.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(B.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(B.creationTime)?"<strong>"+soy.$$escapeHtml(B.creationTime)+"</strong>":"","</div>");if(B.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(B.data.actionable){var F=B.data.actions;var A=F.length;for(var E=0;E<A;E++){var D=F[E];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}}else{if(B.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.invitationNotificationRequest=function(B,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data j-aq-av invite-request clearfix">');if(B.data.inviter){jive.shared.displayutil.avatar(soy.$$augmentData(B.data.inviter,{size:B.renderLocation=="actions"||B.data.overrideFadeout?44:32,hideLink:B.renderLocation=="actions"||B.data.overrideFadeout?false:true,currentUserPartner:B.data.currentUserPartner}),C)}C.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.invite.label"),[])),"</h4><p>");if(!B.data.inviter.anonymous){if(B.renderLocation=="actions"||B.data.overrideFadeout){jive.shared.displayutil.userDisplayNameLink(B.data.inviter,C)}else{jive.shared.displayutil.userDisplayName(B.data.inviter,C)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},C)}C.append(" ",soy.$$escapeHtml(B.data.inviteText),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.data.objData.href),'" class="title">');if(B.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:B.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(B.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(B.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(B.creationTime)?"<strong>"+soy.$$escapeHtml(B.creationTime)+"</strong>":(B.data.overrideFadeout)?"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[]))+"</strong>":"","</div>");if(B.renderLocation=="actions"||B.data.overrideFadeout){C.append('<div class="j-aq-actions clearfix">');if(B.data.actionable){var F=B.data.actions;var A=F.length;for(var E=0;E<A;E++){var D=F[E];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}}else{if(B.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.documentApprovalRequest=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-data doc-approved clearfix">',(B.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.request.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.doc.approval.request"),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.data.objData.href),'" class="title">');if(B.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:B.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtmlAttribute(B.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(B.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(B.creationTime)?"<strong>"+soy.$$escapeHtml(B.creationTime)+"</strong>":"","</div>");if(B.renderLocation=="actions"){D.append('<div class="j-aq-actions clearfix">');if(B.data.actionable){var A=B.data.actions;var C=A.length;for(var F=0;F<C;F++){var E=A[F];jive.eae.actionqueue.actionQueueItemAction({action:E},D)}}else{if(B.data.actionTakenKey){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.actionTakenKey),[])))}}D.append("</div>")}return G?"":D.toString()};jive.eae.actionqueue.item.documentApprovalNotificationRequest=function(A,H){var C=H||new soy.StringBuilder();C.append('<div class="j-aq-data doc-request-approval clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>");if(A.data.approver){var E=new soy.StringBuilder();if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.approver,E)}else{jive.shared.displayutil.userDisplayName(A.data.approver,E)}jive.shared.soy.i18nHelper({i18nKey:A.data.messageKey,arg0:E.toString(),noAutoEscape:true},C);C.append(":")}else{C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),":")}C.append(' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p>",(A.data.rejectionNote)?'<p class="j-aq-text j-aq-message">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.rejectionNote)+"</p>":"",(A.data.currentlyRejected)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.currentlyRejected),[]))+"</p>":"",'</div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var B=A.data.actions;var D=B.length;for(var G=0;G<D;G++){var F=B[G];jive.eae.actionqueue.actionQueueItemAction({action:F},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return H?"":C.toString()};jive.eae.actionqueue.item.externalApprovalRequest=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data ext-request-approval clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.doc.approval.request"),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var B=A.data.actions;var D=B.length;for(var F=0;F<D;F++){var E=B[F];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.externalNotificationRequest=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data ext-request clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></strong></p>",(A.data.rejectionNote)?'<p class="j-aq-text j-aq-message">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.rejectionNote)+"</p>":"",'</div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var B=F.length;for(var E=0;E<B;E++){var D=F[E];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.moderatedContentNotificationRequest=function(A,H){var C=H||new soy.StringBuilder();C.append('<div class="j-aq-data mod-request clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-moderation"></span>':'<span class="jive-icon-big jive-icon-moderation acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.moderation.label"),[])),"</h4><p>");if(A.data.commentMessageKey){var B=new soy.StringBuilder('<strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></strong>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(A.data.commentMessageKey),arg0:B.toString(),noAutoEscape:true},C)}else{C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></strong>")}C.append("</p>",(A.data.responseMessage)?'<p class="j-aq-text j-aq-message">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.responseMessage)+"</p>":"",'</div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var D=A.data.actions;var E=D.length;for(var G=0;G<E;G++){var F=D[G];jive.eae.actionqueue.actionQueueItemAction({action:F},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return H?"":C.toString()};jive.eae.actionqueue.item.collaboratorNotificationRequest=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-data j-collab-request clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(A.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){D.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}}else{if(A.data.actionTakenKey){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}D.append("</div>")}return G?"":D.toString()};jive.eae.actionqueue.item.pendingTaskNotification=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data task-pending clearfix"><h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.task.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.userRegistrationApproval=function(G,E){var B=E||new soy.StringBuilder();B.append('<div class="j-aq-data j-aq-av user-approved clearfix">');if(G.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(G.data.user,{size:G.renderLocation=="actions"?44:32,hideLink:G.renderLocation=="actions"?false:true,currentUserPartner:G.data.currentUserPartner}),B)}B.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>");var F=new soy.StringBuilder();if(!G.data.user.anonymous){if(G.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(G.data.user,F)}else{jive.shared.displayutil.userDisplayName(G.data.user,F)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},F)}var A=new soy.StringBuilder();if(!G.data.user.anonymous){if(G.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(G.data.user,A)}else{jive.shared.displayutil.userDisplayName(G.data.user,A)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},A)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.user.reg.approval_request",arg0:F.toString(),arg1:A.toString(),noAutoEscape:true},B);B.append("</p>",(G.data.requestMessage)?'<p class="j-aq-text j-aq-message">&#147;'+soy.$$escapeHtml(G.data.requestMessage)+"&#148;</p>":"");jive.eae.actionqueue.item.notifiedUsers(G,B);B.append('</div><div class="j-act-meta font-color-meta-light">',(G.creationTime)?"<strong>"+soy.$$escapeHtml(G.creationTime)+"</strong>":"","</div>");if(G.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(G.data.actionable){var H=G.data.actions;var C=H.length;for(var D=0;D<C;D++){var I=H[D];jive.eae.actionqueue.actionQueueItemAction({action:I},B)}}else{if(G.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(G.data.actionTakenKey),[])))}}B.append("</div>")}return E?"":B.toString()};jive.eae.actionqueue.item.assignedTaskNotification=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data j-aq-av task-assigned clearfix">');if(A.data.assignor){jive.shared.displayutil.avatar(soy.$$augmentData(A.data.assignor,{size:A.renderLocation=="actions"?44:32,hideLink:A.renderLocation=="actions"?false:true,currentUserPartner:A.data.currentUserPartner}),B)}B.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.task.label"),[])),"</h4><p>");if(!A.data.assignor.anonymous){if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.assignor,B)}else{jive.shared.displayutil.userDisplayName(A.data.assignor,B)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.upgradeEmailPreferences=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data j-act-emailprefs clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>',"<h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.title"),[])),"</h2><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.desc"),[])),'</p><h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.new.title"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.new.desc"),[])),'</p><h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.old.title"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.old.desc"),[])),'</p><p class="j-aq-text"><strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/user-preferences!input.jspa"),'" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.edit.lnk"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.edit.lnk"),[])),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var E=F.length;for(var C=0;C<E;C++){var D=F[C];jive.eae.actionqueue.actionQueueItemAction({action:D},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.upgradeEmailPreferencesResult=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.i18nHelper({i18nKey:A.data.messageKey,noAutoEscape:true,arg0:'<strong><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/user-preferences!input.jspa")+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.customize"),[]))+"</a></strong>"},B);return C?"":B.toString()};jive.eae.actionqueue.item.actionQueueItemInfo=function(A,C){var B=C||new soy.StringBuilder();if(A.data.user){if(!A.data.user.anonymous){if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(A.data.user,B)}else{jive.shared.displayutil.userDisplayName(A.data.user,B)}}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.sg.join.request"),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="j-jq-obj title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtmlAttribute(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></strong>");jive.eae.actionqueue.item.notifiedUsers(A,B);return C?"":B.toString()};jive.eae.actionqueue.item.notifiedUsers=function(A,G){var B=G||new soy.StringBuilder();if(A.data.notifiers.length>0){B.append('<p class="j-aq-text j-jq-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.also.seen.by"),[])),": ");var F=A.data.notifiers;var C=F.length;for(var E=0;E<C;E++){var D=F[E];if(A.renderLocation=="actions"){jive.shared.displayutil.userDisplayNameLink(D,B)}else{jive.shared.displayutil.userDisplayName(D,B)}B.append((!(E==C-1))?", ":"")}B.append("</p>")}return G?"":B.toString()};jive.eae.actionqueue.item.widgetsDeprecatedNotification=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data widgets-deprecated clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.deprecated.notification"),[])),'</p><p class="j-aq-text"><strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.url),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.gotoyourplaces.link"),[])),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var E=F.length;for(var C=0;C<E;C++){var D=F[C];jive.eae.actionqueue.actionQueueItemAction({action:D},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.personalizedHomepage=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data personalized-homepage">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.title"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.text"),[])),'</p><p class="j-aq-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.text2"),[A.data.docBaseUrl+"?topic=/com.jivesoftware.help.sbs.online_6.0/user/WhatHappenedtoYourView.html",A.data.docBaseUrl+"?topic=/com.jivesoftware.help.sbs.online_6.0/user/QuickTour.html",A.data.docBaseUrl+"?topic=/com.jivesoftware.help.sbs.online_6.0/user/WhatsNewinThisVersion.html"])),'</p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var B=A.data.actions;var F=B.length;for(var D=0;D<F;D++){var E=B[D];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.newUserProfile=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data j-aq-av user-approved clearfix">');jive.shared.displayutil.avatar(soy.$$augmentData(A.data.user,{size:A.renderLocation=="actions"?44:32,currentUserPartner:A.data.currentUserPartner}),C);C.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.newuserprofile.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.newuserprofile.body"),[])),'</p><p><a href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/edit-profile-avatar!input.jspa"))),"?targetUser=",soy.$$escapeUri(A.data.user.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.change_photoavatar.link"),[])),'</a></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var B=A.data.actions;var F=B.length;for(var D=0;D<F;D++){var E=B[D];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.colleagueFollow=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data colleague-follows clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.colleague.follow.text"),[])),' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/people?filterID=following"),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.colleague.follow.following.link"),[])),'</a></strong></p></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var E=F.length;for(var C=0;C<E;C++){var D=F[C];jive.eae.actionqueue.actionQueueItemAction({action:D},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.streamsV6=function(B,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data notify-streams-v6 clearfix">',(B.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),'</h4><p><strong class="font-color-notify">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.streams.v6.text.watches.changed"),[])),"</strong></p><p>");jive.shared.soy.i18nHelper({i18nKey:"upgrade.streams.v6.text.watches",arg0:"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.streams.email_watches"),[]))+"</strong>",noAutoEscape:true},C);C.append('</p><p><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,"/images/eae/emails-to-streams.png"),'" alt="" border="0"></p><p>');jive.shared.soy.i18nHelper({i18nKey:"upgrade.streams.v6.text.other.watches",arg0:((B.renderLocation=="actions")?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/user-preferences!input.jspa")+'">':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("prefs.general.link"),[]))+((B.renderLocation=="actions")?"</a>":""),noAutoEscape:true},C);C.append('</p></div><div class="j-act-meta font-color-meta-light">',(B.creationTime)?"<strong>"+soy.$$escapeHtml(B.creationTime)+"</strong>":"","</div>");if(B.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(B.data.actionable){var A=B.data.actions;var F=A.length;for(var D=0;D<F;D++){var E=A[D];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}}else{if(B.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.historyBookmarksV6=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-data j-act-hbupgrade clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.new.feature.notification"),[])),'</h4><h5 class="font-face-deco">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.historybookmarks.v6.title"),[])),"</h5><p>");jive.shared.soy.i18nHelper({i18nKey:"upgrade.historybookmarks.v6.desc",noAutoEscape:true,arg0:"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.historybookmarks.v6.history"),[]))+"</strong>",arg1:"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.historybookmarks.v6.bookmarks"),[]))+"</strong>",noAutoEscape:true},B);B.append('</p><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,"/images/eae/notification-bookmarks-moved.png"),'" alt="" border="0"></div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var E=F.length;for(var C=0;C<E;C++){var D=F[C];jive.eae.actionqueue.actionQueueItemAction({action:D},B)}}else{if(A.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}B.append("</div>")}return G?"":B.toString()};jive.eae.actionqueue.item.licenseSubscriptionNotice=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-data compliance-notice ',soy.$$escapeHtmlAttribute(A.data.smb.platformAlarmLevel=="normal"?A.data.smb.maxAlarmLevel:A.data.smb.maxAlarmLevel),' clearfix">',(A.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4>");jive.license.smbTitle({smb:A.data.smb,date:A.data.date},C);jive.license.smbBody({smb:A.data.smb},C);jive.license.smbFooter(null,C);C.append('</div><div class="j-act-meta font-color-meta-light">',(A.creationTime)?"<strong>"+soy.$$escapeHtml(A.creationTime)+"</strong>":"","</div>");if(A.renderLocation=="actions"){C.append('<div class="j-aq-actions clearfix">');if(A.data.actionable){var F=A.data.actions;var E=F.length;for(var B=0;B<E;B++){var D=F[B];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}}else{if(A.data.actionTakenKey){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.actionTakenKey),[])))}}C.append("</div>")}return G?"":C.toString()};jive.eae.actionqueue.item.externalActivityEntry=function(F,E){var A=E||new soy.StringBuilder();A.append('<div class="j-aq-data ',(F.data.assignor)?"j-aq-av":"",' app-activity-temp clearfix">');if(F.renderLocation=="actions"){if(F.data.assignor){jive.shared.displayutil.avatar(soy.$$augmentData(F.data.assignor,{size:F.renderLocation=="actions"?44:32,hideLink:F.renderLocation=="actions"?false:true,currentUserPartner:F.data.currentUserPartner}),A);if(F.data.objData.icon){A.append('<div class="j-app-icon">');jive.shared.displayutil.renderIconElement({icon:F.data.objData.icon},A);A.append("</div>")}}A.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">');if(!F.data.assignor){if(F.data.objData.icon){jive.shared.displayutil.renderIconElement({icon:F.data.objData.icon},A);A.append(" ")}}A.append(F.data.objData.body,'</h4><div class="j-aq-summary">',F.data.objData.title,(F.data.objData.summary)?' <a href="#" onclick="return false;" class="j-actionQ-detail-show">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.more"),[]))+'</a><a href="#" onclick="return false;" class="j-actionQ-detail-hide" style="display:none;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.less"),[]))+"</a>":"","</div>");if(F.data.objData.summary){A.append('<div class="j-aq-detail clearfix" style="display:none;">');if(F.data.meta){jive.eae.common.renderStreamAttachments({object:F.data,domIDPostfix:F.data.objData.jiveID},A)}else{if(F.data.thumbnailImage){jive.shared.displayutil.renderIconElement({icon:F.data.thumbnailImage},A)}}A.append(F.data.objData.summary,(F.data.objData.mediaLink)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,F.data.objData.mediaLink.contentUrl?F.data.objData.mediaLink.contentUrl:F.data.objData.mediaLink.imageUrl)+'" target="_blank" title="'+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.filename?F.data.objData.mediaLink.filename:"")+'"><div class="j-act-attachment">'+((F.data.objData.mediaLink.thumbnailUrl)?'<div class="j-media-attachment"><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(F.data.objData.mediaLink.thumbnailUrl))+'" title="'+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.title)+'" alt="'+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.title)+'" width="'+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.thumbnailWidth)+'" height="'+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.thumbnailHeight)+'" border="0"/></div>':(F.data.objData.mediaLink.iconClass)?'<span class="jive-icon-big '+soy.$$escapeHtmlAttribute(F.data.objData.mediaLink.iconClass)+'"></span><span>'+soy.$$escapeHtml(F.data.objData.mediaLink.title)+"</span>":"")+"</div></a>":"","</div>")}}else{if(F.data.assignor){jive.shared.displayutil.avatar(soy.$$augmentData(F.data.assignor,{size:32,hideLink:true,currentUserPartner:F.data.currentUserPartner}),A)}else{A.append('<span class="acticon">');if(F.data.objData.icon){jive.shared.displayutil.renderIconElement({icon:F.data.objData.icon},A)}A.append("</span>")}A.append('<h4 tabindex="-1" class="j-aq-header font-color-meta">');var I=new soy.StringBuilder();jive.eae.actionqueue.item.externalActivityEntryGeneratorName(F.data.objData.generator,I);jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.from.external.activity.generator.badge",noAutoEscape:true,arg0:I.toString()},A);A.append("</h4><p>",F.data.objData.body,"</p>")}A.append('<div class="j-act-meta font-color-meta-light">',(F.creationTime)?"<strong>"+soy.$$escapeHtml(F.creationTime)+"</strong>":"",'<div class="j-act-via">');var C=new soy.StringBuilder();jive.eae.actionqueue.item.externalActivityEntryGeneratorName(F.data.objData.generator,C);jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.from.external.activity.generator",noAutoEscape:true,arg0:C.toString()},A);A.append("</div></div></div>");if(F.renderLocation=="actions"){A.append('<div class="j-aq-actions clearfix">');if(F.data.actionable){var D=F.data.actions;var G=D.length;for(var H=0;H<G;H++){var B=D[H];jive.eae.actionqueue.actionQueueItemAction({action:B},A)}}else{A.append((F.data.actionTakenName)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))+" "+soy.$$escapeHtml(F.data.actionTakenName):(F.data.actionTakenKey)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))+" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.data.actionTakenKey),[])):"")}A.append("</div>")}return E?"":A.toString()};jive.eae.actionqueue.item.externalActivityEntryGeneratorName=function(A,C){var B=C||new soy.StringBuilder();B.append((A!=null)?(A.name)?(A.url)?(((A.url).match(new RegExp("/^https?:\\/\\//",""))||[]))?'<a href="'+A.url+'" class="font-color-meta">'+soy.$$escapeHtml(A.name)+"</a>":'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+'">'+soy.$$escapeHtml(A.name)+"</a>":soy.$$escapeHtml(A.name):"":"");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}if(typeof jive.eae.actionqueue.item=="undefined"){jive.eae.actionqueue.item={}}jive.eae.actionqueue.item.nonUniqueUsersNotification=function(D,C){var B=C||new soy.StringBuilder();B.append('<div class="j-aq-data clearfix">',(D.renderLocation=="actions")?'<span class="jive-icon-huge jive-icon-gear"></span>':'<span class="jive-icon-big jive-icon-gear acticon"></span>','<h4 tabindex="-1" class="j-aq-header font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),'</h4><p>The following user accounts have non-unique email addresses.  Please modify these accounts in the admin console to ensure that each account\'s email address is unique.</p><p><table class="j-browse-list j-browse-details j-table" style="padding-top:10px;"><thead><tr><th>User ID</th><th>Username</th><th>Email</th></tr></thead><tbody>');var F=D.data.nonUniqueUsers;var I=F.length;for(var K=0;K<I;K++){var E=F[K];B.append('<tr><td><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/admin/editUserProfile!input.jspa?userId="+E.id)),'">',soy.$$escapeHtml(E.id),'</a></td><td><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/admin/editUserProfile!input.jspa?userId="+E.id)),'">',soy.$$escapeHtml(E.username),'</a></td><td><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/admin/editUserProfile!input.jspa?userId="+E.id)),'">',soy.$$escapeHtml(E.email),"</a></td></tr>")}B.append('</tbody></table></p></div><div class="j-act-meta font-color-meta-light">',(D.creationTime)?"<strong>"+soy.$$escapeHtml(D.creationTime)+"</strong>":"","</div>");if(D.renderLocation=="actions"){B.append('<div class="j-aq-actions clearfix">');if(D.data.actionable){var J=D.data.actions;var A=J.length;for(var H=0;H<A;H++){var G=J[H];jive.eae.actionqueue.actionQueueItemAction({action:G},B)}}else{if(D.data.actionTakenKey){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.action.taken"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(D.data.actionTakenKey),[])))}}B.append("</div>")}return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.license=="undefined"){jive.license={}}jive.license.smbTitle=function(A,C){var B=C||new soy.StringBuilder();B.append("<!--       --><!-- Title --><!--       -->");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.date",arg0:soy.$$escapeHtml(A.date),noAutoEscape:true},B);if(!A.smb.platformMoreAlarming){B.append("<p>");switch(A.smb.maxAlarmLevel){case"fail":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.failed"),[])),"</h2>");break;case"critical":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.critical"),[])),"</h2>");break;case"warning":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.warning"),[])),"</h2>");break;case"notice":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.notice"),[])),"</h2>");break}B.append("</p>")}return C?"":B.toString()};jive.license.smbFooter=function(A,C){var B=C||new soy.StringBuilder();B.append("<br><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.footer"),[])),"</p>");return C?"":B.toString()};jive.license.smbBody=function(P,Q){var M=Q||new soy.StringBuilder();M.append("<!-- platform message -->");if(P.smb.platformAlarmLevel!="normal"){M.append("<p>");switch(P.smb.platformAlarmLevel){case"fail":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.failed",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.shutdown),noAutoEscape:true},M);M.append("</h2>");break;case"critical":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.critical",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.shutdown),arg2:soy.$$escapeHtml(P.smb.platformInfo.daysToShutdown),noAutoEscape:true},M);M.append("</h2>");break;case"warning":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.warning",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),noAutoEscape:true},M);M.append("</h2>");break;case"notice":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.notice",arg0:soy.$$escapeHtml(P.smb.platformInfo.daysToExpiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.expiration),noAutoEscape:true},M);M.append("</h2>");break}M.append("</p>")}if(!P.smb.purePlatform){M.append("<!-- modules are in the mix -->");if(P.smb.hasExpiredGroups){M.append("<br>");if(P.smb.hasCritical){M.append("<p>");if(P.smb.hasFailedGroups){M.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.failed.header"),[])))}else{jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.header",arg0:soy.$$escapeHtml(P.smb.graceDays)},M)}M.append("</p><p><ul>");var T=P.smb.expiredGroups;var S=T.length;for(var L=0;L<S;L++){var N=T[L];M.append("<li>");if(N.daysToShutdown>0){jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.critical",arg0:soy.$$escapeHtml(N.expiration),arg1:soy.$$escapeHtml(N.daysToShutdown),arg2:soy.$$escapeHtml(N.shutdown),noAutoEscape:true},M)}else{jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.failure",arg0:soy.$$escapeHtml(N.expiration),arg1:soy.$$escapeHtml(N.shutdown),noAutoEscape:true},M)}var B=N.modules;var F=B.length;for(var a=0;a<F;a++){var K=B[a];M.append((!(a==0))?",":""," <b>",soy.$$escapeHtml(K),"</b>")}M.append("</li>")}M.append("</ul></p>")}else{M.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.expired.warning.header"),[])),"</p><p><ul>");var C=P.smb.warnGroups;var D=C.length;for(var W=0;W<D;W++){var X=C[W];M.append("<li>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.warning",arg0:soy.$$escapeHtml(X.expiration),noAutoEscape:true},M);var I=X.modules;var J=I.length;for(var E=0;E<J;E++){var O=I[E];M.append((!(E==0))?",":""," <b>",soy.$$escapeHtml(O),"</b>")}M.append("</li>")}M.append("</ul></p>")}}if(P.smb.noticeGroups){M.append("<br>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expiring.header",arg0:soy.$$escapeHtml(P.smb.warningDays)},M);M.append("<br><p><ul>");var H=P.smb.noticeGroups;var G=H.length;for(var Y=0;Y<G;Y++){var Z=H[Y];M.append("<li>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expiring",arg0:soy.$$escapeHtml(Z.expiration),noAutoEscape:true},M);var U=Z.modules;var V=U.length;for(var R=0;R<V;R++){var A=U[R];M.append((!(R==0))?",":""," <b>",soy.$$escapeHtml(A),"</b>")}M.append("</li>")}M.append("</ul></p>")}}return Q?"":M.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.home=="undefined"){jive.nav.menu.home={}}jive.nav.menu.home.main=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-home-global-nav-menu" class="j-quick-menu j-badge-menu j-act">');if(A.data){jive.nav.menu.home.content(A,B)}B.append("</div>");return C?"":B.toString()};jive.nav.menu.home.content=function(I,M){var F=M||new soy.StringBuilder();if(I.data.inboxItems.activityContainerList.length){F.append('<h4 class="j-badge-hd j-rc5 j-rc-none-bottom"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/inbox")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.inbox"),[])),'"><span class="jive-icon-med jive-icon-communications"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.inbox"),[])),"</a>");if(I.counts["inbox"]>0){F.append('<strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.home.menu.unread",arg0:(I.counts["inbox"]>50)?"50+":soy.$$escapeHtml(I.counts["inbox"]),noAutoEscape:true},F);F.append("</strong>")}F.append('</h4><ul id="j-home-nav-menu-inbox-list" class="j-badge-menu-list">');var J=I.data.inboxItems.activityContainerList;var K=J.length;for(var P=0;P<K;P++){var B=J[P];if(P<5){F.append("<li>");jive.eae.inbox.groupedCommStreamItem({activityContainer:B,user:I.data.inboxItems.viewingUser,streamType:"communications",filterType:["unread"],mobileUI:false,renderLocation:"globalNav"},F);F.append("</li>")}}F.append("</ul>")}if(I.data.actionItems.actionQueueList.length){F.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/actions")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.inbox"),[])),'"><span class="jive-icon-med jive-icon-actions"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.home.menu.new",arg0:(I.counts["actions"]>50)?"50+":soy.$$escapeHtml(I.counts["actions"]),noAutoEscape:true},F);F.append('</strong></h4><ul id="j-home-nav-menu-actions-list" class="j-badge-menu-list">');var L=I.data.actionItems.actionQueueList;var G=L.length;for(var A=0;A<G;A++){var D=L[A];if(A<5){F.append("<li>");jive.eae.actionqueue.actionQueueItemView({actionQueueItem:D,renderLocation:"globalNav"},F);F.append("</li>")}}F.append("</ul>")}if(I.data.taskItems.taskList.length){F.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/actions/tasks")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("project.feeds.ovrdtasks.label"),[])),'"><span class="jive-icon-med jive-icon-actions"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("project.feeds.ovrdtasks.label"),[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.home.menu.overdue",arg0:(I.counts["tasks"]>50)?"50+":soy.$$escapeHtml(I.counts["tasks"]),noAutoEscape:true},F);F.append('</strong></h4><ul id="j-home-nav-menu-tasks-list" class="j-badge-menu-list">');var N=I.data.taskItems.taskList;var R=N.length;for(var Q=0;Q<R;Q++){var E=N[Q];if(Q<5){F.append("<li>");jive.nav.menu.home.overdueTask({task:E},F);F.append("</li>")}}F.append("</ul>")}if(I.data.moderationItems.moderationList.length){F.append('<h4 class="j-badge-hd"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/moderation")),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.moderation"),[])),'"><span class="jive-icon-med jive-icon-actions"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.moderation.link"),[])),'</a><strong class="j-menu-count font-color-notify">');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.home.menu.new",arg0:(I.counts["moderations"]>50)?"50+":soy.$$escapeHtml(I.counts["moderations"]),noAutoEscape:true},F);F.append('</strong></h4><ul id="j-home-nav-menu-moderation-list" class="j-badge-menu-list">');var H=I.data.moderationItems.moderationList;var O=H.length;for(var S=0;S<O;S++){var C=H[S];if(5>S){F.append("<li>");jive.nav.menu.home.moderationItem({moderationItem:C},F);F.append("</li>")}}F.append("<ul>")}F.append("</div>");return M?"":F.toString()};jive.nav.menu.home.overdueTask=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/actions/tasks")),'" class="j-aq-entry font-color-normal clearfix"><span class="jive-icon-big jive-icon-task acticon"></span><div class="title font-color-link">',soy.$$escapeHtml(A.task.subject),'</div><div class="j-task-duedate font-color-danger">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.dueDate.date"),[A.task.dueDate])),"</div></a>");return C?"":B.toString()};jive.nav.menu.home.moderationItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/moderation")),'" class="j-aq-entry font-color-normal clearfix"><span class="acticon">');jive.shared.displayutil.icon({type:A.moderationItem.contentCode,size:"big"},B);B.append('</span><div class="title font-color-link">',soy.$$escapeHtml(A.moderationItem.contentDisplayName),' <span class="font-color-meta">by</span> ',soy.$$escapeHtml(A.moderationItem.user.displayName),'</div><div class="j-td-date font-color-meta">',soy.$$escapeHtml(A.moderationItem.creationDate),"</div></a>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.home=="undefined"){jive.home={}}jive.home.main=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtmlRcdata(A.streamDisplayName),'</title><meta name="nav.active.link" content="jive-nav-link-home" /><meta name="rte" value="true" /></head><body class="j-body-home"><div id="jive-breadcrumb"><span><a href="/">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.place.link"),[])),'</a> &nbsp;/&nbsp; <a href="/activity" class="jive-breadcrumb-last">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.activity.link"),[])),'</a></span></div><header id="apple-activity-header">',(!A.infoUser.anonymous)?'<div id="apple-email-updates"><form><ul class="j-form-group j-form-group-toggle ios-toggle"><li><span class="email-updates-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.activity.email.notification.title"),[]))+"</span>"+((A.localeLanguage=="English")?'<div class="ios-switch"></div>':(A.localeLanguage=="Japanese")?'<div class="ios-switch-ja"></div>':(A.localeLanguage=="Korean")?'<div class="ios-switch-ko"></div>':(A.localeLanguage=="Chinese")?'<div class="ios-switch-cn"></div>':'<div class="ios-switch"></div>')+'<input type="radio" id="activity_email_updates_on" value="true" name="activity_email_updates_on"><label class="j-form-label-special" for="activity_email_updates_on">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.activity.email.notification.flag.on"),[]))+'</label></li><li><input type="radio" id="activity_email_updates_off" value="false" name="activity_email_updates_off"><label class="j-form-label-special" for="activity_email_updates_off">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.activity.email.notification.flag.off"),[]))+"</label></li></ul></form></div>":"","<h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.activity.header"),[])),'</h2></header><h4 id="apple-activity-subheader">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("apple.activity.subheader"),[])),'</h4><!-- BEGIN layout --><div class="j-layout j-layout-sl clearfix j-contained j-rc5" id="j-streams-main"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.nav"),[])),'">');jive.welcome.homeSideNav({homeNavHelper:A.homeNavHelper,selectedLinkID:(A.streamType=="all")?"jive-nav-link-activity":(A.streamType=="connections")?"jive-nav-link-connections":(A.streamType=="watches")?"jive-nav-link-watches":"jive-nav-link-custom-"+soy.$$escapeHtml(A.streamID)},B);B.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');jive.home.dynamicPaneContents({activityStream:A.activityStream,activityStream4JS:A.activityStream4JS,streamDisplayName:A.streamDisplayName,streamType:A.streamType,streamID:A.streamID,recommenderEnabled:A.recommenderEnabled,pollingInterval:A.pollingInterval,invitationLink:A.invitationLink,connectionsInfoClosed:A.connectionsInfoClosed,infoType:A.infoType,infoUser:A.infoUser,latestStatusUpdate:A.latestStatusUpdate,dmEnabled:A.dmEnabled,canViewStatusUpdates:A.canViewStatusUpdates,statusUpdatesEnabled:A.statusUpdatesEnabled,preferredMode:A.preferredMode,startMode:A.startMode,mobileUI:A.mobileUI,communityName:A.communityName,numUpdatesSinceRefresh:A.numUpdatesSinceRefresh,invitationLink:A.homeNavHelper.invitationLink,communityFeedback:A.communityFeedback,quickTip:A.quickTip,hasImagePerms:A.hasImagePerms,isTrialActive:A.isTrialActive,focusStatusUpdate:A.focusStatusUpdate,createMenuData:A.createMenuData,hasInvitations:A.hasInvitations,hasPendingApprovals:A.hasPendingApprovals},B);B.append("</div></div></div></body>");return C?"":B.toString()};jive.home.dynamicPaneContents=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-activity-page" class="j-stream"><div class="j-stream-container" role="main" aria-labeledby="js-activity-heading">');jive.eae.activitystream.streamSpecificFilters({streamDisplayName:A.streamDisplayName,streamType:A.streamType,selectedFilter:["all"],recommenderEnabled:A.recommenderEnabled,canViewStatusUpdates:A.canViewStatusUpdates,numUpdatesSinceRefresh:A.numUpdatesSinceRefresh},B);jive.home.renderActivityStream(A,B);B.append("</div>");if(A.infoUser.partner){jive.home.partnerActivityWelcome(A,B)}B.append("</div>");return C?"":B.toString()};jive.home.renderActivityStream=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-activity-streams-wrapper" class="j-stream"><div id="previewable-binary-viewer"></div><div id="j-stream" class="j-act j-stream-list j-main-stream j-act-stream ',(!A.mobileUI)?"j-not-mobile":"",'">');jive.eae.activitystream.activityStream({activityStream:A.activityStream,activityStream4JS:A.activityStream4JS,streamDisplayName:A.streamDisplayName,streamType:A.streamType,streamID:A.streamID,viewingUser:A.activityStream.viewingUser,dmEnabled:A.dmEnabled,recommenderEnabled:A.recommenderEnabled,canViewStatusUpdates:A.canViewStatusUpdates,statusUpdatesEnabled:A.statusUpdatesEnabled,preferredMode:A.preferredMode,startMode:A.startMode,mobileUI:A.mobileUI,communityName:A.communityName,connectionsInfoClosed:A.connectionsInfoClosed,infoType:A.infoType,infoUser:A.infoUser,invitationLink:A.invitationLink,hasImagePerms:A.hasImagePerms},B);B.append("</div></div>");return C?"":B.toString()};jive.home.activityStreamCreateMenu=function(F,E){var D=E||new soy.StringBuilder();if(F.createMenuData.visible){jive.shared.soy.resourceInlineJs({code:"$j(function() {jive.ActivityStream.GlobalCreateMenuView = new jive.ActivityStream.CreateMenuView({createMenuData: "+JSON.stringify(F.createMenuData).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+"}); jive.ActivityStream.GlobalCreateMenuView.postRender();});"},D);D.append('<div id="j-as-create-menu" aria-hidden="true"><a href="#" id="as-create-menu-more" class="j-as-create-menu-more" style="display:none;"><span class="lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.more"),[])),'</span><span class="jive-icon-med jive-icon-down j-filter-icon"></span></a><div id="j-as-create-menu-items"><span class="j-as-create-item" role="heading"><span class="j-ui-elem j-create-icon"></span><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.create"),[])),":</span></span>",(F.canCreateStatusUpdates)?'<span class="j-as-create-status-update j-as-create-item" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.description.status"),[]))+'"><span class="jive-icon-status jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.status"),[]))+"</span>":"");var C=F.createMenuData.sections;var J=C.length;for(var G=0;G<J;G++){var A=C[G];if(A.name=="nav.bar.create.section.content"&&A.visible){var H=A.items;var B=H.length;for(var I=0;I<B;I++){var K=H[I];jive.home.activityStreamCreateMenuItem({item:K},D)}}}D.append("</div></div><div id=\"j-as-create-menu-pop\" class=\"j-pop-main j-quick-menu\" style=\"display:none;\"></div><script>(function() {var $upMenu = $j('#j-as-create-menu-items'), $menuItems = $upMenu.find('.j-as-create-item'), $moreBtn = $j('#as-create-menu-more'), upMenuWidth = $upMenu.outerWidth(true), createMenuItemsTotalWidth = 0; $menuItems.each(function() {createMenuItemsTotalWidth += $j(this).outerWidth(true);}); if (upMenuWidth >= createMenuItemsTotalWidth - 1) {$moreBtn.hide();}else {$moreBtn.show();}})();<\/script>")}return E?"":D.toString()};jive.home.activityStreamCreateMenuItem=function(A,C){var B=C||new soy.StringBuilder();if(A.item.nameKey!="nav.bar.create.status"&&A.item.visible){B.append('<a href="');jive.home.contentTypeHref__C2bf6(soy.$$augmentData(A.item,{legacy:((A.item.linkCss).match(new RegExp("js-legacy-create",""))||[]).length>0}),B);B.append('" class="',soy.$$escapeHtmlAttribute(A.item.linkCss),' j-as-create-item" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(A.item.descriptionKey),[])),'"',(A.item.urlParams&&A.item.urlParams.contentType)?' data-content-type="'+soy.$$escapeHtmlAttribute(A.item.urlParams.contentType)+'"':"");if(((A.item.linkCss).match(new RegExp("quick",""))||[]).length>0){B.append(' data-quick-create-url="');jive.home.contentTypeHref__C2bf6(soy.$$augmentData(A.item,{legacy:true}),B);B.append('"')}B.append(' data-ident="',soy.$$escapeHtmlAttribute(A.item.nameKey),'"><span class="',soy.$$escapeHtmlAttribute(A.item.iconCss),' jive-icon-med"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.item.nameKey),[])),"</a>")}return C?"":B.toString()};jive.home.activityStreamCreateMenuPopover=function(A,G){var D=G||new soy.StringBuilder();D.append('<ul class="j-icon-list">');var C=A.menuItems;var B=C.length;for(var F=0;F<B;F++){var E=C[F];D.append("<li>");jive.home.activityStreamCreateMenuItem({item:E},D);D.append("</li>")}D.append("</ul>");return G?"":D.toString()};jive.home.contentTypeHref=function(A,C){var B=C||new soy.StringBuilder();B.append((A.legacy)?(A.urlParams)?soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},(function(){var F={};var E=[["sr","amenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),A.urlParams))):soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString((function(){var F={};var E=[["sr","amenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"javascript:void(0)");return C?"":B.toString()};jive.home.newCount=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count>50)?"50+":soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.home.updateBadge=function(A,C){var B=C||new soy.StringBuilder();B.append("<div />");return C?"":B.toString()};jive.home.countForTitle=function(A,C){var B=C||new soy.StringBuilder();B.append("(");jive.home.newCount(A,B);B.append(")");return C?"":B.toString()};jive.home.partnerActivityWelcome=function(A,C){var B=C||new soy.StringBuilder();B.append((A.hasInvitations)?(!A.hasPendingApprovals)?'<div class="j-partner-welcome clearfix j-rc3"><span class="j-arrow"></span><span role=\'img\' title=\''+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.group"),[]))+'\' class="jive-icon-huge jive-icon-group"></span><h1 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.welcome.title"),[]))+"</h1><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.welcome.body"),[]))+"</p></div>":'<div class="j-partner-welcome j-act-empty clearfix font-color-normal"><h2>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.moderation.title"),[]))+"</h2><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.moderation.body"),[]))+'</p><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/stream-intro/sample.png")))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.example.image"),[]))+'" /></div>':'<div class="j-partner-welcome j-act-empty clearfix font-color-normal"><h2>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.noinvitations.title"),[]))+"</h2><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.activity.noinvitations.body"),[]))+'</p><img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/images/stream-intro/sample.png")))+'" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.example.image"),[]))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.example.image"),[]))+'" /></div>',"<script>$j(function() {jive.partner.actionPage.init(); jive.partner.actionPage.loadGroups();});<\/script>");return C?"":B.toString()};jive.home.contentTypeHref__C2bf6=function(A,C){var B=C||new soy.StringBuilder();B.append((A.legacy)?(A.urlParams)?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},(function(){var F={};var E=[["sr","amenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),A.urlParams)))):soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString((function(){var F={};var E=[["sr","amenu"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()))):"javascript:void(0)");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.welcome=="undefined"){jive.welcome={}}jive.welcome.main=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg("userbar.welcome.gtitle"),[])),'</title><meta name="nav.active.link" content="jive-nav-link-home" /><link rel="canonical" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.jiveURL)),'"/><link rel="stylesheet" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/styles/jive-widgets.css"))),'" type="text/css" media="all" /></head><body class="j-body-welcome j-body-home"><div class="j-layout j-layout-sl clearfix j-contained j-rc5"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.nav"),[])),'">');jive.welcome.homeSideNav({homeNavHelper:A.homeNavHelper,selectedLinkID:"jive-nav-link-dashboard"},B);B.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');jive.welcome.welcomeDynamicPane(A,B);B.append("</div></div></div><!-- END main body --></body>");return C?"":B.toString()};jive.welcome.simplifiedMain=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg("apple.userbar.welcome.gtitle"),[])),'</title><meta name="nav.active.link" content="jive-nav-link-home" /><link rel="canonical" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.jiveURL)),'"/><link rel="stylesheet" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.0/","","/styles/jive-widgets.css"))),'" type="text/css" media="all" /></head><body class="j-body-welcome j-body-home">');jive.welcome.welcomeDynamicPane(soy.$$augmentData(A,{selectedLinkID:"jive-nav-link-activity"}),B);B.append("<!-- END main body --></body>");return C?"":B.toString()};jive.welcome.welcomeDynamicPane=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"if (!widgetContainer) {var widgetContainer = new jive.widgets.Container({'widgetType': '"+soy.$$escapeHtml(A.widgetTypeKey)+"', 'renderWidgetAction': '"+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/render-widget.jspa"))+"', 'containerID': '"+soy.$$escapeHtml(A.place.id)+"', 'containerType': '"+soy.$$escapeHtml(A.place.objectType)+"'}); define('widgetContainer',widgetContainer);}var manage = new jive.places.Manage.Main("+JSON.stringify(A.place).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", {canManageAnnouncements: "+((A.canManageAnnouncements)?"true":"false")+", i18n: "+JSON.stringify((function(){var F={};var E=[["startFollowing",jive.i18n.i18nText(jive.i18n.getMsg(A.place.placeI18nKeyPrefix+".startFollow.desc"),[])],["stopFollowing",jive.i18n.i18nText(jive.i18n.getMsg(A.place.placeI18nKeyPrefix+".stopFollow.desc"),[])],["followError",jive.i18n.i18nText(jive.i18n.getMsg("global.follow.error"),[])]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'}); function toggleWidgetPanel() {var spinner = new jive.loader.LoaderView(); $j(document.body).addClass(\'jive-widget-progresscursor\').addClass(\'jive-body-widget-customizing\'); $j("#jive-widgets-panel-loading").show(); spinner.appendTo($j("#jive-widgets-panel-loading")); $j("#jive-widget-container").safelyLoad(\''+(jive.soy.func.normalizeUrl(window._jive_base_url,"customize-container.jspa")+"?"+encodeURIComponent("containerType")+"="+encodeURIComponent(A.place.objectType)+"&"+encodeURIComponent("containerID")+"="+encodeURIComponent(A.place.id))+'\', { cache: false }, function() {$j("#jive-widgets-panel-loading").hide(); spinner.destroy(); $j("#jive-widgets-panel").fadeIn(500); $j("#jive-widgets-warning").fadeIn(500); $j(document.body).removeClass(\'jive-widget-progresscursor\');'+((!A.customizeMessageSeen)?"$j('#customize-message').slideDown();":"")+"});}$j(document).ready(function() {widgetContainer.renderAll(); $j('#customize-message > #dismiss-link').click(dismissCustomizeMessage); $j('#js-layout-upgrade-link').click(function() { dismissLayoutUpgradeMessage(); return false; }); $j('#js-layout-upgrade-change-link').click(function() { dismissLayoutUpgradeMessage(); toggleWidgetPanel(); return false; }); $j('.widget-remove-link').live('click', function() { removeWidgetFrame(this); return false; }); $j('.widget-edit-link').live('click', function() { editWidgetFrame(this); return false; }); $j('.widget-dismiss-link').live('click', function() { dismissWidgetMessage(this); return false; }); var createQuick = new jive.Navbar.Menu.CreateQuick.Main('a.js-create-quick-link, a:has(.js-create-quick-link)');"+((A.customizeNow)?"toggleWidgetPanel();":"")+"}); function dismissCustomizeMessage() {$j('#customize-message').slideUp(); if ($j('#customize-message').find('#dont-display-message').prop('checked')) {var userSource = new jive.Browse.User.ItemSource(); userSource.setUserProperty({ userID: 'current', propName: 'jive.customizeWidgetMsg.closed', propValue: 'true' });}return false;}function dismissLayoutUpgradeMessage() {$j('#js-layout-upgrade').slideUp(); var containerSource = new jive.Browse.Container.ItemSource(); containerSource.removeContainerProperty({ containerType: "+soy.$$escapeHtml(A.place.objectType)+", containerID: "+soy.$$escapeHtml(A.place.id)+", propName: 'jive.upgrade.widgetLayoutInvalid'});}function dismissWidgetMessage(link) {$j(link).closest('.widget-message').slideUp(); var prop = $j(link).attr('data-property'); if (prop) {var userSource = new jive.Browse.User.ItemSource(); userSource.setUserProperty({ userID: 'current', propName: prop, propValue: 'true' });}}function removeWidgetFrame(button) {var frameID = widgets.getWidgetFrameID(button); if (frameID) {widgets.removeWidgetFrame(frameID);}}function editWidgetFrame(button) {var frameID = widgets.getWidgetFrameID(button); if (frameID) {widgets.editWidgetFrame(frameID);}}"},B);jive.announcements.list({announcements:A.announcements,showDismiss:false},B);if(A.canManageContainer){if(A.showLayoutUpgradeMessage){jive.welcome.layoutUpgradeMessage(null,B)}if(!A.customizeMessageSeen){jive.welcome.editPageMessage(null,B)}}B.append('<div id="jive-widgets-panel-loading" style="display: none"></div><div id="jive-widget-container" role="main" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.overview"),[])),'"><div id="jive-widget-content" class="clearfix">',A.widgetMarkup,"</div></div>",(A.canManageAnnouncements)?'<div class="jive-modal" id="jive-modal-announcements"><header><h2 class="jive-modal-title jive-modal-title-manage-announcements">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("announcement.manage.system.title"),[]))+'</h2><h2 class="jive-modal-title jive-modal-title-add-announcement" style="display: none">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("announcement.manage.add.title"),[]))+'</h2><h2 class="jive-modal-title jive-modal-title-edit-announcement" style="display: none">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("announcement.manage.edit.title"),[]))+'</h2></header><a href="#" class="j-modal-close-top close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[]))+'  <span class="j-close-icon j-ui-elem" role="img"></span></a><div id="announcements-modal"></div></div>':"","");return C?"":B.toString()};jive.welcome.layoutUpgradeMessage=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="customize-message jive-info-box clearfix" id="js-layout-upgrade" aria-live="polite" aria-atomic="true"><a href="#" id="js-layout-upgrade-link" style="float: right">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.dismiss.link"),[])),"</a><h5>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.layout.upgrade.header"),[])),'</h5><p class="welcome-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.layout.upgrade.text"),[])),'&nbsp;<a href="#" id="js-layout-upgrade-change-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.layout.upgrade.change.link"),[])),"</a></p></div>");return C?"":B.toString()};jive.welcome.editPageMessage=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="customize-message clearfix" id="customize-message" style="display: none"><a href="#" id="dismiss-link" style="float: right">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.dismiss.link"),[])),"</a><h5>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.editpagetitle"),[])),'</h5><p class="welcome-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.editinfo"),[])),'</p><div style="float:right"><input type="checkbox" id="dont-display-message"><label for="dont-display-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("welcome.dontshowmsg"),[])),"</label></div></div>");return C?"":B.toString()};jive.welcome.homeSideNav=function(F,E){var B=E||new soy.StringBuilder();B.append('<ul id="j-home-side-nav" class="j-homenav">');if(!F.homeNavHelper.partner){jive.welcome.homeSideNavLink(soy.$$augmentData(F.homeNavHelper.dashboardLink,{selected:(F.selectedLinkID==F.homeNavHelper.dashboardLink.id)?"true":"",canPin:F.homeNavHelper.canPin,pinned:F.homeNavHelper.canPin&&F.homeNavHelper.pinnedLinkID==F.homeNavHelper.dashboardLink.id,visible:F.homeNavHelper.dashboardLink.visible}),B)}jive.welcome.homeSideNavLink(soy.$$augmentData(F.homeNavHelper.activityStreamLink,{selected:(F.selectedLinkID==F.homeNavHelper.activityStreamLink.id)?"true":"",canPin:F.homeNavHelper.canPin,pinned:F.homeNavHelper.canPin&&F.homeNavHelper.pinnedLinkID==F.homeNavHelper.activityStreamLink.id}),B);if(!F.homeNavHelper.anonymous){if(F.homeNavHelper.activityStreams){var D=F.homeNavHelper.activityStreams;var J=D.length;for(var C=0;C<J;C++){var A=D[C];jive.welcome.activityStreamNavItem(soy.$$augmentData(A,{id:A.id,name:A.name,selected:A.selected,pollingEnabled:F.homeNavHelper.pollingEnabled,pinnedLinkID:F.homeNavHelper.pinnedLinkID,selectedLinkID:F.selectedLinkID}),B)}}}var I=F.homeNavHelper.customLinks;var H=I.length;for(var K=0;K<H;K++){var G=I[K];jive.welcome.homeSideNavLink(soy.$$augmentData(G,{selected:(F.selectedLinkID==G.id)?"true":"",pollingEnabled:F.homeNavHelper.pollingEnabled,canPin:false,pinned:false}),B)}B.append("</ul>");jive.shared.soy.resourceInlineJs({code:"$j(function() {require(['jive.HomeNav.Controller'], function(HomeNavController) {jive.HomeNav.GlobalController = new HomeNavController({selectedLinkID: '"+soy.$$escapeHtml(F.selectedLinkID)+"', pollingEnabled: "+soy.$$escapeHtml(F.homeNavHelper.pollingEnabled)+", canPin: "+soy.$$escapeHtml(F.homeNavHelper.canPin)+", maxCustomStreams: "+soy.$$escapeHtml(F.homeNavHelper.maxCustomStreams)+", showOnbIntroModal: "+soy.$$escapeHtml(F.homeNavHelper.showOnbIntroModal)+", sysDefaultHomeNavView: '"+soy.$$escapeHtml(F.homeNavHelper.systemDefaultHomeNavView)+"', onbIntroModalType: '"+soy.$$escapeHtml(F.homeNavHelper.onbIntroModalType)+"', instanceName: '"+soy.$$escapeHtml(F.homeNavHelper.instanceName)+"'});});});"},B);return E?"":B.toString()};jive.welcome.streamNameEditForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<form class="j-js-display-name-edit-controls j-edit-name j-form"><span class="apple-edit-stream-name">',soy.$$escapeHtml(A.streamName),'</span><label for="',soy.$$escapeHtmlAttribute(A.streamName),'-input-id" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.name"),[])),'</label><input type="text" maxlength="36" class="j-stream-name-input j-js-stream-name-input j-rc3" value="',soy.$$escapeHtmlAttribute(A.streamName),'" id="',soy.$$escapeHtmlAttribute(A.streamName),'-input-id"/></form>');return C?"":B.toString()};jive.welcome.homeSideNavLink=function(A,C){var B=C||new soy.StringBuilder();if(A.visible){B.append('<li id="',soy.$$escapeHtmlAttribute(A.id),'" class="j-js-side-nav-item j-homenav-item j-rc5 ',(A.selected)?"selected":""," ",(A.pinned)?"pinned":"",'" data-source="',soy.$$escapeHtmlAttribute(A.source),'"><span class="jive-icon-med ',soy.$$escapeHtmlAttribute(A.iconCss),' j-homenav-icon"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.url),'" ',(A.titleKey)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(A.titleKey),[]))+'"':"",' class="j-homenav-link j-js-side-nav-link ',soy.$$escapeHtmlAttribute(A.linkCss),'"><span class="nav-link lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</span>",(A.canPin)?'<span class="j-js-pin-stream jive-icon-sml j-stream-pin jive-glyph-pin-dark" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.home.set.default"),[]))+'"></span>':"");if(A.countType&&A.pollingEnabled){jive.welcome.updateIndicator({type:A.countType,count:0,extraCssClasses:"j-sidenav-count"},B)}B.append("</a></li>")}return C?"":B.toString()};jive.welcome.getStartedNavLink=function(A,C){var B=C||new soy.StringBuilder();if(A.visible){B.append('<li id="',soy.$$escapeHtmlAttribute(A.id),'" class="j-js-side-nav-item j-homenav-item j-rc5 ',(A.selected)?"selected":""," ",(A.pinned)?"pinned":"",'" data-source="',soy.$$escapeHtmlAttribute(A.source),'"><span class="jive-icon-med ',soy.$$escapeHtmlAttribute(A.iconCss),' j-homenav-icon"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.url),'" ',(A.titleKey)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(A.titleKey),[]))+'"':"",' class="j-homenav-link j-js-side-nav-link ',soy.$$escapeHtmlAttribute(A.linkCss),'"><span class="nav-link lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</span>");jive.welcome.onboardingNavProgress({percentComplete:A.viewData.percentComplete,questData:A.viewData.quests},B);B.append("</a></li>")}return C?"":B.toString()};jive.welcome.onboardingNavProgress=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-onb-nav-progress" title="');jive.shared.soy.i18nHelper({i18nKey:"onboarding.nav.progress.bar.title",arg0:A.questData[0].stepsComplete,arg1:A.questData[0].steps.length,arg2:A.questData[1].stepsComplete,arg3:A.questData[1].steps.length,arg4:A.questData[2].stepsComplete,arg5:A.questData[2].steps.length},B);B.append('"><strong class="j-complete ',(A.percentComplete==0)?" font-color-j-highlight j-notstarted":"font-color-new j-started",'">',soy.$$escapeHtml(A.percentComplete),'%</strong><div class="j-onb-progress j-rc5" ',(A.percentComplete==0)?' style="display:none"':'style="display:block"','><div class="j-progress-bar"><span class="j-index-holder"><span style="width: ',soy.$$filterCssValue(A.percentComplete),'%;" class="j-index"> </span></span></div></div></div>');return C?"":B.toString()};jive.welcome.activityStreamNavItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<li id="jive-nav-link-',soy.$$escapeHtmlAttribute(A.source),(A.source!="connections"&&A.source!="watches")?"-"+soy.$$escapeHtmlAttribute(A.id):"",'" data-streamid="',soy.$$escapeHtmlAttribute(A.id),'" data-source="',soy.$$escapeHtmlAttribute(A.source),'" class="j-js-side-nav-item j-js-as-nav-item j-homenav-item j-rc5 ',(A.selectedLinkID&&(A.source=="connections"&&A.selectedLinkID=="jive-nav-link-connections"||A.source=="watches"&&A.selectedLinkID=="jive-nav-link-watches"||A.source=="custom"&&A.selectedLinkID=="jive-nav-link-custom-"+A.id))?"selected":""," ",(A.pinnedLinkID&&(A.source=="connections"&&A.pinnedLinkID=="jive-nav-link-connections"||A.source=="watches"&&A.pinnedLinkID=="jive-nav-link-watches"||A.source=="custom"&&A.pinnedLinkID=="jive-nav-link-custom-"+A.id))?"pinned":"",'" ><span class="jive-icon-med jive-icon-activity-pulse-active j-homenav-icon"></span><a href="',(A.source=="connections"||A.source=="watches")?jive.soy.func.normalizeUrl(window._jive_base_url,"/activity?streamSource="+A.source):jive.soy.func.normalizeUrl(window._jive_base_url,"/activity?streamSource="+A.source+"&streamID="+A.id),'" class="j-homenav-link j-custom-stream-link j-js-side-nav-link j-js-as-nav-link j-stream-link"><span class="nav-link lnk j-js-nav-stream-name">',soy.$$escapeHtml(A.name),"</span></a>",(A.source=="connections")?'<span class="j-homenav-link j-custom-stream-link js-conns-display-name j-stream-link" style="display:none;"><span class="nav-link lnk j-js-nav-stream-name">'+soy.$$escapeHtml(A.name)+"</span></span>":"",'<a href="#" class="j-done-building j-js-done-building">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.done"),[])),'</a><a href="#" class="j-js-stream-options j-homenav-options jive-icon-med jive-icon-gear" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("apple.stream.options.tooltip.text"),[])),'"></a>');if(A.pollingEnabled){jive.welcome.updateIndicator({type:"gauge",count:0},B)}B.append("</li>");return C?"":B.toString()};jive.welcome.navConfigMenuPopover=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-homenav-options-menu j-nav-menu j-menu j-pop-main"><ul><li><a href=\'#\' class="j-js-edit-stream"><span class="jive-icon-sml jive-glyph-edit"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("home.nav.config.menu.edit"),[])),"</a></li>",(A.canPin)?'<li><a href=\'#\' class="j-js-pin-stream"><span class="jive-icon-sml jive-glyph-pin"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("home.nav.config.menu.pin"),[]))+"</a></li>":"",(A.canDelete)?'<li><a href=\'#\' class="j-js-delete-stream"><span class="jive-icon-sml jive-glyph-delete"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("home.nav.config.menu.delete"),[]))+"</a></li>":"","</ul></div>");return C?"":B.toString()};jive.welcome.newActivityStreamItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<li id="jive-nav-link-new" data-streamid="new" class="j-js-side-nav-item j-js-as-nav-item j-homenav-item j-custom-stream-item',(A.disabled)?" j-max-streams-reached font-color-meta-light":"",'"><span class="j-enabled"><span class="jive-icon-sml jive-glyph-plus j-newstream-icon"></span><a href="#" class="j-homenav-link j-custom-stream-link j-js-edit-stream j-new-stream"><span class="nav-link lnk j-js-nav-stream-name font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.streams.new_stream"),[])),'</span></a></span><span class="j-disabled">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.streams.max_reached"),[])),"</span></li>");return C?"":B.toString()};jive.welcome.pinnedMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.home.pinned.message"),[A.streamName])),"</div>");return C?"":B.toString()};jive.welcome.updateIndicator=function(A,C){var B=C||new soy.StringBuilder();B.append((A.type=="count")?'<span data-count="'+soy.$$escapeHtmlAttribute(A.count)+'" class="j-js-update-indicator j-update-count '+((A.count>50)?"fiftyplus":"")+" "+((A.extraCssClasses)?soy.$$escapeHtmlAttribute(A.extraCssClasses):"")+'" '+((A.count==0)?'style="display:none;"':"")+">"+((A.count>50)?"50+":soy.$$escapeHtml(A.count))+"</span>":(A.type=="gauge")?'<span role="img" data-count="'+soy.$$escapeHtmlAttribute(A.count)+'" class="j-js-update-indicator j-update-gauge jive-icon-med '+((A.count<10)?"jive-icon-activity-gauge-low":(A.count<40)?"jive-icon-activity-gauge-med":"jive-icon-activity-gauge-high")+'" '+((A.count==0)?'style="display:none;"':"")+' title="'+((A.count<10)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.lessthanten"),[])):(A.count<40)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.tenplus"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.fiftyplus"),[])))+'" aria-label="'+((A.count<10)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.lessthanten"),[])):(A.count<40)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.tenplus"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.gauge.fiftyplus"),[])))+'" ></span>':"");return C?"":B.toString()}
;
jive.namespace("ActivityStream");jive.ActivityStream.activityNotifier=(function(a){var b=true,d=0;function c(){if(b&&d!=1){a.emit.apply(a,arguments)}d++}a.enable=function(){b=true};a.disable=function(){b=false};a.getPollCount=function(){return d};if(!window._jive_current_user.anonymous){jive.switchboard.addListener("activityStream.poll",c.curry("activityStream.poll"))}return a})(jive.conc.observable({}));
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.latestAcclaim=="undefined"){jive.eae.latestAcclaim={}}jive.eae.latestAcclaim.extraContent=function(H,G){var C=G||new soy.StringBuilder();if(!H.currentUserPartner){C.append('<div class="j-acclaim-status j-browse-details"><div class="j-act-title clearfix" role="heading">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.latest.level.update"),[])),'<a href="#" class="j-status-legend-link js-status-legend-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.how.to.level"),[])),'</a></div><table class="j-browse-list" cellspacing="0" cellpadding="0"><thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.person"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.status_level"),[])),"</strong></th>",(H.data.showDateJoined)?'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("search.user.sort.date"),[]))+"</strong></th>":"",'</tr></thead><tbody class="j-browse-details-tbody">');var F=H.data.leaderboard;var E=F.length;for(var B=0;B<E;B++){var D=F[B];C.append('<tr class="j-people-row  ',(D.user.id==H.currentUserID)?"j-current-user":"j-challengers",'"><td class="j-td-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(D.user,{size:D.user.id==H.currentUserID?32:32,currentUserPartner:H.currentUserPartner}),C);C.append('</td><td class="j-td-user-info">');jive.shared.displayutil.userDisplayNameLink(D.user,C);C.append('</td><td class="j-td-statuslevel ',(D.user.id==H.currentUserID)?"font-color-new":"font-color-meta",'"><span class="j-level"><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,D.userStatusLevel.imagePath))),'" />',soy.$$escapeHtml(D.userStatusLevel.statusLevelName)," (",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("stslvl.points"),[D.userStatusLevel.userPointTotal])),")</span>",(D.user.id==H.currentUserID)?'<div class="j-next-level">'+((H.data.pointsToNextLevel>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.Xpointstonext"),[H.data.pointsToNextLevel])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.onepointtonext"),[])))+"</div>":"","</td>",(H.data.showDateJoined)?'<td class="j-td-date '+((D.user.id==H.currentUserID)?"font-color-new":"font-color-meta")+'">'+soy.$$escapeHtml((D.user.creationDate?dateFormat(parseFloat(D.user.creationDate),"mmmm d, yyyy"):""))+"</td>":"","</tr>")}C.append('</tbody></table></div><div class="j-acclaim-legend js-acclaim-legend" style="display:none"><div class="j-legend j-rc4"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.how.to.level"),[])),'</h4><ul class="j-simple-list">');var K=H.data.statusLevelScenarios;var A=K.length;for(var J=0;J<A;J++){var I=K[J];C.append((I.points>0&&I.enabled)?'<li class="j-point-count">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(I.i18nKey),[]))+' <strong class="j-points">'+soy.$$escapeHtml(I.points)+"</strong></li>":"")}C.append("</ul></div></div>")}return G?"":C.toString()}
;
jive.namespace("ActivityStream");jive.ActivityStream.FillInTheGapRequest=$Class.extend({init:function(a){this.originalIDs=a.originalIDs;this.timestamp=a.timestamp;this.fullContent=a.fullContent;this.pageSize=a.pageSize}});
;
jive.namespace("ActivityStream");jive.ActivityStream.FullRepliesRequest=$Class.extend({init:function(a){this.originalIDs=a.originalIDs}});
;
jive.namespace("ActivityStream");jive.ActivityStream.StreamSource=jive.RestService.extend(function(a){a.resourceType="activity-stream";a.pluralizedResourceType=a.resourceType;jive.conc.observable(this);this.initializeView=function(c,e,f){var b=this.RESOURCE_ENDPOINT+"/initializeView",d={objectType:3,objectID:window._jive_current_user.ID,streamSource:c,streamID:e||0,filterType:["all"],timestamp:0};a.displayGenericErrorMessages=false;if(!f){f=new jive.conc.Promise()}return this.commonAjaxRequest(f,"POST",{url:b,data:JSON.stringify(d)}).addErrback(function(h,g){if(g==401||g==403||g==4026||g===0){location.reload()}}).always(function(){a.displayGenericErrorMessages=true})};this.list=function(c,d){var b=this.RESOURCE_ENDPOINT+"/list";a.displayGenericErrorMessages=false;if(!d){d=new jive.conc.Promise()}return this.commonAjaxRequest(d,"POST",{url:b,data:JSON.stringify(c)}).addErrback(function(f,e){if(e==401||e==403||e==4026||e===0){location.reload()}}).always(function(){a.displayGenericErrorMessages=true})};this.getMore=function(c){var b=this.RESOURCE_ENDPOINT+"/list/before";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)})};this.exclude=function(c,d){var b=this.RESOURCE_ENDPOINT+"/exclusions/object/set";if(c!="item"){b=this.RESOURCE_ENDPOINT+"/exclusions/context/set"}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(d)},d)};this.saveActiveStreamTab=function(c){var b=this.RESOURCE_ENDPOINT+"/activetab/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c})};this.saveActiveStreamFilter=function(c,d){var b=this.RESOURCE_ENDPOINT+"/activefilter/save/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:d})};this.saveActiveCommunicationsItem=function(b,d){var c=this.RESOURCE_ENDPOINT+"/activeitem/save/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.saveRefreshTime=function(b){var c=this.RESOURCE_ENDPOINT+"/refreshtime/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:b})};this.exclusionRules=function(c){var b=this.RESOURCE_ENDPOINT+"/exclusions/list";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)},c)};this.removeExclusions=function(c){var b=this.RESOURCE_ENDPOINT+"/exclusions/remove";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)},c)};this.newCount=function(){var b=this.RESOURCE_ENDPOINT+"/new/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.getFullContent=function(b,e){var d=new jive.conc.Promise(),c="";if(b==1150305777){c=this.RESOURCE_ENDPOINT+"/acclaim";this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c}).addCallback(function(g){var f=jive.eae.latestAcclaim.extraContent({data:g,currentUserID:window._jive_current_user.ID,currentUserPartner:window._jive_current_user.partner});d.emitSuccess({html:f,extraData:{}})});return d}else{c=this.RESOURCE_ENDPOINT+"/fullcontent/"+b+"/"+e;return this.commonAjaxRequest(d,"GET",{url:c})}};this.getFullReplies=function(b,e,d){var c=this.RESOURCE_ENDPOINT+"/fullreplies/"+b+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.fillInTheGaps=function(b,e,d){var c=this.RESOURCE_ENDPOINT+"/fillinthegaps/"+b+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.fillActivity=function(b,f,d,e){var c=this.RESOURCE_ENDPOINT+"/fillactivity/"+b+"/"+f;return this.commonAjaxRequest(e,"POST",{url:c,data:JSON.stringify(d)})};this.getHiddenRules=function(c){var b=this.RESOURCE_ENDPOINT+"/exclusions/list";return this.commonAjaxRequest(c,"GET",{url:b})};this.saveInboxViewType=function(b){var c=this.RESOURCE_ENDPOINT+"/inbox/viewtype/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:b})};this.saveInboxListHeight=function(b){var c=this.RESOURCE_ENDPOINT+"/inbox/listheight/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(b)})};this.getGlobalNavMenu=function(){var b=this.RESOURCE_ENDPOINT+"/global/nav/menu";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})}});
;
jive.namespace("Navbar.Menu.Home");jive.Navbar.Menu.Home.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;b.$button=$j(c);b.menuSource=new jive.ActivityStream.StreamSource();b.counts={inbox:0,actions:0,tasks:0,moderations:0};b.pendingActionsCount=0;$j(c).delegate(".j-js-update-indicator","click",function(h){var d=$j(this),f=$j("#j-home-global-nav-menu");if(!f.length){var g=$j(this);b.$menu=$j(jive.nav.menu.home.main({data:"",counts:""}));b.spinner=new jive.loader.LoaderView();b.$menu.html(b.spinner.getContent());b.$menu.delegate("div.j-aq-entry","click",function(e){if(!$j(h.target).is("a")){window.location=jive.app.url({path:"/actions"});e.preventDefault()}});b.$menu.popover({context:g,darkPopover:false,destroyOnClose:true,putBack:false,onLoad:function(){b.menuSource.getGlobalNavMenu().addCallback(function(i){if(i.inboxItems.activityContainerList.length||i.actionItems.actionQueueList.length||i.taskItems.taskList.length||i.moderationItems.moderationList.length){var e=$j(jive.nav.menu.home.content({data:i,counts:b.counts}));b.$menu.trigger("popover.html",[e]);b.spinner.destroy()}else{b.spinner.destroy();b.$menu.trigger("close");d.hide();d.data("count",0);d.html("0");$j("#jive-nav-link-communications .j-js-update-indicator").hide().data("count",0).html("0");$j("#jive-nav-link-actions .j-js-update-indicator").hide().data("count",0).html("0")}})}})}else{f.trigger("close")}h.preventDefault()});jive.ActivityStream.activityNotifier.addListener("activityStream.poll",function(d){b.updateCount(d)});jive.switchboard.addListener("inbox.read",function(){b.decrementNewCount("inbox",1)}).addListener("inbox.unread",function(){b.decrementNewCount("inbox",-1)}).addListener("inbox.markAllRead",function(){b.decrementNewCount("inbox",10000)}).addListener("actions.actionTaken",function(){b.decrementNewCount("actions",1)}).addListener("tasks.taskComplete",function(){b.decrementNewCount("tasks",1)}).addListener("tasks.taskIncomplete",function(){b.decrementNewCount("tasks",-1)})};this.updateCount=function(c){var b=this;b.counts.inbox=c.fullCounts.communications.unreadCount;b.counts.actions=c.fullCounts.actions;b.counts.tasks=c.fullCounts.overdueTasks;b.counts.moderations=c.fullCounts.moderations;b.renderCounts()};this.decrementNewCount=function(c,d){var b=this;if(b.counts[c]<=50||d>1000){b.counts[c]=b.counts[c]-d;if(b.counts[c]<0){b.counts[c]=0}b.renderCounts()}};this.renderCounts=function(){var b=this,e=b.counts.inbox+b.counts.actions+b.counts.tasks+b.counts.moderations,d=$j(jive.welcome.updateIndicator({type:"count",count:e,extraCssClasses:"j-navbadge-count j-ui-elem"}));var c=b.$button.find(".j-js-update-indicator");if(c.length){c.replaceWith(d)}else{b.$button.append(d)}if(b.$button.hasClass("active")){b.updateTitleCount(e)}};this.updateTitleCount=function(c){var e=document.title,d=e.indexOf(")");if(d!=-1){e=e.substring(e.indexOf(")")+2)}var b="";if(c>0){b=jive.home.countForTitle({count:c})}document.title=b+" "+e}});
;
jive.namespace('AppleHeaderSearch');

/**
 * @depends path=/resources/scripts/apps/shared/views/abstract_view.js
 * depends path=/resources/scripts/apps/content/common/validator.js
 * @depends path=/resources/scripts/jquery/jquery.placeheld.js
 */
jive.AppleHeaderSearch.View = jive.AbstractView.extend(function(protect) {

    var $ = jQuery,
        _ = jive.AppleHeaderSearch;

    protect.init = function(options) {
        var view = this;

        $(function() {

			var $appleSearchForm = $('#apple-search-form');
			var $appleSearchField = $('#apple-search-field');
            var $appleSearchSpinner = $('#apple-search-spinner');
			var $appleSearchResults = $('#apple-search-results');
			//
			// hookup the 'Search' nav item to open/close the form
			//

			$('#jive-nav-link-search .j-globalNavLink').on('click', function(e) {
				e.preventDefault();
				$appleSearchForm.fadeToggle('fast', function(){
					if( $appleSearchForm.is(':visible') ) {
						$appleSearchField.focus();
						$('html').click(function(e) {
							$appleSearchForm.fadeOut('fast', function(){
								$appleSearchField.val('').blur();
							});
							$('html').off();
							$appleSearchForm.off();
							$appleSearchResults.off().hide();

						});
						$appleSearchResults.on('click', function(e){
							e.stopPropagation();//prevents clicks inside the search results from closing our form
						});
						$appleSearchForm.on('click', function(e){
							e.stopPropagation();//prevents clicks inside the search form from closing the form
						});
					} else {
                        $appleSearchSpinner.hide();
						$appleSearchField.val('').blur();
						$('html').off();
						$appleSearchForm.off();
						$appleSearchResults.off().hide();
					}
				});
			});


            var searchFunc = function() {
                var val = $appleSearchField.val();
                if (val) {
                    view.emit('search', val);
                }
            };

            $appleSearchField.placeHeld();
            $appleSearchField.keyup(function() {
                $appleSearchResults.hide();
                if( $appleSearchField.val() != '' ) {
                    $appleSearchSpinner.show();
                } else {
                    $appleSearchSpinner.hide();                    
                }
                clearTimeout($.data(this, 'timer'));
                var wait = setTimeout(searchFunc, 500);
                $(this).data('timer', wait);
            });

            $appleSearchForm.submit(function(e) {

                if (e.isDefaultPrevented()) {
                    return;
                }

                var url = $appleSearchForm.prop('action') + '?facet=content&type=discussion&sort=relevanceDesc&showAnsweredFirst=true&q=' + encodeURIComponent($appleSearchField.val());

                window.location.href = url;

                e.preventDefault();
            });
        });
    };

    this.success = function(data) {
        $('#apple-search-spinner').hide();

        var resultMarkup = apple.header.search.results({
           bean: data
        });

        var results = $('#apple-search-results');
        if (results.length) {
            results.html(resultMarkup).slideDown();
        } else {
        	console.log('ERR: could not find results container.');
            // $(this.container).find('button[type=submit]').before(resultMarkup);
        }
    };

});
;
jive.namespace('AppleHeaderSearch');

/**
 * Handles interactions with the bookmark and unbookmark actions in a list view
 *
 * @class
 * @param {jQuery|DOMElement|String} element reference to element that contains bookmark links
 *
 * @depends path=/resources/scripts/apps/shared/models/rest_service.js
 */
jive.AppleHeaderSearch.Source = jive.RestService.extend(function(protect, _super) {
    var $ = jQuery,
    _ = jive.AppleHeaderSearch;

    protect.resourceType = "askaquestion";
    protect.pluralizedResourceType = protect.resourceType;

    this.init = function init(options) {
        _super.init.call(this, options);
        this.options = options;
    };

    this.search = function(val) {
        return this.get('', {
            q: val,
            containerType: this.options.containerType,
            containerID: this.options.containerID,
            wholeCommunityScope: this.options.wholeCommunityScope,
            includeResultCount: true
        });
    };

    this.referrer = function(url) {
        return this.save({
            url: url
        });
    };
});

;
jive.namespace('AppleHeaderSearch');
/**
 * @depends template=apple.header.search.results
 * @depends path=/themes/apple/js/apps/apple-header-search/view.js
 * @depends path=/themes/apple/js/apps/apple-header-search/source.js
*/


jive.AppleHeaderSearch.Main = jive.oo.Class.extend(function(protect) {
    var _ = jive.AppleHeaderSearch,
        $ = jQuery;

    protect.init = function(options) {
        var main = this;
        this.view =  new _.View(options);
        this.source =  new _.Source(options);

        this.view.addListener('search', function(data) {
            //Show results only for the last query
            var ts = (new Date()).getTime();
        	main.timestamp = ts;
            main.source.search(data).addCallback(function(resp) {
                if (main.timestamp == ts) {
                    main.view.success(resp);
                }

            });
        });

        this.view.addListener('referrer', main.source.referrer);
    };

});

;
